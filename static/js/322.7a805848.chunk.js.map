{"version":3,"file":"static/js/322.7a805848.chunk.js","mappings":"wKAQO,MAAMA,EAAe,SAACC,GAA0B,IAAlBC,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC9C,MAAM,SAAEG,EAAW,EAAC,cAAEC,GAAgB,GAAUL,EAGhD,GAAsB,kBAAXD,GAAuBO,OAAOC,MAAMR,GAC7C,MAAO,IAIT,MAAMS,EAAaT,EAAS,EAC5B,GAAIS,IAAeH,EACjB,MAAO,IAET,MAAMI,EAAYC,KAAKC,IAAIZ,GAGrBa,EAAU,CACd,CAAEC,UAAW,IAAeC,OAAQ,KACpC,CAAED,UAAW,IAAWC,OAAQ,KAChC,CAAED,UAAW,IAAOC,OAAQ,KAC5B,CAAED,UAAW,EAAGC,OAAQ,MAIpB,UAAED,EAAS,OAAEC,GAAWF,EAAQG,MAAKC,IAAA,IAAC,UAAEH,GAAWG,EAAA,OAAKP,GAAaI,CAAS,KAAKD,EAAQA,EAAQV,OAAS,GAGlH,GAAkB,IAAdW,EACF,OAAQL,EAAa,IAAM,IAAMC,EAAUQ,WAG7C,MAAMC,EAAQT,EAAYI,EAK1B,OAAQL,EAAa,IAAM,KAJS,IAAbJ,EACnBM,KAAKS,MAAMD,GAAOD,WAClBC,EAAME,QAAQhB,GAAUiB,QAAQ,QAAS,KAEKP,CACpD,C,kMCzCA,MAAMQ,EAAc,IACfC,EAAAA,EACHC,YAAa,IACRD,EAAAA,EAAMC,YACTC,OAAQ,CACNC,GAAI,IACJC,GAAI,IACJC,GAAI,KACJC,GAAI,KACJC,GAAI,QAOGC,EAAc,8BACdC,EAAe,8BAMfC,EAAuB,CAClCC,MAAO,eACPC,WAAY,IACZC,WAAY,KAGDC,EAAkB,CAC7B,UAAW,CAAEC,UAAW,mBAAoBC,UAAWP,GACvD,UAAW,CAAEQ,QAAUjB,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQC,QAAQC,KAAM,MAAQC,cAAe,IAc5FC,GATGxB,EAAYyB,MAAMC,mBASF,CAC9BC,aAAc3B,EAAYyB,MAAMG,kBAChCC,cAAe,OACfC,WAAY,gBACZjB,WAAY,IACZ,UAAW,CAAEG,UAAW,cAAee,gBAAkB9B,GAAUA,EAAMmB,QAAQC,QAAQW,MACzF,WAAY,CAAEhB,UAAW,eACzB,UAAW,CAAEE,QAAUjB,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQC,QAAQC,KAAM,MAAQC,cAAe,GACvG,aAAc,CAAEQ,gBAAiB,kBAAmBnB,MAAO,4BAGhDqB,EAAqB,CAChCC,OAAQ,CAAE9B,GAAI,OAAQC,GAAI,QAC1B8B,SAAU,CAAE/B,GAAI,QAASC,GAAI,SAC7BsB,aAAc3B,EAAYyB,MAAMG,kBAChCQ,QAAS,CAAEhC,GAAI,SAAUC,GAAI,UAC7B0B,gBAAiB,eACjBnB,MAAO,uBACPK,UAAW,OACXoB,SAAU,CAAEjC,GAAI,SAAUC,GAAI,QAC9BQ,WAAY,IACZiB,WAAY,uBACZ,UAAW,CAAEC,gBAAiB,eAAgBd,UAAW,QACzD,aAAc,CAAEc,gBAAiB,kBAAmBnB,MAAO,2BAGhD0B,EAAoB,CAC/BJ,OAAQ,CAAE9B,GAAI,OAAQC,GAAI,QAC1B8B,SAAU,CAAE/B,GAAI,QAASC,GAAI,SAC7BsB,aAAc3B,EAAYyB,MAAMG,kBAChCQ,QAAS,CAAEhC,GAAI,SAAUC,GAAI,UAC7B0B,gBAAiB,qBACjBnB,MAAO,eACPK,UAAW,OACXoB,SAAU,CAAEjC,GAAI,SAAUC,GAAI,QAC9BQ,WAAY,IACZiB,WAAY,uBACZ,UAAW,CAAEC,gBAAiB,mBAAoBd,UAAW,QAC7D,aAAc,CAAEc,gBAAiB,kBAAmBnB,MAAO,2BAkBhD2B,GAZGvC,EAAYyB,MAAMG,kBAYP,CACzBY,GAAIxC,EAAYyC,QAAQ,GACxBV,gBAAiB,qBACjBJ,aAAc3B,EAAYyB,MAAMiB,kBAChC,wBAAyB,CAAE9B,MAAO,iBAAkByB,SAAU,CAAEjC,GAAI,SAAUC,GAAI,SAClF,oCAAqC,CAAEO,MAAO,gBAC9C,2BAA4B,CAC1Be,aAAc3B,EAAYyB,MAAMiB,kBAChC,qCAAsC,CAAEC,OAAQ,QAChD,2CAA4C,CAAEA,OAAQ,QACtD,iDAAkD,CAAEA,OAAQ,SAE9D,wBAAyB,CAAEN,SAAU,CAAEjC,GAAI,SAAUC,GAAI,SACzD,qCAAsC,CAAEO,MAAO,iBAAkBgC,QAAS,KAG/DC,EAAmB,CAC9BL,GAAIxC,EAAYyC,QAAQ,GACxBV,gBAAiB,mBACjBJ,aAAc3B,EAAYyB,MAAMiB,kBAChC,wBAAyB,CAAE9B,MAAO,iBAAkByB,SAAU,CAAEjC,GAAI,SAAUC,GAAI,SAClF,oCAAqC,CAAEO,MAAO,gBAC9C,2BAA4B,CAC1Be,aAAc3B,EAAYyB,MAAMiB,kBAChC,qCAAsC,CAAEC,OAAQ,QAChD,2CAA4C,CAAEA,OAAQ,QACtD,iDAAkD,CAAEA,OAAQ,SAE9D,wBAAyB,CAAEN,SAAU,CAAEjC,GAAI,SAAUC,GAAI,SACzD,qCAAsC,CAAEO,MAAO,iBAAkBgC,QAAS,IAG/DE,EAAe,CAC1BN,GAAIxC,EAAYyC,QAAQ,GACxBV,gBAAiB,qBACjBJ,aAAc3B,EAAYyB,MAAMiB,kBAChC,2BAA4B,CAC1Bf,aAAc3B,EAAYyB,MAAMiB,kBAChC,aAAc,CAAEC,OAAQ,QACxB,mBAAoB,CAAEA,OAAQ,QAC9B,yBAA0B,CAAEA,OAAQ,SAEtC,sBAAuB,CAAEN,SAAU,CAAEjC,GAAI,SAAUC,GAAI,SACvD,oBAAqB,CAAEO,MAAO,gBAC9B,wBAAyB,CAAEyB,SAAU,CAAEjC,GAAI,SAAUC,GAAI,UAS9C0C,EAAe,CAC1BC,KAAM,CACJrB,aAAc,CAAEvB,GAAI,EAAGC,GAAI,KAC3B4C,GAAI,EACJlB,gBAAiB,mBACjBd,UAAW,OACXiC,MAAO,CAAE9C,GAAI,OAAQC,GAAI,QACzB8C,UAAW,cAEbC,QAAS,CACPC,QAAS,OACTC,cAAe,CAAElD,GAAI,SAAUC,GAAI,OACnCkD,WAAY,CAAEnD,GAAI,SAAUC,GAAI,UAChCmD,eAAgB,CAAEpD,GAAI,SAAUC,GAAI,iBACpCmC,GAAI,EACJS,GAAI,EACJQ,GAAI,CAAErD,GAAI,EAAGC,GAAI,GACjBqD,IAAK,CAAEtD,GAAI,EAAGC,GAAI,GAClBsD,UAAW,CAAEvD,GAAI,SAAUC,GAAI,SAEjCuD,YAAa,CACXP,QAAS,OACTC,cAAe,SACfI,IAAK,EACLR,MAAO,CAAE9C,GAAI,OAAQC,GAAI,SAE3BwD,aAAc,CACZR,QAAS,OACTC,cAAe,MACfC,WAAY,SACZC,eAAgB,CAAEpD,GAAI,SAAUC,GAAI,YACpC6C,MAAO,CAAE9C,GAAI,OAAQC,GAAI,QACzBmC,GAAI,CAAEpC,GAAI,EAAGC,GAAI,IAEnByD,MAAO,CAAEjD,WAAY,IAAKD,MAAO,gBACjCmD,MAAO,CAAEnD,MAAO,kBAChBoD,YAAa,CACXX,QAAS,WACTC,cAAe,MACfC,WAAY,SACZC,eAAgB,CAAEpD,GAAI,SAAUC,GAAI,YACpCqD,IAAK,CAAEtD,GAAI,EAAGC,GAAI,IAClB6C,MAAO,CAAE9C,GAAI,OAAQC,GAAI,QACzB4D,SAAU,QAEZC,iBAAkB,CAChBb,QAAS,OACTC,cAAe,CAAElD,GAAI,MAAOC,GAAI,UAChCkD,WAAY,SACZC,eAAgB,SAChBN,MAAO,CAAE9C,GAAI,OAAQC,GAAI,QACzBqD,IAAK,CAAEtD,GAAI,EAAGC,GAAI,GAClB4D,SAAU,CAAE7D,GAAI,OAAQC,GAAI,WAE9B8D,cAAe,CACbd,QAAS,OACTC,cAAe,MACfW,SAAU,CAAE7D,GAAI,SAAUC,GAAI,QAC9BqD,IAAK,CAAEtD,GAAI,GAAKC,GAAI,GACpBmC,GAAI,EACJU,MAAO,CAAE9C,GAAI,OAAQC,GAAI,QACzBmD,eAAgB,CAAEpD,GAAI,SAAUC,GAAI,SACpC+D,UAAW,CAAEhE,GAAI,OAAQC,GAAI,WAC7B,uBAAwB,CAAEgD,QAAS,QACnCgB,gBAAiB,OACjBC,eAAgB,QAElBC,KAAM,CACJlC,SAAU,CAAEjC,GAAI,UAAWC,GAAI,WAC/B+B,QAAS,CAAEhC,GAAI,SAAUC,GAAI,iBAC7B6B,OAAQ,CAAE9B,GAAI,OAAQC,GAAI,QAC1ByB,WAAY9B,EAAYwE,YAAYC,OAAO,CAAC,QAAS,WAAY,CAC/DC,SAAU1E,EAAYwE,YAAYE,SAASC,MAC3CC,OAAQ5E,EAAYwE,YAAYI,OAAOC,YAEzCC,OAAQ,UACR,mBAAoB,CAAE1C,QAAS,CAAEhC,GAAI,EAAGC,GAAI,SAAWgD,QAAS,CAAEjD,GAAI,OAAQC,GAAI,WAClF,kBAAmB,CAAE0E,OAAQ,CAAE3E,GAAI,IAAKC,GAAI,cAAgBgC,SAAU,CAAEjC,GAAI,SAAUC,GAAI,UAE5F2E,aAAc,CACZ9B,MAAO,OACPd,QAAS,CAAEhC,GAAI,gBAAiBC,GAAI,eACpC,mBAAoB,CAAEgD,QAAS,WAEjC4B,cAAe,CACb/B,MAAO,CAAE9C,GAAI,OAAQC,GAAI,QACzB+B,QAAS,CAAEhC,GAAI,SAAUC,GAAI,iBAC7B,mBAAoB,CAAEgD,QAAS,CAAEjD,GAAI,OAAQC,GAAI,aAIxC6E,EAAc,CACzBC,UAAW,CAAElC,GAAI,GACjBmC,MAAO,CAAEvE,WAAY,IAAKoC,GAAI,IAC9BoC,MAAO,CACL,qCAAsC,CAAE1C,OAAQ,QAChDZ,gBAAiB,qBACjBJ,aAAc3B,EAAYyB,MAAMiB,mBAElC9C,MAAO,CAAEgB,MAAO,mBAGL0E,EAAgB,CAC3BtC,KAAM,CACJrB,aAAc,CAAEvB,GAAI,EAAGC,GAAI,KAC3B0B,gBAAiB,mBACjBd,UAAW,OACXgC,GAAI,EACJC,MAAO,CAAE9C,GAAI,OAAQC,GAAI,QACzB8C,UAAW,cAEbC,QAAS,CAAEK,GAAI,CAAErD,GAAI,EAAGC,GAAI,GAAKkF,GAAI,GACrCzB,MAAO,CAAEjD,WAAY,IAAKoC,GAAI,IAGnBuC,EAAe,CAC1BC,YAAa,CAAE/B,IAAK,EAAG,+BAAgC,CAAEvB,SAAU,QAAStB,WAAY,MACxF6E,OAAQ,CACNxC,MAAO,GACPhB,OAAQ,GACRE,QAAS,EACT,4BAA6B,CAAEc,MAAO,IACtC,0BAA2B,CACzBd,QAAS,IACT,gBAAiB,CAAEpB,UAAW,mBAAoBJ,MAAO,OAAQ,uBAAwB,CAAEmB,gBAAiB,eAAgBa,QAAS,IACrI,iBAAkB,CAAEhC,MAAO,WAAY,uBAAwB,CAAEmB,gBAAiB,4BAA6Ba,QAAS,KAE1H,qBAAsB,CACpB3B,UAAW,4BACXiC,MAAO,GACPhB,OAAQ,GACRP,aAAc,GACdG,WAAY9B,EAAYwE,YAAYC,OAAO,CAAC,SAAU,CAAEC,SAAU,MAClE3C,gBAAiB,sBAEnB,qBAAsB,CACpBJ,aAAc,GACdI,gBAAiB,WACjBa,QAAS,EACTd,WAAY9B,EAAYwE,YAAYC,OAAO,CAAC,oBAAqB,CAAEC,SAAU,MAC7E,iBAAkB,CAAE3C,gBAAiB,4BAA6Ba,QAAS,OAKpE+C,EAAkB,CAC7BzC,MAAO,CAAE9C,GAAI,OAAQC,GAAI,QACzBuF,SAAU,CAAExF,GAAI,OAAQC,GAAI,UAC5B0E,OAAQ,CAAE3E,GAAI,EAAGC,GAAI,UACrB+B,QAAS,CAAEhC,GAAI,EAAGC,GAAI,GACtB8C,UAAW,cAGA0C,EAAa,CACxBV,UAAW,CACT9B,QAAS,OACTK,IAAK,EACLoC,oBAAqB,CACnB1F,GAAI,MACJC,GAAI,2CAKG0F,EAAiB,CAC5BZ,UAAW,CACTxD,aAAc3B,EAAYyB,MAAMC,mBAChCsE,QAAS,YAEXC,OAAQ,CACN/D,OAAQ,CAAE9B,GAAI,GAAIC,GAAI,KACtB4C,GAAI,GAENiD,OAAQ,CACNhE,OAAQ,CAAE9B,GAAI,GAAIC,GAAI,IACtB4C,GAAI,GAEND,KAAM,CACJd,OAAQ,CAAE9B,GAAI,IAAKC,GAAI,OAMTL,EAAYyB,MAAMC,kB,4dCnVpC,MAOMyE,EAAkB,CACtBH,QAAS,mBACT/E,UALmB,8BAMnBU,aAAc,EACdT,QAAS,OACTkF,UAAW,0BACX,oBAAqB,CACnBC,KAAM,CAAEzD,QAAS,EAAG5B,UAAW,qCAC/BsF,GAAI,CAAE1D,QAAS,EAAG5B,UAAW,oCAI3BQ,EAAmB,CACvBG,aAAc,OACdE,cAAe,OACfC,WAAY,gBACZ,UAAW,CAAEd,UAAW,gBAuN1B,EA9MoB,CAClBuF,eAAgB,CACdlD,QAAS,OACTH,MAAO,OACPhB,OAAQ,OACRsE,SAAU,SACVC,OArCiB,IAuCnBC,UAAWA,CAACC,EAAYC,KAAQ,CAC9BC,KAAM,EACNC,SAAU,WACVN,SAAUG,EAAa,OAAS,SAChC7B,OAAQ6B,EAAa,UAAYC,EAAW,WAAa,OACzDG,YAAaJ,EAAa,OAAS,OACnCX,QAASW,EAAc1G,GAAUA,EAAMmB,QAAQ4F,KAAK,IAAM,mBAC1DP,OA9CiB,KAgDnBQ,YAAaA,CAACC,EAAOC,KAAM,CACzBL,SAAU,WACVM,IAAK,EACLC,KAAM,EACNnE,MArDe,IAsDfhB,OAtDe,IAuDfH,gBAAiB,mBACjBuF,gBAAiB,wDACjBC,eAAgB,YAChBvG,UAAW,aAAamG,EAAOK,QAAQL,EAAOM,cAAcP,KAC5DQ,gBAAiB,WACjBjB,OA3DiB,KA6DnBkB,oBAAsBT,IAAK,CACzBJ,SAAU,WACVM,IAAK,MACLC,KAAM,MACNrG,UAAW,+BAA+B,EAAIkG,KAC9CU,cAAe,OACfhC,SAAU,OACVjC,UAAW,WAEbkE,WAAaC,IAAW,CACtBlH,MAAQX,GAAUA,EAAMmB,QAAQ4F,KAAK,KACrC3E,SAAU,GAAGjD,KAAK2I,IAAI,GAAI,KAAOD,GAAe,QAChDjH,WAAY,IACZmH,WAAY,SACZxB,SAAU,SACVyB,aAAc,WACd,4BAA6B,CAAE5F,SAAU,QAAQjD,KAAK2I,IAAI,GAAI,KAAOD,GAAe,kBAEtFI,kBAAmB,CACjBpB,SAAU,WACVM,IAAK,MACLC,KAAM,MACNrG,UAAW,wBACXJ,MAAO,iBACPyB,SAAU,CAAEjC,GAAI,SAAUC,GAAI,SAEhC8H,yBAA0B,CACxBrB,SAAU,WACVM,IAAK,GACLC,KAAM,GACNZ,OAAQ,IAEV2B,gBAAiB,CACf/F,SAAU,CAAEjC,GAAI,UAAWC,GAAI,UAC/B2F,QAAS,mBACT/E,UAAW,4BACXa,WAAY,gBACZ,UAAW,CAAEkE,QAAU/F,GAAUA,EAAMmB,QAAQ4F,KAAK,KAAMhG,UAAW,eAEvEqH,uBAAwB,CACtBvB,SAAU,QACVwB,OAAQ,GACRC,MAAO,GACP9B,OAAQ,GACRpD,QAAS,OACTE,WAAY,SACZG,IAAK,IACLsC,QAAS,mBACTrE,aAAc,EACd6G,EAAG,EACHvH,UAAW,4BACXa,WAAY,gBACZ,UAAW,CAAEd,UAAW,eACxB,4BAA6B,CAAEA,UAAW,aAAc0C,IAAK,IAE/D+E,sBAAuB,IAClBjH,EACHkH,GAAI,CAAEtI,GAAI,KAAMC,GAAI,MACpBsI,GAAI,IACJ3C,QAAU/F,GAAUA,EAAMmB,QAAQ4F,KAAK,KACvCpG,MAAO,eACP,UAAW,CACToF,QAAS,gBACT/E,UAAW,+BAEb,4BAA6B,CAAEoB,SAAU,SAAUqG,GAAI,OAEzDE,gBAAiB,CACf5C,QAAU/F,GAAUA,EAAMmB,QAAQ4F,KAAK,KACvClF,WAAY,gBACZ,UAAW,CAAEkE,QAAU/F,GAAUA,EAAMmB,QAAQ4F,KAAK,KAAMhG,UAAW,eAEvE6H,cAAe,CACbxG,SAAU,CAAEjC,GAAI,SAAUC,GAAI,YAC9BO,MAAO,iBACPC,WAAY,KAEdiI,uBAAwB,CACtBN,EAAG,CAAEpI,GAAI,IAAKC,GAAI,GAClBuF,SAAU,CAAExF,GAAI,OAAQC,GAAI,SAC5BoD,GAAI,OACJJ,QAAS,OACTC,cAAe,SACfyF,UAAW,QAEbC,mBAAqBC,IAAO,CAC1B/F,MAAO,OACP0C,SAAU,CAAExF,GAAI,OAAQC,GAAI,SAC5BoD,GAAI,OACJR,GAAI,IACJiG,GAAID,EAAU,EAAI,EAClBE,WAAYF,EACPhJ,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQC,QAAQC,KAAM,MAC1D,SAEN8H,oBAAqB,CACnBZ,EAAG,EACH7E,UAAW,UAEb0F,eAAgB,CACdzI,MAAO,aACPqC,GAAI,EACJpC,WAAY,IACZwB,SAAU,CAAEjC,GAAI,SAAUC,GAAI,SAEhCiJ,iBAAkB,IACb9H,EACHkH,GAAI,IACJC,GAAI,KACJ1H,UAAW,4BACX,UAAW,CAAEA,UAAW,8BAA+B+E,QAAS,kBAElEuD,gBAAiB,CACf,qBAAsB,IACjBpD,EACHxE,aAAc,EACd6G,EAAG,IACH/B,OAhLgB,MAmLpB+C,qBAAsB,CA3JtB5I,MAAO,eACPC,WAAY,IACZC,WAAY,IA2JVD,WAAY,IACZwB,SAAU,CAAEjC,GAAI,UAAWC,GAAI,WAC/BoJ,GAAI,KAENC,uBAAwB,CACtBrG,QAAS,OACTC,cAAe,SACfI,IAAK,IACLiG,GAAI,KAENC,mBAAoB,CAClB,2BAA4B,CAC1BjI,aAAc,EACdG,WAAY,gBACZ,mBAAoB,CAAE+H,YAAa,gBACnC,yBAA0B,CACxB5I,UAAYhB,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQC,QAAQC,KAAM,MACrEuI,YAAa,kBAInBC,qBAAsB,CACpB,2BAA4B,CAC1BnI,aAAc,EACdG,WAAY,gBACZ,mBAAoB,CAAE+H,YAAa,gBACnC,yBAA0B,CACxB5I,UAAYhB,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQC,QAAQC,KAAM,MACrEuI,YAAa,kBAInBE,sBAAuB,IAClBvI,EACHkH,GAAI,IACJ9H,MAAO,iBACP,UAAW,CAAEoF,QAAU/F,GAAUA,EAAMmB,QAAQ4F,KAAK,OAEtDgD,oBAAqB,IAChBxI,EACHkH,GAAI,IACJzH,UAAW,4BACX,UAAW,CACTA,UAAW,8BACX+E,QAAS,iBAEX,aAAc,CACZA,QAAU/F,GAAUA,EAAMmB,QAAQ4F,KAAK,KACvCpG,MAAQX,GAAUA,EAAMmB,QAAQ4F,KAAK,KACrC/F,UAAW,U,wBCxOV,MAAMgJ,EAAa,IAGpBC,EAAY,G,yECJlB,MAAMC,GAAgB,GAChB1J,GAAc,6BAKdE,GAAuB,CAC3BC,MAAO,eACPwJ,WAAY,qBACZvJ,WAAY,IACZC,WAAY,IACZuJ,cAAe,UAGXtJ,GAAkB,CACtB,UAAW,CACTC,UAAW,mBACXC,UAfiB,8BAiBnB,UAAW,CACTC,QAAUjB,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQC,QAAQC,KAAM,MACnEC,cAAe,IAIb+I,GAAqB,CACzBC,UAAWA,CAACC,EAAU7D,KAAU,CAC9B6B,EAAG,CAAEpI,GAAI,EAAGC,GAAI,KAChB4C,GAAI,GACJ+C,QAAU/F,GACRuK,EACI,4BAA2BrJ,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQqJ,QAAQC,MAAO,UAAUvJ,EAAAA,EAAAA,IACtElB,EAAMmB,QAAQqJ,QAAQC,MACtB,QAEFzK,EAAMmB,QAAQuJ,WAAWC,MAC/BjJ,aAAc,OACduB,MAAO,CAAE9C,GAAI,OAAQC,GAAIsG,EAAa,OAAS,SAC/CkE,UAAW,CAAEzK,GAAI,OAAQC,GAAI,QAC7ByK,UAAW,CAAE1K,GAAI,OAAQC,GAAI,WAC7B8B,SAAU,CAAE/B,GAAI,OAAQC,GAAI,SAC5BuF,SAAUe,EAAa,CAAEvG,GAAI,OAAQC,GAAI,SAAY,CAAED,GAAI,OAAQC,GAAI,SACvEY,UAAWR,GACXqG,SAAU,WACVnE,OAAS1C,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQ4F,KAAK,KAAM,MAC/DlF,WAAY,oBACZ2E,OAAQ0D,MACLpJ,GACH,aAAc,CACZ6B,QAAS,EACT3B,UAAW,8BACXD,UAAW,iBAGf+J,WAAY,CACVjE,SAAU,WACVN,SAAU,WAEZwE,WAAY,CACV3H,QAAS,QAEX4H,sBAAuB,IAClBtK,GACHC,MAAO,iBACPyB,SAAU,CAAEjC,GAAI,UAAWC,GAAI,YAC/BQ,WAAY,KAEdqK,oBAAqB,CACnBpE,SAAU,WACVM,IAAK,EACLmB,MAAO,GAET4C,WAAY,CACV9I,SAAU,CAAEjC,GAAI,OAAQC,GAAI,WAC5BO,MAAO,UACPkB,WAAY,oBACZ,UAAW,CACTd,UAAW,eAGfoK,iBAAkB,CAChBjC,WAAalJ,GAAU,aAAaA,EAAMmB,QAAQC,QAAQC,OAC1D4H,GAAI,IACJjG,GAAI,GACJ+C,QAAU/F,IAAUkB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQ4F,KAAK,IAAK,KAClDwB,EAAG,GACH7G,aAAc,MACd0J,UAAW,SACXzK,MAAO,kBAET0K,eAAgB,IACX3K,GACHE,WAAY,IACZD,MAAO,eACPyB,SAAU,CAAEjC,GAAI,UAAWC,GAAI,aAEjCkL,YAAa,IACR5K,GACH6B,GAAI,IACJH,SAAU,CAAEjC,GAAI,UAAWC,GAAI,YAC/BO,MAAO,kBAET4K,YAAcC,IAAQ,IACjB9K,GACHsC,GAAIwI,EAAW,IAAO,EACtBpJ,SAAU,CAAEjC,GAAI,WAAYC,GAAI,QAChCqL,UAAW,eAEbC,eAAiBC,IAAO,CACtB9E,SAAU,WACV7D,GAAI2I,EAAU,IAAO,EACrBpJ,GAAI,GACJa,QAAS,OACTC,cAAe,MACfW,SAAU,OACVP,IAAK,GACL/B,aAAc,MACduB,MAAO,SAET2I,MAAQC,IAAQ,CACd5I,MAAO,OACP2H,UAAWiB,EAAW,CAAE1L,GAAI,QAASC,GAAI,SAAY,CAAED,GAAI,OAAQC,GAAI,QACvE0L,YAAa,OACbC,UAAW,QACXC,eAAgB,SAChBtK,aAAc,MACdgB,OAAS1C,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQ4F,KAAK,KAAM,MAC/DpE,QAAS,IACTd,WAAY,oBACZ,UAAW,CACTd,UAAW,cACX4B,QAAS,EACT3B,UAAW,8BAEb,UAAW,CACTC,QAAUjB,GAAU,aAAaA,EAAMmB,QAAQC,QAAQC,OACvDC,cAAe,KAGnB2K,iBAAkB,CAChBlG,QAAU/F,GAAUA,EAAMmB,QAAQ4F,KAAK,KACvC9D,MAAO,OACPhB,OAAQ,OACRP,aAAc,MACd0B,QAAS,OACTE,WAAY,SACZC,eAAgB,SAChB5C,MAAQX,GAAUA,EAAMmB,QAAQ4F,KAAK,KACrC3E,SAAU,CAAEjC,GAAI,UAAWC,GAAI,eAC5BM,IAELwL,aAAc,IACTxL,GACHC,MAAO,eACPkE,OAAQ,UACRtC,GAAI,GACJH,SAAU,CAAEjC,GAAI,UAAWC,GAAI,YAC/BQ,WAAY,IACZ8C,UAAW,QACXyI,eAAgB,YAChB,UAAW,CACTxL,MAAO,iBAGXyL,eAAiBC,IAAe,CAC9BrJ,GAAIqJ,EAAkB,IAAO,EAC7B9J,GAAI,GACJa,QAAS,OACTC,cAAe,MACfW,SAAU,OACVT,eAAgB,WAElB+I,WAAY,CACVzF,SAAU,WACVnF,aAAc,MACd6E,SAAU,UAEZgG,MAAQ9H,IAAQ,CACdxB,MAAO,OACP2H,UAAWnG,GAAYA,EAAW,GAAK,OAAS,QAChDqH,YAAa,OACbpK,aAAc,MACdqK,UAAW,QACXC,eAAgB,SAChBlK,gBAAiB,QACjBa,QAAS,IACTd,WAAY,oBACZ,UAAW,CACTd,UAAW,cACX4B,QAAS,EACT3B,UAAW,gCAGfwL,qBAAsB,CACpB3F,SAAU,WACVnF,aAAc,MACd6E,SAAU,UAEZkG,YAAchI,IAAQ,CACpBxB,MApMuB,IAqMvBhB,OArMuB,IAsMvBP,aAAc,MACdqK,UAAW,QACXC,eAAgB,SAChBlK,gBAAiB,QACjBa,QAAS,IACTd,WAAY,oBACZ,UAAW,CACTd,UAAW,cACX4B,QAAS,EACT3B,UAAW,gCAGf0L,aAAc,IACThM,GACHC,MAAO,eACPkE,OAAQ,UACRtC,GAAI,GACJH,SAAU,CAAEjC,GAAI,UAAWC,GAAI,YAC/BQ,WAAY,IACZ8C,UAAW,QACXyI,eAAgB,YAChB,UAAW,CACTxL,MAAO,iBAGXgM,eAAiBC,IAAc,CAC7B5J,GAAI4J,EAAiB,IAAO,EAC5BrK,GAAI,GACJa,QAAS,OACTC,cAAe,MACfW,SAAU,OACVT,eAAgB,WAElBsJ,YAAa,CACX5J,MAAO,OACPhB,OAAQ,OACR8D,QAAU/F,GAAUA,EAAMmB,QAAQ4F,KAAK,KACvCrF,aAAc,MACd6G,EAAG,GACH1B,SAAU,WACVN,SAAU,SACV,UAAW,CACTtD,MAAO,OACPhB,OAAQ,OACR,kCAAmC,CACjCH,gBAAiB,gBAGrB,qBAAsB,CACpBsB,QAAS,SAGb0J,aAAc,IACTpM,GACHC,MAAO,eACPkE,OAAQ,UACRtC,GAAI,GACJH,SAAU,CAAEjC,GAAI,UAAWC,GAAI,YAC/BQ,WAAY,IACZ8C,UAAW,QACXyI,eAAgB,YAChB,UAAW,CACTxL,MAAO,iBAGXoM,oBAAsBpB,IAAO,CAC3B3I,GAAI2I,EAAU,IAAO,EACrBpJ,GAAI,GACJU,MAAO,OACP0C,SAAU,CAAExF,GAAI,OAAQC,GAAI,WAE9B4M,cAAgBC,IAAK,CACnB7J,QAAS,OACTE,WAAY,SACZG,IAAK,GACLlB,GAAI0K,EAAQ,EAAI,GAAM,EACtB1E,EAAG,GACH7G,aAAc,MACdG,WAAY,oBACZ,UAAW,CACTkE,QAAU/F,GAAUA,EAAMmB,QAAQ4F,KAAK,KACvC/F,UAAW,gCAGfkM,cAAe,CACbvM,MAAO,iBACPyB,SAAU,CAAEjC,GAAI,OAAQC,GAAI,YAE9B+M,cAAe,IACVzM,GACHC,MAAO,eACPwL,eAAgB,OAChB/J,SAAU,CAAEjC,GAAI,UAAWC,GAAI,YAC/BQ,WAAY,IACZiB,WAAY,oBACZ,UAAW,CACTsK,eAAgB,YAChBxL,MAAO,iBAGXyM,kBAAmB,IACd1M,GACHC,MAAO,eACPkE,OAAQ,UACRtC,GAAI,GACJH,SAAU,CAAEjC,GAAI,UAAWC,GAAI,YAC/BQ,WAAY,IACZ8C,UAAW,QACXyI,eAAgB,YAChB,UAAW,CACTxL,MAAO,iBAGX0M,eAAgB,IACX3M,GACHC,MAAO,eACPiB,cAAe,OACfQ,SAAU,CAAEjC,GAAI,UAAWC,GAAI,YAC/BQ,WAAY,IACZuL,eAAgB,YAChB,UAAW,CACTxL,MAAO,iBAGX2M,iBAAkB,CAChBlK,QAAS,OACTE,WAAY,SACZf,GAAI,IACJgB,eAAgB,gBAChBE,IAAK,IAEP8J,cAAe,CACbnK,QAAS,OACTE,WAAY,SACZG,IAAK,CAAEtD,GAAI,IAAMC,GAAI,WAEvBoN,WAAY,CACVjF,EAAG,CAAEpI,GAAI,IAAMC,GAAI,IACnB8B,SAAU,GACVR,aAAc,MACdG,WAAY,oBACZ,UAAW,CACTkE,QAAU/F,IAAUkB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQC,QAAQqJ,MAAO,IACvD1J,UAAW,eAGf0M,SAAWC,IAAO,CAChB/M,MAAO+M,EAAU,eAAiB,iBAClCtL,SAAU,CAAEjC,GAAI,OAAQC,GAAI,aAE9BuN,UAAWA,CAACD,EAASE,KAAO,IACvBlN,GACHC,MAAO+M,EAAU,eAAiB,iBAClCtL,SAAU,CAAEjC,GAAI,UAAWC,GAAI,YAC/BW,UAAW6M,EAAU,cAAgB,WACrCC,GAAI,IACJhM,WAAY,4BAEdiM,YAAa,CACXvF,EAAG,CAAEpI,GAAI,IAAMC,GAAI,IACnB8B,SAAU,GACVR,aAAc,MACdG,WAAY,oBACZ,UAAW,CACTkE,QAAU/F,IAAUkB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQC,QAAQqJ,MAAO,IACvD1J,UAAW,eAGfgN,UAAW,CACTpN,MAAO,iBACPyB,SAAU,CAAEjC,GAAI,OAAQC,GAAI,YAE9B4N,WAAY,IACPtN,GACHC,MAAO,iBACPyB,SAAU,CAAEjC,GAAI,UAAWC,GAAI,YAC/ByN,GAAI,KAENI,gBAAiB,CACf7K,QAAS,OACTE,WAAY,SACZC,eAAgB,WAChBE,IAAK,GACLlB,GAAI,IACJyB,SAAU,QAEZkK,WAAY,CACV3F,EAAG,CAAEpI,GAAI,IAAMC,GAAI,IACnB8B,SAAU,GACVR,aAAc,MACdG,WAAY,oBACZ,UAAW,CACTkE,QAAU/F,GAAUA,EAAMmB,QAAQ4F,KAAK,KACvChG,UAAW,eAGfoN,SAAU,CACRxN,MAAO,iBACPyB,SAAU,CAAEjC,GAAI,OAAQC,GAAI,YAE9BgO,eAAiBC,IAAa,CAC5B7H,OAAQ6H,EAAgBnE,IAAoBA,GAC5ClJ,UAAWqN,EAAgB,6BAA+B7N,GAC1DkK,WAAY2D,EACR,4CACCrO,GAAUA,EAAMmB,QAAQuJ,WAAWC,MACxC5J,UAAWsN,EAAgB,+BAAiC,OAC5DxM,WAAY,oBACZ+H,YAAayE,EACRrO,GAAUA,EAAMmB,QAAQC,QAAQC,KAChCrB,IAAUkB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQ4F,KAAK,KAAM,MAEhDuH,mBAAoBA,CAACC,EAAa5H,EAAU6H,EAASjE,KAAQ,CAC3D1D,SAAU,WACV9F,UAAW,wBACX8D,OAAQ0J,EAAe5H,EAAW,WAAa,OAAU,UACzDH,OAAQG,GAAY6H,EAAUtE,IAAoBK,EAAWL,IAAoBA,GACjFrI,WAAY,wEACZiF,YAAayH,EAAc,OAAS,OACpC,UAAW,CACTtN,QAASsN,EAAevO,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQC,QAAQC,KAAM,MAAS,OAC1FC,cAAe,MAKrB,M,cCvaA,MAAMmN,GAAiBhP,IAA6F,IAADiP,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,IAA3F,MAAEC,EAAK,OAAEC,EAAM,SAAEC,EAAQ,YAAEC,EAAW,SAAEC,EAAQ,gBAAEC,GAAkB,EAAK,MAAExI,EAAQ,GAAGxH,EAC5G,MAAMiQ,GAAUC,EAAAA,EAAAA,QAAO,MACjBC,GAAiBD,EAAAA,EAAAA,SAAO,GACxBE,GAAmBF,EAAAA,EAAAA,QAAO,CAAEpI,EAAoB,QAAnBmH,EAAgB,QAAhBC,EAAES,EAAMvI,gBAAQ,IAAA8H,OAAA,EAAdA,EAAgBpH,SAAC,IAAAmH,EAAAA,EAAI,EAAGlH,EAAoB,QAAnBoH,EAAgB,QAAhBC,EAAEO,EAAMvI,gBAAQ,IAAAgI,OAAA,EAAdA,EAAgBrH,SAAC,IAAAoH,EAAAA,EAAI,KAC9EkB,EAAeC,IAAoBC,EAAAA,EAAAA,UAAS,CACjDzI,EAAoB,QAAnBuH,EAAgB,QAAhBC,EAAEK,EAAMvI,gBAAQ,IAAAkI,OAAA,EAAdA,EAAgBxH,SAAC,IAAAuH,EAAAA,EAAI,EACxBtH,EAAoB,QAAnBwH,EAAgB,QAAhBC,EAAEG,EAAMvI,gBAAQ,IAAAoI,OAAA,EAAdA,EAAgBzH,SAAC,IAAAwH,EAAAA,EAAI,KAEnBrI,EAAUsJ,IAAeD,EAAAA,EAAAA,WAAS,IAClCxB,EAAS0B,IAAcF,EAAAA,EAAAA,WAAS,GAEjCG,GAAgBC,EAAAA,EAAAA,cAAY,CAAC7I,EAAGC,KAAC,CACrCD,EAAGpI,KAAKkR,IAAI,EAAGlR,KAAK2I,IAAIP,EAAGyC,OAC3BxC,EAAGrI,KAAKkR,IAAI,EAAGlR,KAAK2I,IAAIN,EAAGwC,UACzB,KAEJsG,EAAAA,EAAAA,YAAU,KACR,IAAK3J,IAAaiJ,EAAeW,QAAS,CAAC,IAADC,EAAAC,EAAAC,EAAAC,EACxC,MAAMC,EAAST,EAA+B,QAAlBK,EAAe,QAAfC,EAACrB,EAAMvI,gBAAQ,IAAA4J,OAAA,EAAdA,EAAgBlJ,SAAC,IAAAiJ,EAAAA,EAAI,EAAoB,QAAnBE,EAAgB,QAAhBC,EAAEvB,EAAMvI,gBAAQ,IAAA8J,OAAA,EAAdA,EAAgBnJ,SAAC,IAAAkJ,EAAAA,EAAI,GACtEZ,EAAcvI,IAAMqJ,EAAOrJ,GAAKuI,EAActI,IAAMoJ,EAAOpJ,IAC7DuI,EAAiBa,GACjBf,EAAiBU,QAAUK,EAE/B,IACC,CAAe,QAAf1B,EAACE,EAAMvI,gBAAQ,IAAAqI,OAAA,EAAdA,EAAgB3H,EAAiB,QAAhB4H,EAAEC,EAAMvI,gBAAQ,IAAAsI,OAAA,EAAdA,EAAgB3H,EAAGb,EAAUmJ,EAAeK,IAGnE,MAAM5B,GAAcsC,EAAAA,EAAAA,UAAQ,OACrBzB,GAASA,EAAM0B,gBAChBrB,IAAmB,CAAC,QAAS,SAASsB,SAASvB,KAClC,WAAbA,IAEAJ,EAAM4B,gBAA4B,OAAXzB,QAAW,IAAXA,OAAW,EAAXA,EAAayB,eACpC5B,EAAM6B,WAAuB,OAAX1B,QAAW,IAAXA,OAAW,EAAXA,EAAayB,eAC9B5B,EAAM8B,WAAuB,OAAX3B,QAAW,IAAXA,OAAW,EAAXA,EAAa2B,WAAY9B,EAAM8B,WAAa3B,EAAY2B,YAI9E,CAAC9B,EAAOK,EAAiBD,EAAqB,OAAXD,QAAW,IAAXA,OAAW,EAAXA,EAAayB,aAAyB,OAAXzB,QAAW,IAAXA,OAAW,EAAXA,EAAa2B,WAExEC,GAAkBN,EAAAA,EAAAA,UACtB,IACEO,MAAS,CAACC,EAAGC,KACX,MAAMC,EAAapB,EAAcmB,EAAK/J,EAAG+J,EAAK9J,GAC9C,GACE+J,EAAWhK,IAAMsI,EAAiBU,QAAQhJ,GAC1CgK,EAAW/J,IAAMqI,EAAiBU,QAAQ/I,EAC1C,CACA,GAAIxI,MAAMuS,EAAWhK,IAAMvI,MAAMuS,EAAW/J,GAE1C,YADAgK,QAAQC,MAAM,yBAA0BH,GAG1CzB,EAAiBU,QAAUgB,EACrB,OAANlC,QAAM,IAANA,GAAAA,EAASgC,EAAG,CAAE9J,EAAGgK,EAAWhK,EAAGC,EAAG+J,EAAW/J,EAAGkK,QAAStC,EAAMuC,UACjE,IACC,MACL,CAACtC,EAAQD,EAAMuC,SAAUxB,KAG3BG,EAAAA,EAAAA,YAAU,IAAM,IAAMa,EAAgBS,UAAU,CAACT,IAGjD,MAAMU,GAAczB,EAAAA,EAAAA,cAAY,MACzB7B,IACL0B,GAAY,IACL,IACN,CAAC1B,IAEEuD,GAAa1B,EAAAA,EAAAA,cAAY,CAACiB,EAAGC,KACjCvB,EAAiB,CAAExI,EAAG+J,EAAK/J,EAAGC,EAAG8J,EAAK9J,GAAI,GACzC,IAEGuK,GAAa3B,EAAAA,EAAAA,cACjB,CAACiB,EAAGC,KACF,IAAK/C,EAAa,OAClB0B,GAAY,GACZL,EAAeW,SAAU,EACzByB,YAAW,IAAOpC,EAAeW,SAAU,GAAQ,KACnD,MAAMgB,EAAapB,EAAcmB,EAAK/J,EAAG+J,EAAK9J,GAC9CqI,EAAiBU,QAAUgB,EACrB,OAANlC,QAAM,IAANA,GAAAA,EAASgC,EAAG,CAAE9J,EAAGgK,EAAWhK,EAAGC,EAAG+J,EAAW/J,EAAGkK,QAAStC,EAAMuC,UAAW,GAE5E,CAACpD,EAAa4B,EAAed,EAAQD,EAAMuC,WAG7C,OAAKvC,GAAUA,EAAMuC,UAMnBM,EAAAA,GAAAA,KAACC,KAAS,CACRxC,QAASA,EACT7I,SAAUiJ,EACVqC,eAAgB,CAAE5K,EAAG,OAAQC,EAAG,QAChC4K,UAAW7D,EACX8D,QAASR,EACTS,OAAQR,EACRzC,OAAQ0C,EACRH,OAAQ,GAAItC,UAEZ2C,EAAAA,GAAAA,KAAA,OACEM,IAAK7C,EACL8C,aAAcA,IAAMtC,GAAW,GAC/BuC,aAAcA,IAAMvC,GAAW,GAC/BwC,MAAOrI,GAAmBiE,mBAAmBC,EAAa5H,EAAU6H,EAASY,EAAM0B,WACnF6B,KAAK,SACL,aAAY,YAAYvD,EAAM8B,UAAY,cAC1C,iBAAgB3C,EAChBqE,SAAUrE,EAAc,GAAK,EAAEe,SAE9BA,OAzBLkC,QAAQqB,KAAK,mCAAoCzD,GAC1C,KA0BK,EA4BhBX,GAAeqE,aAAe,CAC5BrD,iBAAiB,EACjBJ,OAAQA,OACRpI,MAAO,GAGT,UAAe8L,EAAAA,EAAAA,MAAKtE,I,oPCxJb,MAAMjO,GAAc,8BAOrBE,GAAuB,CAC3BC,MAAO,eACPC,WAAY,IACZC,WAAY,KAcRmS,GAAmB,CACvBjN,QAAS,mBACT/E,UAAWR,GACXkB,aAAc,EACdgB,OAAS1C,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQ4F,KAAK,KAAM,MAC/DZ,UAAW,6BAhBW,CACtB,UAAW,CACTpF,UAAW,mBACXC,UAfwB,+BAiB1B,UAAW,CACTC,QAAUjB,GAAU,aAAaA,EAAMmB,QAAQC,QAAQC,OACvDC,cAAe,KAuJnB,GA1IoB,CAClB2R,qBAAsB,IACjBD,GACHrN,SAAU,CAAExF,GAAI,OAAQC,GAAI,OAAQC,GAAI,QACxCyE,OAAQ,CAAE3E,GAAI,EAAGC,GAAI,QACrB6B,OAAQ,CAAE9B,GAAI,OAAQC,GAAI,SAE5B8S,iBAAkB,IACbxS,GACH0B,SAAU,CAAEjC,GAAI,UAAWC,GAAI,UAC/BQ,WAAY,IACZuB,QAAS,CAAEhC,GAAI,YAAaC,GAAI,aAChC+S,aAAenT,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQ4F,KAAK,KAAM,OAEvEqM,mBAAoB,CAClBxI,UAAW,CAAEzK,GAAI,OAAQC,GAAI,QAC7ByK,UAAW,OACX1I,QAAS,CAAEhC,GAAI,OAAQC,GAAI,QAC3BgD,QAAS,OACTC,cAAe,SACfI,IAAK,CAAEtD,GAAI,IAAKC,GAAI,IAEtBiT,uBAAwB,IACnBL,GACHrN,SAAU,CAAExF,GAAI,OAAQC,GAAI,UAE9BkT,mBAAoB,IACf5S,GACH0B,SAAU,CAAEjC,GAAI,SAAUC,GAAI,WAC9BQ,WAAY,IACZuB,QAAS,CAAEhC,GAAI,YAAaC,GAAI,aAChC+S,aAAenT,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQ4F,KAAK,KAAM,OAEvEwM,qBAAsB,CACpBpR,QAAS,CAAEhC,GAAI,QAASC,GAAI,UAC5ByK,UAAW,QAEb2I,cAAe,CACbrR,QAAS,CAAEhC,GAAI,MAAOC,GAAI,QAC1BmD,eAAgB,YAElBkQ,kBAAmB,CACjBxQ,MAAO,CAAE9C,GAAI,GAAIC,GAAI,IACrB6B,OAAQ,CAAE9B,GAAI,GAAIC,GAAI,IACtBO,MAAO,iBACPe,aAAc,MACdG,WAAY,gBACZ,UAAW,CACTkE,QAAU/F,IAAUkB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQ4F,KAAK,KAAM,IACnDhG,UAAW,eAEb,WAAY,CACVA,UAAW,eAEb,UAAW,CACTE,QAAUjB,GAAU,aAAaA,EAAMmB,QAAQC,QAAQC,OACvDC,cAAe,IAGnBoS,kBAAmB,CACjBvR,QAAS,CAAEhC,GAAI,YAAaC,GAAI,aAChC0I,UAAW,GACXjH,WAAY,gBACZ,UAAW,CACTkE,QAAU/F,IAAUkB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQ4F,KAAK,KAAM,IACnDhG,UAAW,cACXC,UAAW,8BAEb,WAAY,CACVD,UAAW,gBAGf4S,WAAY,CACV1Q,MAAO,OACP2H,UAAW,CAAEzK,GAAI,QAASC,GAAI,SAC9B2L,UAAW,UACXrK,aAAc,EACdgB,OAAS1C,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQ4F,KAAK,KAAM,MAC/DlF,WAAY,gBACZ,UAAW,CACTd,UAAW,cACXC,UAAW,+BAGf4S,sBAAuB,CACrB7N,QAAU/F,GAAUA,EAAMmB,QAAQ4F,KAAK,KACvC9D,MAAO,OACPhB,OAAQ,CAAE9B,GAAI,QAASC,GAAI,SAC3BsB,aAAc,EACd0B,QAAS,OACTE,WAAY,SACZC,eAAgB,SAChB5C,MAAQX,GAAUA,EAAMmB,QAAQ4F,KAAK,MAEvC8M,eAAgB,CACdzQ,QAAS,OACTE,WAAY,SACZG,IAAK,IACLtB,QAAS,IACTT,aAAc,EACdG,WAAY,gBACZ,UAAW,CACTkE,QAAU/F,IAAUkB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQ4F,KAAK,KAAM,IACnD/F,UAAW,8BAEb,WAAY,CACVD,UAAW,gBAGf+S,mBAAoB,CAClBnT,MAAO,iBACPyB,SAAU,WAEZ2R,mBAAoB,CAClBpT,MAAO,eACPwL,eAAgB,OAChB/J,SAAU,CAAEjC,GAAI,UAAWC,GAAI,UAC/ByB,WAAY,gBACZ,UAAW,CACTsK,eAAgB,YAChBxL,MAAO,iBAGXqT,WAAY,CACV7R,QAAS,IACTuB,UAAW,SACXhC,aAAc,EACdV,UAAWR,GACXuF,QAAS,mBACTrD,OAAS1C,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQ4F,KAAK,KAAM,OAEjEkN,gBAAiB,CACftT,MAAO,aACPC,WAAY,IACZwB,SAAU,CAAEjC,GAAI,SAAUC,GAAI,U,kHCnJlC,MAIMM,GAAuB,CAC3BC,MAAO,eACPwJ,WAAY,qBACZvJ,WAAY,IACZC,WAAY,IACZuJ,cAAe,UAcX8J,GAAoB,CACxBC,YAAa,CACX/Q,QAAS,OACTC,cAAe,CAAElD,GAAI,SAAUC,GAAI,OACnCuF,SAAU,OACVpD,GAAI,IACJb,aAAc,MACd6E,SAAU,SACVvF,UA/BgB,6BAgChB+E,QAAS,mBACTrD,OAAS1C,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQ4F,KAAK,KAAM,MAC/DlF,WAAY,uBAtBQ,CACtB,UAAW,CACTd,UAAW,mBACXC,UAdiB,8BAgBnB,UAAW,CACTC,QAAUjB,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQC,QAAQC,KAAM,MACnEC,cAAe,KAkBjB8S,aAAc,CACZnR,MAAO,CAAE9C,GAAI,OAAQC,GAAI,SACzB6B,OAAQ,CAAE9B,GAAI,OAAQC,GAAI,QAC1B2L,UAAW,QACXsI,WAAY,EACZ3S,aAAc,CAAEvB,GAAI,cAAeC,GAAI,eACvCsC,OAAS1C,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQ4F,KAAK,KAAM,OAEjEuN,eAAgB,CACd1N,KAAM,EACN2B,EAAG,CAAEpI,GAAI,IAAMC,GAAI,GACnBgD,QAAS,OACTC,cAAe,SACfE,eAAgB,SAChBsD,SAAU,YAEZ0N,aAAc,IACT7T,GACH0B,SAAU,CAAEjC,GAAI,WAAYC,GAAI,QAChCQ,WAAY,IACZD,MAAO,eACPwL,eAAgB,OAChB,MAAO,CACLxL,MAAO,eACPwL,eAAgB,YAChB,UAAW,CAAExL,MAAO,kBAGxB6T,mBAAoB,IACf9T,GACH0B,SAAU,CAAEjC,GAAI,UAAWC,GAAI,YAC/BO,MAAO,iBACPyC,QAAS,cACTqR,gBAAiB,EACjBC,gBAAiB,WACjBnO,SAAU,SACVhE,GAAI,KAENoS,kBAAmB,CACjB9N,SAAU,WACVM,IAAK,CAAEhH,GAAI,EAAGC,GAAI,GAClBkI,MAAO,CAAEnI,GAAI,EAAGC,GAAI,GACpB2F,QAAS,kBACTpF,MAAO,QACPuB,SAAU,GACVqG,EAAG,IACH7G,aAAc,MACdG,WAAY,oBACZ,UAAW,CAAEkE,QAAS,kBAAmBhF,UAAW,cACpD,UAAW,CACTE,QAAUjB,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQC,QAAQC,KAAM,QAGvEuT,cAAe,CACbrS,GAAI,IACJb,aAAc,MACd6E,SAAU,SACVtD,MAAO,QAET4R,iBAAkB,CAChBzR,QAAS,OACTE,WAAY,SACZC,eAAgB,SAChBgF,EAAG,MAIDuM,GAAcrV,IAAgD,IAA/C,QAAE0D,EAAO,gBAAE4R,EAAe,YAAEC,GAAavV,EAC5D,MAAOwV,EAAUC,IAAelF,EAAAA,EAAAA,UAAS,KAClCmF,EAAcC,IAAmBpF,EAAAA,EAAAA,UAAS,OAC1CqF,EAASC,IAActF,EAAAA,EAAAA,WAAS,GACjCuF,GAAkBC,EAAAA,EAAAA,kBAAiBrS,GACnCsS,GAAe5E,EAAAA,EAAAA,UAAQ,IAAM,IAAI6E,KAAO,IAExCC,GAAmBvF,EAAAA,EAAAA,cAAawF,IAAS,IAADC,EAC5C,MAAMC,EAAS,IAAIC,KAAJ,CAAaH,GAC5B,OAAIE,EAAOE,SAASjF,SAAS,YACpB+E,EAAOG,SAASC,MAAM,GAEG,QAAlCL,EAAOC,EAAOK,MAAMC,MAAM,MAAM,UAAE,IAAAP,OAAA,EAA3BA,EAA6BO,MAAM,KAAK,EAAE,GAChD,IAEGC,GAAkBjG,EAAAA,EAAAA,cAAawF,IACnC,MAAME,EAAS,IAAIC,KAAJ,CAAaH,GAC5B,OAAIE,EAAOG,SAASlF,SAAS,YACpB,CAAEuF,KAAM,QAASC,GAAIT,EAAOG,SAASG,MAAM,YAAY,IACrDN,EAAOG,SAASlF,SAAS,UAC3B,CAAEuF,KAAM,OAAQC,GAAIT,EAAOG,SAASG,MAAM,UAAU,IAEpD,CAAEE,KAAM,UAAWC,GAAIT,EAAOG,SAASC,MAAM,GACtD,GACC,IAEGM,GAAiBpG,EAAAA,EAAAA,cAAawF,GAC3BA,EAAI7E,SAAS,sBACnB,KAEHT,EAAAA,EAAAA,YAAU,KACR,MA2HMc,EAAWY,YA3HKyE,UACpB,IAAKlB,EAGH,OAFAL,EAAY,SACG,OAAfH,QAAe,IAAfA,GAAAA,EAAkBQ,IAIpBD,GAAW,GACX,MACMoB,EAAOnB,EAAgBoB,MADZ,yBAC+B,GAC1CC,EAAa,IAAI,IAAIC,IAAIH,IACzBI,EAAc,GAEpB,IAAIC,EAAkBxB,EACtBqB,EAAWI,SAASpB,IAClB,MAAMqB,EAAYrB,EAAIjX,OAAS,GAAK,GAAGiX,EAAIM,MAAM,EAAG,SAAWN,EAC/DmB,EAAkBA,EAAgBjX,QAAQ8V,EAAKqB,EAAU,IAE5C,OAAflC,QAAe,IAAfA,GAAAA,EAAkBgC,GAElB,IAAK,MAAMnB,KAAOgB,EAChB,GAAInB,EAAayB,IAAItB,GACnBkB,EAAYK,KAAK1B,EAAa2B,IAAIxB,SAIpC,IACE,IAAIyB,EAAc,CAAEzB,MAAKU,KAAM,WAE/B,GAAIV,EAAI7E,SAAS,gBAAkB6E,EAAI7E,SAAS,YAAa,CAC3D,MAAMuG,EAAU3B,EAAiBC,GAC3B2B,EAAUf,EAAeZ,GACzB4B,QAAiBC,GAAAA,EAAML,IAC3B,sCAAsCM,mBAAmB9B,iBACzD,CAAE+B,QAAS,MAEbN,EAAc,CACZzB,MACAU,KAAMiB,EAAU,gBAAkB,UAClC1T,MAAO2T,EAASlG,KAAKzN,MACrB+T,YAAaJ,EAASlG,KAAKuG,YAC3BC,UAAW,8BAA8BR,kBACzCS,SAAUR,EACN,iCAAiCD,eACjC,iCAAiCA,IAEzC,MAAO,GAAI1B,EAAI7E,SAAS,eAAgB,CAAC,IAADiH,EACtC,MAAMR,QAAiBC,GAAAA,EAAML,IAC3B,uCAAuCM,mBAAmB9B,KAC1D,CAAE+B,QAAS,MAEbN,EAAc,CACZzB,MACAU,KAAM,UACNzS,MAAO2T,EAASlG,KAAKzN,MACrB+T,YAAaJ,EAASlG,KAAK2G,cAC3BH,UAAWN,EAASlG,KAAK4G,cACzBH,SAAmD,QAA3CC,EAAER,EAASlG,KAAK6G,KAAKxB,MAAM,wBAAgB,IAAAqB,OAAA,EAAzCA,EAA4C,GAE1D,MAAO,GAAIpC,EAAI7E,SAAS,kBAAmB,CAAC,IAADqH,EACzC,MAAMZ,QAAiBC,GAAAA,EAAML,IAC3B,qCAAqCM,mBAAmB9B,iBACxD,CAAE+B,QAAS,MAEbN,EAAc,CACZzB,MACAU,KAAM,aACNzS,MAAO2T,EAASlG,KAAKzN,MACrB+T,YAAaJ,EAASlG,KAAKuG,YAC3BC,UAAWN,EAASlG,KAAK4G,cACzBH,SAAmD,QAA3CK,EAAEZ,EAASlG,KAAK6G,KAAKxB,MAAM,wBAAgB,IAAAyB,OAAA,EAAzCA,EAA4C,GAE1D,MAAO,GAAIxC,EAAI7E,SAAS,aAAc,CAAC,IAADsH,EACpC,MAAMC,EAAajC,EAAgBT,GACnC,IAAImC,EACoB,YAApBO,EAAWhC,KACbyB,EAAW,qCAAqCO,EAAW/B,aAAagC,OAAOC,SAASxC,WAC3D,UAApBsC,EAAWhC,KACpByB,EAAW,mCAAmCO,EAAW/B,aAAagC,OAAOC,SAASxC,WACzD,SAApBsC,EAAWhC,OACpByB,EAAW,sCAAsCO,EAAW/B,aAAagC,OAAOC,SAASxC,YAE3F,MAAMwB,QAAiBC,GAAAA,EAAML,IAC3B,gCAAgCM,mBAAmB9B,KACnD,CAAE+B,QAAS,MAEbN,EAAc,CACZzB,MACAU,KAAM,SACNzS,MAAO2T,EAASlG,KAAKA,KAAKzN,MAC1B+T,YAAaJ,EAASlG,KAAKA,KAAKsG,aAAe,qBAC/CE,UAAmC,QAA1BO,EAAEb,EAASlG,KAAKA,KAAK1F,aAAK,IAAAyM,OAAA,EAAxBA,EAA0BzC,IACrCmC,WACAU,WAAYH,EAAWhC,KAE3B,KAAO,CAAC,IAADoC,EACL,MAAMlB,QAAiBC,GAAAA,EAAML,IAC3B,gCAAgCM,mBAAmB9B,KACnD,CAAE+B,QAAS,MAEbN,EAAc,CACZzB,MACAU,KAAM,UACNzS,MAAO2T,EAASlG,KAAKA,KAAKzN,MAC1B+T,YAAaJ,EAASlG,KAAKA,KAAKsG,YAChCE,UAAmC,QAA1BY,EAAElB,EAASlG,KAAKA,KAAK1F,aAAK,IAAA8M,OAAA,EAAxBA,EAA0B9C,IAEzC,EAEIyB,EAAYxT,OAASwT,EAAYS,aACnCrC,EAAakD,IAAI/C,EAAKyB,GACtBP,EAAYK,KAAKE,GAErB,CAAE,MAAO5F,GACPD,QAAQC,MAAM,+BAA+BmE,KAAQnE,EAEvD,CAGFyD,EAAY4B,GACZxB,GAAW,EAAM,GAGwB,KAC3C,MAAO,IAAMsD,aAAaxH,EAAS,GAClC,CAACmE,EAAiBI,EAAkBU,EAAiBG,EAAgBf,EAAcV,IAEtF,MAAM8D,GAAmBzI,EAAAA,EAAAA,cACtB0I,KACK,CAAC,UAAW,cAAc/H,SAAS+H,EAAQxC,OAAUwC,EAAQf,SAIjE3C,EAAgBD,IAAiB2D,EAAQlD,IAAM,KAAOkD,EAAQlD,KAHjD,OAAXZ,QAAW,IAAXA,GAAAA,EAAc8D,EAASA,EAAQxC,KAGiC,GAEpE,CAACnB,EAAcH,IAGX+D,GAAgB3I,EAAAA,EAAAA,cACnB0I,IACC,MAAME,EAAa,CAAC,UAAW,gBAAiB,UAAW,aAAc,UAAUjI,SAAS+H,EAAQxC,OAASwC,EAAQf,SAC/GkB,EAAU,CAAC,gBAAiB,UAAW,cAAclI,SAAS+H,EAAQxC,MACtE4C,EAAe,CAAE/Y,GAAI8Y,EAAU,OAAS,QAAS7Y,GAAI6Y,EAAU,QAAU,SAE/E,OACEE,EAAAA,GAAAA,MAACC,EAAAA,EAAOC,IAAG,CAETC,QAAS,CAAE3W,QAAS,EAAG6E,EAAG,IAC1BoG,QAAS,CAAEjL,QAAS,EAAG6E,EAAG,GAC1B3F,WAAY,CAAE4C,SAAU,GAAK8U,KAAM,WAAYjK,SAAA,EAE/C6J,EAAAA,GAAAA,MAACK,GAAAA,EAAI,CAACC,GAAIvF,GAAkBC,YAAY7E,SAAA,CACrCwJ,EAAQhB,YACP7F,EAAAA,GAAAA,KAACyH,GAAAA,EAAS,CACRC,UAAU,MACV/N,MAAOkN,EAAQhB,UACf8B,IAAKd,EAAQjV,OAAS,eACtB4V,GAAIvF,GAAkBE,gBAG1B+E,EAAAA,GAAAA,MAACU,GAAAA,EAAW,CAACJ,GAAIvF,GAAkBI,eAAehF,SAAA,EAChD2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACC,QAAQ,YAAYN,GAAIvF,GAAkBK,aAAajF,UACjE2C,EAAAA,GAAAA,KAAC+H,GAAAA,EAAI,CAACC,KAAMnB,EAAQlD,IAAKsE,OAAO,SAASC,IAAI,WAAU7K,SACpDwJ,EAAQjV,OAASiV,EAAQlD,QAG7BkD,EAAQlB,cACP3F,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACC,QAAQ,UAAUN,GAAIvF,GAAkBM,mBAAmBlF,SACpEwJ,EAAQlB,cAGZoB,IACC/G,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAASA,IAAMxB,EAAiBC,GAChCW,GAAIvF,GAAkBS,kBACtB,aAAYQ,IAAiB2D,EAAQlD,IAAM,SAASkD,EAAQxC,eAAiB,QAAQwC,EAAQxC,eAAehH,SAE3G6F,IAAiB2D,EAAQlD,KAAOkD,EAAQf,UAAW9F,EAAAA,GAAAA,KAACqI,GAAAA,EAAS,KAAMrI,EAAAA,GAAAA,KAACsI,GAAAA,EAAa,YAKzFpF,IAAiB2D,EAAQlD,KAAOoD,GAAcF,EAAQf,WACrD9F,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAIvF,GAAkBU,cAActF,UACvC2C,EAAAA,GAAAA,KAACwI,GAAAA,kBAAiB,CAAAnL,UAChB2C,EAAAA,GAAAA,KAACyI,KAAW,CACV9E,IAAKkD,EAAQf,SACb9U,MAAM,OACNhB,OAAQiX,EACRyB,UAAQ,EACRC,QAASzF,IAAiB2D,EAAQlD,IAClCiF,OAAQ,CACNC,QAAS,CACPC,WAAY,CAAEC,eAAgB,KAAwB,kBAAjBlC,EAAQxC,KAA2B,CAAE2E,YAAa,GAAM,CAAC,IAEhGC,WAAY,CAAEzc,QAAS,CAAE0c,QAAQ,IACjCC,OAAQ,CAAE3c,QAAS,CAAE4c,SAAiC,SAAvBvC,EAAQL,cAEzC6C,QAASA,IAAMlG,EAAgB,cApDlC0D,EAAQlD,IAyDF,GAGjB,CAACT,EAAc0D,IAGjB,OAAIxD,GAEApD,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAIvF,GAAkBW,iBAAiBvF,UAC1C2C,EAAAA,GAAAA,KAACsJ,EAAAA,EAAgB,CAACC,KAAM,OAKzBvG,EAAStW,QAIPsT,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAAAlL,SAAE2F,EAASwG,IAAI1C,KAHjB,IAGsC,EASjDjE,GAAYhC,aAAe,CACzB3P,QAAS,GACT4R,gBAAiB,KACjBC,YAAa,MAGf,YCpWM0G,GAAiB,CACrBC,QAAS,UACTC,SAAU,UACVC,SAAU,QACVC,aAAc,OACdC,SAAU,UACVC,OAAQ,UACRC,SAAU,WAGNC,GAAgB,CACpB5C,QAAS,CAAE3W,QAAS,EAAGsE,MAAO,KAC9B2G,QAAS,CAAEjL,QAAS,EAAGsE,MAAO,EAAGpF,WAAY,CAAE4C,SAAU,GAAK8U,KAAM,YACpE4C,KAAM,CAAExZ,QAAS,EAAGsE,MAAO,IAAMpF,WAAY,CAAE4C,SAAU,MAGrD2X,GAAgB3c,IAAA,IAAC,MAAE0F,EAAK,QAAEkV,EAAO,GAAEZ,GAAIha,EAAA,OAC3CwS,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAACgD,WAAY,CAAEpV,MAAO,MAAQqV,SAAU,CAAErV,MAAO,KAAOqI,UACjE2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CACTC,QAAQ,UACRN,GAAI,IAAKA,EAAI5U,OAAQ,WACrBwV,QAASA,EACT1H,KAAK,SACLC,SAAU,EACV2J,WAAalL,GAAgB,UAAVA,EAAEmL,KAAmBnC,EAAQhJ,GAChD,aAAYlM,EAAMmK,SAEjBnK,KAEQ,EASTsX,IAAsB1J,EAAAA,EAAAA,OAAK2J,IAAA,IAAC,IAAEC,EAAG,SAAElY,EAAQ,UAAEmY,GAAWF,EAAA,OAC5DzK,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAACwD,SAAUX,GAAe5C,QAAQ,UAAU1L,QAAQ,UAAUuO,KAAK,OAAM7M,UAClF2C,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAIpP,GAAmByS,aAAcnK,KAAK,SAAS,aAAYiK,EAAUtN,UAC5E2C,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAI,IAAKpP,GAAmBmC,qBAAsBpJ,QAAS,OAAQG,eAAgB,UAAW+L,UACjG2C,EAAAA,GAAAA,KAAA,SACE0K,IAAKA,EACLhC,UAAQ,EACRjI,MAAOrI,GAAmBoC,YAAYhI,GACtCsY,QAAQ,WACR,aAAYH,SAIP,IAGfH,GAAoBO,UAAY,CAC9BL,IAAKM,KAAAA,OAAiBC,WACtBzY,SAAUwY,KAAAA,OACVL,UAAWK,KAAAA,OAAiBC,YAG9B,MAAMC,IAAsBpK,EAAAA,EAAAA,OAAKqK,IAAA,IAAC,IAAET,EAAG,SAAElY,EAAQ,UAAEmY,GAAWQ,EAAA,OAC5DnL,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAACwD,SAAUX,GAAe5C,QAAQ,UAAU1L,QAAQ,UAAUuO,KAAK,OAAM7M,UAClF2C,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAIpP,GAAmByS,aAAcnK,KAAK,SAAS,aAAYiK,EAAUtN,UAC5E2C,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAI,IAAKpP,GAAmBiC,WAAYlJ,QAAS,OAAQG,eAAgB,UAAW+L,UACvF2C,EAAAA,GAAAA,KAAA,SACE0K,IAAKA,EACLhC,UAAQ,EACRjI,MAAOrI,GAAmBkC,MAAM9H,GAChCsY,QAAQ,WACR,aAAYH,SAIP,IAGfO,GAAoBH,UAAY,CAC9BL,IAAKM,KAAAA,OAAiBC,WACtBzY,SAAUwY,KAAAA,OACVL,UAAWK,KAAAA,OAAiBC,YAG9B,MAAMG,IAActK,EAAAA,EAAAA,OAAKuK,IAAA,IAAC,IAAEX,GAAKW,EAAA,OAC/BrL,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAI,IAAKpP,GAAmBwC,YAAalH,SAAU,QAAS2J,UAC/D2C,EAAAA,GAAAA,KAAA,SAAO0K,IAAKA,EAAKhC,UAAQ,EAAClB,GAAI,CAAExW,MAAO,QAAU8Z,QAAQ,cACrD,IAGRM,GAAYL,UAAY,CACtBL,IAAKM,KAAAA,OAAiBC,YAGxB,MAAMK,IAAWxK,EAAAA,EAAAA,OAAKyK,IAAA,IAAC,KAAEC,EAAI,MAAExQ,GAAOuQ,EAAA,OACpCvL,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CACTwD,SAAUX,GACV5C,QAAQ,UACR1L,QAAQ,UACRuO,KAAK,OAAM7M,UAGX6J,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAIpP,GAAmB2C,cAAcC,GAAQ0F,KAAK,SAAS,aAAY,QAAQ1F,EAAQ,IAAIqC,SAAA,EAC9F2C,EAAAA,GAAAA,KAACyL,GAAAA,EAAmB,CAACjE,GAAIpP,GAAmB6C,iBAC5C+E,EAAAA,GAAAA,KAAC+H,GAAAA,EAAI,CACHC,KAAMwD,EAAK7H,IACXsE,OAAO,SACPC,IAAI,sBACJV,GAAIpP,GAAmB8C,cACvB,aAAY,iBAAiBsQ,EAAKE,SAAW,QAAQ1Q,EAAQ,MAAMqC,SAElEmO,EAAKE,SAAW,QAAQ1Q,EAAQ,UAXhCwQ,EAAKE,SAAW,SAAS1Q,IAcnB,IAGfsQ,GAASP,UAAY,CACnBS,KAAMR,KAAAA,MAAgB,CACpBU,QAASV,KAAAA,OACTrH,IAAKqH,KAAAA,OAAiBC,aACrBA,WACHjQ,MAAOgQ,KAAAA,OAAiBC,YAG1B,MAAMU,GAAeC,IAqBd,IAADC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,IArBgB,MACpB5P,EAAK,YACLG,EAAW,SACXC,EAAQ,OACRyP,EAAM,SACNC,EAAQ,QACRC,EAAO,aACPC,EAAY,OACZC,EAAM,YACNC,EAAW,oBACXC,GAAsB,EAAK,WAC3BvR,EAAa,EAAC,gBACdwR,EAAkB,KAAI,gBACtB/P,GAAkB,EAAK,gBACvBgQ,EAAkB,GAAE,gBACpBC,EAAkB,GAAE,QACpBC,EAAO,WACPjZ,GAAa,EAAK,MAClB+K,EAAQ,KAAI,mBACZmO,EAAkB,mBAClBC,GACDhC,EACC,MAAOjQ,EAASkS,IAAc9P,EAAAA,EAAAA,WAAS,IAChCxB,EAAS0B,KAAcF,EAAAA,EAAAA,WAAS,IAChC+P,GAAmBC,KAAwBhQ,EAAAA,EAAAA,WAAS,IACpDiQ,GAAiBC,KAAsBlQ,EAAAA,EAAAA,WAAS,IAChDmQ,GAAeC,KAAoBpQ,EAAAA,EAAAA,UAAS,OAC5CqQ,GAAYC,KAAiBtQ,EAAAA,EAAAA,WAAS,IACtCuQ,GAAWC,KAAgBxQ,EAAAA,EAAAA,UAAS,KACpC+G,GAAiB0J,KAAsBzQ,EAAAA,EAAAA,WAAsB,QAAb8N,EAAA1O,EAAMjM,eAAO,IAAA2a,OAAA,EAAbA,EAAene,QAAS,IACzE4V,IAAkBC,EAAAA,EAAAA,mBAA8B,QAAbuI,EAAA3O,EAAMjM,eAAO,IAAA4a,OAAA,EAAbA,EAAepe,QAAS,KAGjE2Q,EAAAA,EAAAA,YAAU,KACU,OAAlBuP,QAAkB,IAAlBA,GAAAA,EAAqBzQ,EAAMuC,SAAUoO,IAAqBE,MAAqBE,IACxE,IAAwB,OAAlBN,QAAkB,IAAlBA,OAAkB,EAAlBA,EAAqBzQ,EAAMuC,UAAU,KACjD,CAACoO,GAAmBE,GAAiBE,GAAe/Q,EAAMuC,SAAUkO,KAGvEvP,EAAAA,EAAAA,YAAU,KACR,IAAKlB,EAAMsR,WAAY,OAEvB,MAAMC,GAAYC,EAAAA,GAAAA,GAASxR,EAAMsR,YACjC,KAAKG,EAAAA,GAAAA,GAAQF,GAAY,OAEzB,MAAMG,EAAkBA,KACtB,MAAMC,EAAM,IAAIC,KAIdR,IAHqBO,EAAMJ,GAAa,IAEtB,QACLM,EAAAA,GAAAA,GAAoBN,EAAW,CAAEO,WAAW,KAE5CC,EAAAA,GAAAA,IAAOR,EAAW,SACjC,EAMF,GAHAG,KAGK,IAAIE,KAASL,GAAa,IAAO,KAAS,CAC7C,MAAMS,EAAWC,YAAYP,EAAiB,KAC9C,MAAO,IAAMQ,cAAcF,EAC7B,IACC,CAAChS,EAAMsR,aAEV,MAAMa,GAAcnS,EAAM8B,WAAsB,QAAd8M,EAAI5O,EAAMoS,YAAI,IAAAxD,OAAA,EAAVA,EAAY9M,WAAY,YACxDxD,GAAmF,QAA5EuQ,EAAiB,QAAjBC,EAAG9O,EAAMqS,gBAAQ,IAAAvD,OAAA,EAAdA,EAAgBwD,MAAMC,GAAMA,EAAE3Q,gBAA4B,OAAXzB,QAAW,IAAXA,OAAW,EAAXA,EAAayB,uBAAa,IAAAiN,GAAAA,EACnF2D,GACJnS,GACA,CAAC,YAAa,SAASsB,SAASvB,IAChCJ,EAAM4B,gBAA4B,OAAXzB,QAAW,IAAXA,OAAW,EAAXA,EAAayB,eACpC5B,EAAM6B,WAAuB,OAAX1B,QAAW,IAAXA,OAAW,EAAXA,EAAayB,eAC9B5B,EAAM8B,WACM,OAAX3B,QAAW,IAAXA,OAAW,EAAXA,EAAa2B,WACb9B,EAAM8B,SAAS2Q,gBAAkBtS,EAAY2B,SAAS2Q,cACpDC,GAAYrC,EAAgB1O,SAAS3B,EAAMuC,UAC3CoQ,GAAa/T,EAAa,IAA0B,QAArBmQ,EAAA/O,EAAM4S,uBAAe,IAAA7D,OAAA,EAArBA,EAAuBxf,QAAS,EAC/DsjB,GAAaF,GACf,GAAG/T,IAAmC,QAAzBoQ,EAAIhP,EAAM4S,uBAAe,IAAA5D,OAAA,EAArBA,EAAuBzf,WAAyB,IAAfqP,EAAmB,QAAU,YAC/E,GACEkU,GAAY9S,EAAM+S,QAAU,WAC5BC,GAAY1G,GAAewG,KAAc,UACzCG,GAAYH,GAAUI,OAAO,GAAGC,cAAgBL,GAAUhM,MAAM,GAChEsM,GAA0BpT,EAAMqT,gBAClCjD,IAAqC,OAAlBI,QAAkB,IAAlBA,OAAkB,EAAlBA,EAAqBxQ,EAAMqT,mBAAoB,yBAClE,KACEC,GAAgBF,GAClBA,GAAwBpM,MAAM,OAAOF,MAAM,EAAG,IAAIyM,KAAK,KAAO,MAC9D,MAEJrS,EAAAA,EAAAA,YAAU,KAAO,IAADsS,EACd,QAAgChkB,KAAjB,QAAXgkB,EAAAxT,EAAMyT,aAAK,IAAAD,OAAA,EAAXA,EAAaE,YAA0B,CACzChD,GAAW,GACX,MAAMiD,EAAQ/Q,YAAW,IAAM8N,GAAW,IAAQ,KAClD,MAAO,IAAMlH,aAAamK,EAC5B,IACC,CAAY,QAAZ1E,EAACjP,EAAMyT,aAAK,IAAAxE,OAAA,EAAXA,EAAayE,aAEjB,MAAME,IAAmB5S,EAAAA,EAAAA,cAAY,KAAO,IAAD6S,EACrClD,IAAqBE,IAAmBE,KAC5CjQ,IAAW,IACNd,EAAMqT,kBAAwC,QAArBQ,EAAA7T,EAAM4S,uBAAe,IAAAiB,OAAA,EAArBA,EAAuBtkB,QAAS,IAAMygB,GAClEA,EAAahQ,EAAMuC,UACrB,GACC,CAACyN,EAAchQ,EAAMuC,SAAUvC,EAAMqT,gBAAiBrT,EAAM4S,gBAAiBjC,GAAmBE,GAAiBE,KAE9G+C,IAAmB9S,EAAAA,EAAAA,cAAY,KAAO,IAAD+S,EACrCpD,IAAqBE,IAAmBE,KAC5CjQ,IAAW,IACNd,EAAMqT,kBAAwC,QAArBU,EAAA/T,EAAM4S,uBAAe,IAAAmB,OAAA,EAArBA,EAAuBxkB,QAAS,IAAMygB,GAClEA,EAAa,MACf,GACC,CAACA,EAAchQ,EAAMqT,gBAAiBrT,EAAM4S,gBAAiBjC,GAAmBE,GAAiBE,KAE9FiD,IAA0BhT,EAAAA,EAAAA,cAAY,KAC1C4P,IAAqB,EAAK,GACzB,IAEGqD,IAA2BjT,EAAAA,EAAAA,cAAY,KAC3C4P,IAAqB,EAAM,GAC1B,IAEGsD,IAAwBlT,EAAAA,EAAAA,cAAY,KACxC8P,IAAmB,EAAK,GACvB,IAEGqD,IAAyBnT,EAAAA,EAAAA,cAAY,KACzC8P,IAAmB,EAAM,GACxB,IAEGsD,IAAsBpT,EAAAA,EAAAA,cAAY,CAACwF,EAAKU,KAC5C8J,GAAiB,CAAExK,IAAKA,EAAIA,IAAKU,QAAO,GACvC,IAEGmN,IAAuBrT,EAAAA,EAAAA,cAAY,KACvCgQ,GAAiB,KAAK,GACrB,IAEGsD,IAAatT,EAAAA,EAAAA,cAAY,KAC7BiP,EAAOjQ,GACPiU,IAA0B,GACzB,CAAChE,EAAQjQ,EAAOiU,KAEbM,IAAYvT,EAAAA,EAAAA,cAAY,KAC5BkP,EAAYlQ,GACZiU,IAA0B,GACzB,CAAC/D,EAAalQ,EAAOiU,KAElBO,IAAexT,EAAAA,EAAAA,cAAY,KAC/B8O,EAAS9P,EAAMuC,UACf0R,IAA0B,GACzB,CAACnE,EAAU9P,EAAMuC,SAAU0R,KAExBQ,IAAqBzT,EAAAA,EAAAA,cAAY,KACrCkQ,IAAewD,IAAUA,GAAK,GAC7B,KAEG,YAAEC,GAAW,cAAEC,KAAkBnT,EAAAA,EAAAA,UAAQ,KAC7C,MAAMoT,EAAOlN,IAAmB,GAEhC,GAAIkN,EAAKtlB,QADW,IAElB,MAAO,CAAEolB,YAAaE,EAAMD,cAAe,IAE7C,MAAME,EAASD,EAAK/N,MAAM,EAJN,KAKdiO,EAAYD,EAAOE,YAAY,MAAQ,EAAIF,EAAOE,YAAY,KALhD,IAMpB,MAAO,CACLL,YAAaG,EAAOhO,MAAM,EAAGiO,GAC7BH,cAAeC,EAAK/N,MAAMiO,GAC3B,GACA,CAACpN,KAEEsN,IAAWxT,EAAAA,EAAAA,UAAQ,KACvB,IAAKzB,EAAMsR,WAAY,MAAO,GAC9B,MAAMC,GAAYC,EAAAA,GAAAA,GAASxR,EAAMsR,YACjC,OAAOG,EAAAA,GAAAA,GAAQF,IAAaQ,EAAAA,GAAAA,IAAOR,EAAW,UAAY,EAAE,GAC3D,CAACvR,EAAMsR,aAEJ4D,IAAezT,EAAAA,EAAAA,UAAQ,KAAO,IAAD0T,EAAAC,EAAAC,EACjC,MAAMC,GAA0B,QAAbH,EAAAnV,EAAMjM,eAAO,IAAAohB,GAAU,QAAVC,EAAbD,EAAeI,gBAAQ,IAAAH,GAAO,QAAPC,EAAvBD,EAAyBI,aAAK,IAAAH,OAAjB,EAAbA,EAAgCxe,QAAQ4e,IAAC,IAAAC,EAAA,OAAkB,QAAlBA,EAAKD,EAAEE,mBAAW,IAAAD,OAAA,EAAbA,EAAeE,WAAW,QAAQ,MAAK,GACxG,OAAKN,EAAW/lB,QAEdwa,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAI,IAAKpP,GAAmBqB,iBAAiBqL,IAAkB3T,QAAS,OAAQG,eAAgB,UAAYoP,KAAK,SAAS,aAAW,SAAQrD,SAAA,EAChJ2C,EAAAA,GAAAA,KAACgT,GAAAA,GAAI,CAAC/f,WAAS,EAAC1C,QAAS,EAAGiX,GAAI,CAAE9T,SAAU,QAAS2J,SAClDoV,EAAWxO,MAAM,EAAG,GAAGuF,KAAI,CAACgC,EAAMxQ,KACjCgF,EAAAA,GAAAA,KAACgT,GAAAA,GAAI,CACHC,MAAI,EACJ/kB,GAA0B,IAAtBukB,EAAW/lB,OAAe,GAAK,EACnCyB,GAA0B,IAAtBskB,EAAW/lB,OAAe,GAAK,EAAE2Q,UAGrC2C,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAACwD,SAAUX,GAAe5C,QAAQ,UAAU1L,QAAQ,UAAUuO,KAAK,OAAOE,WAAY,CAAEpV,MAAO,MAAOqI,UAC/G2C,EAAAA,GAAAA,KAACkT,GAAAA,cAAa,CACZxI,IAAKc,EAAK7H,IACVgE,IAAK,SAAS3M,EAAQ,IACtBmY,OAAO,OACP1S,MAAOrI,GAAmBuB,MAA4B,IAAtB8Y,EAAW/lB,QAC3C0mB,aACEpT,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAI,IAAKpP,GAAmB4B,iBAAkBvK,aAAc,QAAS4N,UACxE2C,EAAAA,GAAAA,KAACsJ,EAAAA,EAAgB,CAACC,KAAM,OAG5B7I,KAAK,WAbJ8K,EAAKE,SAAW,OAAO1Q,SAmBjCyX,EAAW/lB,OAAS,IACnBsT,EAAAA,GAAAA,KAACmK,GAAa,CACZjX,MAAO,oBAAoBuf,EAAW/lB,UACtC0b,QAASiJ,GACT7J,GAAIpP,GAAmB6B,kBAhCA,IAmCvB,GAEP,CAAc,QAAdoS,EAAClP,EAAMjM,eAAO,IAAAmb,GAAU,QAAVC,EAAbD,EAAeqG,gBAAQ,IAAApG,OAAV,EAAbA,EAAyBqG,MAAOtB,KAE9BgC,IAAezU,EAAAA,EAAAA,UAAQ,KAAO,IAAD0U,EAAAC,EAAAC,EACjC,MAAMC,GAA0B,QAAbH,EAAAnW,EAAMjM,eAAO,IAAAoiB,GAAU,QAAVC,EAAbD,EAAeZ,gBAAQ,IAAAa,GAAO,QAAPC,EAAvBD,EAAyBZ,aAAK,IAAAa,OAAjB,EAAbA,EAAgCxf,QAAQ4e,IAAC,IAAAc,EAAA,OAAkB,QAAlBA,EAAKd,EAAEE,mBAAW,IAAAY,OAAA,EAAbA,EAAeX,WAAW,QAAQ,MAAK,GACxG,OAAKU,EAAW/mB,QAEdwa,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CACFf,GAAI,IAAKpP,GAAmB+B,iBAAiB2K,IAAmBuN,IAAelhB,QAAS,OAAQG,eAAgB,UAChHoP,KAAK,SACL,aAAW,SAAQrD,SAAA,CAEY,eAA9BoW,EAAW,GAAGX,aACb9S,EAAAA,GAAAA,KAACwK,GAAmB,CAClBE,IAAK+I,EAAW,GAAG9P,IACnBnR,SAAUihB,EAAW,GAAGjhB,SACxBmY,UAAU,0BAGZ3K,EAAAA,GAAAA,KAACkL,GAAmB,CAClBR,IAAK+I,EAAW,GAAG9P,IACnBnR,SAAUihB,EAAW,GAAGjhB,SACxBmY,UAAU,gBAGb8I,EAAW/mB,OAAS,IACnBsT,EAAAA,GAAAA,KAACmK,GAAa,CACZjX,MAAO,oBAAoBugB,EAAW/mB,UACtC0b,QAASiJ,GACT7J,GAAIpP,GAAmBqC,kBAxBA,IA2BvB,GAEP,CAAc,QAAd8R,EAACpP,EAAMjM,eAAO,IAAAqb,GAAU,QAAVC,EAAbD,EAAemG,gBAAQ,IAAAlG,OAAV,EAAbA,EAAyBmG,MAAOtB,GAAuBgB,KAErDsB,IAAc/U,EAAAA,EAAAA,UAAQ,KAAO,IAADgV,EAAAC,EAAAC,EAChC,MAAMC,GAA0B,QAAbH,EAAAzW,EAAMjM,eAAO,IAAA0iB,GAAU,QAAVC,EAAbD,EAAelB,gBAAQ,IAAAmB,GAAO,QAAPC,EAAvBD,EAAyBlB,aAAK,IAAAmB,OAAjB,EAAbA,EAAgC9f,QAAQ4e,IAAC,IAAAoB,EAAA,OAAkB,QAAlBA,EAAKpB,EAAEE,mBAAW,IAAAkB,OAAA,EAAbA,EAAejB,WAAW,QAAQ,MAAK,GACxG,OAAKgB,EAAWrnB,QAEdwa,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CACFf,GAAI,IACCpP,GAAmBsC,iBAAiBoK,IAAmBuN,IAAgBgB,IAC1EliB,QAAS,OACTG,eAAgB,UAElBoP,KAAK,SACL,aAAW,QAAOrD,SAAA,EAElB2C,EAAAA,GAAAA,KAACoL,GAAW,CAACV,IAAKqJ,EAAW,GAAGpQ,MAC/BoQ,EAAWrnB,OAAS,IACnBsT,EAAAA,GAAAA,KAACmK,GAAa,CACZjX,MAAO,mBAAmB6gB,EAAWrnB,UACrC0b,QAASiJ,GACT7J,GAAIpP,GAAmByC,kBAhBA,IAmBvB,GAEP,CAAc,QAAd4R,EAACtP,EAAMjM,eAAO,IAAAub,GAAU,QAAVC,EAAbD,EAAeiG,gBAAQ,IAAAhG,OAAV,EAAbA,EAAyBiG,MAAOtB,GAAuBgB,GAAcgB,KAEnEY,IAAmBrV,EAAAA,EAAAA,UAAQ,KAAO,IAADsV,EAAAC,EAAAC,EACrC,MAAMC,GAA0B,QAAbH,EAAA/W,EAAMjM,eAAO,IAAAgjB,GAAU,QAAVC,EAAbD,EAAexB,gBAAQ,IAAAyB,GAAO,QAAPC,EAAvBD,EAAyBxB,aAAK,IAAAyB,OAAjB,EAAbA,EAAgCpgB,QAChD4e,IAAC,IAAA0B,EAAAC,EAAAC,EAAA,QACc,QAAdF,EAAC1B,EAAEE,mBAAW,IAAAwB,GAAbA,EAAevB,WAAW,aACb,QAAdwB,EAAC3B,EAAEE,mBAAW,IAAAyB,GAAbA,EAAexB,WAAW,aACb,QAAdyB,EAAC5B,EAAEE,mBAAW,IAAA0B,GAAbA,EAAezB,WAAW,SAAQ,MAClC,GACL,OAAKsB,EAAW3nB,QAEdwa,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAI,IAAKpP,GAAmB0C,sBAAsBgK,IAAkBpR,SAAU,QAAUgN,KAAK,SAAS,aAAW,QAAOrD,SAAA,CAC1HgX,EAAWpQ,MAAM,EAAG,GAAGuF,KAAI,CAACgC,EAAMiJ,KACjCzU,EAAAA,GAAAA,KAACsL,GAAQ,CAACE,KAAMA,EAAMxQ,MAAOyZ,GAAUjJ,EAAKE,SAAW,SAAS+I,OAEjEJ,EAAW3nB,OAAS,IACnBsT,EAAAA,GAAAA,KAACmK,GAAa,CACZjX,MAAO,mBAAmBmhB,EAAW3nB,UACrC0b,QAASiJ,GACT7J,GAAIpP,GAAmB+C,uBAVA,IAavB,GAEP,CAAc,QAAdwR,EAACxP,EAAMjM,eAAO,IAAAyb,GAAU,QAAVC,EAAbD,EAAe+F,gBAAQ,IAAA9F,OAAV,EAAbA,EAAyB+F,MAAOtB,KAE9BqD,IAAgB9V,EAAAA,EAAAA,UAAQ,KAC5B,MAAMlF,IAAYoL,GAClB,OACEoC,EAAAA,GAAAA,MAACC,EAAAA,EAAOC,IAAG,CAACC,QAAS,CAAE3W,QAAS,GAAKiL,QAAS,CAAEjL,QAAS,GAAKd,WAAY,CAAE4C,SAAU,IAAM6K,SAAA,CACzF3D,IACCwN,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAAAlL,SAAA,EACF2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CACTL,GAAIpP,GAAmBkB,cACnB+Y,MAAkBgB,MAAkBM,MAAiBM,IACvD5W,UAEF2C,EAAAA,GAAAA,KAAC2U,GAAAA,GAAK,CAAC3C,KAAMF,KAAgB1D,IAAc2D,GAAgB,MAAQ,QAEpEA,KACC/R,EAAAA,GAAAA,KAAC4U,GAAAA,EAAQ,CAACC,GAAIzG,GAAY1I,QAAQ,OAAOoP,eAAa,EAAAzX,UACpD2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CACTL,GAAIpP,GAAmBkB,cACnB+Y,MAAkBgB,MAAkBM,MAAiBM,IACvD5W,UAEF2C,EAAAA,GAAAA,KAAC2U,GAAAA,GAAK,CAAC3C,KAAMD,SAIlBA,KACC/R,EAAAA,GAAAA,KAACmK,GAAa,CACZjX,MAAOkb,GAAa,YAAc,YAClChG,QAASwJ,GACTpK,GAAIpP,GAAmBgD,oBAK9BiX,GACAgB,GACAM,GACAM,IACDjU,EAAAA,GAAAA,KAAC6C,GAAW,CACV3R,QAASoS,GACTR,gBAAiB0L,GACjBzL,YAAawO,OAEJ,GAEd,CACDzM,GACAgN,GACAC,GACA3D,GACAiE,GACAgB,GACAM,GACAM,GACArC,GACAtO,GACAiO,KAGIpQ,IAAqBvC,EAAAA,EAAAA,UAAQ,KAAO,IAADmW,EAAAC,EACvC,MAAMrC,GAAqB,QAAboC,EAAA5X,EAAMjM,eAAO,IAAA6jB,GAAU,QAAVC,EAAbD,EAAerC,gBAAQ,IAAAsC,OAAV,EAAbA,EAAyBrC,QAAS,GAChD,OACEzL,EAAAA,GAAAA,MAAC+N,EAAAA,EAAa,CAACzN,GAAI0N,GAAY/T,mBAAmB9D,SAAA,CAC9B,IAAjBsV,EAAMjmB,SACLsT,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACC,QAAQ,QAAQN,GAAI,CAAE9Y,MAAO,eAAgByK,UAAW,SAAWhJ,SAAU,CAAEjC,GAAI,SAAUC,GAAI,UAAYgnB,EAAG,GAAI9X,SAAC,uBAIlIsV,EAAMnJ,KAAI,CAACgC,EAAMiJ,KAAG,IAAAW,EAAAC,EAAAC,EAAA,OACnBtV,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAETwD,SAAUX,GACV5C,QAAQ,UACR1L,QAAQ,UACRuO,KAAK,OAAM7M,SAEM,QAAhB+X,EAAA5J,EAAKsH,mBAAW,IAAAsC,GAAhBA,EAAkBrC,WAAW,UAC5B/S,EAAAA,GAAAA,KAACkT,GAAAA,cAAa,CACZxI,IAAKc,EAAK7H,IACVgE,IAAK,SAAS8M,EAAM,IACpBtB,OAAO,OACP1S,MAAO,IAAKyU,GAAYxT,WAAYhO,SAAU,QAC9C0f,aACEpT,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAI,IAAK0N,GAAYvT,sBAAuBlS,aAAc,QAAS4N,UACtE2C,EAAAA,GAAAA,KAACsJ,EAAAA,EAAgB,CAACC,KAAM,OAG5B7I,KAAK,QAEgB,eAArB8K,EAAKsH,aACP9S,EAAAA,GAAAA,KAACwK,GAAmB,CAClBE,IAAKc,EAAK7H,IACVnR,SAAUgZ,EAAKhZ,SACfmY,UAAW,kBAAkB8J,EAAM,MAEnB,QAAhBY,EAAA7J,EAAKsH,mBAAW,IAAAuC,GAAhBA,EAAkBtC,WAAW,UAC/B/S,EAAAA,GAAAA,KAACkL,GAAmB,CAClBR,IAAKc,EAAK7H,IACVnR,SAAUgZ,EAAKhZ,SACfmY,UAAW,SAAS8J,EAAM,MAEV,QAAhBa,EAAA9J,EAAKsH,mBAAW,IAAAwC,GAAhBA,EAAkBvC,WAAW,UAC/B/S,EAAAA,GAAAA,KAACoL,GAAW,CAACV,IAAKc,EAAK7H,OAEvB3D,EAAAA,GAAAA,KAACsL,GAAQ,CAACE,KAAMA,EAAMxQ,MAAOyZ,KAlC1BjJ,EAAKE,SAAW,SAAS+I,IAoCnB,MAED,GAEjB,CAAc,QAAd5H,EAAC1P,EAAMjM,eAAO,IAAA2b,GAAU,QAAVC,EAAbD,EAAe6F,gBAAQ,IAAA5F,OAAV,EAAbA,EAAyB6F,QAEvBrR,IAAuB1C,EAAAA,EAAAA,UAAQ,KACnCoB,EAAAA,GAAAA,KAACiV,EAAAA,EAAa,CAACzN,GAAI0N,GAAY5T,qBAAqBjE,UAClD6J,EAAAA,GAAAA,MAACqO,GAAAA,EAAI,CAAAlY,SAAA,EACH2C,EAAAA,GAAAA,KAACwV,GAAAA,EAAc,CACbpN,QAASqJ,GACTjK,GAAI0N,GAAYzT,kBAChB,aAAW,aAAYpE,UAEvB2C,EAAAA,GAAAA,KAACyV,GAAAA,EAAY,CAACtmB,QAAQ,kBAExB6Q,EAAAA,GAAAA,KAACwV,GAAAA,EAAc,CACbpN,QAASsJ,GACTlK,GAAI0N,GAAYzT,kBAChB,aAAYtE,EAAM0B,UAAY,cAAgB,YAAYxB,UAE1D2C,EAAAA,GAAAA,KAACyV,GAAAA,EAAY,CAACtmB,QAASgO,EAAM0B,UAAY,cAAgB,iBAE3DmB,EAAAA,GAAAA,KAACwV,GAAAA,EAAc,CACbpN,QAASuJ,GACTnK,GAAI,IAAK0N,GAAYzT,kBAAmB/S,MAAO,cAC/C,aAAW,eAAc2O,UAEzB2C,EAAAA,GAAAA,KAACyV,GAAAA,EAAY,CAACtmB,QAAQ,mBAI3B,CAACsiB,GAAYC,GAAWC,GAAcxU,EAAM0B,YAEzC6W,IAAmB9W,EAAAA,EAAAA,UAAQ,IAC1BsP,IAEHhH,EAAAA,GAAAA,MAACyO,EAAAA,EAAM,CACLC,OAAQ1H,GACR2H,QAASrE,GACT9d,SAAS,KACToiB,WAAS,EACTC,oBAAqBC,GAAAA,EACrBC,mBAAoB,IACpB,kBAAgB,mBAChB,mBAAiB,yBACjBC,WAAY,CACV1O,GAAI,IACC0N,GAAY9T,uBACf7M,OAAQ,KAEV6T,QAAUhJ,GAAMA,EAAE+W,kBAClBC,YAAchX,GAAMA,EAAE+W,kBACtBE,aAAejX,GAAMA,EAAE+W,mBACvB9Y,SAAA,EAEF2C,EAAAA,GAAAA,KAACsW,EAAAA,EAAW,CAAChS,GAAG,mBAAmBkD,GAAI0N,GAAY7T,mBAAmBhE,SAAC,kBAGvE6J,EAAAA,GAAAA,MAAC+N,EAAAA,EAAa,CAACzN,GAAI0N,GAAY5T,qBAAqBjE,SAAA,EAClD2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACvD,GAAG,yBAAyBwD,QAAQ,QAAQyO,cAAY,EAAAlZ,SAAC,gFAGrE2C,EAAAA,GAAAA,KAAC+H,GAAAA,EAAI,CACHC,KAAMkG,GAAcvK,IACpBsE,OAAO,SACPC,IAAI,WACJV,GAAI,CAAEhO,UAAW,aACjB,aAAY,QAAQ0U,GAAc7J,4BAA4BhH,SAE7D6Q,GAAcvK,UAGnB3D,EAAAA,GAAAA,KAACwW,EAAAA,EAAa,CAAChP,GAAI0N,GAAY3T,cAAclE,UAC3C2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAASoJ,GACThK,GAAI0N,GAAY1T,kBAChB,aAAW,mBAAkBnE,UAE7B2C,EAAAA,GAAAA,KAACyW,GAAAA,EAAS,WA5CS,MAiD1B,CAACvI,GAAesD,KAEnB,OAAIhS,GAEA0H,EAAAA,GAAAA,MAACwP,GAAAA,EAAK,CAAClP,GAAIpP,GAAmBC,WAAU,EAAO5D,GAAaiM,KAAK,UAASrD,SAAA,EACxE2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACL,GAAIpP,GAAmBU,WAAWuE,SAAC,WAC/C2C,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAI,CAAElR,EAAG,EAAG7E,UAAW,UAAW4L,UACrC2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACC,QAAQ,QAAQpZ,MAAM,QAAQ8Y,GAAI,CAAE7Y,WAAY,KAAM0O,SAC/DmC,SAONrC,EAAMuC,UAAavC,EAAMjM,SAc5BgW,EAAAA,GAAAA,MAACC,EAAAA,EAAOC,IAAG,CACTC,QAAS,CAAE3W,QAAS,EAAG6E,EAAG,IAC1BoG,QAAS,CAAEjL,QAAS,EAAG6E,EAAG,GAC1B3F,WAAY,CAAE4C,SAAU,GAAK8U,KAAM,WAAYjK,SAAA,EAE/C6J,EAAAA,GAAAA,MAACwP,GAAAA,EAAK,CACJpS,GAAI,SAASnH,EAAMuC,WACnBiX,UAAU,aACVC,UAAW,EACXrW,aAAcwQ,GACdvQ,aAAcyQ,GACdzJ,GAAI,IACCpP,GAAmBC,UAAU8E,EAAM0B,UAAWpK,MAC9C2D,GAAmB+D,eAAeI,GAAWsT,IAAavC,GAC7D5X,cAAeoY,IAAqBE,IAAmBE,GAAgB,OAAS,QAElFxN,KAAK,UACL,kBAAiB,eAAevD,EAAMuC,WAAWrC,SAAA,EAEjD6J,EAAAA,GAAAA,MAACW,EAAAA,EAAU,CAACL,GAAIpP,GAAmBU,WAAYwL,GAAI,eAAenH,EAAMuC,WAAWrC,SAAA,CAAC,YACxEiS,MAEXnS,EAAM0B,YACLmB,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAIpP,GAAmBY,oBAAoBqE,UAC9C2C,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAACgD,WAAY,CAAEpV,MAAO,MAAQqV,SAAU,CAAErV,MAAO,KAAOqI,UACjE2C,EAAAA,GAAAA,KAAC6W,GAAAA,EAAW,CAACrP,GAAIpP,GAAmBa,iBAIzCwX,KACCzQ,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CACTC,QAAS,CAAE3W,QAAS,EAAG4E,GAAI,IAC3BqG,QAAS,CAAEjL,QAAS,EAAG4E,EAAG,GAC1B1F,WAAY,CAAE4C,SAAU,IAAM6K,UAE9B6J,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACb,UAAU,aAAaF,GAAI,CAAEvQ,WAAY,YAAaU,YAAa,eAAgBX,GAAI,EAAGme,EAAG,EAAGpkB,GAAI,GAAIsM,SAAA,EAC3G2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACC,QAAQ,UAAUN,GAAIpP,GAAmBgB,eAAeiE,SAAC,kBAGrE2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACC,QAAQ,QAAQN,GAAI,CAAE9Y,MAAO,eAAgByK,UAAW,SAAWhJ,SAAU,CAAEjC,GAAI,SAAUC,GAAI,UAAYgnB,EAAG,GAAI9X,SAC7HoT,UAKRiE,IACDxN,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAI,IAAKpP,GAAmB4D,gBAAiB1K,eAAgB,gBAAiBD,WAAY,UAAWgM,SAAA,EACxG2C,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAACgD,WAAY,CAAEpV,MAAO,MAAOqI,UACtC2C,EAAAA,GAAAA,KAAC8W,GAAAA,EAAI,CACH5jB,MAAOkd,GACP1hB,MAAOyhB,GACP5G,KAAK,QACL,aAAY,iBAAiB6G,UAGjClJ,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAI,CAAErW,QAAS,OAAQE,WAAY,SAAUG,IAAK,GAAI6L,SAAA,CACxDiR,KACCtO,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CACTC,QAAQ,UACRJ,UAAU,OACVqP,SAAU5Z,EAAMsR,WAChBjH,GAAIpP,GAAmBW,sBACvB,aAAY,aAAaqZ,KAAW/U,SAEnCiR,MAGLpH,EAAAA,GAAAA,MAACW,EAAAA,EAAU,CAACC,QAAQ,UAAUN,GAAIpP,GAAmBW,sBAAsBsE,SAAA,CAAC,WACjEiS,aAIfpI,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAI,IAAKpP,GAAmBiD,iBAAkB/J,eAAgB,iBAAkB+L,SAAA,EACnF6J,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAIpP,GAAmBkD,cAAc+B,SAAA,EACxC2C,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAACgD,WAAY,CAAEpV,MAAO,MAAQqV,SAAU,CAAErV,MAAO,KAAOqI,UACjE2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACToB,KAAK,SACLnB,QAASA,IAAM4E,EAAO7P,EAAMuC,SAAUjE,IACtC,aAAYA,GAAU,eAAiB,aACvC+L,GAAIpP,GAAmBmD,WACvB4E,SAAU2N,IAAqBE,IAAmBE,GAAc7Q,UAEhE2C,EAAAA,GAAAA,KAACgX,GAAAA,EAAW,CAACxP,GAAIpP,GAAmBoD,SAASC,WAGjDuE,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CACTC,QAAQ,UACRN,GAAIpP,GAAmBsD,UAAUD,GAASE,GAAS0B,UAEvC,QAAX0P,EAAA5P,EAAMyT,aAAK,IAAA7D,OAAA,EAAXA,EAAa8D,aAAc,KAE9B7Q,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAACgD,WAAY,CAAEpV,MAAO,MAAQqV,SAAU,CAAErV,MAAO,KAAOqI,UACjE2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACToB,KAAK,SACLnB,QAASA,IAAM8E,EAAQ/P,GACvB,aAAW,iBACXqK,GAAIpP,GAAmByD,YACvBsE,SAAU2N,IAAqBE,IAAmBE,GAAc7Q,UAEhE2C,EAAAA,GAAAA,KAACiX,GAAAA,EAAqB,CAACzP,GAAIpP,GAAmB0D,gBAGjDgU,KACC9P,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CACTC,QAAQ,UACRN,GAAIpP,GAAmB2D,WAAWsB,SAEjC2S,QAINL,KACC3P,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAACgD,WAAY,CAAEpV,MAAO,MAAQqV,SAAU,CAAErV,MAAO,KAAOqI,UACjE2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACToB,KAAK,SACLnB,QAAS+I,GACTwF,UAAU,aACV,aAAW,gBACXnP,GAAIpP,GAAmB6D,WACvBkE,SAAU2N,IAAqBE,IAAmBE,GAAc7Q,UAEhE2C,EAAAA,GAAAA,KAACkX,EAAAA,EAAY,CAAC1P,GAAIpP,GAAmB8D,sBAO/CgL,EAAAA,GAAAA,MAACyO,EAAAA,EAAM,CACLC,KAAM5H,GACN6H,QAASvE,GACT5d,SAAS,KACToiB,WAAS,EACTqB,WAAY7Q,OAAO8Q,WAAa,IAChCrB,oBAAqBC,GAAAA,EACrBC,mBAAoB,IACpB,kBAAgB,qBAChB,mBAAiB,2BACjBC,WAAY,CACV1O,GAAI,IACC0N,GAAYlU,qBACfzM,OAAQ,KAEV6T,QAAUhJ,GAAMA,EAAE+W,kBAClBC,YAAchX,GAAMA,EAAE+W,kBACtBE,aAAejX,GAAMA,EAAE+W,mBACvB9Y,SAAA,EAEF2C,EAAAA,GAAAA,KAACsW,EAAAA,EAAW,CAAChS,GAAG,qBAAqBkD,GAAI0N,GAAYjU,iBAAiB5D,SAAC,eAGvE6J,EAAAA,GAAAA,MAAC+N,EAAAA,EAAa,CAACzN,GAAI0N,GAAY/T,mBAAoBkW,UAAQ,EAAAha,SAAA,EACzD2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACvD,GAAG,2BAA2BkD,GAAI,CAAErW,QAAS,QAASkM,SAAC,gDAGlE8D,OAEHnB,EAAAA,GAAAA,KAACwW,EAAAA,EAAa,CAAChP,GAAI0N,GAAY3T,cAAclE,UAC3C2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAASkJ,GACT9J,GAAI0N,GAAY1T,kBAChB,aAAW,qBAAoBnE,UAE/B2C,EAAAA,GAAAA,KAACyW,GAAAA,EAAS,YAKhBvP,EAAAA,GAAAA,MAACyO,EAAAA,EAAM,CACLC,KAAM9H,GACN+H,QAASzE,GACT1d,SAAS,KACToiB,WAAS,EACTC,oBAAqBC,GAAAA,EACrBC,mBAAoB,IACpB,kBAAgB,uBAChB,mBAAiB,6BACjBC,WAAY,CACV1O,GAAI,IACC0N,GAAY9T,uBACf7M,OAAQ,KAEV6T,QAAUhJ,GAAMA,EAAE+W,kBAClBC,YAAchX,GAAMA,EAAE+W,kBACtBE,aAAejX,GAAMA,EAAE+W,mBACvB9Y,SAAA,EAEF2C,EAAAA,GAAAA,KAACsW,EAAAA,EAAW,CAAChS,GAAG,uBAAuBkD,GAAI0N,GAAY7T,mBAAmBhE,SAAC,mBAG3E6J,EAAAA,GAAAA,MAAC+N,EAAAA,EAAa,CAACzN,GAAI0N,GAAY5T,qBAAsB+V,UAAQ,EAAAha,SAAA,EAC3D2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACvD,GAAG,6BAA6BkD,GAAI,CAAErW,QAAS,QAASkM,SAAC,wDAGpEiE,OAEHtB,EAAAA,GAAAA,KAACwW,EAAAA,EAAa,CAAChP,GAAI0N,GAAY3T,cAAclE,UAC3C2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAASgJ,GACT5J,GAAI0N,GAAY1T,kBAChB,aAAW,uBAAsBnE,UAEjC2C,EAAAA,GAAAA,KAACyW,GAAAA,EAAS,WAKff,OA3NDxO,EAAAA,GAAAA,MAACwP,GAAAA,EAAK,CAAClP,GAAIpP,GAAmBC,WAAU,EAAO5D,GAAaiM,KAAK,UAASrD,SAAA,EACxE2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACL,GAAIpP,GAAmBU,WAAWuE,SAAC,mBAC/C2C,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAI,CAAElR,EAAG,EAAG7E,UAAW,UAAW4L,UACrC2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACC,QAAQ,QAAQpZ,MAAM,QAAQ8Y,GAAI,CAAE7Y,WAAY,KAAM0O,SAAC,6CAyN5D,EAIXia,GAAgBA,CAACC,EAAWC,KAAe,IAADC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAC9C,OACEb,EAAUpa,MAAMuC,WAAa8X,EAAUra,MAAMuC,WACtB,QAAvB+X,EAAAF,EAAUpa,MAAMjM,eAAO,IAAAumB,OAAA,EAAvBA,EAAyB/pB,UAAiC,QAA5BgqB,EAAKF,EAAUra,MAAMjM,eAAO,IAAAwmB,OAAA,EAAvBA,EAAyBhqB,SACvC,QAArBiqB,EAAAJ,EAAUpa,MAAMyT,aAAK,IAAA+G,OAAA,EAArBA,EAAuB9G,eAAoC,QAA1B+G,EAAKJ,EAAUra,MAAMyT,aAAK,IAAAgH,OAAA,EAArBA,EAAuB/G,aAC7D0G,EAAUpa,MAAM0B,YAAc2Y,EAAUra,MAAM0B,WAC9C0Y,EAAUpa,MAAM+S,SAAWsH,EAAUra,MAAM+S,SACnB,QAAxB2H,EAAAN,EAAUpa,MAAMqS,gBAAQ,IAAAqI,OAAA,EAAxBA,EAA0BnrB,WAAmC,QAA7BorB,EAAKN,EAAUra,MAAMqS,gBAAQ,IAAAsI,OAAA,EAAxBA,EAA0BprB,UACxC,QAAvBqrB,EAAAR,EAAUpa,MAAMjM,eAAO,IAAA6mB,GAAU,QAAVC,EAAvBD,EAAyBrF,gBAAQ,IAAAsF,GAAO,QAAPC,EAAjCD,EAAmCrF,aAAK,IAAAsF,OAAjB,EAAvBA,EAA0CvrB,WAAkC,QAA5BwrB,EAAKV,EAAUra,MAAMjM,eAAO,IAAAgnB,GAAU,QAAVC,EAAvBD,EAAyBxF,gBAAQ,IAAAyF,GAAO,QAAPC,EAAjCD,EAAmCxF,aAAK,IAAAyF,OAAjB,EAAvBA,EAA0C1rB,SAC/F6qB,EAAUpa,MAAMsR,aAAe+I,EAAUra,MAAMsR,YAC/C8I,EAAUja,YAAYyB,eAAiByY,EAAUla,YAAYyB,cAC7DwY,EAAUja,YAAY2B,WAAauY,EAAUla,YAAY2B,UACzDsY,EAAUha,WAAaia,EAAUja,UACjCga,EAAUjK,sBAAwBkK,EAAUlK,qBAC5CiK,EAAUxb,aAAeyb,EAAUzb,YACnCwb,EAAUhK,kBAAoBiK,EAAUjK,iBACxCgK,EAAU/Z,kBAAoBga,EAAUha,iBACxC+Z,EAAU/J,gBAAgB9gB,SAAW8qB,EAAUhK,gBAAgB9gB,QAC/D6qB,EAAU/J,gBAAgB6K,OAAM,CAAC/T,EAAIgU,IAAMhU,IAAOkT,EAAUhK,gBAAgB8K,MAC5Ef,EAAU9J,gBAAgB/gB,SAAW8qB,EAAU/J,gBAAgB/gB,QAC/D6qB,EAAU7J,UAAY8J,EAAU9J,SAChC6J,EAAU9iB,aAAe+iB,EAAU/iB,YACnC8iB,EAAU/X,QAAUgY,EAAUhY,KAAK,EAgFvCmM,GAAa9K,aAAe,CAC1ByM,qBAAqB,EACrBvR,WAAY,EACZwR,gBAAiB,KACjB/P,iBAAiB,EACjBgQ,gBAAiB,GACjBC,gBAAiB,GACjBC,QAAS,GACTjZ,YAAY,EACZ+K,MAAO,KACPmO,mBAAoB,KACpBC,mBAAoB,MAGtB,UAAe9M,EAAAA,EAAAA,MAAK6K,GAAc2L,I,2FC3+BlC,MAMMiB,GAAqB,IAerBjpB,GAAmB,CACvBG,aAAc,OACdE,cAAe,OACfC,WAAY,gBACZ,UAAW,CAAEd,UAAW,eACxB,WAAY,CAAEA,UAAW,gBAerB0pB,GAAyBC,IAAO,CACpC/pB,MAAO+pB,EAAU,aAAe,mBAG5BC,GAA2BC,IAAQ,CACvCjqB,MAAOiqB,EAAW,eAAiB,iBACnC7kB,QAAS6kB,EACJ5qB,IAAUkB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQC,QAAQC,KAAM,IAC7C,cACJ,UAAW,CACT0E,QAAU/F,IAAUkB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQC,QAAQC,KAAM,IACtDN,UAAW,cAEb,WAAY,CACVA,UAAW,iBAyRf,GArRyB,CACvB8pB,WAAY,CACV,qBAAsB,IApDF,CACtB9kB,QAAS,mBACT/E,UANmB,8BAOnBU,aAAc,EACdT,QAAS,OACTkF,UAAW,0BACX,oBAAqB,CACnBC,KAAM,CAAEzD,QAAS,EAAG5B,UAAW,qCAC/BsF,GAAI,CAAE1D,QAAS,EAAG5B,UAAW,oCA8C3B8F,SAAU,WACV3E,SAAU,QACVyD,SAAU,OACVI,QAAU/F,IAAUkB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQuJ,WAAWC,MAAO,KAC1DmgB,eAAgB,aAChBviB,EAAG,EACH/B,OAjEgB,OAyBE,CACtB,UAAW,CACTzF,UAAW,mBACXC,UAAW,+BAEb,UAAW,CACTC,QAAUjB,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQC,QAAQC,KAAM,MACnEC,cAAe,KAoCf,oBAAqB,CACnBQ,gBAAkB9B,IAAUkB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQ4F,KAAK,KAAM,MAG/DgkB,WAAY,CACV3nB,QAAS,QAEX4nB,eAAgB,CACd,uBAAwB,CACtBtpB,aAAc,OACdS,QAAS,YACT4D,QAAU/F,GAAUA,EAAMmB,QAAQ4F,KAAK,IACvClF,WAAY,gBACZiH,UAAW,QAEb,qCAAsC,CACpCc,YAAc5J,GAAUA,EAAMmB,QAAQ4F,KAAK,MAE7C,0CAA2C,CACzC6C,YAAa,eACb5I,UAAYhB,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQC,QAAQC,KAAM,OAEvE,gDAAiD,CAC/CuI,YAAa,eACb5I,UAAYhB,GAAU,cAAakB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQC,QAAQC,KAAM,SAGzE4pB,eAAiBP,IAAO,CACtBQ,UAAW,WACX9oB,SAAU,CAAEjC,GAAI,UAAWC,GAAI,aAC5BqqB,GAAsBC,KAE3BS,0BAA2B,CACzB5oB,GAAI,EACJwD,QAAS,cACTrE,aAAc,EACd6G,EAAG,GACH1G,WAAY,iBAEdupB,kBAAmB,CACjBnoB,MAAO,OACPhB,OAAQuoB,GACRze,UAAW,QACXrK,aAAc,EACdgB,OAAQ,YACRkH,YAAc5J,GAAUA,EAAMmB,QAAQ4F,KAAK,KAC3ClF,WAAY,sBACZ,UAAW,CAAEd,UAAW,gBAE1BsqB,wBAAyB,CACvBpoB,MAAOunB,GACPvoB,OAAQuoB,GACRze,UAAW,QACXrK,aAAc,MACdgB,OAAQ,YACRkH,YAAc5J,GAAUA,EAAMmB,QAAQ4F,KAAK,KAC3CjF,gBAAiB,QACjBD,WAAY,sBACZ,UAAW,CAAEd,UAAW,gBAE1BuqB,wBAAyB,CACvBroB,MAAO,OACPhB,OAAQuoB,GACRzkB,QAAU/F,GAAUA,EAAMmB,QAAQ4F,KAAK,KACvCrF,aAAc,EACd0B,QAAS,OACTE,WAAY,SACZC,eAAgB,SAChBnB,SAAU,SACVzB,MAAO,kBAET4qB,sBAAuB,CACrB1kB,SAAU,WACVM,IAAK,EACLmB,MAAO,EACPvC,QAAU/F,IAAUkB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQsQ,MAAMpQ,KAAM,IACpDV,MAAO,QACP4H,EAAG,GACH1G,WAAY,gBACZ,UAAW,CAAEkE,QAAU/F,GAAUA,EAAMmB,QAAQsQ,MAAM1P,OAEvDypB,kBAAmB,IACdjqB,GACHkH,GAAI,EACJC,GAAI,EACJ9H,WAAY,IACZc,aAAc,OACd,UAAW,CAAEqE,QAAS,iBAExB0lB,kBAAmB,IACdlqB,GACHkH,GAAI,EACJC,GAAI,EACJ3C,QAAU/F,GAAUA,EAAMmB,QAAQ4F,KAAK,KACvCpG,MAAO,eACPe,aAAc,OACd,UAAW,CAAEqE,QAAU/F,GAAUA,EAAMmB,QAAQ4F,KAAK,OAEtD2kB,cAAe,CACbtoB,QAAS,OACTE,WAAY,SACZyC,QAAU/F,GAAUA,EAAMmB,QAAQ4F,KAAK,IACvCrF,aAAc,OACd6G,EAAG,IACHhG,GAAI,EACJsE,SAAU,SACVwB,OAAQ,EACR7B,OAAQmlB,GACR3qB,UAAW,4BACXa,WAAY,gBACZ,UAAW,CAAEb,UAAW,+BAE1B4qB,iBAAmBhB,IAAQ,CACzBriB,EAAG,EACH7G,aAAc,SACXipB,GAAwBC,KAE7BiB,wBAAyB,CACvBtpB,GAAI,EACJa,QAAS,OACTC,cAAe,SACfC,WAAY,SACZG,IAAK,GAEPqoB,mBAAoB,CAClB/lB,QAAU/F,GAAUA,EAAMmB,QAAQsQ,MAAMpQ,KACxCV,MAAO,QACPC,WAAY,IACZc,aAAc,OACd+G,GAAI,EACJC,GAAI,GACJvC,UAAW,oBACX,mBAAoB,CAClB,KAAM,CAAEpF,UAAW,eACnB,MAAO,CAAEA,UAAW,eACpB,OAAQ,CAAEA,UAAW,iBAGzBgrB,uBAAwB,CACtB3oB,QAAS,OACTK,IAAK,EACLlB,GAAI,GACJgB,eAAgB,UAElByoB,2BAA4B,CAC1BzoB,eAAgB,SAChBD,WAAY,SACZZ,OAAQ,MACRH,GAAI,IACJ4D,UAAW,sBACX,oBAAqB,CACnBC,KAAM,CAAEzD,QAAS,EAAG5B,UAAW,cAC/BsF,GAAI,CAAE1D,QAAS,EAAG5B,UAAW,cAGjCkrB,iBAAkB,CAChBhpB,MAAOunB,GACPvoB,OAAQuoB,GACR9oB,aAAc,MACdgB,OAAQ,YACRkH,YAAc5J,GAAUA,EAAMmB,QAAQ4F,KAAK,KAC3ChB,QAAS,QACTgG,UAAW,QACX/K,UAAW,6BACXa,WAAY,iBAEdqqB,qBAAsB,WAAe,MAAM,CACzCrlB,SAAU,WACV5D,MAAO,MACPhB,OAAQ,MACRmB,QAAS,OACTE,WAAY,SACZG,IAAK,MACLd,QAP2BjE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAOT,EAAI,EACtBmD,WAAY,oBACZ8F,cAAe,OAChB,EACDwkB,mBAAqBlf,IAAK,CACxBhK,MAAO,OACPhB,OAAQ,MACR8D,QAAS,eACTrE,aAAc,MACdyE,UAAW,QAAQ8G,KAAS,GAAOA,EAAQ,EAAK,sCAChDmf,eAA2B,IAARnf,EAAH,IAChB,CAAC,mBAAmBA,KAAU,CAC5B,KAAM,CAAElM,UAAW,UAAU,GAAOkM,EAAQ,EAAK,OACjD,OAAQ,CAAElM,UAAW,UAAU,GAAOkM,EAAQ,EAAK,UAGvDof,iBAAkB,CAChBppB,MAAO,OACPhB,OAAQ,OACR8D,QAAU/F,GAAUA,EAAMmB,QAAQ4F,KAAK,IACvCrF,aAAc,OACd6G,EAAG,IACH1B,SAAU,WACVN,SAAU,SACV1E,WAAY,gBACZb,UAAW,4BACX,UAAW,CACTA,UAAW,8BAEb,UAAW,CACTiC,MAAO,OACPhB,OAAQ,OACR,kCAAmC,CACjCH,gBAAiB,eAEnB,2DAA4D,CAC1Da,QAAS,KAIf2pB,uBAAwB,CACtB/pB,GAAI,EACJa,QAAS,OACTC,cAAe,SACfI,IAAK,IAEP8oB,iBAAkB,CAChB1lB,SAAU,WACVugB,EAAG,EACHjlB,QAAS,MACTc,MAAO,CAAE9C,GAAI,OAAQC,GAAI,SACzBuF,SAAU,CAAEvF,GAAI,QAChBwK,UAAW,OACXC,UAAW,OACX/I,gBAAkB9B,IAAUkB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQuJ,WAAWC,MAAO,KAClEmgB,eAAgB,aAChBppB,aAAc,EACdV,UAAW,6BACXwF,OA3SkB,KA6SpBgmB,oBAAqB,CACnB1qB,gBAAkB9B,IAAUkB,EAAAA,EAAAA,IAAMlB,EAAMmB,QAAQ4F,KAAK,KAAM,KAE7D0lB,gBAAiB,CACfrpB,QAAS,OACTC,cAAe,SACfI,IAAK,IACL8E,EAAG,CAAEpI,GAAI,EAAGC,GAAI,MAElBssB,gBAAiB,CACfhrB,aAAc,GAEhBirB,wBAAyB,CACvBhsB,MAAO,iBACPyK,UAAW,SACXhJ,SAAU,CAAEjC,GAAI,SAAUC,GAAI,YAEhCwsB,oBAAqB,CACnB1B,UAAW,aACXtpB,cAAe,OACfjB,MAAO,eACPyB,SAAU,CAAEjC,GAAI,SAAUC,GAAI,YAEhCysB,qBAAsB,CACpBzpB,QAAS,OACTG,eAAgB,WAChBhB,GAAI,IACJkB,IAAK,I,0BC5UF,MAAMqpB,GAAuB,CAClC,aAAc,YAAa,YAAa,YAAa,aACrD,aAAc,YAAa,kBAAmB,gBAAiB,cAEpDC,GAAgB,SAChBC,GAAY,GAGnBC,GAAuB,CAC3BC,OAAQ,8BACRC,SAAU,yBACVC,KAAM,qCACN/c,IAAK,iDACLgd,QAAS,mCACTC,MAAO,8BACPxlB,IAAK,iDACLylB,KAAM,sCACNC,IAAK,4CACLC,OAAQ,8BACRC,QAAS,gCACTC,QAAS,+BACTC,KAAM,uCAIKC,GAAaC,KAAAA,SAAaV,KAAK,CAAEW,QAAS,CAAC,YAAaZ,WAAWa,SAAS,CACvF,cAAef,GAAqBG,KAAKttB,QAAQ,aAAc,MAC/D,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,QAIzDmuB,GAAcH,KAAAA,OAAW,CACpC3L,OAAQ2L,KAAAA,SACLI,MAAM,UAAW,WAAY,WAAY,eAAgB,WAAY,SAAU,YAC/EC,WACHC,KAAMN,KAAAA,SAAaJ,UAAU5lB,IAAI,GAAGumB,QAAQ,GAC5CC,MAAOR,KAAAA,SAAaJ,UAAU5lB,IAAI,GAAGuI,IAAI,KAAKge,QAAQ,IACtDE,KAAMT,KAAAA,SACHI,MAAM,iBAAkB,kBAAmB,kBAAmB,sBAC9DG,QAAQ,mBACXG,YAAaV,KAAAA,UAAcO,SAAQ,GACnCI,QAASX,KAAAA,SAAaT,QAAQ,yBAAyBc,WACvDO,QAASZ,KAAAA,SAAaT,QAAQ,yBAAyBc,aACtDhpB,MAAM,eAYIwpB,IATqBb,KAAAA,OAAW,CAC3CM,KAAMN,KAAAA,SAAaJ,UAAU5lB,IAAI,GAAGumB,QAAQ,GAC5CC,MAAOR,KAAAA,SAAaJ,UAAU5lB,IAAI,GAAGuI,IAAI,KAAKge,QAAQ,IACtDE,KAAMT,KAAAA,SACHI,MAAM,iBAAkB,kBAAmB,mBAC3CG,QAAQ,qBACVlpB,MAAM,sBAGoB2oB,KAAAA,OAAW,CACtCxX,KAAMwX,KAAAA,SACHI,MACC,OAAQ,QAAS,QAAS,QAAS,OAAQ,UAAW,OACtD,QAAS,OAAQ,QAAS,QAAS,QAAS,iBAE7CG,QAAQ,QACRL,SAAS,CACR,WAAY,yBAEhBruB,MAAOmuB,KAAAA,SACJzd,IAAI,KACJue,KAAK,OAAQ,CACZC,GAAI,OACJC,KAAMhB,KAAAA,SAAaiB,OAAOjnB,IAAI,GAAGqlB,WAAWa,SAAS,CACnD,aAAc,4CACd,eAAgB,6CAElBgB,UAAWlB,KAAAA,SAAamB,MAAM,IAAId,aAEtCxJ,SAAUmJ,KAAAA,OAAW,CACnBlJ,MAAOkJ,KAAAA,QAAYoB,QAAQ7e,IAAI,IAAIge,QAAQ,IAAIF,WAC/CgB,SAAUrB,KAAAA,QAAYoB,MAAMpB,KAAAA,SAAaT,QAAQ,0BAA0Bhd,IAAI,IAAIge,QAAQ,IAAIF,WAC/FiB,SAAUtB,KAAAA,QAAYoB,MAAMpB,KAAAA,SAAaT,QAAQ,0BAA0Bhd,IAAI,IAAIge,QAAQ,IAAIF,aAC9FE,QAAQ,CAAC,KACXlpB,MAAM,YAGIkqB,GAAiBvB,KAAAA,OAAW,CACvCvmB,EAAGumB,KAAAA,SAAahmB,IAAI,GAAGqlB,WAAWa,SAAS,CACzC,aAAc,oCACd,eAAgB,6BAElBxmB,EAAGsmB,KAAAA,SAAahmB,IAAI,GAAGqlB,WAAWa,SAAS,CACzC,aAAc,oCACd,eAAgB,+BAEjB7oB,MAAM,YAGImqB,GAAiBxB,KAAAA,OAAW,CACvCyB,SAAUzB,KAAAA,OAAW0B,MAAM1nB,IAAI,OAAOqlB,WAAWa,SAAS,CACxD,WAAY,0CACZ,eAAgB,kCAElByB,WAAY3B,KAAAA,SAAaI,MAAM,OAAQ,QAAS,SAAU,WAAWG,QAAQ,QAAQL,SAAS,CAC5F,WAAY,4DAEd0B,QAAS5B,KAAAA,UAAcO,SAAQ,KAC9BlpB,MAAM,YAGHwqB,GAA4B,CAChCzC,OAAQ,8BACRC,SAAU,yBACVC,KAAM,qCACN/c,IAAK,iDACLgd,QAAS,mCACTC,MAAO,8BACPxlB,IAAK,iDACLylB,KAAM,sCACNC,IAAK,4CACLoC,SAAU,oEACVnC,OAAQ,8BACRC,QAAS,gCACTC,QAAS,+BACTC,KAAM,uCAIFiC,GAAc,kEAgiCPC,IA7hC4BhC,KAAAA,OAAW,CAClDiC,eAAgBjC,KAAAA,SACbT,QAAQwC,IACR1C,WACAa,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,mBACtE,sBAAuB6vB,GAA0BvC,KAAKttB,QAAQ,aAAc,mBAC5E,eAAgB6vB,GAA0BxC,SAASrtB,QAAQ,aAAc,uBAE5EqF,MAAM,uBAGkC2oB,KAAAA,OAAW,CACpDM,KAAMN,KAAAA,SACHJ,UACA5lB,IAAI,GACJumB,QAAQ,GACRL,SAAS,CACR,cAAe2B,GAA0BlC,OAAO3tB,QAAQ,aAAc,QACtE,iBAAkB6vB,GAA0BjC,QAAQ5tB,QAAQ,aAAc,QAC1E,aAAc,4BAElBwuB,MAAOR,KAAAA,SACJJ,UACA5lB,IAAI,GACJuI,IAAI,KACJge,QAAQ,IACRL,SAAS,CACR,cAAe2B,GAA0BlC,OAAO3tB,QAAQ,aAAc,SACtE,iBAAkB6vB,GAA0BjC,QAAQ5tB,QAAQ,aAAc,SAC1E,aAAc,2BACd,aAAc,4BAElB+E,OAAQipB,KAAAA,OACL0B,MACArB,WACAH,SAAS,CACR,YAAa2B,GAA0B/B,KAAK9tB,QAAQ,aAAc,YAEtEwW,KAAMwX,KAAAA,SACHI,MAAM,SAAU,QAAS,WACzBC,WACAH,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,QACtE,WAAY6vB,GAA0BpC,KAAKztB,QAAQ,aAAc,QAAQA,QAAQ,YAAa,4BAElGkwB,WAAYlC,KAAAA,SACTI,MAAM,SAAU,UAAW,UAC3BC,WACAH,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,cACtE,WAAY6vB,GAA0BpC,KAAKztB,QAAQ,aAAc,cAAcA,QAAQ,YAAa,6BAExGmc,SAAU6R,KAAAA,UACPK,WACAH,SAAS,CACR,eAAgB2B,GAA0BhC,QAAQ7tB,QAAQ,aAAc,cAE5Ekc,OAAQ8R,KAAAA,UACLK,WACAH,SAAS,CACR,eAAgB2B,GAA0BhC,QAAQ7tB,QAAQ,aAAc,YAE5EmwB,MAAOnC,KAAAA,UACJK,WACAH,SAAS,CACR,eAAgB2B,GAA0BhC,QAAQ7tB,QAAQ,aAAc,WAE5EyuB,KAAMT,KAAAA,SACHI,MAAM,iBAAkB,gBAAiB,WAAY,aACrDG,QAAQ,kBACRL,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,QACtE,WAAY6vB,GAA0BpC,KAAKztB,QAAQ,aAAc,QAAQA,QAAQ,YAAa,0DAEjGqF,MAAM,yBAG+B2oB,KAAAA,OAAW,CACjDoC,SAAUpC,KAAAA,SACPT,QAAQwC,IACR1B,WACAH,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,aACtE,sBAAuB6vB,GAA0BvC,KAAKttB,QAAQ,aAAc,eAEhFwW,KAAMwX,KAAAA,SACHI,MAAM,SAAU,QAAS,WACzBG,QAAQ,UACRL,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,QACtE,WAAY6vB,GAA0BpC,KAAKztB,QAAQ,aAAc,QAAQA,QAAQ,YAAa,4BAElGqwB,KAAMrC,KAAAA,SACHiB,OACA1e,IAAI,KACJvI,IAAI,GACJqmB,WACAS,KAAK,OAAQ,CACZC,GAAI,QACJC,KAAMhB,KAAAA,SAAaX,WAAWa,SAAS,CACrC,eAAgB2B,GAA0BxC,SAASrtB,QAAQ,aAAc,YAG5EkuB,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,QACtE,aAAc6vB,GAA0Btf,IAAIvQ,QAAQ,aAAc,QAAQA,QAAQ,aAAc,OAChG,aAAc,uCAElBswB,QAAStC,KAAAA,QACNoB,MAAMpB,KAAAA,SAAaT,QAAQwC,IAAa7B,SAAS,CAChD,sBAAuB2B,GAA0BvC,KAAKttB,QAAQ,aAAc,qBAE7EquB,WACAS,KAAK,OAAQ,CACZC,GAAI,QACJC,KAAMhB,KAAAA,QAAYhmB,IAAI,GAAGuI,IAAI,KAAM8c,WAAWa,SAAS,CACrD,YAAa2B,GAA0B7nB,IAAIhI,QAAQ,aAAc,WAAWA,QAAQ,aAAc,KAClG,YAAa,mCACb,eAAgB6vB,GAA0BxC,SAASrtB,QAAQ,aAAc,eAG5E8uB,KAAK,OAAQ,CACZC,GAAI,UACJC,KAAMhB,KAAAA,QAAYhmB,IAAI,GAAGuI,IAAI,KAAO8c,WAAWa,SAAS,CACtD,YAAa2B,GAA0B7nB,IAAIhI,QAAQ,aAAc,WAAWA,QAAQ,aAAc,KAClG,YAAa,oCACb,eAAgB6vB,GAA0BxC,SAASrtB,QAAQ,aAAc,eAG5EkuB,SAAS,CACR,aAAc2B,GAA0BrC,MAAMxtB,QAAQ,aAAc,aAExEkwB,WAAYlC,KAAAA,SACTI,MAAM,SAAU,UAAW,UAC3BG,QAAQ,UACRL,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,cACtE,WAAY6vB,GAA0BpC,KAAKztB,QAAQ,aAAc,cAAcA,QAAQ,YAAa,6BAExGuwB,KAAMvC,KAAAA,QACHoB,MAAMpB,KAAAA,SAAaiB,OAAO1e,IAAI,IAAIgd,QAAQ,mBAAmBW,SAAS,CACrE,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,YACtE,aAAc6vB,GAA0Btf,IAAIvQ,QAAQ,aAAc,YAAYA,QAAQ,aAAc,MACpG,sBAAuB,iEAExBuQ,IAAI,IACJ8d,WACAH,SAAS,CACR,aAAc2B,GAA0BrC,MAAMxtB,QAAQ,aAAc,QACpE,YAAa,gCAEjBwwB,eAAgBxC,KAAAA,OAAW,CACzBxX,KAAMwX,KAAAA,SACHI,MAAM,OAAQ,QAAS,QAAS,QAAS,QACzCG,QAAQ,QACRL,SAAS,CACR,WAAY2B,GAA0BpC,KAAKztB,QAAQ,aAAc,wBAAwBA,QAAQ,YAAa,qCAElHqD,QAAS2qB,KAAAA,SACNzd,IAAI,KACJue,KAAK,OAAQ,CACZC,GAAI,OACJC,KAAMhB,KAAAA,SAAaiB,OAAOjnB,IAAI,GAAGqlB,WAAWa,SAAS,CACnD,aAAc,uDACd,eAAgB,wDAElBgB,UAAWlB,KAAAA,SAAaN,MAAMW,WAAWH,SAAS,CAChD,aAAc2B,GAA0BnC,IAAI1tB,QAAQ,aAAc,+BAGrEkuB,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,2BACtE,aAAc6vB,GAA0Btf,IAAIvQ,QAAQ,aAAc,2BAA2BA,QAAQ,aAAc,UAEvH8kB,MAAOkJ,KAAAA,QACJoB,MACCpB,KAAAA,OAAW,CACTlY,IAAKkY,KAAAA,SAAaN,MAAML,WAAWa,SAAS,CAC1C,aAAc2B,GAA0BnC,IAAI1tB,QAAQ,aAAc,YAClE,eAAgB6vB,GAA0BxC,SAASrtB,QAAQ,aAAc,cAE3E6d,QAASmQ,KAAAA,SAAaX,WAAWa,SAAS,CACxC,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,YACtE,eAAgB6vB,GAA0BxC,SAASrtB,QAAQ,aAAc,cAE3EilB,YAAa+I,KAAAA,SACVI,SAASpB,IACTK,WACAa,SAAS,CACR,WAAY,wDACZ,eAAgB2B,GAA0BxC,SAASrtB,QAAQ,aAAc,uBAE7E0b,KAAMsS,KAAAA,SAAazd,IAAI0c,IAAeI,WAAWa,SAAS,CACxD,aAAc,+BACd,eAAgB2B,GAA0BxC,SAASrtB,QAAQ,aAAc,kBAI9EuQ,IAAI2c,IACJmB,WACAH,SAAS,CACR,YAAa,mCAEhBG,aAEFoC,GAAG,WAAY,WACfvC,SAAS,CACR,iBAAkB,4EAEnB7oB,MAAM,sBAG+B2oB,KAAAA,OAAW,CACjDqC,KAAMrC,KAAAA,SACHiB,OACA1e,IAAI,KACJvI,IAAI,GACJqmB,WACAH,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,QACtE,aAAc6vB,GAA0Btf,IAAIvQ,QAAQ,aAAc,QAAQA,QAAQ,aAAc,OAChG,aAAc,uCAElB8X,YAAakW,KAAAA,SACViB,OACA1e,IAAI,KACJ4e,MAAM,IACNd,WACAH,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,eACtE,aAAc6vB,GAA0Btf,IAAIvQ,QAAQ,aAAc,eAAeA,QAAQ,aAAc,SAE3GkwB,WAAYlC,KAAAA,SACTI,MAAM,SAAU,UAAW,UAC3BC,WACAH,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,cACtE,WAAY6vB,GAA0BpC,KAAKztB,QAAQ,aAAc,cAAcA,QAAQ,YAAa,6BAExG0wB,YAAa1C,KAAAA,OAAW,CACtB2C,aAAc3C,KAAAA,SACXI,MAAM,MAAO,SAAU,cACvBC,WACAH,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,4BACtE,WAAY6vB,GAA0BpC,KAAKztB,QAAQ,aAAc,4BAA4BA,QAAQ,YAAa,6BAEtH4wB,WAAY5C,KAAAA,SACTI,MAAM,MAAO,SAAU,cACvBC,WACAH,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,0BACtE,WAAY6vB,GAA0BpC,KAAKztB,QAAQ,aAAc,0BAA0BA,QAAQ,YAAa,6BAEpH6wB,YAAa7C,KAAAA,SACVI,MAAM,MAAO,SAAU,cACvBC,WACAH,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,2BACtE,WAAY6vB,GAA0BpC,KAAKztB,QAAQ,aAAc,2BAA2BA,QAAQ,YAAa,+BAEpHquB,WACHkC,KAAMvC,KAAAA,QACHoB,MAAMpB,KAAAA,SAAaiB,OAAO1e,IAAI,IAAIgd,QAAQ,mBAAmBW,SAAS,CACrE,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,YACtE,aAAc6vB,GAA0Btf,IAAIvQ,QAAQ,aAAc,YAAYA,QAAQ,aAAc,MACpG,sBAAuB,iEAExBuQ,IAAI,IACJ8d,WACAH,SAAS,CACR,aAAc2B,GAA0BrC,MAAMxtB,QAAQ,aAAc,QACpE,YAAa,gCAEjB8wB,OAAQ9C,KAAAA,QACLoB,MAAMpB,KAAAA,SAAaT,QAAQwC,IAAa7B,SAAS,CAChD,sBAAuB2B,GAA0BvC,KAAKttB,QAAQ,aAAc,oBAE7EquB,WACAH,SAAS,CACR,aAAc2B,GAA0BrC,MAAMxtB,QAAQ,aAAc,YAExE+wB,WAAY/C,KAAAA,QACToB,MAAMpB,KAAAA,SAAaT,QAAQwC,IAAa7B,SAAS,CAChD,sBAAuB2B,GAA0BvC,KAAKttB,QAAQ,aAAc,wBAE7EquB,WACAH,SAAS,CACR,aAAc2B,GAA0BrC,MAAMxtB,QAAQ,aAAc,kBAGvEgI,IAAI,GACJkmB,SAAS,CACR,aAAc,mDAEf7oB,MAAM,sBAGuB2oB,KAAAA,OAAW,CACzCsC,QAAStC,KAAAA,QACNoB,MAAMpB,KAAAA,SAAaT,QAAQwC,IAAa7B,SAAS,CAChD,sBAAuB2B,GAA0BvC,KAAKttB,QAAQ,aAAc,qBAE7EgI,IAAI,GACJuI,IAAI,KACJ8c,WACAa,SAAS,CACR,aAAc2B,GAA0BrC,MAAMxtB,QAAQ,aAAc,WACpE,YAAa6vB,GAA0B7nB,IAAIhI,QAAQ,aAAc,WAAWA,QAAQ,aAAc,KAClG,YAAa,4CACb,eAAgB6vB,GAA0BxC,SAASrtB,QAAQ,aAAc,eAE5EqF,MAAM,cAG0B2oB,KAAAA,OAAW,CAC5CsC,QAAStC,KAAAA,QACNoB,MAAMpB,KAAAA,SAAaT,QAAQwC,IAAa7B,SAAS,CAChD,sBAAuB2B,GAA0BvC,KAAKttB,QAAQ,aAAc,qBAE7EgI,IAAI,GACJuI,IAAI,KACJ8c,WACAa,SAAS,CACR,aAAc2B,GAA0BrC,MAAMxtB,QAAQ,aAAc,WACpE,YAAa6vB,GAA0B7nB,IAAIhI,QAAQ,aAAc,WAAWA,QAAQ,aAAc,KAClG,YAAa,+CACb,eAAgB6vB,GAA0BxC,SAASrtB,QAAQ,aAAc,eAE5EqF,MAAM,iBAG+B2oB,KAAAA,OAAW,CACjD9tB,MAAO8tB,KAAAA,SACJI,MAAM,QAAS,OAAQ,UACvBC,WACAH,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,SACtE,WAAY6vB,GAA0BpC,KAAKztB,QAAQ,aAAc,SAASA,QAAQ,YAAa,yBAEnG4K,WAAYojB,KAAAA,SACTN,IAAI,CAAEsD,OAAQ,CAAC,OAAQ,WACvB7B,MAAM,MACNd,WACAH,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,cACtE,aAAc6vB,GAA0BnC,IAAI1tB,QAAQ,aAAc,gBAEtEixB,KAAMjD,KAAAA,SACHT,QAAQ,kBACRhd,IAAI,IACJ8d,WACAH,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,QACtE,sBAAuB6vB,GAA0BtC,QAAQvtB,QAAQ,aAAc,QAC/E,aAAc6vB,GAA0Btf,IAAIvQ,QAAQ,aAAc,QAAQA,QAAQ,aAAc,QAEpGkxB,YAAalD,KAAAA,OAAW,CACtBmD,YAAanD,KAAAA,SACVT,QAAQ,qBACRc,WACAH,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,gBACtE,sBAAuB6vB,GAA0BC,SAAS9vB,QAAQ,aAAc,kBAEpFoxB,cAAepD,KAAAA,SACZT,QAAQ,qBACRc,WACAH,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,kBACtE,sBAAuB6vB,GAA0BC,SAAS9vB,QAAQ,aAAc,oBAEpFqxB,UAAWrD,KAAAA,SACRT,QAAQ,qBACRc,WACAH,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,cACtE,sBAAuB6vB,GAA0BC,SAAS9vB,QAAQ,aAAc,kBAEnFquB,WACHiD,cAAetD,KAAAA,OAAW,CACxBuD,aAAcvD,KAAAA,UAAcK,WAAWH,SAAS,CAC9C,eAAgB2B,GAA0BhC,QAAQ7tB,QAAQ,aAAc,mBAE1EwxB,UAAWxD,KAAAA,UAAcK,WAAWH,SAAS,CAC3C,eAAgB2B,GAA0BhC,QAAQ7tB,QAAQ,aAAc,gBAE1EyxB,aAAczD,KAAAA,UAAcK,WAAWH,SAAS,CAC9C,eAAgB2B,GAA0BhC,QAAQ7tB,QAAQ,aAAc,qBAEzEquB,WACHqD,kBAAmB1D,KAAAA,SAChBI,MAAM,UAAW,SAAU,UAAW,WACtCC,WACAH,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,sBACtE,WAAY6vB,GAA0BpC,KAAKztB,QAAQ,aAAc,sBAAsBA,QAAQ,YAAa,yCAG/GgI,IAAI,GACJkmB,SAAS,CACR,aAAc,4DAEf7oB,MAAM,sBAG0B2oB,KAAAA,OAAW,CAC5C2D,WAAY3D,KAAAA,SACTN,IAAI,CAAEsD,OAAQ,CAAC,OAAQ,WACvB3D,WACAE,QAAQ,yFACRW,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,eACtE,aAAc6vB,GAA0BnC,IAAI1tB,QAAQ,aAAc,eAClE,sBAAuB,mDACvB,eAAgB6vB,GAA0BxC,SAASrtB,QAAQ,aAAc,mBAE5EqF,MAAM,iBAGoC2oB,KAAAA,OAAW,CACtD4D,UAAW5D,KAAAA,UACRK,WACAH,SAAS,CACR,eAAgB2B,GAA0BhC,QAAQ7tB,QAAQ,aAAc,eAE5E6xB,aAAc7D,KAAAA,SACXJ,UACA5lB,IAAI,IACJuI,IAAI,QACJ8d,WACAS,KAAK,YAAa,CACjBC,IAAI,EACJC,KAAMhB,KAAAA,WAAeE,SAAS,CAC5B,eAAgB2B,GAA0BxC,SAASrtB,QAAQ,aAAc,qBAG5EkuB,SAAS,CACR,cAAe2B,GAA0BlC,OAAO3tB,QAAQ,aAAc,iBACtE,iBAAkB6vB,GAA0BjC,QAAQ5tB,QAAQ,aAAc,iBAC1E,aAAc,4CACd,aAAc,0DAGjBgI,IAAI,GACJkmB,SAAS,CACR,aAAc,sEAEf7oB,MAAM,2BAG6B2oB,KAAAA,OAAW,CAC/C8D,UAAW9D,KAAAA,OACR0B,MACA1nB,IAAI,OACJqmB,WACAH,SAAS,CACR,YAAa2B,GAA0B/B,KAAK9tB,QAAQ,aAAc,cAClE,WAAY,qCAEhB+xB,YAAa/D,KAAAA,UACVK,WACAH,SAAS,CACR,eAAgB2B,GAA0BhC,QAAQ7tB,QAAQ,aAAc,kBAE5E0xB,kBAAmB1D,KAAAA,SAChBI,MAAM,UAAW,SAAU,UAAW,WACtCC,WACAH,SAAS,CACR,cAAe2B,GAA0BzC,OAAOptB,QAAQ,aAAc,sBACtE,WAAY6vB,GAA0BpC,KAAKztB,QAAQ,aAAc,sBAAsBA,QAAQ,YAAa,yCAG/GgI,IAAI,GACJkmB,SAAS,CACR,aAAc,0DAEf7oB,MAAM,oBAG4B2oB,KAAAA,OAAW,CAC9CiC,eAAgBjC,KAAAA,SACbT,QAAQwC,IACR1C,WACAa,SAAS,CACR,cAAe,yCACf,sBAAuB,8CACvB,eAAgB,kDAEpB7qB,QAAS2qB,KAAAA,SACNmB,MAAM,IACN5e,IAAI,KACJ8d,WACAH,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,WACjE,aAAcmtB,GAAqB5c,IAAIvQ,QAAQ,aAAc,WAAWA,QAAQ,aAAc,WAElGgyB,MAAOhE,KAAAA,QACJoB,MACCpB,KAAAA,OAAW,CACTxX,KAAMwX,KAAAA,SACHI,MAAM,OAAQ,QAAS,QAAS,QAAS,UAAW,OACpDf,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,cACjE,WAAYmtB,GAAqBM,KAAKztB,QAAQ,aAAc,cAAcA,QAAQ,YAAa,6CAEnGqD,QAAS2qB,KAAAA,SACNX,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,iBACjE,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,mBAExEilB,YAAa+I,KAAAA,SACVI,SAASpB,IACTK,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,gBACjE,WAAY,mDACZ,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,kBAExEgY,UAAWgW,KAAAA,SACRN,IAAI,CAAEsD,OAAQ,CAAC,OAAQ,WACvB3C,WACAH,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,aACjE,aAAcmtB,GAAqBO,IAAI1tB,QAAQ,aAAc,eAEjE0B,MAAOssB,KAAAA,SACJI,MAAM,SAAU,SAAU,aAC1BG,QAAQ,UACRL,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,SACjE,WAAYmtB,GAAqBM,KAAKztB,QAAQ,aAAc,SAASA,QAAQ,YAAa,+BAE9F6kB,SAAUmJ,KAAAA,OAAW,CACnBtS,KAAMsS,KAAAA,SAAaJ,UAAU5lB,IAAI,GAAGuI,IAAI0c,IAAeoB,WAAWH,SAAS,CACzE,aAAc,iCAEhBvpB,SAAUqpB,KAAAA,SAAahmB,IAAI,GAAGqmB,WAC9BlrB,MAAO6qB,KAAAA,SAAaJ,UAAU5lB,IAAI,GAAGqmB,WACrClsB,OAAQ6rB,KAAAA,SAAaJ,UAAU5lB,IAAI,GAAGqmB,aACrCA,cAGN9d,IAAI2c,IACJmB,WACAH,SAAS,CACR,aAAcf,GAAqBK,MAAMxtB,QAAQ,aAAc,SAC/D,YAAa,iCAEjBiyB,QAASjE,KAAAA,SACNT,QAAQwC,IACR1B,WACAH,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,WACjE,sBAAuBmtB,GAAqBG,KAAKttB,QAAQ,aAAc,aAE3EkyB,YAAalE,KAAAA,OACV0B,MACA1nB,IAAI,OACJqmB,WACAH,SAAS,CACR,YAAa,uCACb,WAAY,sCAEhBiE,cAAenE,KAAAA,SACZT,QAAQwC,IACR1B,WACAc,MAAM,MACNjB,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,iBACjE,sBAAuBmtB,GAAqBG,KAAKttB,QAAQ,aAAc,mBAE3EoyB,SAAUpE,KAAAA,SACPT,QAAQwC,IACR1B,WACAc,MAAM,MACNjB,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,aACjE,sBAAuBmtB,GAAqBG,KAAKttB,QAAQ,aAAc,eAE3EqvB,SAAUrB,KAAAA,QACPoB,MAAMpB,KAAAA,SAAaT,QAAQ,yBAAyBW,SAAS,CAC5D,sBAAuB,sFAExB3d,IAAI,IACJ8d,WACAH,SAAS,CACR,aAAcf,GAAqBK,MAAMxtB,QAAQ,aAAc,YAC/D,YAAa,oCAEjBsvB,SAAUtB,KAAAA,QACPoB,MAAMpB,KAAAA,SAAaT,QAAQ,yBAAyBW,SAAS,CAC5D,sBAAuB,sFAExB3d,IAAI,IACJ8d,WACAH,SAAS,CACR,aAAcf,GAAqBK,MAAMxtB,QAAQ,aAAc,YAC/D,YAAa,sCAGhBywB,GAAG,UAAW,SACdvC,SAAS,CACR,iBAAkB,gDAEnB7oB,MAAM,mBAE6B2oB,KAAAA,OAAW,CAC/CM,KAAMN,KAAAA,SACHJ,UACA5lB,IAAI,GACJumB,QAAQ,GACRL,SAAS,CACR,cAAef,GAAqBQ,OAAO3tB,QAAQ,aAAc,QACjE,aAAc,4BAElBwuB,MAAOR,KAAAA,SACJJ,UACA5lB,IAAI,GACJuI,IAAI,KACJge,QAAQ,IACRL,SAAS,CACR,cAAef,GAAqBQ,OAAO3tB,QAAQ,aAAc,SACjE,aAAc,2BACd,aAAc,4BAElB+E,OAAQipB,KAAAA,OACL0B,MACArB,WACAH,SAAS,CACR,YAAaf,GAAqBW,KAAK9tB,QAAQ,aAAc,YAEjEoyB,SAAUpE,KAAAA,SACPT,QAAQwC,IACR1B,WACAH,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,aACjE,sBAAuBmtB,GAAqBG,KAAKttB,QAAQ,aAAc,eAE3EyuB,KAAMT,KAAAA,SACHI,MAAM,gBAAiB,kBACvBG,QAAQ,kBACRL,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,QACjE,WAAYmtB,GAAqBM,KAAKztB,QAAQ,aAAc,QAAQA,QAAQ,YAAa,qCAE5FqF,MAAM,oBAE2B2oB,KAAAA,OAAW,CAC7CqE,UAAWrE,KAAAA,SACRT,QAAQwC,IACR1C,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,cACjE,sBAAuBmtB,GAAqBG,KAAKttB,QAAQ,aAAc,cACvE,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,kBAEvEqF,MAAM,kBAEwB2oB,KAAAA,OAAW,CAC1CqE,UAAWrE,KAAAA,SACRT,QAAQwC,IACR1C,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,cACjE,sBAAuBmtB,GAAqBG,KAAKttB,QAAQ,aAAc,cACvE,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,gBAExEsyB,WAAYtE,KAAAA,SACTzd,IAAI,KACJ8c,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,eACjE,aAAcmtB,GAAqB5c,IAAIvQ,QAAQ,aAAc,eAAeA,QAAQ,aAAc,SAClG,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,mBAEvEqF,MAAM,eAE2B2oB,KAAAA,OAAW,CAC7C3X,MAAO2X,KAAAA,SACJiB,OACAjnB,IAAI,GACJuI,IAAI,KACJ8c,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,SACjE,aAAc,qCACd,aAAcmtB,GAAqB5c,IAAIvQ,QAAQ,aAAc,SAASA,QAAQ,aAAc,OAC5F,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,WAExEwuB,MAAOR,KAAAA,SACJJ,UACA5lB,IAAI,GACJuI,IAAI,KACJge,QAAQ,IACRL,SAAS,CACR,cAAef,GAAqBQ,OAAO3tB,QAAQ,aAAc,SACjE,aAAc,2BACd,aAAc,4BAElBuyB,WAAYvE,KAAAA,SACTT,QAAQwC,IACR1B,WACAH,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,gBACjE,sBAAuBmtB,GAAqBG,KAAKttB,QAAQ,aAAc,kBAE3EwyB,UAAWxE,KAAAA,SACRI,MAAM,QAAS,QAAS,QAAS,OAAQ,UAAW,OACpDC,WACAH,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,cACjE,WAAYmtB,GAAqBM,KAAKztB,QAAQ,aAAc,cAAcA,QAAQ,YAAa,+CAElGqF,MAAM,kBAEuB2oB,KAAAA,OAAW,CACzCiC,eAAgBjC,KAAAA,SACbT,QAAQwC,IACR1C,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,mBACjE,sBAAuBmtB,GAAqBG,KAAKttB,QAAQ,aAAc,mBACvE,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,qBAExEyyB,SAAUzE,KAAAA,SACPiB,OACA1e,IAAI,KACJ8c,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,YACjE,aAAcmtB,GAAqB5c,IAAIvQ,QAAQ,aAAc,YAAYA,QAAQ,aAAc,OAC/F,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,cAExErB,QAASqvB,KAAAA,QACNoB,MAAMpB,KAAAA,SAAaiB,OAAO1e,IAAI,MAC9BvI,IAAI,GACJuI,IAAI,IACJ8c,WACAa,SAAS,CACR,aAAcf,GAAqBK,MAAMxtB,QAAQ,aAAc,WAC/D,YAAamtB,GAAqBnlB,IAAIhI,QAAQ,aAAc,WAAWA,QAAQ,aAAc,KAC7F,YAAa,iCACb,cAAemtB,GAAqBC,OAAOptB,QAAQ,aAAc,eACjE,aAAcmtB,GAAqB5c,IAAIvQ,QAAQ,aAAc,eAAeA,QAAQ,aAAc,OAClG,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,aAExE0yB,mBAAoB1E,KAAAA,UACjBK,WACAH,SAAS,CACR,eAAgBf,GAAqBU,QAAQ7tB,QAAQ,aAAc,0BAEvE2yB,cAAe3E,KAAAA,OACZ0B,MACA1nB,IAAI,OACJqmB,WACAH,SAAS,CACR,YAAaf,GAAqBW,KAAK9tB,QAAQ,aAAc,mBAC7D,WAAY,4CAEfqF,MAAM,cAEqB2oB,KAAAA,OAAW,CACvC4E,YAAa5E,KAAAA,SACVJ,UACA5lB,IAAI,GACJqlB,WACAa,SAAS,CACR,cAAef,GAAqBQ,OAAO3tB,QAAQ,aAAc,gBACjE,aAAc,kCACd,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,oBAEvEqF,MAAM,YAEwB2oB,KAAAA,OAAW,CAC1C6E,SAAU7E,KAAAA,SACPiB,OACA1e,IAAI,IACJ8c,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,YACjE,aAAcmtB,GAAqB5c,IAAIvQ,QAAQ,aAAc,YAAYA,QAAQ,aAAc,MAC/F,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,gBAEvEqF,MAAM,eAEiC2oB,KAAAA,OAAW,CACnD8E,SAAU9E,KAAAA,SACPI,SAASpB,IACTK,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,aACjE,WAAY,gDACZ,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,eAExEilB,YAAa+I,KAAAA,SACVI,MAAM,OAAQ,QAAS,QAAS,QAAS,UAAW,OACpDf,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,gBACjE,WAAYmtB,GAAqBM,KAAKztB,QAAQ,aAAc,gBAAgBA,QAAQ,YAAa,2CACjG,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,kBAExE+yB,SAAU/E,KAAAA,SACPJ,UACA5lB,IAAI,GACJuI,IAAI0c,IACJoB,WACAH,SAAS,CACR,cAAef,GAAqBQ,OAAO3tB,QAAQ,aAAc,aACjE,aAAc,oCACd,aAAc,mCAEjBqF,MAAM,wBAG2B2oB,KAAAA,OAAW,CAC7CqE,UAAWrE,KAAAA,SACRT,QAAQwC,IACR1C,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,cACjE,sBAAuBmtB,GAAqBG,KAAKttB,QAAQ,aAAc,cACvE,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,gBAExEgzB,sBAAuBhF,KAAAA,QACpBoB,MAAMpB,KAAAA,SAAaT,QAAQwC,IAAa7B,SAAS,CAChD,sBAAuBf,GAAqBG,KAAKttB,QAAQ,aAAc,kCAExEgI,IAAI,GACJuI,IAAI,IACJ8c,WACAa,SAAS,CACR,aAAcf,GAAqBK,MAAMxtB,QAAQ,aAAc,2BAC/D,YAAamtB,GAAqBnlB,IAAIhI,QAAQ,aAAc,2BAA2BA,QAAQ,aAAc,KAC7G,YAAa,+CACb,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,6BAExEizB,QAASjF,KAAAA,SACNzd,IAAI,KACJ8d,WACAH,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,WACjE,aAAcmtB,GAAqB5c,IAAIvQ,QAAQ,aAAc,WAAWA,QAAQ,aAAc,WAEjGqF,MAAM,kBAG+B2oB,KAAAA,OAAW,CACjDiC,eAAgBjC,KAAAA,SACbT,QAAQwC,IACR1C,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,mBACjE,sBAAuBmtB,GAAqBG,KAAKttB,QAAQ,aAAc,mBACvE,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,qBAExEqD,QAAS2qB,KAAAA,SACNmB,MAAM,IACN5e,IAAI,KACJ8d,WACAH,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,WACjE,aAAcmtB,GAAqB5c,IAAIvQ,QAAQ,aAAc,WAAWA,QAAQ,aAAc,WAElGgyB,MAAOhE,KAAAA,QACJoB,MACCpB,KAAAA,OAAW,CACTxX,KAAMwX,KAAAA,SACHI,MAAM,OAAQ,QAAS,QAAS,QAAS,UAAW,OACpDf,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,cACjE,WAAYmtB,GAAqBM,KAAKztB,QAAQ,aAAc,cAAcA,QAAQ,YAAa,6CAEnGqD,QAAS2qB,KAAAA,SACNX,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,iBACjE,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,mBAExEilB,YAAa+I,KAAAA,SACVI,SAASpB,IACTK,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,gBACjE,WAAY,mDACZ,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,kBAExEgY,UAAWgW,KAAAA,SACRN,IAAI,CAAEsD,OAAQ,CAAC,OAAQ,WACvB3C,WACAH,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,aACjE,aAAcmtB,GAAqBO,IAAI1tB,QAAQ,aAAc,eAEjE6kB,SAAUmJ,KAAAA,OAAW,CACnBtS,KAAMsS,KAAAA,SAAaJ,UAAU5lB,IAAI,GAAGuI,IAAI0c,IAAeoB,WAAWH,SAAS,CACzE,aAAc,iCAEhBvpB,SAAUqpB,KAAAA,SAAahmB,IAAI,GAAGqmB,WAC9BlrB,MAAO6qB,KAAAA,SAAaJ,UAAU5lB,IAAI,GAAGqmB,WACrClsB,OAAQ6rB,KAAAA,SAAaJ,UAAU5lB,IAAI,GAAGqmB,aACrCA,cAGN9d,IAAI2c,IACJmB,WACAH,SAAS,CACR,aAAcf,GAAqBK,MAAMxtB,QAAQ,aAAc,SAC/D,YAAa,iCAEjBiyB,QAASjE,KAAAA,SACNT,QAAQwC,IACR1B,WACAH,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,WACjE,sBAAuBmtB,GAAqBG,KAAKttB,QAAQ,aAAc,aAE3EoyB,SAAUpE,KAAAA,SACPT,QAAQwC,IACR1B,WACAH,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,aACjE,sBAAuBmtB,GAAqBG,KAAKttB,QAAQ,aAAc,iBAE1EqF,MAAM,sBAG8B2oB,KAAAA,OAAW,CAChDkF,WAAYlF,KAAAA,QACToB,MAAMpB,KAAAA,SAAaT,QAAQwC,IAAa7B,SAAS,CAChD,sBAAuBf,GAAqBG,KAAKttB,QAAQ,aAAc,sBAExEgI,IAAI,GACJuI,IAAI,KACJ8c,WACAa,SAAS,CACR,aAAcf,GAAqBK,MAAMxtB,QAAQ,aAAc,eAC/D,YAAamtB,GAAqBnlB,IAAIhI,QAAQ,aAAc,eAAeA,QAAQ,aAAc,KACjG,YAAa,gDACb,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,mBAEvEqF,MAAM,qBAGyB2oB,KAAAA,OAAW,CAC3CiC,eAAgBjC,KAAAA,SACbT,QAAQwC,IACR1C,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,mBACjE,sBAAuBmtB,GAAqBG,KAAKttB,QAAQ,aAAc,mBACvE,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,qBAExEmzB,gBAAiBnF,KAAAA,SACdT,QAAQwC,IACR1C,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,qBACjE,sBAAuBmtB,GAAqBG,KAAKttB,QAAQ,aAAc,qBACvE,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,uBAExEqD,QAAS2qB,KAAAA,SACNmB,MAAM,IACN5e,IAAI,KACJ8d,WACAH,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,WACjE,aAAcmtB,GAAqB5c,IAAIvQ,QAAQ,aAAc,WAAWA,QAAQ,aAAc,WAElGgyB,MAAOhE,KAAAA,QACJoB,MACCpB,KAAAA,OAAW,CACTxX,KAAMwX,KAAAA,SACHI,MAAM,OAAQ,QAAS,QAAS,QAAS,UAAW,OACpDf,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,cACjE,WAAYmtB,GAAqBM,KAAKztB,QAAQ,aAAc,cAAcA,QAAQ,YAAa,6CAEnGqD,QAAS2qB,KAAAA,SACNX,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,iBACjE,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,mBAExEilB,YAAa+I,KAAAA,SACVI,SAASpB,IACTK,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,gBACjE,WAAY,mDACZ,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,kBAExEgY,UAAWgW,KAAAA,SACRN,IAAI,CAAEsD,OAAQ,CAAC,OAAQ,WACvB3C,WACAH,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,aACjE,aAAcmtB,GAAqBO,IAAI1tB,QAAQ,aAAc,eAEjE6kB,SAAUmJ,KAAAA,OAAW,CACnBtS,KAAMsS,KAAAA,SAAaJ,UAAU5lB,IAAI,GAAGuI,IAAI0c,IAAeoB,WAAWH,SAAS,CACzE,aAAc,iCAEhBvpB,SAAUqpB,KAAAA,SAAahmB,IAAI,GAAGqmB,WAC9BlrB,MAAO6qB,KAAAA,SAAaJ,UAAU5lB,IAAI,GAAGqmB,WACrClsB,OAAQ6rB,KAAAA,SAAaJ,UAAU5lB,IAAI,GAAGqmB,aACrCA,cAGN9d,IAAI2c,IACJmB,WACAH,SAAS,CACR,aAAcf,GAAqBK,MAAMxtB,QAAQ,aAAc,SAC/D,YAAa,mCAGhBywB,GAAG,UAAW,SACdvC,SAAS,CACR,iBAAkB,wCAEnB7oB,MAAM,gBAGgC2oB,KAAAA,OAAW,CAClDqE,UAAWrE,KAAAA,SACRT,QAAQwC,IACR1C,WACAa,SAAS,CACR,cAAef,GAAqBC,OAAOptB,QAAQ,aAAc,cACjE,sBAAuBmtB,GAAqBG,KAAKttB,QAAQ,aAAc,cACvE,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,gBAExEozB,OAAQpF,KAAAA,UACLX,WACAa,SAAS,CACR,eAAgBf,GAAqBU,QAAQ7tB,QAAQ,aAAc,UACnE,eAAgBmtB,GAAqBE,SAASrtB,QAAQ,aAAc,cAEvEqF,MAAM,uBASsB,SAACguB,EAAQC,GAAgD,IAAvCC,EAAY30B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,mBAC9D,MAAM,MAAE+S,GAAU0hB,EAAOG,SAASF,EAAS,CAAEG,YAAY,EAAOC,cAAc,IAC9E,GAAI/hB,EAAO,CACT,MAAMgiB,EAAUhiB,EAAMgiB,QAAQhY,KAAIiY,GAAKA,EAAEC,UAAShR,KAAK,MACvD,MAAM,IAAIiR,MAAM,GAAGP,MAAiBI,IACtC,CACF,GCpoCMI,GAAmB,IACnB9G,GAAgB,SAIhB+G,GAAar0B,IAA8D,IAADs0B,EAAA,IAA5D,EAAExsB,EAAC,EAAEC,EAAC,SAAEwsB,EAAQ,QAAElM,EAAO,YAAEmM,EAAW,cAAEC,GAAez0B,EACzE,MAAO00B,EAAMC,IAAWpkB,EAAAA,EAAAA,UAAS,CAAEqkB,MAAO,GAAIrC,YAAa,MACpDjb,EAAiB0J,IAAsBzQ,EAAAA,EAAAA,UAAS,KAChDskB,EAAWC,IAAgBvkB,EAAAA,EAAAA,UAAS,OACpCwkB,EAAeC,IAAoBzkB,EAAAA,EAAAA,UAAS,OAC5C0kB,EAAeC,IAAoB3kB,EAAAA,EAAAA,UAAS,IAC5C4kB,EAAeC,IAAoB7kB,EAAAA,EAAAA,UAAS,UAC5C8kB,EAAUC,IAAe/kB,EAAAA,EAAAA,WAAS,IAClCqF,EAASC,IAActF,EAAAA,EAAAA,WAAS,IAChCyB,EAAOujB,IAAYhlB,EAAAA,EAAAA,UAAS,OAC5BilB,EAAgBC,IAAqBllB,EAAAA,EAAAA,UAAS,IAC9CmlB,EAAcC,IAAmBplB,EAAAA,EAAAA,WAAS,IAC1CqlB,EAAeC,IAAoBtlB,EAAAA,EAAAA,WAAS,IAC5CulB,EAAcC,IAAmBxlB,EAAAA,EAAAA,UAAS,OAC1CylB,EAAWC,IAAgB1lB,EAAAA,EAAAA,UAAS,MACrC2lB,GAAehmB,EAAAA,EAAAA,QAAO,MACtBimB,GAAmBjmB,EAAAA,EAAAA,QAAO,MAC1BkmB,GAAYlmB,EAAAA,EAAAA,QAAO,MACnBmmB,GAAkBnmB,EAAAA,EAAAA,QAAO,MACzBomB,IAAoBpmB,EAAAA,EAAAA,QAAO,MAC3BqmB,IAAoBrmB,EAAAA,EAAAA,QAAO,OAC3B,MAAEiV,GAAK,iBAAEqR,GAAgB,WAAEC,GAAU,QAAEC,GAAO,YAAEC,ICxD3BC,MAC3B,MAAOzR,EAAO0R,IAAYtmB,EAAAA,EAAAA,UAAS,KAC5ByB,EAAOujB,IAAYhlB,EAAAA,EAAAA,UAAS,OAC5BilB,EAAgBC,IAAqBllB,EAAAA,EAAAA,UAAS,GAC/ComB,GAAczmB,EAAAA,EAAAA,QAAO,IAAI+F,KAGzB6gB,GAAenmB,EAAAA,EAAAA,cAAaqN,GAC3BA,EAIAqP,GAAqB/b,SAAS0M,EAAKnH,QAIpCmH,EAAKjC,KAAOuR,MACdiI,EAAS,iCACF,IALPA,EAAS,0BAA0BvX,EAAKnH,kDACjC,IALP0e,EAAS,qBACF,IAWR,IAGGiB,GAAmB7lB,EAAAA,EAAAA,cAAaiB,IACpC,MAAMmlB,EAAWC,MAAMrwB,KAAKiL,EAAE6I,OAAO0K,OAAO3e,OAAOswB,GAC/CC,EAAS73B,OAASimB,EAAMjmB,OAASquB,GACnCgI,EAAS,6BAGXsB,GAAUxS,GAAS,IAAIA,KAAS0S,KAChCxB,EAAS,MAAK,GACb,CAACpQ,EAAO2R,IAGLL,GAAa9lB,EAAAA,EAAAA,cAAanD,IAC9BqpB,GAAUxS,IACR,MAAM4S,EAAe5S,EAAK7W,GACpB2I,EAAMwgB,EAAY7lB,QAAQ6G,IAAIsf,GAKpC,OAJI9gB,IACF+gB,IAAIC,gBAAgBhhB,GACpBwgB,EAAY7lB,QAAQsmB,OAAOH,IAEtB5S,EAAK7d,QAAO,CAAC6wB,EAAGvM,IAAMA,IAAMtd,GAAM,GACzC,GACD,IAGG8pB,GAAc3mB,EAAAA,EAAAA,cAAYqG,MAAOmO,EAAOoS,KAC5C,IAEE,IAAK,IAAIzM,EAAI,EAAGA,GAAK,IAAKA,GAAK,SACvB,IAAI0M,SAASC,GAAYllB,WAAWklB,EAAS,OACnDF,EAAWzM,GAEb,OAAO3F,EAAMnJ,KAAKgC,IAAI,CACpBE,QAASF,EAAK0S,KACdva,IAAK+gB,IAAIQ,gBAAgB1Z,GACzBsH,YAAatH,EAAKnH,QAEtB,CAAE,MAAO8gB,GAEP,MADApC,EAAS,0BACHoC,CACR,IACC,IAGGjB,GAAU/lB,EAAAA,EAAAA,cAAY,KAC1BgmB,EAAY7lB,QAAQyG,SAASpB,GAAQ+gB,IAAIC,gBAAgBhhB,KACzDwgB,EAAY7lB,QAAQ8mB,QACpBf,EAAS,IACTpB,EAAkB,GAClBF,EAAS,KAAK,GACb,IAEH,MAAO,CACLpQ,QACA0R,WACA7kB,QACAujB,WACAC,iBACAC,oBACAe,mBACAC,aACAa,cACAZ,UACAC,cACD,ED/BqEC,GAChEiB,IAAWC,EAAAA,GAAAA,IAAev3B,GAAUA,EAAMC,YAAYu3B,KAAK,QAE3DC,IAAWC,EAAAA,GAAAA,UAAQhb,IAAgC,IAA7Bib,UAAWn0B,GAAG,MAAEo0B,GAAOlb,EAC7Cvd,KAAKC,IAAIoE,GAAM,KACjBqxB,EAAmC,UAAlBD,EAA4B,gBAAkB,SAC/DgD,EAAMC,iBACR,GACC,CAAEnI,QAAS4H,KAAa9C,KAE3BlkB,EAAAA,EAAAA,YAAU,KAAO,IAADwnB,EAGd,OAFiB,QAAjBA,EAAAjC,EAAUtlB,eAAO,IAAAunB,GAAjBA,EAAmBC,QACnBtX,EAAmB0T,EAAKE,OACjB,KACL8B,KACA6B,IAAe,CAChB,GACA,CAAC7B,MAEJ7lB,EAAAA,EAAAA,YAAU,KACJgkB,IAAcQ,IAChBiB,GAAkBxlB,QAAU8Q,aAAY,KACtCsT,GAAkB7Q,IAChB,MAAMmU,EAAOnU,EAAO,EAKpB,OAJW,IAAPmU,GAhDY,MAiDdD,KACAhD,EAAS,6DAEJiD,CAAI,GACX,GACD,MAEE,IAAM3W,cAAcyU,GAAkBxlB,WAC5C,CAAC+jB,EAAWQ,KAEfxkB,EAAAA,EAAAA,YAAU,KACJgkB,GAA+B,kBAAlBE,GAAqCsB,EAAgBvlB,UACpEulB,EAAgBvlB,QAAQ2nB,UAAY5D,EACpCwB,EAAgBvlB,QAAQ4nB,OAAOC,OAAOhB,IACpC5lB,QAAQC,MAAM,uBAAwB2lB,GACtCpC,EAAS,mCAAmC,KAGzC,KACDc,EAAgBvlB,UAClBulB,EAAgBvlB,QAAQ2nB,UAAY,KACtC,IAED,CAAC5D,EAAWE,IAEf,MAAM6D,IAAiBjoB,EAAAA,EAAAA,cAAYqG,UACjC,IACE,MAAM6hB,EAAuB,UAAThiB,EAAmB,CAAEiiB,OAAO,GAAS,CAAEA,OAAO,EAAMhsB,MAAO,CAAEtJ,MAAO,KAAMhB,OAAQ,MAChGu2B,QAAeC,UAAUC,aAAaC,aAAaL,GACnDM,EAAgB,IAAIC,cAAcL,EAAQ,CAC9CM,SAAmB,UAATxiB,EAAmB,aAAe,+BAExCyiB,EAAS,GACfH,EAAcI,gBAAmB3nB,GAAM0nB,EAAO5hB,KAAK9F,EAAEC,MACrDsnB,EAAcK,OAAS,KACrB,MAAMH,EAAoB,UAATxiB,EAAmB,aAAe,aAC7C4iB,EAAO,IAAIC,KAAKJ,EAAQ,CAAEziB,KAAMwiB,IAChCM,EAAW,GAAG9iB,KAAQ0K,KAAKD,aAC3BtD,EAAO,IAAI4b,KAAK,CAACH,GAAOE,EAAU,CAAE9iB,KAAMwiB,IAC5CI,EAAK1d,KAAOuR,GACdiI,EAAS,sCAGXiB,GAAiB,CAAE/b,OAAQ,CAAE0K,MAAO,CAACnH,MACrC+a,EAAOc,YAAYtiB,SAASuiB,GAAUA,EAAMC,SAAO,EAErDZ,EAAca,MAAM,KACpB7D,EAAiBrlB,QAAUqoB,EAC3BrE,EAAaiE,GACb/D,EAAiBne,GACjBqe,EAAiB,GACjBI,GAAY,GACZC,EAAS,KACX,CAAE,MAAOoC,GACPpC,EAAS,0EACTxjB,QAAQC,MAAM,mBAAoB2lB,EACpC,IACC,CAACnB,KAEEyD,IAAiBtpB,EAAAA,EAAAA,cAAY,KAC7BwlB,EAAiBrlB,SAAW+jB,IAAcQ,IAC5Cc,EAAiBrlB,QAAQopB,QACzB5E,GAAY,GACd,GACC,CAACT,EAAWQ,IAET8E,IAAkBxpB,EAAAA,EAAAA,cAAY,KAC9BwlB,EAAiBrlB,SAAW+jB,GAAaQ,IAC3Cc,EAAiBrlB,QAAQspB,SACzB9E,GAAY,GACd,GACC,CAACT,EAAWQ,IAETkD,IAAgB5nB,EAAAA,EAAAA,cAAY,KAC5BwlB,EAAiBrlB,UACnBqlB,EAAiBrlB,QAAQipB,OACzB5D,EAAiBrlB,QAAU,MAEzB+jB,GACFA,EAAUgF,YAAYtiB,SAASuiB,GAAUA,EAAMC,SAE7C1D,EAAgBvlB,UAClBulB,EAAgBvlB,QAAQ2nB,UAAY,MAEtC3D,EAAa,MACbE,EAAiB,MACjBE,EAAiB,GACjBI,GAAY,GACZzT,cAAcyU,GAAkBxlB,QAAQ,GACvC,CAAC+jB,IAOEwF,KALmB1pB,EAAAA,EAAAA,cAAY,KACnC4nB,KACAhD,EAAS,KAAK,GACb,CAACgD,MAE0B5nB,EAAAA,EAAAA,cAAaiB,IACzC,MACM0oB,EADgBtD,MAAMrwB,KAAKiL,EAAE6I,OAAO0K,OACT3e,QAAQwX,GAClCqP,GAAqB/b,SAAS0M,EAAKnH,QAIpCmH,EAAKjC,KAAOuR,MACdiI,EAAS,mBAAmBvX,EAAK0S,4BAC1B,IALP6E,EAAS,0BAA0BvX,EAAK0S,SACjC,KAQP4J,EAAWp7B,SACbs3B,GAAiB,CAAE/b,OAAQ,CAAE0K,MAAOmV,KACpC/E,EAAS,OAEXW,EAAaplB,QAAQ5Q,MAAQ,IAAI,GAChC,CAACs2B,MAEE+D,IAAe5pB,EAAAA,EAAAA,cAAYqG,UAC/B,GAAK0d,EAAKE,MAAMtF,QAAWnK,GAAMjmB,OAIjC,GAAIw1B,EAAKE,MAAM11B,OAASk1B,GACtBmB,EAAS,4CAGX,GAAIb,EAAKnC,aAAe,IAAIhR,KAAKmT,EAAKnC,aAAe,IAAIhR,KACvDgU,EAAS,6CADX,CAIA1f,GAAW,GACX0f,EAAS,MACT,IACE,MACM7xB,EAAU,CACdmT,KAFkBsO,GAAMjmB,OAASimB,GAAM,GAAGtO,KAAKF,MAAM,KAAK,GAAK,OAG/DzW,MAAOw0B,EAAKE,MAAMtF,QAAU,GAC5BpK,SAAU,CACRC,MAAOA,GAAMnJ,KAAI,CAACgC,EAAMxQ,KAAK,CAC3B0Q,QAASF,EAAK0S,KACdva,IAAKwgB,GAAY7lB,QAAQ6G,IAAIqG,IAASkZ,IAAIQ,gBAAgB1Z,GAC1DsH,YAAatH,EAAKnH,KAClB7R,SAAUgZ,EAAKnH,KAAK0O,WAAW,SAAW,OAAIpmB,MAEhD8T,MAAO,CAAC,EACRyc,SAAU,GACVC,SAAU,GACV6K,aAAc,GACdC,cAAe,CAAC,EAChBC,UAAW,KACXC,WAAY,OAGVvzB,EAAWotB,EACb,CAAE1sB,EAAG0sB,EAAYptB,SAASU,EAAGC,EAAGysB,EAAYptB,SAASW,EAAI,KACzD,CAAED,IAAGC,EAAGA,EAAI,KACV6yB,QAAiBrG,EACrB7wB,EACA0D,EAASU,EACTV,EAASW,EACT2sB,EAAKnC,aAAe,KACpBpN,IACC0V,GAAapF,EAAkBoF,KACrB,OAAXrG,QAAW,IAAXA,OAAW,EAAXA,EAAatiB,WAAY,MAEvBuiB,GAAiBmG,GACnBnG,EAAcmG,GAEhB/E,GAAiB,GACjBtjB,YAAW,KACToiB,EAAQ,CAAEC,MAAO,GAAIrC,YAAa,KAClCmE,KACArO,IACAwN,GAAiB,EAAM,GACtB,IACL,CAAE,MAAO8B,GACPpC,EAASoC,EAAIzD,SAAW,2BACxBniB,QAAQC,MAAM,gBAAiB2lB,EACjC,CAAC,QACC9hB,GAAW,GACX4f,EAAkB,EACpB,CApDA,MAVEF,EAAS,sCA8DX,GACC,CAACb,EAAMvP,GAAOoP,EAAUmC,GAASrO,EAASsO,GAAanC,EAAa1sB,EAAGC,EAAG0sB,IAEvEqG,IAAiBnqB,EAAAA,EAAAA,cAAaiB,IACpB,UAAVA,EAAEmL,KAAoBnL,EAAEmpB,UAAalG,IACvCjjB,EAAEwmB,iBACFmC,KACF,GACC,CAACA,GAAc1F,IAEZmG,IAAmB5pB,EAAAA,EAAAA,UAAQ,IAE7BwE,IACE8e,EAAKE,MAAMtF,SAAWnK,GAAMjmB,QAC9Bw1B,EAAKE,MAAM11B,OAASk1B,MAClBS,GAEH,CAACjf,EAAS8e,EAAKE,MAAOzP,GAAO0P,IAE1BoG,IAAoBtqB,EAAAA,EAAAA,cAAY,CAACqN,EAAMxQ,KAC3C,MAAM0tB,EAAUvE,GAAY7lB,QAAQ6G,IAAIqG,IAASkZ,IAAIQ,gBAAgB1Z,GAGrE,OAFA2Y,GAAY7lB,QAAQoI,IAAI8E,EAAMkd,IAG5B1oB,EAAAA,GAAAA,KAACgT,GAAAA,GAAI,CAACC,MAAI,EAAC/kB,GAAI,GAAGmP,UAChB2C,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAImhB,GAAiBzP,0BAA0B7b,SACjDmO,EAAKnH,KAAK0O,WAAW,UACpB/S,EAAAA,GAAAA,KAACkT,GAAAA,cAAa,CACZxI,IAAKge,EACL/gB,IAAK,WAAW3M,EAAQ,IACxByF,MAAOkoB,GAAiBxP,kBACxBhG,OAAO,OACPC,aAAapT,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAImhB,GAAiBtP,wBAAwBhc,SAAC,uBAEhEmO,EAAKnH,KAAK0O,WAAW,UACvB7L,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAI,CAAE5S,SAAU,YAAayI,SAAA,EAChC2C,EAAAA,GAAAA,KAAA,SACE0K,IAAKge,EACLjoB,MAAOkoB,GAAiBvP,wBACxB1Q,UAAQ,EACRoC,QAAQ,WACR8d,OAAQF,EAAU,SAClB,aAAY,iBAAiB1tB,EAAQ,OAEvCgF,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAImhB,GAAiBE,oBAAoBxrB,UAC5C2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACToB,KAAK,QACLnB,QAASA,IAAM6b,GAAWjpB,GAC1BwM,GAAImhB,GAAiBrP,sBACrB,aAAY,eAAete,EAAQ,IAAIqC,UAEvC2C,EAAAA,GAAAA,KAAC8oB,EAAAA,EAAM,CAAC34B,SAAS,iBAIrBqb,EAAKnH,KAAK0O,WAAW,UACvB7L,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAImhB,GAAiBvO,iBAAiB/c,SAAA,EACzC2C,EAAAA,GAAAA,KAAA,SACE0K,IAAKge,EACLhgB,UAAQ,EACRjI,MAAO,CAAEzP,MAAO,QAChB8Z,QAAQ,WACR,aAAY,iBAAiB9P,EAAQ,OAEvCgF,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAImhB,GAAiB1O,sBAAqB,GAAO5c,SACnD,IAAImnB,MAAM,KAAKhb,KAAI,CAACqb,EAAGvM,KACtBtY,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAASf,GAAImhB,GAAiBzO,mBAAmB5B,IAA3CA,QAGdtY,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAImhB,GAAiBE,oBAAoBxrB,UAC5C2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACToB,KAAK,QACLnB,QAASA,IAAM6b,GAAWjpB,GAC1BwM,GAAImhB,GAAiBrP,sBACrB,aAAY,eAAete,EAAQ,IAAIqC,UAEvC2C,EAAAA,GAAAA,KAAC8oB,EAAAA,EAAM,CAAC34B,SAAS,kBAKvB6P,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAImhB,GAAiBtP,wBAAwBhc,UAChD6J,EAAAA,GAAAA,MAACW,EAAAA,EAAU,CAACC,QAAQ,UAASzK,SAAA,CAAC,SAAOmO,EAAK0S,aA1D1B,QAAQljB,IA8DzB,GAER,CAACipB,GAAYE,KAEV4E,IAAkBnqB,EAAAA,EAAAA,UAAQ,KAC9B,IAAKyjB,EAAW,OAAO,KACvB,MAAM2G,EAAU97B,KAAK+7B,MAAMxG,EAAgB,IAErCvvB,EAAQ,aAA+B,UAAlBqvB,EAA4B,QAAU,YAAYyG,MAD7DvG,EAAgB,IACgEh1B,WAAWy7B,SAAS,EAAG,OAEvH,OACEhiB,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAImhB,GAAiB/O,wBAAwBvc,SAAA,EAChD2C,EAAAA,GAAAA,KAAC8W,GAAAA,EAAI,CACH5jB,MAAOA,EACPsU,GAAImhB,GAAiB9O,mBACrB,aAAY,aAAa0I,eAER,kBAAlBA,GACCviB,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAImhB,GAAiB5O,2BAA2B1c,UACnD2C,EAAAA,GAAAA,KAAA,SACEM,IAAKujB,EACLpjB,MAAOkoB,GAAiB3O,iBACxBgE,OAAK,EACLmL,UAAQ,EACR,aAAW,oCAIfnpB,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAImhB,GAAiB1O,sBAAqB,GAAM5c,SAClD,IAAImnB,MAAM,KAAKhb,KAAI,CAACqb,EAAGvM,KACtBtY,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAASf,GAAImhB,GAAiBzO,mBAAmB5B,IAA3CA,QAIhBpR,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAImhB,GAAiB7O,uBAAuBzc,SAAA,EAC/C2C,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAOixB,EAAW,SAAW,QAASwG,UAAU,MAAKhsB,UAC5D2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAASya,EAAW8E,GAAkBF,GACtCjgB,GAAImhB,GAAiBhP,iBAAiBkJ,GACtC,aAAYA,EAAW,mBAAqB,kBAAkBxlB,SAE7DwlB,GAAW7iB,EAAAA,GAAAA,KAACspB,GAAAA,EAAS,CAACn5B,SAAS,WAAa6P,EAAAA,GAAAA,KAACupB,GAAAA,EAAK,CAACp5B,SAAS,eAGjE6P,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAM,OAAOy3B,UAAU,MAAKhsB,UACnC2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAAS2d,GACTve,GAAImhB,GAAiBhP,kBAAiB,GACtC,aAAW,iBAAgBtc,UAE3B2C,EAAAA,GAAAA,KAACwpB,GAAAA,EAAI,CAACr5B,SAAS,mBAIjB,GAEP,CAACkyB,EAAWE,EAAeE,EAAeI,EAAU4E,GAAgBE,GAAiB5B,KAElF0D,IAAkBtrB,EAAAA,EAAAA,cAAakG,GAAS,IACrCke,IAAkBle,EAAO0hB,KAAkBK,GAAe/hB,IAChE,CAACke,EAAe6D,GAAgBL,KAE7B2D,IAAiB9qB,EAAAA,EAAAA,UAAQ,KAE3BsI,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAI,IAAKmhB,GAAiBlP,cAAe7kB,SAAU,SAAUL,OAAQ,OAAQ/C,IAAK,EAAGJ,cAAe,UAAWiM,SAAA,EAClH6J,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAI,CAAErW,QAAS,OAAQK,IAAK,EAAGR,MAAO,QAASqM,SAAA,EAClD2C,EAAAA,GAAAA,KAAA,SACEqE,KAAK,OACLslB,OAAQ9O,GAAqBnK,KAAK,KAClCkZ,UAAQ,EACRC,SAAUhC,GACVpnB,MAAO,CAAEtP,QAAS,QAClBmP,IAAKojB,EACLvjB,SAAUiD,GAAWif,KAEvBriB,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAM,eAAey3B,UAAU,MAAKhsB,UAC3C2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAASA,IAAMsb,EAAaplB,QAAQwrB,QACpCtiB,GAAImhB,GAAiBhP,kBAAiB,GACtC,aAAW,eACXxZ,SAAUiD,GAAWif,EAAUhlB,UAE/B2C,EAAAA,GAAAA,KAAC+pB,GAAAA,EAAU,CAAC55B,SAAS,eAGzB+W,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAI,CAAE5S,SAAU,WAAYD,KAAM,GAAI0I,SAAA,EACzC2C,EAAAA,GAAAA,KAACgqB,EAAAA,EAAS,CACR5W,YAAa4O,EAAc,sBAAwB,uBACnDt0B,MAAOw0B,EAAKE,MACZyH,SAAWzqB,GAAM+iB,GAAStQ,IAAI,IAAWA,EAAMuQ,MAAOhjB,EAAE6I,OAAOva,UAC/D4c,WAAYge,GACZ2B,WAAS,EACTnU,WAAS,EACToU,WAAS,EACTC,QAAS,EACTriB,QAAQ,WACRN,GAAI,IACCmhB,GAAiB5P,eACpB,2BAA4B,CAC1BtpB,aAAc,OACdS,QAAS,WACT2G,UAAW,OACX1G,SAAU,aAGdi6B,WAAY,CAAEC,UAAWzI,IACzB,aAAYI,EAAc,gBAAkB,gBAC5C7hB,SAAUiD,KAEZ8D,EAAAA,GAAAA,MAACW,EAAAA,EAAU,CACTC,QAAQ,UACRN,GAAI,IACCmhB,GAAiB3P,eAAekJ,EAAKE,MAAM11B,OAASk1B,IACvDhtB,SAAU,WACVyB,MAAO,MACPD,OAAQ,MACRjG,SAAU,WAEZ,YAAU,SAAQkN,SAAA,CAEjB6kB,EAAKE,MAAM11B,OAAO,IAAEk1B,UAGzB5hB,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAAsCC,QAAS,CAAE3W,QAAS,EAAGsE,MAAO,IAAO2G,QAAS,CAAEjL,QAAS,EAAGsE,MAAO,GAAKpF,WAAY,CAAE4C,SAAU,IAAM6K,SAClI,UAAlBklB,GACCviB,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAM,6CAA6Cy3B,UAAU,MAAKhsB,UACzE2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAASqhB,GAAgB,SACzBjiB,GAAImhB,GAAiBhP,kBAAiB,GACtC,aAAW,uBACXxZ,SAAUiD,EAAQ/F,UAElB2C,EAAAA,GAAAA,KAACwpB,GAAAA,EAAI,CAACr5B,SAAS,cAGC,kBAAlBoyB,GACFviB,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAM,6CAA6Cy3B,UAAU,MAAKhsB,UACzE2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAASqhB,GAAgB,iBACzBjiB,GAAImhB,GAAiBhP,kBAAiB,GACtC,aAAW,uBACXxZ,SAAUiD,EAAQ/F,UAElB2C,EAAAA,GAAAA,KAACwpB,GAAAA,EAAI,CAACr5B,SAAS,eAInB6P,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CACNx3B,MAAOyzB,GAAW,SAA2B,UAAlB1C,EAA4B,QAAU,8CAAgD,SAA2B,UAAlBA,EAA4B,QAAU,4CAChK0G,UAAU,MAAKhsB,UAEf2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,IACLqd,KACJpd,QAASA,IAAMqhB,GAAgB9G,EAAhB8G,GACfpT,aAAcA,KACRgP,KACFtB,GAAkBzlB,QAAUyB,YAAW,KACrC6iB,EAAmC,UAAlBD,EAA4B,gBAAkB,QAAQ,GAvdtE,KAydL,EAEF2H,WAAYA,KACNjF,IAAYtB,GAAkBzlB,UAChCqI,aAAaod,GAAkBzlB,SAC/BylB,GAAkBzlB,QAAU,KAC9B,EAEFisB,cAAgBnrB,IACTimB,KACHjmB,EAAEwmB,iBACFhD,EAAmC,UAAlBD,EAA4B,gBAAkB,SACjE,EAEFnb,GAAImhB,GAAiBhP,kBAAiB,GACtC,aAAY0L,GAAW,SAA2B,UAAlB1C,EAA4B,QAAU,yCAA2C,SAA2B,UAAlBA,EAA4B,QAAU,gDAChK,gBAAc,OACdxiB,SAAUiD,EAAQ/F,SAEC,UAAlBslB,GAA4B3iB,EAAAA,GAAAA,KAACwqB,GAAAA,EAAG,CAACr6B,SAAS,WAAa6P,EAAAA,GAAAA,KAACyqB,GAAAA,EAAQ,CAACt6B,SAAS,eAvDlEoyB,GAAiBI,IA4DlC3iB,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAOyzB,GAAW,yCAA2C,0CAA2CgE,UAAU,MAAKhsB,UAC9H2C,EAAAA,GAAAA,KAAC0qB,EAAAA,EAAM,CACLtiB,QAAUhJ,IACHkkB,GACHyE,KAEF3oB,EAAEwmB,gBAAgB,EAEpB2E,cAAgBnrB,IACTimB,KACHjmB,EAAEwmB,iBACFrC,EAAgBnkB,EAAEurB,eACpB,EAEFtU,aAAcA,KACRgP,KACFtB,GAAkBzlB,QAAUyB,YAAW,KACrCwjB,EAAgBG,EAAaplB,QAAQ,GAlgBhC,KAogBT,EAEFgsB,WAAYA,KACNjF,IAAYtB,GAAkBzlB,UAChCqI,aAAaod,GAAkBzlB,SAC/BylB,GAAkBzlB,QAAU,KAC9B,EAEFwJ,QAAQ,YACRpZ,MAAM,UACN8Y,GAAI,IAAKmhB,GAAiBpP,kBAAmBtpB,SAAU,QACvDkQ,SAAUqoB,GACV,aAAW,qCACX,gBAAelF,EAAe,qBAAkB32B,EAChD,gBAAc,OAAM0Q,SAEnB+F,GAAUpD,EAAAA,GAAAA,KAACsJ,EAAAA,EAAgB,CAACC,KAAM,GAAI7a,MAAM,YAAeszB,EAAc,QAAU,mBAI1FhiB,EAAAA,GAAAA,KAAC6C,GAAW,CAAC3R,QAASgxB,EAAKE,MAAOtf,gBAAiB0L,EAAoBzL,YAAaA,CAACY,EAAKU,KACpF,CAAC,UAAW,cAAcvF,SAASuF,KAAUV,EAAImC,UACnD2d,EAAa,CAAE9f,IAAKA,EAAIA,IAAKU,QAC/B,QAIL,CAACke,EAAeF,EAAWjf,EAASykB,GAAuBzB,GAAgBL,GAAe7D,EAAKE,MAAOJ,EAAasG,GAAgBP,GAAcS,GAAkB7V,GAAOgQ,EAAe0C,GAAUG,GAAUiE,KAE1M/T,IAAmB9W,EAAAA,EAAAA,UAAQ,IAC1B4kB,GAEHtc,EAAAA,GAAAA,MAACyO,EAAAA,EAAM,CAACC,OAAQ4N,EAAW3N,QAASA,IAAM4N,EAAa,MAAO/vB,SAAS,KAAKoiB,WAAS,EAAAzY,SAAA,EACnF2C,EAAAA,GAAAA,KAACsW,EAAAA,EAAW,CAAAjZ,SAAC,kBACb6J,EAAAA,GAAAA,MAAC+N,EAAAA,EAAa,CAAA5X,SAAA,EACZ2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACC,QAAQ,QAAQyO,cAAY,EAAAlZ,SAAC,gFAGzC2C,EAAAA,GAAAA,KAAC+H,GAAAA,EAAI,CAACC,KAAMwb,EAAU7f,IAAKsE,OAAO,SAASC,IAAI,WAAWV,GAAI,CAAEhO,UAAW,aAAc6D,SACtFmmB,EAAU7f,UAGf3D,EAAAA,GAAAA,KAACwW,EAAAA,EAAa,CAAAnZ,UACZ2C,EAAAA,GAAAA,KAAC0qB,EAAAA,EAAM,CAACtiB,QAASA,IAAMqb,EAAa,MAAO/0B,MAAM,UAAS2O,SAAC,eAb1C,MAmBtB,CAACmmB,IAEJ,OACEtc,EAAAA,GAAAA,MAACC,EAAAA,EAAOC,IAAG,CAACC,QAAS,CAAE3W,QAAS,EAAGsE,MAAO,KAAQ2G,QAAS,CAAEjL,QAAS,EAAGsE,MAAOouB,EAAgB,KAAO,GAAKxzB,WAAY,CAAE4C,SAAU,IAAM6K,SAAA,EACxI6J,EAAAA,GAAAA,MAACyO,EAAAA,EAAM,CACLC,MAAM,EACNC,QAASA,EACTK,WAAY,CAAE1O,GAAI,IAAKmhB,GAAiBrO,iBAAkB1lB,SAAU,aACpE4S,GAAI,CAAE,sBAAuBmhB,GAAiBpO,qBAC9C,kBAAgB,oBAChBja,IAAKsjB,EAAUvmB,SAAA,EAEf2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAASyN,EACTrO,GAAI,CAAE5S,SAAU,WAAYM,IAAK,GAAImB,MAAO,GAAI9B,OAAQ,EAAG7F,MAAO,WAAYwB,QAAS,MAAO,UAAW,CAAE4D,QAAS,aACpH,aAAW,oBACXqM,SAAUiD,GAAW4f,EAAiB,EAAE3lB,UAExC2C,EAAAA,GAAAA,KAAC4qB,GAAAA,EAAK,CAACz6B,SAAS,aAElB6P,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACvD,GAAG,oBAAoBkD,GAAI,IAAKmhB,GAAiB7P,WAAY+R,GAAI,GAAIxtB,SAC9E2kB,EAAc,iBAAmB,wBAEpC9a,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAImhB,GAAiBnO,gBAAgBnd,SAAA,CACvCmC,IACCQ,EAAAA,GAAAA,KAAC8qB,GAAAA,EAAK,CAACC,SAAS,QAAQlV,QAASA,IAAMkN,EAAS,MAAOvb,GAAImhB,GAAiBlO,gBAAgBpd,SACzFmC,IAGJwiB,IACC9a,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAI,CAAEzW,GAAI,GAAIsM,SAAA,EACjB2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACC,QAAQ,YAAYN,GAAI,CAAEzW,GAAI,GAAKpC,WAAY,UAAW0O,SAAC,kBAGvE2C,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACb,UAAU,aAAaF,GAAI,CAAEvQ,WAAY,YAAaU,YAAa,eAAgBX,GAAI,EAAGtI,MAAO,iBAAkByK,UAAW,SAAUgc,EAAG,GAAI9X,UAClJ6J,EAAAA,GAAAA,MAACW,EAAAA,EAAU,CAACC,QAAQ,QAAOzK,SAAA,CACL,QADKykB,EACxBE,EAAY9wB,eAAO,IAAA4wB,OAAA,EAAnBA,EAAqBp0B,MAAMyW,MAAM,OAAOF,MAAM,EAAG,IAAIyM,KAAK,KAAK,cAKvEiC,GAAMjmB,OAAS,IACdwa,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAImhB,GAAiBzP,0BAA0B7b,SAAA,EAClD2C,EAAAA,GAAAA,KAACgT,GAAAA,GAAI,CAAC/f,WAAS,EAAC1C,QAAS,EAAE8M,SACxBsV,GAAM1O,MAAM,EAAG,GAAGuF,KAAI,CAACgC,EAAMxQ,IAAUytB,GAAkBjd,EAAMxQ,OAEjE2X,GAAMjmB,OAAS,IACdwa,EAAAA,GAAAA,MAACW,EAAAA,EAAU,CAACC,QAAQ,UAAUN,GAAI,CAAElX,GAAI,EAAG5B,MAAO,kBAAmB2O,SAAA,CAAC,IAClEsV,GAAMjmB,OAAS,EAAE,sBAK1Bq8B,GACA3lB,GAAW4f,EAAiB,IAC3B9b,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAImhB,GAAiBtO,uBAAuBhd,SAAA,EAC/C2C,EAAAA,GAAAA,KAACgrB,GAAAA,EAAc,CAACljB,QAAQ,cAAcpa,MAAOs1B,KAC7C9b,EAAAA,GAAAA,MAACW,EAAAA,EAAU,CAACC,QAAQ,UAAUN,GAAI,CAAE9Y,MAAO,kBAAmB2O,SAAA,CAAC,cACjD2lB,EAAe,WAIjChjB,EAAAA,GAAAA,KAAC4U,GAAAA,EAAQ,CAACC,GAAIqO,EAAcxd,QAAQ,OAAMrI,UACxC2C,EAAAA,GAAAA,KAACgqB,EAAAA,EAAS,CACR92B,MAAM,sBACNmR,KAAK,iBACL3W,MAAOw0B,EAAKnC,YACZ8J,SAAWzqB,GAAM+iB,GAAStQ,IAAI,IAAWA,EAAMkO,YAAa3gB,EAAE6I,OAAOva,UACrEooB,WAAS,EACTmV,gBAAiB,CAAEC,QAAQ,GAC3B1jB,GAAI,IAAKmhB,GAAiB5P,eAAgBhoB,GAAI,GAC9Cq5B,WAAY,CAAEv0B,KAAK,IAAIkZ,MAAOoc,cAAclnB,MAAM,EAAG,KACrD,aAAW,iBACX9D,SAAUiD,GAAWif,MAGxBqH,SAGJhU,KACU,EAkBjBmM,GAAWhhB,aAAe,CACxBmhB,YAAa,KACbC,cAAe,MAGjB,MAAM3K,GAAgBA,CAACC,EAAWC,IAE9BD,EAAUjiB,IAAMkiB,EAAUliB,GAC1BiiB,EAAUhiB,IAAMiiB,EAAUjiB,GAC1BgiB,EAAUwK,WAAavK,EAAUuK,UACjCxK,EAAU1B,UAAY2B,EAAU3B,UAChCuV,EAAAA,EAAAA,SAAQ7T,EAAUyK,YAAaxK,EAAUwK,cACzCzK,EAAU0K,gBAAkBzK,EAAUyK,cAI1C,IAAenhB,EAAAA,EAAAA,MAAK+gB,GAAYvK,I,eExsBhC,MAAM+T,GAAkB,iBCOXC,GAAiBA,CAACnuB,EAAOG,KAAiB,IAADiuB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAApvB,EAAAE,EAAAmvB,EAAAC,EAAArb,EAAAsb,EAAA7f,EAAA8f,EAAAnf,EAAAof,EAAAC,EACpD,IAAKjvB,GAA0B,kBAAVA,EAEnB,OADAoC,QAAQqB,KAAK,uBAAwBzD,GAC9B,CACLuC,SAAU,GACVxO,QAAS,CAAEmT,KAAM,OAAQ3W,MAAO,GAAIglB,SAAU,CAAEC,MAAO,GAAIuK,SAAU,GAAIC,SAAU,KACnFpe,cAAyB,OAAXzB,QAAW,IAAXA,OAAW,EAAXA,EAAayB,eAAgB,GAC3CE,UAAqB,OAAX3B,QAAW,IAAXA,OAAW,EAAXA,EAAa2B,WAAY,GACnCrK,SAAU,CAAEU,EAAG,EAAGC,EAAG,GACrBib,gBAAiB,KACjBT,gBAAiB,GACjBsc,cAAc,EACd7c,SAAU,GACV8c,UAAU,EACV1b,MAAO,CAAE2b,MAAO,EAAG1b,WAAY,EAAG2b,WAAY,GAC9C/d,YAAY,IAAIM,MAAOoc,cACvBjb,OAAQ,WACRuc,aAAc,KACd3iB,SAAU,KACVjL,WAAW,EACX6tB,UAAW,CAAEC,MAAO,GAAIC,OAAQ,KAIpC,MAAM17B,EAAUiM,EAAMjM,SAAW,CAAEmT,KAAM,OAAQ3W,MAAO,GAAIglB,SAAU,CAAC,GACjEA,EAAW,CACfC,OAAuB,QAAhB4Y,EAAAr6B,EAAQwhB,gBAAQ,IAAA6Y,OAAA,EAAhBA,EAAkB5Y,QAAS,GAClCuK,UAA0B,QAAhBsO,EAAAt6B,EAAQwhB,gBAAQ,IAAA8Y,OAAA,EAAhBA,EAAkBtO,WAAY,GACxCC,UAA0B,QAAhBsO,EAAAv6B,EAAQwhB,gBAAQ,IAAA+Y,OAAA,EAAhBA,EAAkBtO,WAAY,GACxC1c,OAAuB,QAAhBirB,EAAAx6B,EAAQwhB,gBAAQ,IAAAgZ,OAAA,EAAhBA,EAAkBjrB,QAAS,CAAC,EACnCunB,cAA8B,QAAhB2D,EAAAz6B,EAAQwhB,gBAAQ,IAAAiZ,OAAA,EAAhBA,EAAkB3D,eAAgB,GAChDC,eAA+B,QAAhB2D,EAAA16B,EAAQwhB,gBAAQ,IAAAkZ,OAAA,EAAhBA,EAAkB3D,gBAAiB,CAAC,EACnDC,WAA2B,QAAhB2D,EAAA36B,EAAQwhB,gBAAQ,IAAAmZ,OAAA,EAAhBA,EAAkB3D,YAAa,KAC1CC,YAA4B,QAAhB2D,EAAA56B,EAAQwhB,gBAAQ,IAAAoZ,OAAA,EAAhBA,EAAkB3D,aAAc,MAG9C,MAAO,CACLzoB,SAAUvC,EAAMuC,UAAY,GAC5BxO,QAAS,CAAEmT,KAAMnT,EAAQmT,MAAQ,OAAQ3W,MAAOwD,EAAQxD,OAAS,GAAIglB,YACrE3T,aAAc5B,EAAM4B,eAA2B,OAAXzB,QAAW,IAAXA,OAAW,EAAXA,EAAayB,eAAgB,GACjEE,SAAU9B,EAAMkvB,aAAe,YAAclvB,EAAM8B,WAAuB,OAAX3B,QAAW,IAAXA,OAAW,EAAXA,EAAa2B,WAAY,GACxFrK,SAAU,CAAEU,EAAGxI,OAAqB,QAAf4P,EAACS,EAAMvI,gBAAQ,IAAA8H,OAAA,EAAdA,EAAgBpH,IAAM,EAAGC,EAAGzI,OAAqB,QAAf8P,EAACO,EAAMvI,gBAAQ,IAAAgI,OAAA,EAAdA,EAAgBrH,IAAM,GAC/Eib,gBAAiBrT,EAAMqT,iBAAmB,KAC1CT,gBAAiB5S,EAAM4S,iBAAmB,GAC1C1S,UAAwB,QAAd0uB,EAAA5uB,EAAME,gBAAQ,IAAA0uB,OAAA,EAAdA,EAAgBviB,KAAIqjB,GAASvB,GAAeuB,EAAOvvB,OAAiB,GAC9E+uB,eAAgBlvB,EAAMkvB,aACtB7c,SAAUrS,EAAMqS,UAAY,GAC5B8c,SAAUnvB,EAAMmvB,WAAanvB,EAAMqS,UAAY,IAAIC,MAAKC,GAAKA,EAAE3Q,gBAA4B,OAAXzB,QAAW,IAAXA,OAAW,EAAXA,EAAayB,kBAAiB,EAC9G6R,MAAO,CACL2b,MAA8B,QAAzBP,EAAa,QAAbrb,EAAExT,EAAMyT,aAAK,IAAAD,OAAA,EAAXA,EAAaE,kBAAU,IAAAmb,EAAAA,GAAK7uB,EAAMqS,UAAY,IAAI9iB,OACzDmkB,WAAmC,QAAzBob,EAAa,QAAb7f,EAAEjP,EAAMyT,aAAK,IAAAxE,OAAA,EAAXA,EAAayE,kBAAU,IAAAob,EAAAA,GAAK9uB,EAAMqS,UAAY,IAAI9iB,OAC9D8/B,WAAmC,QAAzBN,EAAa,QAAbnf,EAAE5P,EAAMyT,aAAK,IAAA7D,OAAA,EAAXA,EAAayf,kBAAU,IAAAN,EAAAA,EAAI,GAEzCzd,WAAYtR,EAAMsR,aAAc,IAAIM,MAAOoc,cAC3C2B,WAAY3vB,EAAM2vB,YAAc3vB,EAAMsR,aAAc,IAAIM,MAAOoc,cAC/Djb,OAAQ/S,EAAM+S,QAAU,WACxBuc,aAActvB,EAAMsvB,cAAgB,KACpC3iB,SAAU3M,EAAM2M,UAAY,KAC5BjL,YAAa1B,EAAM0B,UACnB6tB,UAAW,CACTC,OAAsB,QAAfR,EAAAhvB,EAAMuvB,iBAAS,IAAAP,OAAA,EAAfA,EAAiBQ,QAAS,GACjCC,QAAuB,QAAfR,EAAAjvB,EAAMuvB,iBAAS,IAAAN,OAAA,EAAfA,EAAiBQ,SAAU,IAEtC,ECpDGG,GACW,2BADXA,GAEc,uBAFdA,GAGc,uBAHdA,GAIa,iCAJbA,GAKc,qCALdA,GAMqB,8BANrBA,GAOc,yBAPdA,GAQoB,6BARpBA,GASgB,yBAThBA,GAUK,qBAGLC,GAAS,CACbC,eAAgB,GAChBC,gBAAiB,KACjBC,YAAa,IACbC,cAAe,GACfC,cAAe,MAmCjB,MAAMC,GAAa,IA/BnB,MACEC,WAAAA,CAAYC,GACVC,KAAKD,SAAWA,EAChBC,KAAKC,MAAQ,IAAIjqB,GACnB,CAEA0B,GAAAA,CAAIoF,GACF,IAAKkjB,KAAKC,MAAMzoB,IAAIsF,GAAM,OAAO,KACjC,MAAM,MAAE7c,EAAK,UAAE4gB,GAAcmf,KAAKC,MAAMvoB,IAAIoF,GAC5C,OAAIwE,KAAKD,MAAQR,EAAY0e,GAAOE,iBAClCO,KAAKC,MAAM9I,OAAOra,GACX,OAETkjB,KAAKC,MAAM9I,OAAOra,GAClBkjB,KAAKC,MAAMhnB,IAAI6D,EAAK,CAAE7c,QAAO4gB,cACtB5gB,EACT,CAEAgZ,GAAAA,CAAI6D,EAAK7c,GACP,GAAI+/B,KAAKC,MAAMnkB,MAAQkkB,KAAKD,SAAU,CACpC,MAAMG,EAAWF,KAAKC,MAAME,OAAO5H,OAAOt4B,MAC1C+/B,KAAKC,MAAM9I,OAAO+I,EACpB,CACAF,KAAKC,MAAMhnB,IAAI6D,EAAK,CAAE7c,QAAO4gB,UAAWS,KAAKD,OAC/C,CAEAsW,KAAAA,GACEqI,KAAKC,MAAMtI,OACb,GAG8B4H,GAAOC,gBAY1BY,GAAY,SAACC,EAAOpgB,EAASpQ,EAAaywB,EAAUC,GAAwC,IAA9BC,EAAgBxhC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GACzF,MAAOyhC,EAAQC,IAAapwB,EAAAA,EAAAA,UAAS,KAC9BZ,EAAOixB,IAAYrwB,EAAAA,EAAAA,UAAS,OAC5BswB,EAAYC,IAAiBvwB,EAAAA,EAAAA,UAAS,CAAEoe,KAAM,EAAGE,MAAO2Q,GAAOI,cAAemB,MAAO,EAAGC,SAAS,KACjGC,EAAWC,IAAgB3wB,EAAAA,EAAAA,UAAS,OACpCyB,EAAOujB,IAAYhlB,EAAAA,EAAAA,UAAS,MAC7B4wB,GAAqBjxB,EAAAA,EAAAA,QAAO,MAE5BkxB,GAAczwB,EAAAA,EAAAA,cAClB,CAACgnB,EAAKzD,KACJ,GAAiB,eAAbyD,EAAIjH,KAAuB,OAAO8G,QAAQC,QAAQ,MACtD,MAAM/U,EAASiV,EAAIjV,QAAU,IACd,MAAXA,GAA6B,MAAXA,IACpB6d,EAAS,yCACTC,EAAS,WAEX,MAAM5M,EAAeM,GAAWyD,EAAIzD,SAAWqL,GAE/C,OADAhK,EAAS3B,GACF4D,QAAQ6J,OAAO,IAAIlN,MAAMP,GAAc,GAEhD,CAAC2M,EAAUC,IAGPc,GAAiB3wB,EAAAA,EAAAA,cACrBqG,MAAOgH,EAAMsiB,EAAO/I,KAClB,IACE,MAAMjS,EAActH,EAAKnH,KAAKF,MAAM,KAAK,IACnC,aAAE4qB,EAAY,QAAErjB,EAASoH,YAAakc,QF/BbxqB,OAAOmc,EAAU7N,EAAagb,KACnEjQ,GAAgBhC,KAAAA,SAAaX,WAAYyF,EAAU,oBACnD9C,GAAgBhC,KAAAA,SAAaX,WAAYpI,EAAa,uBACtD,IAIE,aAHuBmc,EAAAA,GAAAA,IAAK,GAAG5D,mBAAiC,CAAE1K,WAAU7N,eAAe,CACzFoc,QAAS,CAAEC,cAAe,UAAUrB,QAEtBzuB,KAAKnO,SAAW,IAClC,CAAE,MAAOsO,GACP,MAAM4vB,EAAAA,GAAAA,IAAe5vB,EACvB,GEqB4E6vB,CACpE7jB,EAAKnH,KACLyO,EACAgb,GAGIwB,EAAM,IAAIC,eAWhB,OAVAD,EAAI1Z,KAAK,MAAOmZ,GAAc,GAC9BO,EAAIE,iBAAiB,eAAgBhkB,EAAKnH,MAE1CirB,EAAIG,OAAOC,WAAc/J,IACvB,GAAIA,EAAMgK,iBAAkB,CAC1B,MAAMC,EAAU1iC,KAAKS,MAAOg4B,EAAMkK,OAASlK,EAAM4I,MAAS,KAChD,OAAVxJ,QAAU,IAAVA,GAAAA,EAAa6K,EACf,GAGK,IAAI5K,SAAQ,CAACC,EAAS4J,KAC3BS,EAAIQ,OAAS,KACQ,MAAfR,EAAIpf,OACN+U,EAAQ,CACNvZ,UACAoH,YAAakc,EACbzlB,KAAMiC,EAAKjC,KACX5F,IAAKorB,EAAa5qB,MAAM,KAAK,KAG/B0qB,EAAO,IAAIlN,MAAM,6BAA6B2N,EAAIpf,UACpD,EAEFof,EAAIS,QAAU,IAAMlB,EAAO,IAAIlN,MAAM,kBACrC2N,EAAIU,KAAKxkB,EAAK,GAElB,CAAE,MAAO2Z,GACP,OAAOyJ,EAAYzJ,EAAK4H,GAC1B,IAEF,CAAC6B,IAGGqB,GAAkB9xB,EAAAA,EAAAA,cACtBqG,iBAAiD,IAA1C0rB,EAAOzjC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAAG0jC,EAAM1jC,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAAEyjC,EAAM3jC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GACjC,IAAKqhC,EAAO,OAAOc,EAAY,IAAIjN,MAASoL,IAC5C,GAAY,OAAPrf,QAAO,IAAPA,IAAAA,EAASoP,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IAEtD,MAAM,KAAE5Q,EAAO,EAAC,MAAEE,EAAQ2Q,GAAOI,eAAkB8C,EAC7CG,EAAW,GAAGrD,GAAOK,wBAAwB3f,KAAW4iB,KAAKC,UAAU,IAAKL,EAAS/T,OAAME,YAC3FmU,EAAalD,GAAWnoB,IAAIkrB,GAElC,GAAIG,IAAeJ,EAIjB,OAHAjC,EAAUqC,EAAWtC,QAAU,IAC/BI,EAAckC,EAAWnC,YAAc,CAAElS,OAAME,QAAOkS,MAAO,EAAGC,SAAS,IACzEE,EAAa8B,EAAWC,OAAS,MAC1BzL,QAAQC,QAAQuL,GAGzBzN,EAAS,MAET,IAAK,IAAD2N,EAAAC,EAAAC,EAAAC,EACwB,QAA1BH,EAAA/B,EAAmBrwB,eAAO,IAAAoyB,GAA1BA,EAA4BI,QAC5BnC,EAAmBrwB,QAAU,IAAIyyB,gBACjC,MAAMC,EAAkBb,GAAUxB,EAAmBrwB,QAAQ6xB,OAEvD9wB,QFnKgBmF,eAAOkJ,EAASogB,GAAiC,IAA1BthC,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAAG0jC,EAAM1jC,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACvEkxB,GAAgBjC,GAAYlO,EAAS,mBACrCmQ,GAAgB7B,GAAaxvB,EAAS,yBACtC,IAME,aALuB2Y,EAAAA,GAAAA,IAAI,GAAGkmB,MAAmB3d,IAAW,CAC1DwhB,QAAS,CAAEC,cAAe,UAAUrB,KACpCmD,OAAQzkC,EACR2jC,OAAQA,aAAkBe,YAAcf,OAASxjC,KAEnC0S,KAAKnO,SAAW,CAAEg9B,OAAQ,GAC5C,CAAE,MAAO1uB,GACP,MAAM4vB,EAAAA,GAAAA,IAAe5vB,EACvB,CACF,CEsJ2B2xB,CAAezjB,EAASogB,EAAO,IAAKoC,EAAS/T,OAAME,SAAS2U,GAC/E,IAAK3xB,EAAM,MAAM,IAAIsiB,MAAM,oBAE3B,MAAMyP,EAAmB/xB,EAAK6uB,OAAO1kB,KAAKrM,IAAK,IAAA4uB,EAAA,MAAM,IAChDT,GAAenuB,EAAOG,GACzBD,UAAwB,QAAd0uB,EAAA5uB,EAAME,gBAAQ,IAAA0uB,OAAA,EAAdA,EAAgBviB,KAAKqjB,GAAUvB,GAAeuB,EAAOvvB,OAAiB,GACjF,IAED6wB,GAAWtc,GAAUue,EAAS,IAAIve,KAASuf,GAAoBA,IAC/D9C,EAAc,CACZnS,MAAqB,QAAfwU,EAAAtxB,EAAKgvB,kBAAU,IAAAsC,OAAA,EAAfA,EAAiBxU,OAAQA,EAC/BE,OAAsB,QAAfuU,EAAAvxB,EAAKgvB,kBAAU,IAAAuC,OAAA,EAAfA,EAAiBvU,QAASA,EACjCkS,OAAsB,QAAfsC,EAAAxxB,EAAKgvB,kBAAU,IAAAwC,OAAA,EAAfA,EAAiBtC,QAAS,EACjCC,QAAS4C,EAAiB1kC,SAAW2vB,IAEvCqS,EAAarvB,EAAKoxB,OAAS,MAE3B,MAAMY,EAAY,CAAEnD,OAAQkD,EAAkB/C,WAAYhvB,EAAKgvB,WAAYoC,MAAOpxB,EAAKoxB,OAEvF,OADAnD,GAAW5mB,IAAI2pB,EAAUgB,GAClBrM,QAAQC,QAAQoM,EACzB,CAAE,MAAOlM,GACP,MAAiB,eAAbA,EAAIjH,KAA8B8G,QAAQC,QAAQ,MAC/C2J,EAAYzJ,EAAK4H,GAC1B,CACF,GACA,CAACe,EAAOpgB,EAASpQ,EAAasxB,IAG1B0C,GAA2B1yB,EAAAA,EAAAA,UAAQ,IAChCO,MAAS,CAAC+wB,EAASC,EAAQC,EAAQmB,KACxCtB,EAAgBC,EAASC,EAAQC,GAC9BvT,MAAM2U,GAAWD,EAAS,KAAMC,KAChCrL,OAAOhB,GAAQoM,EAASpM,EAAK,OAAM,GACrC6H,GAAOG,cACT,CAAC8C,IAEEwB,GAAiBtzB,EAAAA,EAAAA,cACrBqG,eACEtT,EACAoE,EACAC,GAQI,IAADm8B,EAAAC,EAAApG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,IAPH+F,EAAanlC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,KAChBolC,EAAWplC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GACXyjB,EAAMzjB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,WACTszB,EAAWtzB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,KACdqd,EAAQrd,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,KACXkmB,EAAKlmB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GACRs4B,EAAUt4B,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAEV,IAAKmhC,EAAO,OAAOc,EAAY,IAAIjN,MAASoL,IAC5C,GAAY,OAAPrf,QAAO,IAAPA,IAAAA,EAASoP,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IACtD,GAAIhgC,MAAMuI,IAAMvI,MAAMwI,GAAI,OAAOq5B,EAAY,IAAIjN,MAASoL,IAC1D,IAAY,OAAP77B,QAAO,IAAPA,GAAc,QAAPwgC,EAAPxgC,EAASxD,aAAK,IAAAgkC,IAAdA,EAAgB5U,UAAWnK,EAAMjmB,OAAQ,OAAOkiC,EAAY,IAAIjN,MAASoL,IAE9EhK,EAAS,MAET,MAAM+O,EAAa,CACjBztB,KAAMsO,EAAMjmB,QAAsB,QAAbilC,EAAAhf,EAAM,GAAGtO,YAAI,IAAAstB,OAAA,EAAbA,EAAextB,MAAM,KAAK,KAAM,QAAUjT,EAAQmT,MAAQ,OAC/E3W,MAAOwD,EAAQxD,OAAS,GACxBglB,SAAU,CACRC,MAAO,GACPuK,UAA0B,QAAhBqO,EAAAr6B,EAAQwhB,gBAAQ,IAAA6Y,OAAA,EAAhBA,EAAkBrO,WAAY,GACxCC,UAA0B,QAAhBqO,EAAAt6B,EAAQwhB,gBAAQ,IAAA8Y,OAAA,EAAhBA,EAAkBrO,WAAY,GACxC1c,OAAuB,QAAhBgrB,EAAAv6B,EAAQwhB,gBAAQ,IAAA+Y,OAAA,EAAhBA,EAAkBhrB,QAAS,CAAC,EACnCunB,cAA8B,QAAhB0D,EAAAx6B,EAAQwhB,gBAAQ,IAAAgZ,OAAA,EAAhBA,EAAkB1D,eAAgB,GAChDC,eAA+B,QAAhB0D,EAAAz6B,EAAQwhB,gBAAQ,IAAAiZ,OAAA,EAAhBA,EAAkB1D,gBAAiB,CAAC,EACnDC,WAA2B,QAAhB0D,EAAA16B,EAAQwhB,gBAAQ,IAAAkZ,OAAA,EAAhBA,EAAkB1D,YAAa,KAC1CC,YAA4B,QAAhB0D,EAAA36B,EAAQwhB,gBAAQ,IAAAmZ,OAAA,EAAhBA,EAAkB1D,aAAc,OAI1C4J,EAAkB,CACtBryB,SAAU,QAAQqP,KAAKD,QACvB5d,QAAS4gC,EACTl9B,SAAU,CAAEU,IAAGC,KACfib,gBAAiBohB,EACjB7hB,gBAAiB,GACjBsc,aAAcwF,EACd9yB,aAAczB,EAAYyB,aAC1BE,SAAU4yB,EAAc,YAAcv0B,EAAY2B,SAClDwP,YAAY,IAAIM,MAAOoc,cACvB3b,SAAU,GACVoB,MAAO,CAAEC,WAAY,EAAG2b,WAAY,EAAGwF,cAAe,EAAGC,YAAa,GACtE/hB,SACAuc,aAAc1M,EACdjW,SAAkB,OAARA,QAAQ,IAARA,GAAAA,EAAUwT,SAAWxT,EAAW,KAC1CjL,WAAW,EACXxB,SAAU,IAGZ8wB,GAAWtc,GAAS,IAAIA,EAAMkgB,KAE9B,IACE,MAAMG,QAAsBlN,QAAQmN,IAClCxf,EAAMnJ,KAAKgC,GAASsjB,EAAetjB,EAAMsiB,GAAQzF,GAAuB,OAAVtD,QAAU,IAAVA,OAAU,EAAVA,EAAasD,EAAW1V,EAAMjmB,aAGxF0lC,EAAe,IAChBN,EACHztB,KAAM6tB,EAAcxlC,OAASwlC,EAAc,GAAGpf,YAAY3O,MAAM,KAAK,GAAK2tB,EAAWztB,KACrFqO,SAAU,IACLof,EAAWpf,SACdC,MAAOuf,IAILG,OF3KgB7tB,OAC5BkJ,EACAxc,EACAoE,EACAC,EACAq8B,EACAC,EACAS,EACApiB,EACA6P,EACAjW,EACA6I,EACAmb,KAEAjQ,GAAgBjC,GAAYlO,EAAS,mBACrCmQ,GAAgBnB,GAAexrB,EAAS,mBACxC2sB,GAAgBT,GAAgB,CAAE9nB,IAAGC,KAAK,oBAC1CsoB,GAAgBjC,GAAY0W,EAAa,uBACrCV,GAAe/T,GAAgBjC,GAAYgW,EAAe,yBAC1D9nB,GAAU+T,GAAgBR,GAAgBvT,EAAU,oBAC/C,OAAL6I,QAAK,IAALA,GAAAA,EAAOjmB,QACTmxB,GACEhC,KAAAA,QAAYoB,MACVpB,KAAAA,OAAW,CACTlY,IAAKkY,KAAAA,SAAaN,MAAMW,WACxBxQ,QAASmQ,KAAAA,SAAaX,WACtBpI,YAAa+I,KAAAA,SAAaX,WAC1B3R,KAAMsS,KAAAA,SAAazd,IAAI,UAAkB8c,cAE3C9c,IAAI,IACNuU,EACA,iBAGJ,IAAK,IAAD4f,EAAAC,EACF,MAAMrR,EAAU,CACdjwB,QAAS,IACJA,EACHwhB,SAAU,IACLxhB,EAAQwhB,SACXC,MAAOA,GAAS,KAGpB/d,SAAU,CAAEU,IAAGC,KACf82B,aAAcwF,EACd9yB,aAAcuzB,EACdpiB,SACAuc,aAAc1M,GAAe,MAE3B6R,IAAezQ,EAAQ3Q,gBAAkBohB,GACzC9nB,IAAUqX,EAAQrX,SAAWA,GAEjC,MAGM3M,EAA6B,QAAxBo1B,SAHYtD,EAAAA,GAAAA,IAAK,GAAG5D,MAAmB3d,IAAWyT,EAAS,CACpE+N,QAAS,CAAEC,cAAe,UAAUrB,QAEfzuB,KAAKnO,eAAO,IAAAqhC,GAAQ,QAARC,EAArBD,EAAuBrE,cAAM,IAAAsE,OAAR,EAArBA,EAAgC,GAC9C,IAAKr1B,IAAUA,EAAMuC,SAAU,MAAM,IAAIiiB,MAAM,sCAC/C,OAAOxkB,CACT,CAAE,MAAOqC,GACP,MAAM4vB,EAAAA,GAAAA,IAAe5vB,EACvB,GE+GiCizB,CACzB/kB,EACA0kB,EACA98B,EACAC,EACAq8B,EACAC,EACAv0B,EAAYyB,aACZmR,EACA6P,EACQ,OAARjW,QAAQ,IAARA,GAAAA,EAAUwT,SAAWxT,EAAW,KAChCooB,EACApE,GAGI4E,EAAkBpH,GACtB,IAAK+G,EAAcz9B,SAAUy9B,EAAaz9B,UAAY,CAAEU,IAAGC,MAC3D+H,GAwBF,OArBA6wB,GAAWtc,GACTA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaqyB,EAAgBryB,SAAWgzB,EAAkBC,MAE/ErE,GAAezc,IAAI,IAAWA,EAAM0c,MAAO1c,EAAK0c,MAAQ,MAEpDqD,GACFzD,GAAWtc,GACTA,EAAKrI,KAAKmpB,GACRA,EAAEjzB,WAAakyB,EACX,IACKe,EACH5iB,gBAAiB,IAAK4iB,EAAE5iB,iBAAmB,GAAK2iB,EAAgBhzB,UAChErC,SAAU,IAAKs1B,EAAEt1B,UAAY,GAAKq1B,GAClC9hB,MAAO,IAAK+hB,EAAE/hB,MAAOohB,eAAgBW,EAAE/hB,MAAMohB,eAAiB,GAAK,IAErEW,MAKVrF,GAAWlI,QACJJ,QAAQC,QAAQyN,EACzB,CAAE,MAAOvN,GAGP,OAFAgJ,GAAWtc,GAASA,EAAK7d,QAAQ2+B,GAAMA,EAAEjzB,WAAaqyB,EAAgBryB,aACtE4uB,GAAezc,IAAI,IAAWA,EAAM0c,MAAO1c,EAAK0c,MAAQ,MACjDK,EAAYzJ,EAAK4H,GAC1B,CACF,GACA,CAACe,EAAOpgB,EAASpQ,EAAasxB,EAAaE,IAGvC8D,GAAsBz0B,EAAAA,EAAAA,cAC1BqG,eAAO/E,EAASozB,GAAqC,IAADC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,IAA3B3gB,EAAKlmB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAAIs4B,EAAUt4B,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAC7C,IAAKmhC,EAAO,OAAOc,EAAY,IAAIjN,MAASoL,IAC5C,GAAY,OAAPrf,QAAO,IAAPA,IAAAA,EAASoP,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IACtD,GAAY,OAAPttB,QAAO,IAAPA,IAAAA,EAASqd,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IACtD,IAAK8F,IAAYU,OAAO3F,KAAKiF,GAASnmC,OAAQ,OAAOkiC,EAAY,IAAIjN,MAAS,yCAE9E,MAAM6R,EAAetF,EAAO3gC,MAAMolC,GAAMA,EAAEjzB,WAAaD,IACvD,IAAK+zB,EAAc,OAAO5E,EAAY,IAAIjN,MAAS,mBAEnD,GAAIkR,EAAQ3hC,UAAiC,QAAtB4hC,EAACD,EAAQ3hC,QAAQxD,aAAK,IAAAolC,IAArBA,EAAuBhW,UAAWnK,EAAMjmB,SAAW8mC,EAAatiC,QAAQwhB,SAASC,MAAMjmB,OAC7G,OAAOkiC,EAAY,IAAIjN,MAASoL,IAElC,GAAI8F,EAAQj+B,WAAa7H,MAAM8lC,EAAQj+B,SAASU,IAAMvI,MAAM8lC,EAAQj+B,SAASW,IAC3E,OAAOq5B,EAAY,IAAIjN,MAASoL,IAElChK,EAAS,MAET,MAAM+O,EAAae,EAAQ3hC,QACvB,CACEmT,KAAMsO,EAAMjmB,QACK,QAAbqmC,EAAApgB,EAAM,GAAGtO,YAAI,IAAA0uB,OAAA,EAAbA,EAAe5uB,MAAM,KAAK,KAAM,QAChC0uB,EAAQ3hC,QAAQmT,MAAQmvB,EAAatiC,QAAQmT,MAAQ,OACzD3W,MAAOmlC,EAAQ3hC,QAAQxD,OAAS,GAChCglB,SAAU,CACRC,MAAO6gB,EAAatiC,QAAQwhB,SAASC,OAAS,GAC9CuK,UAAkC,QAAxB8V,EAAAH,EAAQ3hC,QAAQwhB,gBAAQ,IAAAsgB,OAAA,EAAxBA,EAA0B9V,WAAYsW,EAAatiC,QAAQwhB,SAASwK,UAAY,GAC1FC,UAAkC,QAAxB8V,EAAAJ,EAAQ3hC,QAAQwhB,gBAAQ,IAAAugB,OAAA,EAAxBA,EAA0B9V,WAAYqW,EAAatiC,QAAQwhB,SAASyK,UAAY,GAC1F1c,OAA+B,QAAxByyB,EAAAL,EAAQ3hC,QAAQwhB,gBAAQ,IAAAwgB,OAAA,EAAxBA,EAA0BzyB,QAAS+yB,EAAatiC,QAAQwhB,SAASjS,OAAS,GACjFunB,cAAsC,QAAxBmL,EAAAN,EAAQ3hC,QAAQwhB,gBAAQ,IAAAygB,OAAA,EAAxBA,EAA0BnL,eAAgBwL,EAAatiC,QAAQwhB,SAASsV,cAAgB,GACtGC,eAC0B,QAAxBmL,EAAAP,EAAQ3hC,QAAQwhB,gBAAQ,IAAA0gB,OAAA,EAAxBA,EAA0BnL,gBAAiBuL,EAAatiC,QAAQwhB,SAASuV,eAAiB,CAAC,EAC7FC,WAAmC,QAAxBmL,EAAAR,EAAQ3hC,QAAQwhB,gBAAQ,IAAA2gB,OAAA,EAAxBA,EAA0BnL,YAAasL,EAAatiC,QAAQwhB,SAASwV,WAAa,KAC7FC,YAAoC,QAAxBmL,EAAAT,EAAQ3hC,QAAQwhB,gBAAQ,IAAA4gB,OAAA,EAAxBA,EAA0BnL,aAAcqL,EAAatiC,QAAQwhB,SAASyV,YAAc,OAGpGqL,EAAatiC,QAEX6gC,EAAkB,IACnByB,KACAX,EACH3hC,QAAS4gC,EACTl9B,SAAUi+B,EAAQj+B,UAAY4+B,EAAa5+B,SAC3Csb,OAAQ2iB,EAAQ3iB,QAAUsjB,EAAatjB,OACvCuc,kBAAuC9/B,IAAzBkmC,EAAQpG,aAA6BoG,EAAQpG,aAAe+G,EAAa/G,aACvF3iB,SAAU+oB,EAAQ/oB,UAAY0pB,EAAa1pB,SAC3CgjB,YAAY,IAAI/d,MAAOoc,eAGzBgD,GAAWtc,GAASA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAUsyB,EAAkBY,MAEhF,IACE,MAAMT,QAAsBlN,QAAQmN,IAClCxf,EAAMnJ,KAAKgC,GAASsjB,EAAetjB,EAAMsiB,GAAQzF,GAAuB,OAAVtD,QAAU,IAAVA,OAAU,EAAVA,EAAasD,EAAW1V,EAAMjmB,aAGxF+mC,EAAe,IAChBZ,EACH3hC,QAAS2hC,EAAQ3hC,QACb,IACK4gC,EACHztB,KAAM6tB,EAAcxlC,OAASwlC,EAAc,GAAGpf,YAAY3O,MAAM,KAAK,GAAK2tB,EAAWztB,KACrFqO,SAAU,IACLof,EAAWpf,SACdC,MAAO,IAAImf,EAAWpf,SAASC,SAAUuf,UAG7CvlC,EACJiI,SAAUi+B,EAAQj+B,SAAW,CAAEU,EAAGu9B,EAAQj+B,SAASU,EAAGC,EAAGs9B,EAAQj+B,SAASW,QAAM5I,EAChFujB,OAAQ2iB,EAAQ3iB,OAChBuc,kBAAuC9/B,IAAzBkmC,EAAQpG,aAA6BoG,EAAQpG,kBAAe9/B,EAC1Emd,SAAU+oB,EAAQ/oB,SAAW,IAAK+oB,EAAQ/oB,SAAU2T,UAAWoV,EAAQ/oB,SAASwT,eAAa3wB,GAG/F4mC,OAAO3F,KAAK6F,GAAc1uB,SAASwF,QAA8B5d,IAAtB8mC,EAAalpB,WAA6BkpB,EAAalpB,KAElG,MAAMmpB,OFnOgBlvB,OAAOkJ,EAASjO,EAASozB,EAAS/E,KAC9DjQ,GAAgBjC,GAAYlO,EAAS,mBACrCmQ,GAAgBjC,GAAYnc,EAAS,mBACrCoe,GACEhC,KAAAA,OAAW,CACT3qB,QAASwrB,GAAcR,WACvBtnB,SAAUwoB,GAAelB,WACzBhM,OAAQ2L,KAAAA,SAAaI,MAAM,UAAW,WAAY,WAAY,eAAgB,WAAY,SAAU,YAAYC,WAChHuQ,aAAc5Q,KAAAA,OAAW0B,MAAMP,MAAM,MAAMd,WAC3CpS,SAAUuT,GAAenB,aACxBrmB,IAAI,GACPg9B,EACA,mBAEF,IAAK,IAADc,EAAAC,EAIF,OAA4B,QAArBD,SAHgBE,EAAAA,GAAAA,IAAI,GAAGxI,MAAmB3d,KAAWjO,IAAWozB,EAAS,CAC9E3D,QAAS,CAAEC,cAAe,UAAUrB,QAEtBzuB,KAAKnO,eAAO,IAAAyiC,GAAQ,QAARC,EAArBD,EAAuBzF,cAAM,IAAA0F,OAAR,EAArBA,EAAgC,KAAM,IAC/C,CAAE,MAAOp0B,GACP,MAAM4vB,EAAAA,GAAAA,IAAe5vB,EACvB,GE8MiCs0B,CAAepmB,EAASjO,EAASg0B,EAAc3F,GACpE4E,EAAkBpH,GACtB,IAAKoI,EAAc9+B,SAAU8+B,EAAa9+B,UAAY4+B,EAAa5+B,UACnE0I,GAKF,OAFA6wB,GAAWtc,GAASA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAUizB,EAAkBC,MAChFrF,GAAWlI,QACJJ,QAAQC,QAAQyN,EACzB,CAAE,MAAOvN,GAEP,OADAgJ,GAAWtc,GAASA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAU+zB,EAAeb,MACtE/D,EAAYzJ,EAAK4H,GAC1B,CACF,GACA,CAACe,EAAOpgB,EAASpQ,EAAasxB,EAAaV,EAAQY,IAG/CiF,GAAkB51B,EAAAA,EAAAA,cACtBqG,MAAO/E,EAAShE,KACd,IAAKqyB,EAAO,OAAOc,EAAY,IAAIjN,MAASoL,IAC5C,GAAY,OAAPttB,QAAO,IAAPA,IAAAA,EAASqd,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IAEtD,MAAMyG,EAAetF,EAAO3gC,MAAMolC,GAAMA,EAAEjzB,WAAaD,IACvD,IAAK+zB,EAAc,OAAO5E,EAAY,IAAIjN,MAAS,mBAEnDoB,EAAS,MAET,MAAMgP,EAAkB,IACnByB,EACHhkB,SAAU/T,EACN+3B,EAAahkB,SAASxb,QAAQggC,GAAMA,EAAEj1B,eAAiBzB,EAAYyB,eACnE,IAAIy0B,EAAahkB,SAAU,CAAEzQ,aAAczB,EAAYyB,aAAcE,SAAU3B,EAAY2B,WAC/F2R,MAAO,IACF4iB,EAAa5iB,MAChBC,WAAYpV,EAAU+3B,EAAa5iB,MAAMC,WAAa,EAAI2iB,EAAa5iB,MAAMC,WAAa,GAE5Fyb,UAAW7wB,GAGb0yB,GAAWtc,GAASA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAUsyB,EAAkBY,MAEhF,IACE,MAAMe,OFpNelvB,OAAO/E,EAAShE,EAASqyB,KACpDjQ,GAAgBjC,GAAYnc,EAAS,mBACrC,IAAK,IAADw0B,EAAAC,EACF,MAAMC,EAAW14B,EAAU,UAAY,OAIvC,OAA4B,QAArBw4B,SAHgBhF,EAAAA,GAAAA,IAAK,GAAG5D,MAAmB5rB,KAAW00B,IAAY,CAAC,EAAG,CAC3EjF,QAAS,CAAEC,cAAe,UAAUrB,QAEtBzuB,KAAKnO,eAAO,IAAA+iC,GAAQ,QAARC,EAArBD,EAAuB/F,cAAM,IAAAgG,OAAR,EAArBA,EAAgC,KAAM,IAC/C,CAAE,MAAO10B,GACP,MAAM4vB,EAAAA,GAAAA,IAAe5vB,EACvB,GE0MiC40B,CAAc30B,EAAShE,EAASqyB,GACrD4E,EAAkBpH,GAAeoI,EAAcp2B,GAIrD,OAFA6wB,GAAWtc,GAASA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAUizB,EAAkBC,MAChFrF,GAAWlI,QACJJ,QAAQC,QAAQyN,EACzB,CAAE,MAAOvN,GAEP,OADAgJ,GAAWtc,GAASA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAU+zB,EAAeb,MACtE/D,EAAYzJ,EAAK4H,GAC1B,IAEF,CAACe,EAAOxwB,EAAasxB,EAAaV,IAG9BmG,GAAsBl2B,EAAAA,EAAAA,cAC1BqG,UACE,IAAKspB,EAAO,OAAOc,EAAY,IAAIjN,MAASoL,IAC5C,GAAY,OAAPrf,QAAO,IAAPA,IAAAA,EAASoP,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IACtD,GAAY,OAAPttB,QAAO,IAAPA,IAAAA,EAASqd,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IAEtD,MAAMyG,EAAetF,EAAO3gC,MAAMolC,GAAMA,EAAEjzB,WAAaD,IACvD,IAAK+zB,EAAc,OAAO5E,EAAY,IAAIjN,MAAS,mBAEnDoB,EAAS,MAET,MAAMuR,EAAgBd,EAAazjB,iBAAmB,GAChD6hB,EAAgB4B,EAAahjB,gBAEnC2d,GAAWtc,GACTA,EACG7d,QAAQ2+B,GAAMA,EAAEjzB,WAAaD,IAAY60B,EAAcx1B,SAAS6zB,EAAEjzB,YAClE8J,KAAKmpB,GACJA,EAAEjzB,WAAakyB,EACX,IACKe,EACH5iB,gBAAiB4iB,EAAE5iB,gBAAgB/b,QAAQsQ,GAAOA,IAAO7E,IACzDpC,SAAUs1B,EAAEt1B,SAASrJ,QAAQugC,GAAMA,EAAE70B,WAAaD,IAClDmR,MAAO,IAAK+hB,EAAE/hB,MAAOohB,eAAgBW,EAAE/hB,MAAMohB,eAAiB,GAAK,IAErEW,MAGVrE,GAAezc,IAAI,IAAWA,EAAM0c,MAAO1c,EAAK0c,OAAS,EAAI+F,EAAc5nC,YAC3E0hC,GAAUvc,IAAc,OAAJA,QAAI,IAAJA,OAAI,EAAJA,EAAMnS,YAAaD,EAAU,KAAOoS,IAExD,IAGE,YFhPsBrN,OAAOkJ,EAASjO,EAASquB,KACrDjQ,GAAgBjC,GAAYlO,EAAS,mBACrCmQ,GAAgBjC,GAAYnc,EAAS,mBACrC,IAAK,IAAD+0B,EAAAC,EAIF,OAA4B,QAArBD,SAHgBE,EAAAA,GAAAA,IAAI,GAAGrJ,MAAmB3d,KAAWjO,IAAW,CACrEyvB,QAAS,CAAEC,cAAe,UAAUrB,QAEtBzuB,KAAKnO,eAAO,IAAAsjC,GAAQ,QAARC,EAArBD,EAAuBtG,cAAM,IAAAuG,OAAR,EAArBA,EAAgC,KAAM,IAC/C,CAAE,MAAOj1B,GACP,MAAM4vB,EAAAA,GAAAA,IAAe5vB,EACvB,GEoOYm1B,CAAejnB,EAASjO,EAASquB,GACvCR,GAAWlI,QACJJ,QAAQC,SAAQ,EACzB,CAAE,MAAOE,GAgBP,OAfAgJ,GAAWtc,GAAS,IACfA,EACH2hB,KACGc,EAAc9qB,KAAKlF,GAAO4pB,EAAO3gC,MAAMolC,GAAMA,EAAEjzB,WAAa4E,MAAKtQ,OAAO4gC,UAC3EprB,KAAKmpB,GACLA,EAAEjzB,WAAakyB,EACX,IACKe,EACH5iB,gBAAiB,IAAI4iB,EAAE5iB,gBAAiBtQ,GACxCpC,SAAU,IAAIs1B,EAAEt1B,SAAUm2B,GAC1B5iB,MAAO,IAAK+hB,EAAE/hB,MAAOohB,eAAgBW,EAAE/hB,MAAMohB,eAAiB,GAAK,IAErEW,MAENrE,GAAezc,IAAI,IAAWA,EAAM0c,MAAO1c,EAAK0c,OAAS,EAAI+F,EAAc5nC,YACpEkiC,EAAYzJ,EAAK4H,GAC1B,IAEF,CAACe,EAAOpgB,EAASkhB,EAAaV,IAG1B2G,GAAY12B,EAAAA,EAAAA,cAChBqG,MAAO/E,EAASq1B,KACd,IAAKhH,EAAO,OAAOc,EAAY,IAAIjN,MAASoL,IAC5C,GAAY,OAAPrf,QAAO,IAAPA,IAAAA,EAASoP,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IACtD,GAAY,OAAPttB,QAAO,IAAPA,IAAAA,EAASqd,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IACtD,GAAkB,OAAb+H,QAAa,IAAbA,IAAAA,EAAehY,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IAE5D,MAAMyG,EAAetF,EAAO3gC,MAAMolC,GAAMA,EAAEjzB,WAAaD,IACvD,IAAK+zB,EAAc,OAAO5E,EAAY,IAAIjN,MAAS,mBAEnDoB,EAAS,MAET,MAAM6O,EAAgB4B,EAAahjB,gBAEnC2d,GAAWtc,GACTA,EACG7d,QAAQ2+B,GAAMA,EAAEjzB,WAAaD,IAC7B+J,KAAKmpB,GACJA,EAAEjzB,WAAakyB,EACX,IACKe,EACH5iB,gBAAiB4iB,EAAE5iB,gBAAgB/b,QAAQsQ,GAAOA,IAAO7E,IACzDpC,SAAUs1B,EAAEt1B,SAASrJ,QAAQugC,GAAMA,EAAE70B,WAAaD,IAClDmR,MAAO,IAAK+hB,EAAE/hB,MAAOohB,eAAgBW,EAAE/hB,MAAMohB,eAAiB,GAAK,IAErEW,MAGVrE,GAAezc,IAAI,IAAWA,EAAM0c,MAAO1c,EAAK0c,MAAQ,MAExD,IACE,MAAMmF,OFlRclvB,OAAO/E,EAASq1B,EAAehH,KACzDjQ,GAAgBjC,GAAYnc,EAAS,mBACrCoe,GAAgBjC,GAAYkZ,EAAe,yBAC3C,IAAK,IAADC,EAAAC,EAIF,OAA4B,QAArBD,SAHgB9F,EAAAA,GAAAA,IAAK,GAAG5D,MAAmB5rB,SAAgB,CAAEq1B,iBAAiB,CACnF5F,QAAS,CAAEC,cAAe,UAAUrB,QAEtBzuB,KAAKnO,eAAO,IAAA6jC,GAAQ,QAARC,EAArBD,EAAuB7G,cAAM,IAAA8G,OAAR,EAArBA,EAAgC,KAAM,IAC/C,CAAE,MAAOx1B,GACP,MAAM4vB,EAAAA,GAAAA,IAAe5vB,EACvB,GEwQiCy1B,CAAax1B,EAASq1B,EAAehH,GAC1D4E,EAAkBpH,GAAeoI,EAAcp2B,GAIrD,OAFA8wB,EAASsE,GACTpF,GAAWlI,QACJJ,QAAQC,QAAQyN,EACzB,CAAE,MAAOvN,GAeP,OAdAgJ,GAAWtc,GAAS,IACfA,EACH2hB,GACAhqB,KAAKmpB,GACLA,EAAEjzB,WAAakyB,EACX,IACKe,EACH5iB,gBAAiB,IAAI4iB,EAAE5iB,gBAAiBtQ,GACxCpC,SAAU,IAAIs1B,EAAEt1B,SAAUm2B,GAC1B5iB,MAAO,IAAK+hB,EAAE/hB,MAAOohB,eAAgBW,EAAE/hB,MAAMohB,eAAiB,GAAK,IAErEW,MAENrE,GAAezc,IAAI,IAAWA,EAAM0c,MAAO1c,EAAK0c,MAAQ,MACjDK,EAAYzJ,EAAK4H,GAC1B,IAEF,CAACe,EAAOpgB,EAASpQ,EAAasxB,EAAaV,IAGvCgH,GAAW/2B,EAAAA,EAAAA,cACfqG,UACE,IAAKspB,EAAO,OAAOc,EAAY,IAAIjN,MAASoL,IAC5C,GAAY,OAAPrf,QAAO,IAAPA,IAAAA,EAASoP,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IACtD,GAAY,OAAPttB,QAAO,IAAPA,IAAAA,EAASqd,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IAGtD,IADqBmB,EAAO3gC,MAAMolC,GAAMA,EAAEjzB,WAAaD,IACpC,OAAOmvB,EAAY,IAAIjN,MAAS,mBAEnDoB,EAAS,MAEToL,GAAWtc,GACTA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAU,IAAKkzB,EAAG9zB,WAAW,GAAS8zB,MAGxE,IACE,MAAMe,OFzSalvB,OAAOkJ,EAASjO,EAASquB,KAClDjQ,GAAgBjC,GAAYlO,EAAS,mBACrCmQ,GAAgBjC,GAAYnc,EAAS,mBACrC,IAAK,IAAD01B,EAAAC,EAIF,OAA4B,QAArBD,SAHgBlG,EAAAA,GAAAA,IAAK,GAAG5D,MAAmB3d,KAAWjO,QAAe,CAAC,EAAG,CAC9EyvB,QAAS,CAAEC,cAAe,UAAUrB,QAEtBzuB,KAAKnO,eAAO,IAAAikC,GAAQ,QAARC,EAArBD,EAAuBjH,cAAM,IAAAkH,OAAR,EAArBA,EAAgC,KAAM,IAC/C,CAAE,MAAO51B,GACP,MAAM4vB,EAAAA,GAAAA,IAAe5vB,EACvB,GE+RiC61B,CAAY3nB,EAASjO,EAASquB,GACnD4E,EAAkBpH,GAAeoI,EAAcp2B,GAIrD,OAFA6wB,GAAWtc,GAASA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAUizB,EAAkBC,MAChFrF,GAAWlI,QACJJ,QAAQC,QAAQyN,EACzB,CAAE,MAAOvN,GAIP,OAHAgJ,GAAWtc,GACTA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAU,IAAKkzB,EAAG9zB,WAAW,GAAU8zB,MAElE/D,EAAYzJ,EAAK4H,GAC1B,IAEF,CAACe,EAAOpgB,EAASpQ,EAAasxB,EAAaV,IAGvCoH,GAAan3B,EAAAA,EAAAA,cACjBqG,UACE,IAAKspB,EAAO,OAAOc,EAAY,IAAIjN,MAASoL,IAC5C,GAAY,OAAPrf,QAAO,IAAPA,IAAAA,EAASoP,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IACtD,GAAY,OAAPttB,QAAO,IAAPA,IAAAA,EAASqd,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IAGtD,IADqBmB,EAAO3gC,MAAMolC,GAAMA,EAAEjzB,WAAaD,IACpC,OAAOmvB,EAAY,IAAIjN,MAAS,mBAEnDoB,EAAS,MAEToL,GAAWtc,GACTA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAU,IAAKkzB,EAAG9zB,WAAW,GAAU8zB,MAGzE,IACE,MAAMe,OFrTelvB,OAAOkJ,EAASjO,EAASquB,KACpDjQ,GAAgBjC,GAAYlO,EAAS,mBACrCmQ,GAAgBjC,GAAYnc,EAAS,mBACrC,IAAK,IAAD81B,EAAAC,EAIF,OAA4B,QAArBD,SAHgBtG,EAAAA,GAAAA,IAAK,GAAG5D,MAAmB3d,KAAWjO,UAAiB,CAAC,EAAG,CAChFyvB,QAAS,CAAEC,cAAe,UAAUrB,QAEtBzuB,KAAKnO,eAAO,IAAAqkC,GAAQ,QAARC,EAArBD,EAAuBrH,cAAM,IAAAsH,OAAR,EAArBA,EAAgC,KAAM,IAC/C,CAAE,MAAOh2B,GACP,MAAM4vB,EAAAA,GAAAA,IAAe5vB,EACvB,GE2SiCi2B,CAAc/nB,EAASjO,EAASquB,GACrD4E,EAAkBpH,GAAeoI,EAAcp2B,GAIrD,OAFA6wB,GAAWtc,GAASA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAUizB,EAAkBC,MAChFrF,GAAWlI,QACJJ,QAAQC,QAAQyN,EACzB,CAAE,MAAOvN,GAIP,OAHAgJ,GAAWtc,GACTA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAU,IAAKkzB,EAAG9zB,WAAW,GAAS8zB,MAEjE/D,EAAYzJ,EAAK4H,GAC1B,IAEF,CAACe,EAAOpgB,EAASpQ,EAAasxB,EAAaV,IAGvCwH,GAAcv3B,EAAAA,EAAAA,cAClBqG,MAAO/E,EAASqK,KACd,IAAKgkB,EAAO,OAAOc,EAAY,IAAIjN,MAASoL,IAC5C,GAAY,OAAPrf,QAAO,IAAPA,IAAAA,EAASoP,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IACtD,GAAY,OAAPttB,QAAO,IAAPA,IAAAA,EAASqd,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IACtD,GAAa,OAARjjB,QAAQ,IAARA,IAAAA,EAAUwT,SAAU,OAAOsR,EAAY,IAAIjN,MAASoL,IAEzD,MAAMyG,EAAetF,EAAO3gC,MAAMolC,GAAMA,EAAEjzB,WAAaD,IACvD,IAAK+zB,EAAc,OAAO5E,EAAY,IAAIjN,MAAS,mBAEnDoB,EAAS,MAEToL,GAAWtc,GACTA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAU,IAAKkzB,EAAG7oB,SAAU,IAAKA,EAAU2T,SAAS,IAAWkV,MAGjG,IACE,MAAMe,OFjUgBlvB,OAAOkJ,EAASjO,EAASqK,EAAUgkB,KAC/DjQ,GAAgBjC,GAAYlO,EAAS,mBACrCmQ,GAAgBjC,GAAYnc,EAAS,mBACrCoe,GAAgBR,GAAgBvT,EAAU,oBAC1C,IAAK,IAAD6rB,EAAAC,EAIF,OAA4B,QAArBD,SAHgB9B,EAAAA,GAAAA,IAAI,GAAGxI,MAAmB3d,KAAWjO,aAAoBqK,EAAU,CACxFolB,QAAS,CAAEC,cAAe,UAAUrB,QAEtBzuB,KAAKnO,eAAO,IAAAykC,GAAQ,QAARC,EAArBD,EAAuBzH,cAAM,IAAA0H,OAAR,EAArBA,EAAgC,KAAM,IAC/C,CAAE,MAAOp2B,GACP,MAAM4vB,EAAAA,GAAAA,IAAe5vB,EACvB,GEsTiCq2B,CAAenoB,EAASjO,EAASqK,EAAUgkB,GAChE4E,EAAkBpH,GAAeoI,EAAcp2B,GAIrD,OAFA6wB,GAAWtc,GAASA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAUizB,EAAkBC,MAChFrF,GAAWlI,QACJJ,QAAQC,QAAQyN,EACzB,CAAE,MAAOvN,GAIP,OAHAgJ,GAAWtc,GACTA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAU,IAAKkzB,EAAG7oB,SAAU0pB,EAAa1pB,UAAa6oB,MAEjF/D,EAAYzJ,EAAK4H,GAC1B,IAEF,CAACe,EAAOpgB,EAASpQ,EAAasxB,EAAaV,IAGvC4H,GAAa33B,EAAAA,EAAAA,cACjBqG,MAAO/E,EAASs2B,KAAc,IAADC,EAC3B,IAAKlI,EAAO,OAAOc,EAAY,IAAIjN,MAASoL,IAC5C,GAAY,OAAPrf,QAAO,IAAPA,IAAAA,EAASoP,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IACtD,GAAY,OAAPttB,QAAO,IAAPA,IAAAA,EAASqd,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IACtD,GAAa,OAARgJ,QAAQ,IAARA,IAAAA,EAAUjZ,OAAQ,OAAO8R,EAAY,IAAIjN,MAASoL,IAEvD,MAAMyG,EAAetF,EAAO3gC,MAAMolC,GAAMA,EAAEjzB,WAAaD,IACvD,IAAK+zB,EAAc,OAAO5E,EAAY,IAAIjN,MAAS,mBAEnDoB,EAAS,MAET,MAAMgP,EAAkB,IACnByB,EACH9G,UAAW,IACN8G,EAAa9G,UAChBE,OAAQ,KACoB,QAAtBoJ,EAAAxC,EAAa9G,iBAAS,IAAAsJ,OAAA,EAAtBA,EAAwBpJ,SAAU,GACtC,CAAEqJ,SAAUF,EAAUznB,WAAW,IAAIS,MAAOoc,cAAensB,QAAS1B,EAAYyB,gBAGpF6R,MAAO,IACF4iB,EAAa5iB,MAChBqhB,aAAcuB,EAAa5iB,MAAMqhB,aAAe,GAAK,IAIzD9D,GAAWtc,GAASA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAUsyB,EAAkBY,MAEhF,IACE,MAAMuD,OFzVe1xB,OAAOkJ,EAASjO,EAASs2B,EAAUjI,KAC9DjQ,GAAgBjC,GAAYlO,EAAS,mBACrCmQ,GAAgBjC,GAAYnc,EAAS,mBACrCoe,GAAgBhC,KAAAA,SAAaX,WAAY6a,EAAU,oBACnD,IAAK,IAADI,EAAAC,EAIF,OAA4B,QAArBD,SAHgBlH,EAAAA,GAAAA,IAAK,GAAG5D,MAAmB3d,KAAWjO,UAAiB,CAAE42B,UAAWN,GAAY,CACrG7G,QAAS,CAAEC,cAAe,UAAUrB,QAEtBzuB,KAAKnO,eAAO,IAAAilC,GAAQ,QAARC,EAArBD,EAAuBjI,cAAM,IAAAkI,OAAR,EAArBA,EAAgC,KAAM,IAC/C,CAAE,MAAO52B,GACP,MAAM4vB,EAAAA,GAAAA,IAAe5vB,EACvB,GE8UgC82B,CAAc5oB,EAASjO,EAASs2B,EAAUjI,GAC9D4E,EAAkBpH,GAAe4K,EAAa54B,GAIpD,OAFA6wB,GAAWtc,GAASA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAUizB,EAAkBC,MAChFrF,GAAWlI,QACJJ,QAAQC,QAAQyN,EACzB,CAAE,MAAOvN,GAEP,OADAgJ,GAAWtc,GAASA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAU+zB,EAAeb,MACtE/D,EAAYzJ,EAAK4H,GAC1B,IAEF,CAACe,EAAOpgB,EAASpQ,EAAasxB,EAAaV,IAGvCqI,GAAap4B,EAAAA,EAAAA,cAAY,KAC7BgwB,EAAU,IACVC,EAAS,MACTE,EAAc,CAAEnS,KAAM,EAAGE,MAAO2Q,GAAOI,cAAemB,MAAO,EAAGC,SAAS,IACzEE,EAAa,MACb3L,EAAS,MACTuK,GAAWlI,OAAO,GACjB,IAqBH,OAnBA/mB,EAAAA,EAAAA,YAAU,KACR,IAAKyvB,IAAUpgB,GAAWugB,EAExB,YADAsI,IAIF,MAAMC,EAAa,IAAIzF,gBAOvB,OANAO,EAAyB,CAAC,EAAGkF,EAAWrG,QAAQ,GAAO,CAAChL,EAAKqM,KACvDrM,GAAoB,eAAbA,EAAIjH,MACb6E,EAASoC,EAAIzD,SAAWqL,GAC1B,IAGK,KACLyJ,EAAW1F,QACXQ,EAAyB3xB,QAAQ,CAClC,GACA,CAACmuB,EAAOpgB,EAASugB,EAAkBsI,EAAYjF,KAE3C1yB,EAAAA,EAAAA,UACL,MACEsvB,SACA/wB,QACAixB,WACAD,YACAE,aACAI,YACAjvB,QACAywB,gBAAiBqB,EACjBG,iBACAmB,sBACAmB,kBACAM,sBACAQ,YACAK,WACAI,aACAI,cACAI,aACAS,gBAEF,CACErI,EACA/wB,EACAkxB,EACAI,EACAjvB,EACA8xB,EACAG,EACAmB,EACAmB,EACAM,EACAQ,EACAK,EACAI,EACAI,EACAI,EACAS,GAGN,E,gDCpuBA,MAAM3U,GAAmB,IACnB6U,GACG,GADHA,GAGG,IAHHA,GAIG,IAJHA,GAKK,IAILC,GAAeA,CAACC,EAAOC,KAC3B,OAAQA,EAAOvyB,MACb,IAAK,aACH,MAAO,CACLwyB,SAAS,EACTvhC,EAAGshC,EAAOthC,EACVC,EAAGqhC,EAAOrhC,EACVuhC,QAASF,EAAOE,QAChBC,QAASH,EAAOG,QAChBC,WAAYJ,EAAOI,YAAc,MAErC,IAAK,cACH,MAAO,CAAEH,SAAS,EAAOvhC,EAAG,EAAGC,EAAG,EAAGuhC,QAAS,EAAGC,QAAS,EAAGC,WAAY,MAC3E,QACE,OAAOL,EACX,EAIIM,GAAmBA,CAACN,EAAOC,KAAY,IAADM,EAAAC,EAC1C,OAAQP,EAAOvyB,MACb,IAAK,iBACH,MAAO,CACLlH,MAAOy5B,EAAOzV,QACdiW,WAAyB,QAAdF,EAAAN,EAAOzV,eAAO,IAAA+V,OAAA,EAAdA,EAAgBhnB,SAAU,WACrCmnB,iBAA+B,QAAdF,EAAAP,EAAOzV,eAAO,IAAAgW,OAAA,EAAdA,EAAgBG,WAAY,IAEjD,IAAK,mBACH,MAAO,CAAEn6B,MAAO,KAAMi6B,UAAW,GAAIC,gBAAiB,IACxD,IAAK,sBACH,MAAO,IACFV,EACHx5B,MAAO,IAAKw5B,EAAMx5B,MAAOjM,QAAS,IAAKylC,EAAMx5B,MAAMjM,QAASxD,MAAOkpC,EAAOlpC,SAE9E,IAAK,iBACH,MAAO,IAAKipC,EAAOS,UAAWR,EAAO1mB,QACvC,IAAK,qBACH,MAAO,IAAKymB,EAAOU,gBAAiBT,EAAOlpB,SAC7C,QACE,OAAOipB,EACX,EAIIY,GAAiB,SAACh6B,EAAUD,GAAuE,IAA1DH,EAAK1Q,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,KAAMyhC,EAAMzhC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,KAAM+Q,EAAe/Q,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GACzF,OAAOmS,EAAAA,EAAAA,UAAQ,KACb,MAAM44B,EAAiB,CAAC,QAAS,SAAS14B,SAASvB,GAC7Ck6B,EAA2B,cAAbl6B,EACdm6B,EAAwB,WAAbn6B,EAEXo6B,EAAsBhF,IAC1B,MAAMiF,EACJjF,IACCA,EAAE5zB,gBAA4B,OAAXzB,QAAW,IAAXA,OAAW,EAAXA,EAAayB,eAC/B4zB,EAAE3zB,WAAuB,OAAX1B,QAAW,IAAXA,OAAW,EAAXA,EAAayB,eAC1B4zB,EAAE1zB,WACU,OAAX3B,QAAW,IAAXA,OAAW,EAAXA,EAAa2B,WACb0zB,EAAE1zB,SAAS2Q,gBAAkBtS,EAAY2B,SAAS2Q,eAExD,MAAO,CACLD,QAASnS,GAAmBg6B,GAAkBC,GAAgBC,GAAYE,EAC1EC,OAAQL,EACRM,gBAAiBN,EACjBO,aAAcP,EACdQ,UAAWR,GAAkBC,GAAeC,EAC5CO,QAAST,GAAkBC,GAAeC,EAC1CQ,SAAUV,GAAkBC,GAAeC,EAC3CS,QAASxF,IAAMA,EAAE9zB,YAAcrB,GAAmBg6B,GAAkBC,GAAeG,GACpF,EAGH,GAAI1J,GAAU1J,MAAM4T,QAAQlK,GAAS,CACnC,MAAMmK,EAAiB,IAAI50B,IAM3B,OALAyqB,EAAOnpB,SAAS4tB,IACVA,EAAEjzB,UACJ24B,EAAe3xB,IAAIisB,EAAEjzB,SAAUi4B,EAAmBhF,GACpD,IAEK0F,CACT,CAEA,OAAOV,EAAmBx6B,EAAM,GAC/B,CAACI,EAAqB,OAAXD,QAAW,IAAXA,OAAW,EAAXA,EAAayB,aAAyB,OAAXzB,QAAW,IAAXA,OAAW,EAAXA,EAAa2B,SAAe,OAAL9B,QAAK,IAALA,OAAK,EAALA,EAAOuC,SAAgB,OAANwuB,QAAM,IAANA,OAAM,EAANA,EAAQxhC,OAAQ8Q,GACnG,EAEM86B,GAAQ9qC,IAQP,IAAD+qC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,IARS,QACbvrB,EAAO,WACP/X,EAAU,MACVm4B,EAAK,YACLxwB,EAAW,SACXC,EAAQ,SACRwwB,EAAQ,gBACRtgB,EAAkB,IACnBjgB,EACC,MAAMwgC,GAAWkL,EAAAA,EAAAA,OACX,iBAAEC,IAAqBC,EAAAA,GAAAA,KACvBC,IAAe37B,EAAAA,EAAAA,QAAO,MACtB47B,IAAa57B,EAAAA,EAAAA,SAAO,IACnBjJ,GAAY8kC,KAAiBx7B,EAAAA,EAAAA,WAAS,IACtCoe,GAAMqd,KAAWz7B,EAAAA,EAAAA,UAAS,IAC1B07B,GAAQC,KAAa37B,EAAAA,EAAAA,UAAS0P,IAC9BksB,GAAUC,KAAe77B,EAAAA,EAAAA,WAAS,IAClC87B,GAAoBC,KAAyB/7B,EAAAA,EAAAA,UAAS,OACtDg8B,GAAaC,KAAkBj8B,EAAAA,EAAAA,UAAS,GACzCk8B,IAAav8B,EAAAA,EAAAA,QAAO,IAAIkH,MAEvBs1B,GAAYC,KAAiBC,EAAAA,EAAAA,YAAW1D,GAAc,CAC3DG,SAAS,EACTvhC,EAAG,EACHC,EAAG,EACHuhC,QAAS,EACTC,QAAS,EACTC,WAAY,QAGPqD,GAAgBC,KAAqBF,EAAAA,EAAAA,YAAWnD,GAAkB,CACvE95B,MAAO,KACPi6B,UAAW,GACXC,gBAAiB,KAGbkD,IAAgB37B,EAAAA,EAAAA,UAAQ,IACrBs7B,GAAWrD,WAAawD,GAAel9B,OAAS88B,GAAW37B,QAAQiL,KAAO,GAChF,CAAC2wB,GAAWrD,QAASwD,GAAel9B,QAEjCq9B,IAAyBr8B,EAAAA,EAAAA,cAAY,CAACsB,EAASg7B,KAC/CA,EACFR,GAAW37B,QAAQo8B,IAAIj7B,GAEvBw6B,GAAW37B,QAAQsmB,OAAOnlB,EAC5B,GACC,KAEG,OACJyuB,GAAM,MACN/wB,GAAK,SACLixB,GAAQ,UACRD,GAAS,WACTE,GAAU,UACVI,GACArrB,QAASu3B,GAAS,MAClBn7B,GAAK,gBACLywB,GAAe,eACfwB,GAAc,oBACdmB,GAAmB,gBACnBmB,GAAe,oBACfM,GAAmB,UACnBQ,GAAS,SACTK,GAAQ,WACRI,GAAU,YACVI,GAAW,WACXI,GAAU,WACVS,IACE1I,GAAUC,EAAOpgB,EAASpQ,EAAaywB,EAAUC,IAE/C,gBAAE4M,KAAoBC,EAAAA,GAAAA,GAAU/M,EAAOC,EAAUC,IACjD,MACJh5B,GAAK,OACLC,GAAM,SACNP,GAAQ,YACRomC,GAAW,iBACXC,GACAC,gBAAiBC,GACjBC,gBAAiBC,GACjBC,cAAeC,GACfC,iBAAkBC,GAClBC,gBAAiBC,GACjBC,eAAgBC,IbrNgBC,KAClC,MAAO5mC,EAAO6mC,IAAY99B,EAAAA,EAAAA,UAAS,IAC5B9I,EAAQ6mC,IAAa/9B,EAAAA,EAAAA,UAAS,CAAEzI,EAAG,EAAGC,EAAG,IAC1CwmC,GAAar+B,EAAAA,EAAAA,SAAO,GACpBs+B,GAAYt+B,EAAAA,EAAAA,QAAO,MACnBu+B,GAAav+B,EAAAA,EAAAA,QAAO,MACpBw+B,GAAax+B,EAAAA,EAAAA,QAAO,MACpBy+B,GAAWz+B,EAAAA,EAAAA,QAAO1I,GAClBonC,GAAY1+B,EAAAA,EAAAA,QAAOzI,GACnBonC,GAAe3+B,EAAAA,EAAAA,QAAO,CAAE1M,MAAOsV,OAAO8Q,WAAYpnB,OAAQsW,OAAOg2B,cACjEC,GAAU7+B,EAAAA,EAAAA,QAAO,IACjB8+B,GAAe9+B,EAAAA,EAAAA,SAAQ,IAG7BW,EAAAA,EAAAA,YAAU,KACR89B,EAAS79B,QAAUtJ,EACnBonC,EAAU99B,QAAUrJ,CAAM,GACzB,CAACD,EAAOC,KAGXoJ,EAAAA,EAAAA,YAAU,KACR,MAAMo+B,EAAiBA,KACrBJ,EAAa/9B,QAAU,CAAEtN,MAAOsV,OAAO8Q,WAAYpnB,OAAQsW,OAAOg2B,YAAa,EAIjF,OAFAh2B,OAAOo2B,iBAAiB,SAAUD,GAClCA,IACO,IAAMn2B,OAAOq2B,oBAAoB,SAAUF,EAAe,GAChE,IAGH,MAAMG,GAAcz+B,EAAAA,EAAAA,cAAa0+B,IAC/B,MAAMC,EAAa/kC,EAAaokC,EAAS79B,SACnC,MAAEtN,EAAK,OAAEhB,GAAWqsC,EAAa/9B,QACjCy+B,EAAO/rC,EAAQ8rC,EACfE,EAAOhtC,EAAS8sC,EACtB,MAAO,CACLxnC,EAAGpI,KAAKkR,IAAI2+B,EAAM7vC,KAAK2I,IAAI,EAAGgnC,EAAUvnC,IACxCC,EAAGrI,KAAKkR,IAAI4+B,EAAM9vC,KAAK2I,IAAI,EAAGgnC,EAAUtnC,IACzC,GACA,IAGGulC,GAAc38B,EAAAA,EAAAA,cAAY,KAC9B,MAAM,MAAEnN,EAAK,OAAEhB,GAAWqsC,EAAa/9B,QACjCu+B,EAAY,CAChBvnC,EAAGtE,EAAQ,EAAK+G,EAAaokC,EAAS79B,QAAW,EACjD/I,EAAGvF,EAAS,EAAK+H,EAAaokC,EAAS79B,QAAW,GAEpDw9B,EAAUc,EAAYC,GAAW,GAChC,CAACD,IAGEK,GAAoB9+B,EAAAA,EAAAA,cAAaw4B,IAChCA,IACLkF,EAAS3uC,KAAK2I,IA9DD,EA8De3I,KAAKkR,IA/DpB,GA+DkCu4B,EAAM3hC,OAAS,KAC9D8mC,EAAUc,EAAYjG,EAAM1hC,QAAU,CAAEK,EAAG,EAAGC,EAAG,KAAK,GACrD,CAACqnC,IAGEM,GAAmB/+B,EAAAA,EAAAA,cAAY,KAC5B,CAAEnJ,QAAOC,SAAQqZ,WAAW,IAAIS,MAAOoc,iBAC7C,CAACn2B,EAAOC,IAGLkoC,GAAeh/B,EAAAA,EAAAA,cAAY,KAC/B,MAAMi/B,EAAajB,EAAS79B,QACtB++B,EAAcjB,EAAU99B,SAExB,MAAEtN,EAAK,OAAEhB,GAAWqsC,EAAa/9B,QACjCg/B,EACDtsC,EAAQ,EAAK+G,IADZulC,EAEDttC,EAAS,EAAK+H,KAGnB4D,EAAAA,EAAAA,GAAQ,EAAG,EAAG,CACZnJ,SAAU+qC,GACVj2B,KAAM,YACNk2B,SAAWnV,IACT,MAAMoV,EAAgB,EAAIvwC,KAAKwwC,IAAI,EAAIrV,EAAU,GACjDwT,EAASuB,GAZO,EAYqBA,GAAcK,GACnD3B,EAAUc,EAAY,CACpBtnC,EAAG+nC,EAAY/nC,GAAKgoC,EAAiBD,EAAY/nC,GAAKmoC,EACtDloC,EAAG8nC,EAAY9nC,GAAK+nC,EAAiBD,EAAY9nC,GAAKkoC,IACrD,GAEL,GACD,CAACb,IAGEe,GAAax/B,EAAAA,EAAAA,cAAY,CAACy/B,EAAOC,EAAQC,KAC7CjC,GAAUkC,IACR,MAAMC,EAAW9wC,KAAK2I,IAnGX,EAmGyB3I,KAAKkR,IApG9B,GAoG4C2/B,EAAYH,IAC7DK,EAAgB7B,EAAU99B,QAChC,IAAIu+B,EACJ,QAAelwC,IAAXkxC,QAAmClxC,IAAXmxC,EAAsB,CAChD,MAAMI,GAAUL,EAASI,EAAc3oC,GAAKyoC,EACtCI,GAAUL,EAASG,EAAc1oC,GAAKwoC,EAC5ClB,EAAYD,EAAY,CACtBtnC,EAAGuoC,EAASK,EAASF,EACrBzoC,EAAGuoC,EAASK,EAASH,GAEzB,MACEnB,EAAYD,EAAY,CACtBtnC,EAAGgR,OAAO8Q,WAAa,EAAKrf,EAAaimC,EAAY,EACrDzoC,EAAG+Q,OAAOg2B,YAAc,EAAKvkC,EAAaimC,EAAY,IAI1D,OADAlC,EAAUe,GACHmB,CAAQ,GACf,GACD,CAACpB,IAGE7B,GAAmB58B,EAAAA,EAAAA,cAAaigC,IAClB,UAAdA,EACFjB,IAEAQ,EACgB,OAAdS,EAAqBpmC,GAAY,GACjCqkC,EAAa/9B,QAAQtN,MAAQ,EAC7BqrC,EAAa/9B,QAAQtO,OAAS,EAElC,GACC,CAAC2tC,EAAYR,IAGVkB,GAAclgC,EAAAA,EAAAA,cAClBmgC,EAAAA,EAAAA,WAAUl/B,IACRA,EAAEwmB,iBACF,MAAMgY,EAvIa,MAuIJx+B,EAAEm/B,OACjBZ,EAAWC,EAAOx+B,EAAE03B,QAAS13B,EAAE23B,QAAQ,GACtC,IACH,CAAC4G,IAIG3C,GAAkB78B,EAAAA,EAAAA,cAAaiB,IAC/BA,EAAE6I,OAAOu2B,QAAQ,wIACrBxC,EAAU19B,QAAU,CAAEhJ,EAAG8J,EAAE03B,QAASvhC,EAAG6J,EAAE23B,QAAS0H,QAASxpC,EAAOK,EAAGopC,QAASzpC,EAAOM,GACrFwmC,EAAWz9B,SAAU,EAAK,GACzB,CAACrJ,IAGEimC,GAAkB/8B,EAAAA,EAAAA,cACtBmgC,EAAAA,EAAAA,WAAUl/B,IACR,IAAK48B,EAAU19B,QAAS,OACxB,MAAMqgC,EAAKv/B,EAAE03B,QAAUkF,EAAU19B,QAAQhJ,EACnCspC,EAAKx/B,EAAE23B,QAAUiF,EAAU19B,QAAQ/I,GACpCwmC,EAAWz9B,UAAYpR,KAAKC,IAAIwxC,GAAM,GAAKzxC,KAAKC,IAAIyxC,GAAM,KAC7D7C,EAAWz9B,SAAU,GAEnBy9B,EAAWz9B,SACbw9B,EAAUc,EAAY,CACpBtnC,EAAG0mC,EAAU19B,QAAQmgC,QAAUE,EAC/BppC,EAAGymC,EAAU19B,QAAQogC,QAAUE,IAEnC,GACC,IACH,CAAChC,IAIGxB,GAAgBj9B,EAAAA,EAAAA,cACpB,CAACiB,EAAGgJ,KACF,IAAK2zB,EAAWz9B,SAAW09B,EAAU19B,SAAW8J,GAAWwzB,EAASt9B,QAAS,CAC3E,MAAMugC,EAAYjD,EAASt9B,QAAQwgC,wBAC7BC,EAAS3/B,EAAE03B,QAAU+H,EAAU1pC,KAC/B6pC,EAAS5/B,EAAE23B,QAAU8H,EAAU3pC,IAC/B+pC,GAAUF,EAAS9pC,EAAOK,GAAKN,EAC/BkqC,GAAUF,EAAS/pC,EAAOM,GAAKP,EACjCiqC,GAAU,GAAKA,GAAUlnC,GAAcmnC,GAAU,GAAKA,GAAUnnC,GAClEqQ,EAAQ62B,EAAQC,EAAQ9/B,EAAE03B,QAAS13B,EAAE23B,QAEzC,CACAiF,EAAU19B,QAAU,KACpBy9B,EAAWz9B,SAAU,CAAK,GAE5B,CAACs9B,EAAU3mC,EAAQD,IAIfsmC,GAAmBn9B,EAAAA,EAAAA,cAAaiB,IACpC,IAAIA,EAAE6I,OAAOu2B,QAAQ,mEACrB,GAAyB,IAArBp/B,EAAE+/B,QAAQzyC,OACZuvC,EAAW39B,QAAU,CACnBhJ,EAAG8J,EAAE+/B,QAAQ,GAAGrI,QAChBvhC,EAAG6J,EAAE+/B,QAAQ,GAAGpI,QAChB0H,QAASxpC,EAAOK,EAChBopC,QAASzpC,EAAOM,GAElBwmC,EAAWz9B,SAAU,OAChB,GAAyB,IAArBc,EAAE+/B,QAAQzyC,OAAc,CACjC,MAAM0yC,EAAShgC,EAAE+/B,QAAQ,GACnBE,EAASjgC,EAAE+/B,QAAQ,GACnBR,EAAKS,EAAOtI,QAAUuI,EAAOvI,QAC7B8H,EAAKQ,EAAOrI,QAAUsI,EAAOtI,QACnCmF,EAAW59B,QAAU,CACnBghC,SAAUpyC,KAAKqyC,KAAKZ,EAAKA,EAAKC,EAAKA,GACnCY,SAAUJ,EAAOtI,QAAUuI,EAAOvI,SAAW,EAC7C2I,SAAUL,EAAOrI,QAAUsI,EAAOtI,SAAW,EAC7C/hC,MAAOmnC,EAAS79B,QAEpB,IACC,CAACrJ,IAGEumC,GAAkBr9B,EAAAA,EAAAA,cACtBmgC,EAAAA,EAAAA,WAAUl/B,IACR,GAAK68B,EAAW39B,SAAY49B,EAAW59B,QACvC,GAAyB,IAArBc,EAAE+/B,QAAQzyC,QAAgBuvC,EAAW39B,QAAS,CAChD,MAAMohC,EAAQtgC,EAAE+/B,QAAQ,GAClBR,EAAKe,EAAM5I,QAAUmF,EAAW39B,QAAQhJ,EACxCspC,EAAKc,EAAM3I,QAAUkF,EAAW39B,QAAQ/I,GACzCwmC,EAAWz9B,UAAYpR,KAAKC,IAAIwxC,GAAM,GAAKzxC,KAAKC,IAAIyxC,GAAM,KAC7D7C,EAAWz9B,SAAU,GAEnBy9B,EAAWz9B,SACbw9B,EAAUc,EAAY,CACpBtnC,EAAG2mC,EAAW39B,QAAQmgC,QAAUE,EAChCppC,EAAG0mC,EAAW39B,QAAQogC,QAAUE,IAGtC,MAAO,GAAyB,IAArBx/B,EAAE+/B,QAAQzyC,QAAgBwvC,EAAW59B,QAAS,CACvD,MAAM8gC,EAAShgC,EAAE+/B,QAAQ,GACnBE,EAASjgC,EAAE+/B,QAAQ,GACnBR,EAAKS,EAAOtI,QAAUuI,EAAOvI,QAC7B8H,EAAKQ,EAAOrI,QAAUsI,EAAOtI,QAE7B4I,EADkBzyC,KAAKqyC,KAAKZ,EAAKA,EAAKC,EAAKA,GACV1C,EAAW59B,QAAQghC,SAAYpD,EAAW59B,QAAQtJ,MACnFgpC,EAAW9wC,KAAK2I,IA7Ob,EA6O2B3I,KAAKkR,IA9OhC,GA8O8CuhC,IACjDH,GAAWJ,EAAOtI,QAAUuI,EAAOvI,SAAW,EAC9C2I,GAAWL,EAAOrI,QAAUsI,EAAOtI,SAAW,EACpD8E,EAASmC,GACTlC,EAAUc,EAAY,CACpBtnC,EAAGkqC,GAAYA,EAAUpD,EAAU99B,QAAQhJ,GAAK6mC,EAAS79B,QAAW0/B,EACpEzoC,EAAGkqC,GAAYA,EAAUrD,EAAU99B,QAAQ/I,GAAK4mC,EAAS79B,QAAW0/B,IAExE,IACC,IACH,CAACpB,IAIGlB,GAAiBv9B,EAAAA,EAAAA,cACrB,CAACiB,EAAGgJ,KACF,IACG2zB,EAAWz9B,SACZ29B,EAAW39B,SACX8J,GACAwzB,EAASt9B,SACmB,IAA5Bc,EAAEwgC,eAAelzC,OACjB,CACA,MAAMmyC,EAAYjD,EAASt9B,QAAQwgC,wBAC7BY,EAAQtgC,EAAEwgC,eAAe,GACzBb,EAASW,EAAM5I,QAAU+H,EAAU1pC,KACnC6pC,EAASU,EAAM3I,QAAU8H,EAAU3pC,IACnC+pC,GAAUF,EAAS9pC,EAAOK,GAAKN,EAC/BkqC,GAAUF,EAAS/pC,EAAOM,GAAKP,EACjCiqC,GAAU,GAAKA,GAAUlnC,GAAcmnC,GAAU,GAAKA,GAAUnnC,GAClEqQ,EAAQ62B,EAAQC,EAAQQ,EAAM5I,QAAS4I,EAAM3I,QAEjD,CACAkF,EAAW39B,QAAU,KACrB49B,EAAW59B,QAAU,KACrBy9B,EAAWz9B,SAAU,CAAK,GAE5B,CAACs9B,EAAU3mC,EAAQD,IAIf6qC,GAAgB1hC,EAAAA,EAAAA,cACnBiB,IACC,GAAyB,UAArBA,EAAE6I,OAAO63B,SAA4C,aAArB1gC,EAAE6I,OAAO63B,QAC7C,OAAQ1gC,EAAEmL,KACR,IAAK,IACL,IAAK,IACHnL,EAAEwmB,iBACF+X,EAAW3lC,EAAWqkC,EAAa/9B,QAAQtN,MAAQ,EAAGqrC,EAAa/9B,QAAQtO,OAAS,GACpF,MACF,IAAK,IACHoP,EAAEwmB,iBACF+X,GAAW,GAAYtB,EAAa/9B,QAAQtN,MAAQ,EAAGqrC,EAAa/9B,QAAQtO,OAAS,GACrF,MACF,IAAK,UACHoP,EAAEwmB,iBACFkW,GAAWjqB,GAAS+qB,EAAY,IAAK/qB,EAAMtc,EAAGsc,EAAKtc,EAlS3C,OAmSR,MACF,IAAK,YACH6J,EAAEwmB,iBACFkW,GAAWjqB,GAAS+qB,EAAY,IAAK/qB,EAAMtc,EAAGsc,EAAKtc,EAtS3C,OAuSR,MACF,IAAK,YACH6J,EAAEwmB,iBACFkW,GAAWjqB,GAAS+qB,EAAY,IAAK/qB,EAAMvc,EAAGuc,EAAKvc,EA1S3C,OA2SR,MACF,IAAK,aACH8J,EAAEwmB,iBACFkW,GAAWjqB,GAAS+qB,EAAY,IAAK/qB,EAAMvc,EAAGuc,EAAKvc,EA9S3C,OA+SR,MACF,IAAK,IACH,GAAI8J,EAAE2gC,SAAWvD,EAAal+B,QAAU,EAAG,CACzCc,EAAEwmB,iBACF4W,EAAal+B,SAAW,EACxB,MAAMq4B,EAAQ4F,EAAQj+B,QAAQk+B,EAAal+B,SAC3Cu9B,EAASlF,EAAM3hC,OACf8mC,EAAUnF,EAAM1hC,OAClB,CACA,MACF,IAAK,IACH,GAAImK,EAAE2gC,SAAWvD,EAAal+B,QAAUi+B,EAAQj+B,QAAQ5R,OAAS,EAAG,CAClE0S,EAAEwmB,iBACF4W,EAAal+B,SAAW,EACxB,MAAMq4B,EAAQ4F,EAAQj+B,QAAQk+B,EAAal+B,SAC3Cu9B,EAASlF,EAAM3hC,OACf8mC,EAAUnF,EAAM1hC,OAClB,EAIJ,GAEF,CAAC0oC,EAAYf,IAIToD,GAAoB7hC,EAAAA,EAAAA,cACxB,CAACiB,EAAGmrB,KACF,GAAInrB,EAAE6I,OAAOu2B,QAAQ,mEAAoE,OACzFp/B,EAAEwmB,iBACF,MAAMiZ,EAAYjD,EAASt9B,QAAQwgC,wBAC7BC,EAAS3/B,EAAE03B,QAAU+H,EAAU1pC,KAC/B6pC,EAAS5/B,EAAE23B,QAAU8H,EAAU3pC,IAC/B+pC,GAAUF,EAAS9pC,EAAOK,GAAKN,EAC/BkqC,GAAUF,EAAS/pC,EAAOM,GAAKP,EACjCiqC,GAAU,GAAKA,GAAUlnC,GAAcmnC,GAAU,GAAKA,GAAUnnC,GAClEwyB,EAAc0U,EAAQC,EAAQ9/B,EAAE03B,QAAS13B,EAAE23B,QAC7C,GAEF,CAAC6E,EAAU3mC,EAAQD,IAyCrB,OArCAqJ,EAAAA,EAAAA,YAAU,KACR,MAAM4hC,EAAerE,EAASt9B,QAY9B,OAXI2hC,IACFA,EAAavD,iBAAiB,QAAS2B,EAAa,CAAE6B,SAAS,IAC/DD,EAAavD,iBAAiB,YAAa1B,GAC3CiF,EAAavD,iBAAiB,aAAcpB,EAAkB,CAAE4E,SAAS,KAE3E55B,OAAOo2B,iBAAiB,YAAaxB,GACrC50B,OAAOo2B,iBAAiB,UAAWtB,GACnC90B,OAAOo2B,iBAAiB,YAAalB,EAAiB,CAAE0E,SAAS,IACjE55B,OAAOo2B,iBAAiB,WAAYhB,GACpCp1B,OAAOo2B,iBAAiB,UAAWmD,GAE5B,KACDI,IACFA,EAAatD,oBAAoB,QAAS0B,GAC1C4B,EAAatD,oBAAoB,YAAa3B,GAC9CiF,EAAatD,oBAAoB,aAAcrB,IAEjDh1B,OAAOq2B,oBAAoB,YAAazB,GACxC50B,OAAOq2B,oBAAoB,UAAWvB,GACtC90B,OAAOq2B,oBAAoB,YAAanB,GACxCl1B,OAAOq2B,oBAAoB,WAAYjB,GACvCp1B,OAAOq2B,oBAAoB,UAAWkD,EAAc,CACrD,GACA,CACDxB,EACArD,EACAE,EACAE,EACAE,EACAE,EACAE,EACAmE,EACAjE,IAGK,CACL5mC,QACAC,SACA6mC,YACApnC,SAAUqnC,EAAWz9B,QACrBw8B,cACAC,mBACAsD,cACArD,kBACAE,kBACAE,gBACAE,mBACAE,kBACAE,iBACAsE,oBACA/C,oBACAC,mBACD,EatLGiD,CAAoB9G,IAElB9a,GAAcgZ,GAAeh6B,EAAUD,GACvC8iC,GAAsB7I,GAAeh6B,EAAUD,EAAa,KAAM4wB,IAElEmS,GCjOoBC,EAC1BxS,EACApgB,EACApQ,EACA6wB,EACA6L,EACAjM,EACAC,EACAmL,KAEA,MAAMkH,GAAY3iC,EAAAA,EAAAA,QAAO,MA+BzB,OA7BAW,EAAAA,EAAAA,YAAU,KACR,IAAKyvB,IAAUpgB,GAAuB,OAAXpQ,QAAW,IAAXA,IAAAA,EAAayB,aAAc,OAGtD,MAAMwhC,GAASC,EAAAA,EAAAA,IAAG,GAAG53B,GAAAA,EAAO63B,0BAA2B,CACrDv8B,MAAO,CAAE4pB,QAAOpgB,WAChBgzB,cAAc,EACdC,qBAAsB,EACtBC,kBAAmB,MAgBrB,OAdAP,EAAU/hC,QAAUiiC,EAGpBA,EAAOM,GAAG,iBAAkB1b,IACtBA,EAAIzD,QAAQ5iB,SAAS,mBACvBq6B,EAAiB,wCAAyC,SAC1DpL,IACAC,EAAS,WAETmL,EAAiB,0CAA2C,QAC9D,IAIK,KACLoH,EAAOO,YAAY,CACpB,GACA,CAAChT,EAAOpgB,EAAoB,OAAXpQ,QAAW,IAAXA,OAAW,EAAXA,EAAayB,aAAcgvB,EAAUC,EAAUmL,IAE5DkH,CAAS,EDwLEC,CAAaxS,EAAOpgB,EAASpQ,EAAa6wB,EAAW6L,EAAgBjM,EAAUC,EAAUmL,IAG3G96B,EAAAA,EAAAA,YAAU,KACR,IAAKgiC,GAAU/hC,UAAYoP,GAAuB,OAAXpQ,QAAW,IAAXA,IAAAA,EAAayB,aAAc,OAElE,MAAMwhC,EAASF,GAAU/hC,QAsKzB,OAnKAiiC,EAAOM,GAAG,WAAW,KACnBN,EAAOQ,KAAK,YAAa,CAAEzJ,SAAU5pB,EAAS1O,QAAS1B,EAAYyB,cAAe,IAIpFwhC,EAAOM,GAAG,qBAAsBG,IAC9BhH,GAAegH,EAAM,IAIvBT,EAAOM,GAAG,YAAazY,IACrBA,EAAS9Z,UAAY8Z,EAAS9Z,YAAa,IAAIS,MAAOoc,cACtDgD,IAAWtc,GACLA,EAAKpC,MAAMkjB,GAAMA,EAAEjzB,WAAa0oB,EAAS1oB,WACpCmS,EAEF,IAAIA,EAAMuW,IACjB,IAIJmY,EAAOM,GAAG,gBAAiBnN,IACzBA,EAAaplB,UAAYolB,EAAaplB,YAAa,IAAIS,MAAOoc,cAC9DgD,IAAWtc,GACTA,EAAKrI,KAAKrM,GACRA,EAAMuC,WAAag0B,EAAah0B,SAAW,IAAKvC,KAAUu2B,GAAiBv2B,KAE9E,IAIHojC,EAAOM,GAAG,gBAAgBp2B,IAAmB,IAAlB,SAAE/K,GAAU+K,EACrC0jB,IAAWtc,GAASA,EAAK7d,QAAQ2+B,GAAMA,EAAEjzB,WAAaA,KAAU,IAIlE6gC,EAAOM,GAAG,aAAa11B,IAA8B,IAA7B,SAAEzL,EAAQ,UAAEuhC,GAAW91B,EAC7CgjB,IAAWtc,GACTA,EAAKrI,KAAKrM,GACRA,EAAMuC,WAAaA,EACf,IACKvC,EACHyT,MAAO,IAAKzT,EAAMyT,MAAOC,YAAa1T,EAAMyT,MAAMC,YAAc,GAAK,GACrErB,SAAU,IAAKrS,EAAMqS,UAAY,GAAKyxB,GACtC3yB,WAAW,IAAIS,MAAOoc,eAExBhuB,KAEP,IAIHojC,EAAOM,GAAG,gBAAgBx1B,IAA4B,IAA3B,SAAE3L,EAAQ,QAAEV,GAASqM,EAC9C8iB,IAAWtc,GACTA,EAAKrI,KAAKrM,GACRA,EAAMuC,WAAaA,EACf,IACKvC,EACHyT,MAAO,IAAKzT,EAAMyT,MAAOC,WAAY3jB,KAAKkR,IAAI,GAAIjB,EAAMyT,MAAMC,YAAc,GAAK,IACjFrB,UAAWrS,EAAMqS,UAAY,IAAIxb,QAAQktC,GAASA,EAAKniC,eAAiBC,IACxEsP,WAAW,IAAIS,MAAOoc,eAExBhuB,KAEP,IAIHojC,EAAOM,GAAG,sBAAsBt1B,IAA2B,IAA1B,SAAE7L,EAAQ,OAAEwQ,GAAQ3E,EACnD4iB,IAAWtc,GACTA,EAAKrI,KAAKrM,GACRA,EAAMuC,WAAaA,EACf,IAAKvC,EAAO+S,SAAQ5B,WAAW,IAAIS,MAAOoc,eAC1ChuB,KAEP,IAIHojC,EAAOM,GAAG,aAAaj1B,IAAiC,IAAhC,SAAElM,EAAQ,aAAEyhC,GAAcv1B,EAE9CuiB,GADEgT,IAAiBzzB,EACRmE,GAASA,EAAK7d,QAAQ2+B,GAAMA,EAAEjzB,WAAaA,IAE3CmS,IACUA,EAAKtkB,MAAMolC,GAAMA,EAAEjzB,WAAaA,KAKnDuwB,GAAgB,CAAE9T,KAAM,EAAGE,MAAO,KAHzBxK,GAMb,IAIF0uB,EAAOM,GAAG,YAAYO,IAAmB,IAAlB,SAAE1hC,GAAU0hC,EACjCjT,IAAWtc,GACTA,EAAKrI,KAAKrM,GACRA,EAAMuC,WAAaA,EACf,IAAKvC,EAAO0B,WAAW,EAAMyP,WAAW,IAAIS,MAAOoc,eACnDhuB,KAEP,IAIHojC,EAAOM,GAAG,cAAcQ,IAAmB,IAAlB,SAAE3hC,GAAU2hC,EACnClT,IAAWtc,GACTA,EAAKrI,KAAKrM,GACRA,EAAMuC,WAAaA,EACf,IAAKvC,EAAO0B,WAAW,EAAOyP,WAAW,IAAIS,MAAOoc,eACpDhuB,KAEP,IAIHojC,EAAOM,GAAG,eAAeS,IAA6B,IAA5B,SAAE5hC,EAAQ,SAAEoK,GAAUw3B,EAC9CnT,IAAWtc,GACTA,EAAKrI,KAAKrM,GACRA,EAAMuC,WAAaA,EACf,IAAKvC,EAAO2M,WAAUwE,WAAW,IAAIS,MAAOoc,eAC5ChuB,KAEP,IAIHojC,EAAOM,GAAG,eAAeU,IAA+B,IAA9B,SAAE7hC,EAAQ,WAAE8hC,GAAYD,EAChDpT,IAAWtc,GACTA,EAAKrI,KAAKrM,IAAK,IAAAgvB,EAAA,OACbhvB,EAAMuC,WAAaA,EACf,IACKvC,EACHyT,MAAO,IAAKzT,EAAMyT,MAAOqhB,aAAc90B,EAAMyT,MAAMqhB,aAAe,GAAK,GACvEvF,UAAW,IACNvvB,EAAMuvB,UACTE,OAAQ,KAAoB,QAAfT,EAAAhvB,EAAMuvB,iBAAS,IAAAP,OAAA,EAAfA,EAAiBS,SAAU,GAAK4U,IAE/ClzB,WAAW,IAAIS,MAAOoc,eAExBhuB,CAAK,KAEZ,IAIHojC,EAAOM,GAAG,cAAeY,IACnBA,EAAanK,WAAa5pB,GAC5ByrB,EAAiB,gBAAiB,UACpC,IAIFoH,EAAOM,GAAG,gBAAgBa,IAAmB,IAAlB,SAAEpK,GAAUoK,EACjCpK,IAAa5pB,IACfyrB,EAAiB,8BAA+B,SAChDnL,EAAS,WACX,IAIK,MAEN,GACA,CAACqS,GAAW3yB,EAAoB,OAAXpQ,QAAW,IAAXA,OAAW,EAAXA,EAAayB,aAAcovB,GAAWgL,EAAkBnL,EAAUiC,KAE1F,MAAM0R,IAAmB/iC,EAAAA,EAAAA,UACvB,IACEO,MAASqF,UACP,IAAI80B,GAAWh7B,QAAf,CACAg7B,GAAWh7B,SAAU,EACrB,IACE6vB,GAAU,UACJ,IAAInJ,SAAQ,CAACC,EAAS4J,KAC1BoB,GAAgB,CAAE9T,KAAM,EAAGE,MAAO,IAAM,MAAM,GAAO,CAAC8I,EAAKqM,KACrDrM,EAAK0J,EAAO1J,GACXF,EAAQuM,EAAO,GACpB,IAEJgI,GAAQ,GACRsB,KACA3B,EAAiB,gCAAiC,UACpD,CAAE,MAAOhU,GACU,eAAbA,EAAIjH,MACNib,EAAiBhU,EAAIzD,SAAW,0BAA2B,QAE/D,CAAC,QACC4X,GAAWh7B,SAAU,CACvB,CAnB8B,CAmB9B,GACC,MACL,CAAC2xB,GAAiBkJ,EAAkB2B,GAAa3M,MAGnD9vB,EAAAA,EAAAA,YAAU,KACR,IAAKyvB,IAAUpgB,EAAS,OAExB,MAAM8oB,EAAa,IAAIzF,gBAuBvB,MAtBkBvsB,WAChB,IAAI80B,GAAWh7B,QAAf,CACAg7B,GAAWh7B,SAAU,EACrB,UACQ,IAAI0mB,SAAQ,CAACC,EAAS4J,KAC1BoB,GAAgB,CAAE9T,KAAM,EAAGE,MAAO,IAAMma,EAAWrG,QAAQ,GAAO,CAAChL,EAAKqM,KAClErM,EAAK0J,EAAO1J,GACXF,EAAQuM,EAAO,GACpB,IAEJgI,GAAQ,GACRsB,IACF,CAAE,MAAO3V,GACU,eAAbA,EAAIjH,MACNib,EAAiBhU,EAAIzD,SAAW,wBAAyB,QAE7D,CAAC,QACC4X,GAAWh7B,SAAU,CACvB,CAjB8B,CAiB9B,EAGFsjC,GACO,KACLpL,EAAW1F,QACX6Q,GAAiBhiC,QAAQ,CAC1B,GACA,CAACmuB,EAAOpgB,EAASuiB,GAAiBkJ,EAAkB2B,GAAa6G,MAEpEtjC,EAAAA,EAAAA,YAAU,KACR,IAAKg8B,GAAel9B,OAASs8B,GAAO/sC,OAAS,IAAM6xB,GAAYwZ,aAAc,OAE7E,MAAMvB,EAAa,IAAIzF,gBAcvB,MAboBvsB,WAClB,IACE,MAAMq9B,QAAmBjH,GAAgB,CAAC,EAAGpE,EAAWrG,QAClD2R,GAAwB,OAAVD,QAAU,IAAVA,OAAU,EAAVA,EAAYpI,OAAOzlC,QAAQ+tC,GAAMA,EAAEzK,aAAa,GACpEoC,GAAUoI,EACZ,CAAE,MAAO3c,GACU,eAAbA,EAAIjH,MACNib,EAAiB,wBAAyB,QAE9C,GAGF6I,GACO,IAAMxL,EAAW1F,OAAO,GAC9B,CAACuJ,GAAel9B,MAAOs8B,GAAQmB,GAAiBzB,EAAkB5a,GAAYwZ,gBAEjF15B,EAAAA,EAAAA,YAAU,KACR,MAAMggC,EAAej/B,IACfm7B,IACFn7B,EAAEwmB,gBACJ,EAGF,OADAtf,OAAOo2B,iBAAiB,QAAS2B,EAAa,CAAE6B,SAAS,IAClD,IAAM55B,OAAOq2B,oBAAoB,QAAS0B,EAAY,GAC5D,CAAC9D,KAEJ,MAAM0H,IAAyB9jC,EAAAA,EAAAA,cAC7BqG,eAAOrH,EAAO+kC,EAAoBC,EAAgBC,GAAoC,IAAxBC,EAAU51C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GACtE,MAAMgT,EAAUtC,EAAMuC,SACtB,IACEyuB,IAAWtc,GAASqwB,EAAmBziC,EAASoS,WAC1CswB,GACR,CAAE,MAAOhd,GACPgJ,IAAWtc,GAASuwB,EAAW3iC,EAASoS,KACxCsnB,EAAiBhU,EAAIzD,UAAY2gB,EAAa,yBAA2B,0BAA2B,QACtG,CACF,GACA,CAAClJ,EAAkBhL,KAGfmU,IAAsBnkC,EAAAA,EAAAA,cAC1BqG,MAAOtT,EAASoE,EAAGC,EAAGwqB,EAAapN,EAAOoS,KAAgB,IAAD2M,EAAA6Q,EAAAC,EACvD,IAAKjkB,GAAYyZ,UAEf,YADAmB,EAAiB,8CAA+C,SAGlE,IAAY,OAAPjoC,QAAO,IAAPA,GAAc,QAAPwgC,EAAPxgC,EAASxD,aAAK,IAAAgkC,IAAdA,EAAgB5U,WAAYnK,GAA0B,IAAjBA,EAAMjmB,QAE9C,YADAysC,EAAiB,0CAA2C,SAG9D,IAAW,OAAPjoC,QAAO,IAAPA,GAAc,QAAPqxC,EAAPrxC,EAASxD,aAAK,IAAA60C,OAAP,EAAPA,EAAgB71C,QAASk1B,GAE3B,YADAuX,EAAiB,qCAAqD,SAIxE,MAAMsJ,EAAc,QAAQ1zB,KAAKD,QAC3BijB,EAAkB,CACtBryB,SAAU+iC,EACVvxC,QAAS,CACPmT,KAAM,OACN3W,OAAc,OAAPwD,QAAO,IAAPA,OAAO,EAAPA,EAASxD,QAAS,GACzBglB,SAAU,CAAEC,MAAOA,EAAQA,EAAMnJ,KAAKoJ,IAAC,CAAQlH,QAASkH,EAAEsL,KAAMva,IAAK+gB,IAAIQ,gBAAgBtS,GAAIE,YAAaF,EAAEvO,SAAW,KAEzHzP,SAAU,CAAEU,IAAGC,KACfib,iBAAsC,QAArBgyB,EAAAtI,GAAWlD,kBAAU,IAAAwL,OAAA,EAArBA,EAAuB9iC,WAAY,KACpDwQ,OAAQ,WACRzB,YAAY,IAAIM,MAAOoc,cACvBpsB,aAAczB,EAAYyB,aAC1BE,SAAU3B,EAAY2B,SACtB2R,MAAO,CAAEC,WAAY,EAAG2b,WAAY,EAAGwF,cAAe,EAAGC,YAAa,GACtEpzB,WAAW,EACXy4B,SAAU5pB,EACVrQ,SAAU,UAGN4kC,GACJlQ,GACA,CAACtyB,EAASyuB,IAAW,IAAIA,EAAQ6D,KACjCvtB,UAAa,IAADk+B,EAAAC,EACV,MAAMva,QAAiBqJ,GACrBvgC,EACAoE,EACAC,GACqB,QAArBmtC,EAAAxI,GAAWlD,kBAAU,IAAA0L,OAAA,EAArBA,EAAuBhjC,WAAY,MACnC,EACA,WACAqgB,GAAe,KACf,KACApN,GAAS,GACToS,GAEFoJ,IAAWtc,GACTA,EAAKrI,KAAKmpB,GAAOA,EAAEjzB,WAAa+iC,EAAcra,EAAWuK,MAG1C,QAAjBgQ,EAAAtC,GAAU/hC,eAAO,IAAAqkC,GAAjBA,EAAmB5B,KAAK,WAAY3Y,EAAS,IAE/C,CAAC3oB,EAASyuB,IAAWA,EAAOl6B,QAAQ2+B,GAAMA,EAAEjzB,WAAaD,MACzD,GAGF06B,GAAc,CAAE91B,KAAM,eAAgB,GAExC,CAACka,GAAYyZ,UAAWvG,GAAgByI,GAAWlD,WAAYmC,EAAkB77B,EAAaoQ,EAASu0B,GAAwB9T,GAAWkS,KAGtIuC,IAAczkC,EAAAA,EAAAA,cACjBhB,IACC,IAAKohB,GAAY2Z,SAEf,YADAiB,EAAiB,gDAAiD,SAGpE,MAAMrC,EAAU35B,EAAMvI,SAASU,EAAIN,GAAQC,GAAOK,EAC5CyhC,EAAU55B,EAAMvI,SAASW,EAAIP,GAAQC,GAAOM,EAClD4kC,GAAc,CAAE91B,KAAM,aAAc/O,EAAG6H,EAAMvI,SAASU,EAAGC,EAAG4H,EAAMvI,SAASW,EAAGuhC,UAASC,UAASC,WAAY75B,GAAQ,GAEtH,CAACohB,GAAY2Z,SAAUljC,GAAOC,GAAQkkC,IAGlC0J,IAAgBjkC,EAAAA,EAAAA,UACpB,IACE0/B,MAAS,CAAChpC,EAAGC,EAAGuhC,EAASC,KAClBxY,GAAYyZ,UAIjBmC,GAAc,CAAE91B,KAAM,aAAc/O,IAAGC,IAAGuhC,UAASC,YAHjDoC,EAAiB,8CAA+C,QAGL,GAC5D,MACL,CAAC5a,GAAYyZ,UAAWmB,IAGpB6B,IAAkB78B,EAAAA,EAAAA,cACrBiB,IACKm7B,GACFn7B,EAAEwmB,iBAGJqV,GAAwB77B,EAAE,GAE5B,CAACm7B,GAAeU,KAGZC,IAAkB/8B,EAAAA,EAAAA,cACrBiB,IACKm7B,IACJY,GAAwB/7B,EAAE,GAE5B,CAACm7B,GAAeY,KAGZ2H,IAAyB3kC,EAAAA,EAAAA,cAC5BiB,IACKm7B,KACAn7B,EAAE6I,OAAOu2B,QAAQ,mEACnBnD,GAAsBj8B,GAGxBi8B,GAAsBj8B,EAAGyjC,IAAc,GAEzC,CAACtI,GAAec,GAAuBwH,KAGnCvH,IAAmBn9B,EAAAA,EAAAA,cACtBiB,IACKm7B,IAGJgB,GAAyBn8B,EAAE,GAE7B,CAACm7B,GAAegB,KAGZC,IAAkBr9B,EAAAA,EAAAA,cACrBiB,IACKm7B,GACFn7B,EAAEwmB,iBAGJ6V,GAAwBr8B,EAAE,GAE5B,CAACm7B,GAAekB,KAGZsH,IAA0B5kC,EAAAA,EAAAA,cAC7BiB,IACKm7B,KACAn7B,EAAE6I,OAAOu2B,QAAQ,mEACnB7C,GAAuBv8B,GAGzBu8B,GAAuBv8B,EAAGyjC,IAAc,GAE1C,CAACtI,GAAeoB,GAAwBkH,KAGpCG,IAAkB7kC,EAAAA,EAAAA,cACrBhB,IACC,MAAM8lC,EAAmB7C,GAAoBj7B,IAAIhI,EAAMuC,UAClC,OAAhBujC,QAAgB,IAAhBA,GAAAA,EAAkBtzB,QAIvB2qB,GAAkB,CAAEj2B,KAAM,iBAAkB8c,QAAS,IAAKhkB,EAAOsQ,gBAAiBgsB,MAHhFN,EAAiB,gDAAiD,QAGyB,GAE/F,CAACiH,GAAqB3G,GAAQN,IAG1B+J,IAAkB/kC,EAAAA,EAAAA,cACtBqG,UACE,IAAK+Z,GAAYsZ,OAEf,YADAsB,EAAiB,2CAA4C,SAG/D,MAAMgK,GAAahmC,EAAM0B,gBACnBojC,GACJ9kC,GACA,CAACsC,EAASyuB,IACRA,EAAO1kB,KAAKmpB,GACVA,EAAEjzB,WAAaD,EAAU,IAAKkzB,EAAG9zB,UAAWskC,GAAcxQ,MAE9DnuB,UAAa,IAAD4+B,EACV,MAAMxM,EAASuM,EAAYjO,GAAWI,SAChCsB,EAAOz5B,EAAMuC,UAEF,QAAjB0jC,EAAA/C,GAAU/hC,eAAO,IAAA8kC,GAAjBA,EAAmBrC,KAAKoC,EAAY,WAAa,aAAc,CAAEzjC,SAAUvC,EAAMuC,UAAW,IAE9F,CAACD,EAASyuB,IACRA,EAAO1kB,KAAKmpB,GACVA,EAAEjzB,WAAaD,EAAU,IAAKkzB,EAAG9zB,UAAW1B,EAAM0B,WAAc8zB,MAEpE,GAEFwG,EAAiB,SAASgK,EAAY,SAAW,2BAA4B,UAAU,GAEzF,CAAC5kB,GAAYsZ,OAAQ3C,GAAUI,GAAY6D,EAAkB8I,GAAwB5B,KAGjFgD,IAAwBllC,EAAAA,EAAAA,cAC5BqG,UAAa,IAAD8+B,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACV,IAAKvJ,GAAel9B,MAAO,OAC3B,MAAM8lC,EAAmB7C,GAAoBj7B,IAAIk1B,GAAel9B,MAAMuC,UACtE,GAAqB,OAAhBujC,QAAgB,IAAhBA,IAAAA,EAAkBtzB,QAErB,YADAwpB,EAAiB,gDAAiD,SAGpE,GAAiC,QAA7BmK,EAACjJ,GAAel9B,MAAMjM,eAAO,IAAAoyC,GAAO,QAAPC,EAA5BD,EAA8B51C,aAAK,IAAA61C,IAAnCA,EAAqCzmB,OAExC,YADAqc,EAAiB,gCAAiC,SAGpD,IAAgC,QAA5BqK,EAAAnJ,GAAel9B,MAAMjM,eAAO,IAAAsyC,GAAO,QAAPC,EAA5BD,EAA8B91C,aAAK,IAAA+1C,OAAP,EAA5BA,EAAqC/2C,QAASk1B,GAEhD,YADAuX,EAAiB,qCAAqD,SAIxES,IAAY,GACZ,MAAMlG,EAAe,IAChB2G,GAAel9B,MAClBjM,QAAS,CACPmT,MAAkC,QAA5Bq/B,EAAArJ,GAAel9B,MAAMjM,eAAO,IAAAwyC,OAAA,EAA5BA,EAA8Br/B,OAAQ,OAC5C3W,OAAmC,QAA5Bi2C,EAAAtJ,GAAel9B,MAAMjM,eAAO,IAAAyyC,OAAA,EAA5BA,EAA8Bj2C,QAAS,GAC9CglB,UAAsC,QAA5BkxB,EAAAvJ,GAAel9B,MAAMjM,eAAO,IAAA0yC,OAAA,EAA5BA,EAA8BlxB,WAAY,CAAC,GAEvDxC,OAAQ+yB,EAAiBnL,gBAAkBuC,GAAejD,UAAYiD,GAAel9B,MAAM+S,OAC3FonB,SAAU2L,EAAiBlL,aAAesC,GAAehD,gBAAkBgD,GAAel9B,MAAMm6B,gBAG5F2K,GACJvO,GACA,CAACj0B,EAASyuB,IACRA,EAAO1kB,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAUi0B,EAAef,MAC7DnuB,UAAa,IAADq/B,EAM6FC,EASLC,SAd5FnR,GAAoByH,GAAel9B,MAAMuC,SAAU,CACvDxO,QAASwiC,EAAaxiC,QACtBgf,OAAQ+yB,EAAiBnL,gBAAkBuC,GAAejD,UAAYiD,GAAel9B,MAAM+S,OAC3Ftb,SAAUylC,GAAel9B,MAAMvI,WAE7BquC,EAAiBlL,cAAgBsC,GAAel9B,MAAMm6B,WAAa+C,GAAehD,yBAC9ExC,GAAUwF,GAAel9B,MAAMuC,SAAU26B,GAAehD,iBAC7C,QAAjByM,EAAAzD,GAAU/hC,eAAO,IAAAwlC,GAAjBA,EAAmB/C,KAAK,YAAa,CACnCrhC,SAAU26B,GAAel9B,MAAMuC,SAC/ByhC,aAAc9G,GAAehD,oBAIhB,QAAjBwM,EAAAxD,GAAU/hC,eAAO,IAAAulC,GAAjBA,EAAmB9C,KAAK,eAAgBrN,GACpCuP,EAAiBnL,iBAAmBuC,GAAejD,YAAciD,GAAel9B,MAAM+S,UACvE,QAAjB6zB,EAAA1D,GAAU/hC,eAAO,IAAAylC,GAAjBA,EAAmBhD,KAAK,qBAAsB,CAC5CrhC,SAAU26B,GAAel9B,MAAMuC,SAC/BwQ,OAAQmqB,GAAejD,YAE3B,IAEF,CAAC33B,EAASyuB,IAAWA,IACrB,GAGF0L,IAAY,GACZU,GAAkB,CAAEj2B,KAAM,oBAAqB,GAEjD,CAACg2B,GAAgBzH,GAAqBiC,GAAWsE,EAAkBiH,GAAqB6B,GAAwB5B,KAG5G2D,IAAkB7lC,EAAAA,EAAAA,cACtBqG,MAAO/E,EAAShE,KACd,IAAK8iB,GAAY0Z,QAEf,YADAkB,EAAiB,4CAA6C,SAGhE,MAAM8K,EAAW,CAAEllC,aAAczB,EAAYyB,aAAcE,SAAU3B,EAAY2B,SAAUilC,SAAU,IAAIn1B,YACnGkzB,GACJ,CAAEviC,SAAUD,IACZ,CAACA,EAASyuB,IACRA,EAAO1kB,KAAKmpB,GACVA,EAAEjzB,WAAaD,EACX,IACKkzB,EACH/hB,MAAO,IACF+hB,EAAE/hB,MACLC,WAAYpV,EACRvO,KAAKkR,IAAI,GAAIu0B,EAAE/hB,MAAMC,YAAc,GAAK,IACvC8hB,EAAE/hB,MAAMC,YAAc,GAAK,GAElCrB,SAAU/T,GACLk3B,EAAEnjB,UAAY,IAAIxb,QAAQggC,GAAMA,EAAEj1B,eAAiBzB,EAAYyB,eAChE,IAAK4zB,EAAEnjB,UAAY,GAAKy0B,IAE9BtR,MAERnuB,UAAa,IAAD2/B,QACiBpQ,GAAgBt0B,EAAShE,GAEnC,QAAjB0oC,EAAA9D,GAAU/hC,eAAO,IAAA6lC,GAAjBA,EAAmBpD,KAAKtlC,EAAU,eAAiB,YAAa,CAC9DiE,SAAUD,EACVwhC,UAAWxlC,EAAU,KAAOwoC,EAC5BjlC,QAASvD,EAAU6B,EAAYyB,aAAe,MAC9C,IAEJ,CAACU,EAASyuB,IAAWA,IACrB,EACD,GAEH,CAAC3P,GAAY0Z,QAASlE,GAAiBoF,EAAkB77B,EAAa2kC,GAAwB5B,KAG1F+D,IAAoBjmC,EAAAA,EAAAA,cACxBqG,UACE,MAAMy+B,EAAmB7C,GAAoBj7B,IAAI1F,GAC5B,OAAhBwjC,QAAgB,IAAhBA,GAAAA,EAAkBtzB,cAIjBsyB,GACJ,CAAEviC,SAAUD,IACZ,CAACA,EAASyuB,IAAWA,EAAOl6B,QAAQ2+B,GAAMA,EAAEjzB,WAAaD,MACzD+E,UAAa,IAAD6/B,QACJhQ,GAAoB50B,GAET,QAAjB4kC,EAAAhE,GAAU/hC,eAAO,IAAA+lC,GAAjBA,EAAmBtD,KAAK,eAAgB,CAAErhC,SAAUD,GAAU,IAEhE,CAACA,EAASyuB,IAAWA,IACrB,GAZAiL,EAAiB,kDAAmD,QAarE,GAEH,CAAC9E,GAAqB8E,EAAkBiH,GAAqB6B,GAAwB5B,KAGjFiE,IAAoBnmC,EAAAA,EAAAA,cACxBqG,MAAO/E,EAASqK,KACd,MAAMm5B,EAAmB7C,GAAoBj7B,IAAI1F,GAC5B,OAAhBwjC,QAAgB,IAAhBA,GAAAA,EAAkBtzB,cAIjBsyB,GACJ,CAAEviC,SAAUD,IACZ,CAACA,EAASyuB,IACRA,EAAO1kB,KAAKmpB,GAAOA,EAAEjzB,WAAaD,EAAU,IAAKkzB,EAAG7oB,YAAa6oB,MACnEnuB,UAAa,IAAD+/B,QACJ7O,GAAYj2B,EAASqK,GAEV,QAAjBy6B,EAAAlE,GAAU/hC,eAAO,IAAAimC,GAAjBA,EAAmBxD,KAAK,cAAe,CAAErhC,SAAUD,EAASqK,YAAW,IAEzE,CAACrK,EAASyuB,IAAWA,IACrB,GAbAiL,EAAiB,8CAA+C,QAcjE,GAEH,CAACzD,GAAayD,EAAkBiH,GAAqB6B,GAAwB5B,KAGzEmE,IAAmBrmC,EAAAA,EAAAA,cACvBqG,MAAO/E,EAASs2B,KACd,IAAKxX,GAAY2Z,SAEf,YADAiB,EAAiB,6CAA8C,SAGjE,MAAMsL,EAAY,CAAEzlC,QAAS1B,EAAYyB,aAAcs3B,UAAWN,EAAU2O,UAAW,IAAI31B,YACrFkzB,GACJ,CAAEviC,SAAUD,IACZ,CAACA,EAASyuB,IACRA,EAAO1kB,KAAKmpB,IAAC,IAAAgS,EAAA,OACXhS,EAAEjzB,WAAaD,EACX,IACKkzB,EACH/hB,MAAO,IAAK+hB,EAAE/hB,MAAOqhB,aAAcU,EAAE/hB,MAAMqhB,aAAe,GAAK,GAC/DvF,UAAW,IACNiG,EAAEjG,UACLE,OAAQ,KAAgB,QAAX+X,EAAAhS,EAAEjG,iBAAS,IAAAiY,OAAA,EAAXA,EAAa/X,SAAU,GAAK6X,KAG7C9R,CAAC,MAETnuB,UAAa,IAADogC,QACJ9O,GAAWr2B,EAASs2B,GAET,QAAjB6O,EAAAvE,GAAU/hC,eAAO,IAAAsmC,GAAjBA,EAAmB7D,KAAK,aAAc,CAAErhC,SAAUD,EAAS+hC,WAAYiD,GAAY,IAErF,CAAChlC,EAASyuB,IAAWA,IACrB,EACD,GAEH,CAAC3P,GAAY2Z,SAAUpC,GAAYqD,EAAkB77B,EAAa2kC,GAAwB5B,KAGtFwE,IAAiB1mC,EAAAA,EAAAA,cAAYqG,UACjC,IAAI80B,GAAWh7B,SAAY+vB,GAAWG,QAAtC,CACA8K,GAAWh7B,SAAU,EACrB,UACQ,IAAI0mB,SAAQ,CAACC,EAAS4J,KAC1BoB,GAAgB,CAAE9T,KAAMA,GAAO,EAAGE,MAAO,IAAM,MAAM,GAAM,CAAC8I,EAAKqM,KAC3DrM,EAAK0J,EAAO1J,GACXF,EAAQuM,EAAO,GACpB,IAEJgI,IAAS3nB,GAASA,EAAO,GAC3B,CAAE,MAAOsT,GACU,eAAbA,EAAIjH,MACNib,EAAiBhU,EAAIzD,SAAW,6BAA8B,QAElE,CAAC,QACC4X,GAAWh7B,SAAU,CACvB,CAhBqD,CAgBrD,GACC,CAAC2xB,GAAiB9T,GAAMkS,GAAWG,QAAS2K,IAEzC2L,IAAiB3mC,EAAAA,EAAAA,cAAYqG,UACjC,KAAI80B,GAAWh7B,SAAW6d,IAAQ,GAAlC,CACAmd,GAAWh7B,SAAU,EACrB,IACE6vB,GAAU,UACJ,IAAInJ,SAAQ,CAACC,EAAS4J,KAC1BoB,GAAgB,CAAE9T,KAAMA,GAAO,EAAGE,MAAO,IAAM,MAAM,GAAO,CAAC8I,EAAKqM,KAC5DrM,EAAK0J,EAAO1J,GACXF,EAAQuM,EAAO,GACpB,IAEJgI,IAAS3nB,GAASA,EAAO,IACzBipB,IACF,CAAE,MAAO3V,GACU,eAAbA,EAAIjH,MACNib,EAAiBhU,EAAIzD,SAAW,+BAAgC,QAEpE,CAAC,QACC4X,GAAWh7B,SAAU,CACvB,CAlB2C,CAkB3C,GACC,CAAC2xB,GAAiB9T,GAAMgd,EAAkB2B,GAAa3M,KAEpD4W,IAAiB5mC,EAAAA,EAAAA,cAAYqG,UACjC,IAAI80B,GAAWh7B,SAAY+vB,GAAWG,QAAtC,CACA8K,GAAWh7B,SAAU,EACrB,IACE6vB,GAAU,UACJ,IAAInJ,SAAQ,CAACC,EAAS4J,KAC1BoB,GAAgB,CAAE9T,KAAMA,GAAO,EAAGE,MAAO,IAAM,MAAM,GAAO,CAAC8I,EAAKqM,KAC5DrM,EAAK0J,EAAO1J,GACXF,EAAQuM,EAAO,GACpB,IAEJgI,IAAS3nB,GAASA,EAAO,IACzBipB,IACF,CAAE,MAAO3V,GACU,eAAbA,EAAIjH,MACNib,EAAiBhU,EAAIzD,SAAW,2BAA4B,QAEhE,CAAC,QACC4X,GAAWh7B,SAAU,CACvB,CAlBqD,CAkBrD,GACC,CAAC2xB,GAAiB9T,GAAMkS,GAAWG,QAAS2K,EAAkB2B,GAAa3M,KAExE6W,IAAqB7mC,EAAAA,EAAAA,cACxBsB,IACC,MAAMwlC,EAAW,IAAIrgC,IAAI,CAACnF,IACpBtC,EAAQ+wB,GAAO3gC,MAAMolC,GAAMA,EAAEjzB,WAAaD,IACpC,IAADyM,EAAP/O,IACEA,EAAMqT,iBAAiBy0B,EAASvK,IAAIv9B,EAAMqT,iBACzB,QAArBtE,EAAA/O,EAAM4S,uBAAe,IAAA7D,GAArBA,EAAuBnH,SAAST,GAAO2gC,EAASvK,IAAIp2B,MAEtD,OAAOkgB,MAAMrwB,KAAK8wC,EAAS,GAE7B,CAAC/W,KAGGgX,IAAmB/mC,EAAAA,EAAAA,cAAY,KACnCo7B,IAAe1nB,IACTA,GAAMipB,MACFjpB,IACR,GACD,CAACipB,KAEEqK,IAAcvmC,EAAAA,EAAAA,UAAQ,KAC1B,MAAMwmC,EAAU,IAAIxgC,IACpB,OAAOspB,GACJl6B,QAAQmJ,IACP,MAAMyR,EACJzR,GACAA,EAAMuC,UACoB,kBAAnBvC,EAAMuC,UACbvC,EAAMuC,SAASod,SACdsoB,EAAQngC,IAAI9H,EAAMuC,WACnBvC,EAAMvI,UACsB,kBAArBuI,EAAMvI,SAASU,GACM,kBAArB6H,EAAMvI,SAASW,IACrBxI,MAAMoQ,EAAMvI,SAASU,KACrBvI,MAAMoQ,EAAMvI,SAASW,IACtB4H,EAAMjM,SACmB,kBAAlBiM,EAAMjM,SACbiM,EAAMjM,QAAQmT,WACU1X,IAAxBwQ,EAAMjM,QAAQxD,OACdyP,EAAMjM,QAAQwhB,SAEhB,OADA0yB,EAAQ1K,IAAIv9B,EAAMuC,UACXkP,CAAO,IAEf0N,MAAK,CAAC+oB,EAAGtD,IAAM,IAAIhzB,KAAKgzB,EAAEtzB,YAAc,IAAIM,KAAKs2B,EAAE52B,aAAY,GACjE,CAACyf,KAEEoX,IAAa1mC,EAAAA,EAAAA,UACjB,SAAA2mC,EAAA,MAAO,CACLjoC,cACAC,WACAyP,OAAQg3B,GACR/2B,SAAUm3B,GACVl3B,QAAS01B,GACTz1B,aAAc2sB,GACd1sB,OAAQ41B,GACR31B,YAAa61B,GACbsC,cAAelB,GACfmB,QAASjB,GACT/2B,iBAAqC,QAApB83B,EAAAlL,GAAel9B,aAAK,IAAAooC,OAAA,EAApBA,EAAsB93B,kBAAmBgsB,GAC1D/rB,UACAjZ,cACAmZ,mBAAoB4sB,GACrB,GACD,CACEl9B,EACAC,EACAymC,GACAI,GACAxB,GACAI,GACAE,GACAoB,GACAE,GACAnK,GAAel9B,MACfs8B,GACA/rB,EACAjZ,GACA+lC,KAIEkL,IAAcvnC,EAAAA,EAAAA,cACjBhB,IAAW,IAADgP,EAAAw5B,EAAAC,EACT,MAAM7pC,GAAkC,QAArBoQ,EAAAhP,EAAM4S,uBAAe,IAAA5D,OAAA,EAArBA,EAAuBzf,SAAU,EAC9C8gB,EAAkBqsB,GAAqBmL,GAAmBnL,IAAsB,GAChFgM,GACJ7lC,EAAAA,GAAAA,KAAC2L,GAAY,CAEXxO,MAAOA,KACHmoC,GACJh4B,oBAAqBE,EAAgB1O,SAAS3B,EAAMuC,UACpD3D,WAAYA,EACZimB,YACE7kB,EAAMqT,kBACsD,QAAxDm1B,EAAAzX,GAAO3gC,MAAMolC,GAAMA,EAAEjzB,WAAavC,EAAMqT,yBAAgB,IAAAm1B,GAAS,QAATC,EAAxDD,EAA0Dz0C,eAAO,IAAA00C,OAAT,EAAxDA,EAAmEl4C,QACnE,KAEN8f,gBAAiBA,GAVZ,WAAWrQ,EAAMuC,YAepBomC,EAAgB,CACpBz+B,QAAS,CACP3W,QAAS,EACT4E,EAAmB,GAAhBpI,KAAK64C,SAAgB,GACxBxwC,EAAmB,GAAhBrI,KAAK64C,SAAgB,IAE1BpqC,QAAS,CACPjL,QAAS,EACT4E,EAAG,EACHC,EAAG,EACH3F,WAAY,CAAE4C,SAAU,GAAK8U,KAAM,YAErC4C,KAAM,CACJxZ,QAAS,EACT4E,EAAmB,IAAhBpI,KAAK64C,SAAiB,GACzBxwC,EAAmB,IAAhBrI,KAAK64C,SAAiB,GACzBn2C,WAAY,CAAE4C,SAAU,GAAK8U,KAAM,YAIvC,OAAI7S,IAEAuL,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAETwD,SAAUk7B,EACVz+B,QAAQ,UACR1L,QAAQ,UACR/L,WAAY,CAAE4C,SAAU,IACxB0X,KAAK,OACL1C,GAAIw+B,EAAYlvC,mBAAmBqG,EAAMqT,iBAAiBnT,SAEzDwoC,GARI,SAAS1oC,EAAMuC,aAcxBM,EAAAA,GAAAA,KAACxD,GAAc,CAEbW,MAAOA,EACPC,OAAQA,CAACgC,EAAGC,KACND,EAAE6I,OAAOu2B,QAAQ,4DACrB5L,GAAoBz1B,EAAMuC,SAAU,CAAE9K,SAAU,CAAEU,EAAG+J,EAAK/J,EAAGC,EAAG8J,EAAK9J,KAAOsnB,MAAK,KAAO,IAADopB,EACpE,QAAjBA,EAAA5F,GAAU/hC,eAAO,IAAA2nC,GAAjBA,EAAmBlF,KAAK,eAAgB,CACtCrhC,SAAUvC,EAAMuC,SAChB9K,SAAU,CAAEU,EAAG+J,EAAK/J,EAAGC,EAAG8J,EAAK9J,GAC/B+Y,WAAW,IAAIS,MAAOoc,eACtB,GACF,EAEJ7tB,YAAaA,EACbC,SAAUA,EACVvI,MAAOA,GAAMqI,UAEb2C,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAACwD,SAAUk7B,EAAez+B,QAAQ,UAAU1L,QAAQ,UAAUuO,KAAK,OAAM7M,SACjFwoC,KAjBE,SAAS1oC,EAAMuC,WAmBL,GAGrB,CAACm6B,GAAoBmL,GAAoB9W,GAAQoX,GAAY1S,GAAqBt1B,EAAaC,EAAU9I,GAAYO,GAAOqrC,KAGxH6F,IAAiBtnC,EAAAA,EAAAA,UAAQ,IACxBumC,GAAYz4C,QACVsT,EAAAA,GAAAA,KAACmmC,EAAAA,EAAe,CAAA9oC,SAAE8nC,GAAY37B,KAAKrM,GAAUuoC,GAAYvoC,OADhC,MAE/B,CAACgoC,GAAaO,KAEXU,IAAcjoC,EAAAA,EAAAA,cAClB,KACE+I,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAIw+B,EAAY9uC,oBAAoBmG,SAAA,EACvC2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACL,GAAIw+B,EAAY7uC,eAAekG,SAAEmC,IAAS,uBACtDQ,EAAAA,GAAAA,KAAC0qB,EAAAA,EAAM,CACL5iB,QAAQ,YACRM,QAASu5B,GACTn6B,GAAIw+B,EAAY5uC,iBAChB,aAAW,wBAAuBiG,SACnC,cAKL,CAACmC,GAAOmiC,KAGV,OAAIhH,IAAsB,IAATxe,IAAmBnc,EAAAA,GAAAA,KAACqmC,EAAAA,EAAc,KAGjDrmC,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CACTC,QAAS,CAAE3W,QAAS,GACpBiL,QAAS,CAAEjL,QAAS,GACpBwZ,KAAM,CAAExZ,QAAS,GACjBd,WAAY,CAAE4C,SAAU,IACxBiO,MAAO,IACFulC,EAAY3xC,eACfC,SAAU,SACVtE,OAAQ,QACRgB,MAAO,QACP4D,SAAU,WACVL,OAAQkiC,IACRp5B,UAEF6J,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAI,CAAE7S,KAAM,EAAGxD,QAAS,OAAQC,cAAe,SAAUwD,SAAU,YAAayI,SAAA,CAClFk9B,KACCv6B,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CACFf,GAAI,CACF5S,SAAU,QACVM,IAAK,EACLC,KAAM,EACNkB,MAAO,EACPD,OAAQ,EACRvG,gBAAiB,qBACjB0E,OAAQkiC,GACR/gC,cAAe,QAEjB0S,QAAUhJ,GAAMA,EAAE+W,kBAClBC,YAAchX,GAAMA,EAAEwmB,iBACtBvP,aAAejX,GAAMA,EAAEwmB,iBACvB,cAAY,UAIhB5lB,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAIw+B,EAAY/vC,yBAAyBoH,UAC5C2C,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAM,UAASyL,UACtB2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAASA,IAAM4lB,GAAU,GACzB,aAAW,gBACXxmB,GAAIw+B,EAAY9vC,gBAAgBmH,UAEhC2C,EAAAA,GAAAA,KAACsmC,EAAAA,EAAS,WAIhBtmC,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CACFf,GAAI,CACF5S,SAAU,WACVM,IAAK,EACLmB,MAAO,GACP9B,OAAQ,IACRpD,QAAS,OACTE,WAAY,SACZG,IAAK,GACL6L,UAEF2C,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAM,eAAcyL,UAC3B6J,EAAAA,GAAAA,MAACW,EAAAA,EAAU,CAACC,QAAQ,UAAUN,GAAI,CAAE9Y,MAAO,kBAAmB2O,SAAA,CAAC,WACpD08B,WAKf7yB,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CACFjI,IAAK+4B,GACL7xB,GAAI,IACCw+B,EAAYxxC,UAAUC,GAAYC,IACrCG,YAAa0lC,GAAgB,OAAS,OACtCgM,WAAY,OACZv2C,OAAQ,OACRgB,MAAO,OACP4H,UAAWnE,KAAe8lC,GAAgB,OAAS,UAErDnkB,YAAa3hB,QAAa9H,EAAYquC,GACtCwL,YAAa/xC,QAAa9H,EAAYuuC,GACtCuL,UAAWhyC,QAAa9H,EAAYm2C,GACpCzsB,aAAc5hB,QAAa9H,EAAY2uC,GACvCoL,YAAajyC,QAAa9H,EAAY6uC,GACtClR,WAAY71B,QAAa9H,EAAYo2C,GACrCriC,KAAK,SACL,aAAYjM,GAAa,kBAAoB,2BAC7C,YAAU,SACVkM,SAAU,EAAEtD,SAAA,CAEXmC,IAAS4mC,MAEVpmC,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CACTC,QAAS,CAAE3W,QAAS,EAAGsE,MAAOP,GAAa,IAAO,GAClDkH,QAAS,CAAEjL,QAAS,EAAGsE,MAAO,GAC9BkV,KAAM,CAAExZ,QAAS,EAAGsE,MAAOP,GAAa,IAAO,GAC/C7E,WAAY,CAAE4C,SAAU,GAAK8U,KAAM,aAAcjK,SAEhD5I,IACCuL,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAIw+B,EAAYpvC,uBAAuByG,SAClB,IAAvB8nC,GAAYz4C,QACXsT,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACL,GAAIw+B,EAAYhwC,kBAAkBqH,SAAC,+CAI/C6J,EAAAA,GAAAA,MAACC,EAAAA,EAAOC,IAAG,CACTC,QAAS,CAAE3W,QAAS,EAAG6E,EAAG,IAC1BoG,QAAS,CAAEjL,QAAS,EAAG6E,EAAG,GAC1B2U,KAAM,CAAExZ,QAAS,EAAG6E,GAAI,IACxB3F,WAAY,CAAE4C,SAAU,IAAM6K,SAAA,CAE7B6oC,GACAvL,KAAa36B,EAAAA,GAAAA,KAACqmC,EAAAA,EAAc,IAC5BnY,GAAOxhC,OAAS2hC,GAAWE,QAC1BvuB,EAAAA,GAAAA,KAAC0qB,EAAAA,EAAM,CACL5iB,QAAQ,WACRM,QAASy8B,GACTr9B,GAAI,CAAElX,GAAI,EAAG2oB,UAAW,UACxB,aAAW,mBACX9Y,SAAUw6B,IAAaJ,GAAcl9B,SACtC,oBAQT6J,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAIw+B,EAAYjxC,YAAYC,GAAOC,IAAQoI,SAAA,EAC9C2C,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAIw+B,EAAYvwC,oBAAoBT,IAAOqI,UAC9C2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACL,GAAIw+B,EAAYrwC,WAAWA,EAAWjJ,QAAQ2Q,SACvD1H,MAGmB,IAAvBwvC,GAAYz4C,QACXsT,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CAACf,GAAIw+B,EAAYhwC,kBAAkBqH,UACrC2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACC,QAAQ,QAAQpZ,MAAM,iBAAgB2O,SAAC,0DAKrD6oC,GAEDhM,GAAWrD,UACV72B,EAAAA,GAAAA,KAAC6hB,GAAU,CACTvsB,EAAG4kC,GAAW5kC,EACdC,EAAG2kC,GAAW3kC,EACduhC,QAASoD,GAAWpD,QACpBC,QAASmD,GAAWnD,QACpBhV,SAAUugB,GACVzsB,QAASA,IAAMskB,GAAc,CAAE91B,KAAM,gBACrCrP,MAAOA,GACPC,OAAQA,GACRV,OAAQkiC,GACRzU,YAAakY,GAAWlD,mBAOlC9vB,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CACFf,GAAI,IACCw+B,EAAY7vC,uBACfvB,SAAU,QACVwB,OAAQ,CAAElI,GAAI,EAAGC,GAAI,IACrBkI,MAAO,CAAEnI,GAAI,EAAGC,GAAI,IACpBgD,QAAS,OACTC,cAAe,SACfI,IAAK,CAAEtD,GAAI,GAAKC,GAAI,GACpBuH,cAAe6kC,GAAgB,OAAS,QACxCl9B,SAAA,EAEF2C,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAO6C,GAAa,uBAAyB,sBAAsB4I,UAC1E2C,EAAAA,GAAAA,KAAC0qB,EAAAA,EAAM,CACL5iB,QAAQ,YACRM,QAAS88B,GACT,aAAYzwC,GAAa,gBAAkB,eAC3C+S,GAAI,IACCw+B,EAAYzvC,sBACfpG,SAAU,CAAEjC,GAAI,UAAWC,GAAI,YAC/B+B,QAAS,CAAEhC,GAAI,UAAWC,GAAI,YAC9BuH,cAAe,QAEjByK,SAAUo6B,GAAcl9B,SAEvB5I,GAAa,QAAU,YAG5BuL,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAM,gBAAeyL,UAC5B2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAASu5B,GACTp4B,KAAK,QACL,aAAW,gBACX/B,GAAI,IAAKw+B,EAAYtvC,gBAAiBhB,cAAe,QACrDyK,SAAUw6B,IAAaJ,GAAcl9B,UAErC2C,EAAAA,GAAAA,KAAC2mC,EAAAA,EAAO,CAACx2C,SAAS,eAGtB6P,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAM,gBAAeyL,UAC5B2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAAS08B,GACTv7B,KAAK,QACL,aAAW,0BACX/B,GAAI,IACCw+B,EAAYzvC,sBACfpG,SAAU,CAAEjC,GAAI,UAAWC,GAAI,YAC/B+B,QAAS,CAAEhC,GAAI,UAAWC,GAAI,YAC9BuH,cAAe,QAEjByK,SAAUw6B,IAAaJ,IAAiBpe,IAAQ,EAAE9e,UAElD2C,EAAAA,GAAAA,KAAC4mC,EAAAA,EAAe,CAACz2C,SAAS,eAG9B6P,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAM,YAAWyL,UACxB2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAAS28B,GACTx7B,KAAK,QACL,aAAW,sBACX/B,GAAI,IACCw+B,EAAYzvC,sBACfpG,SAAU,CAAEjC,GAAI,UAAWC,GAAI,YAC/B+B,QAAS,CAAEhC,GAAI,UAAWC,GAAI,YAC9BuH,cAAe,QAEjByK,SAAUw6B,IAAaJ,KAAkBlM,GAAWG,QAAQnxB,UAE5D2C,EAAAA,GAAAA,KAAC6mC,EAAAA,EAAgB,CAAC12C,SAAS,eAG7BsE,KACAyS,EAAAA,GAAAA,MAAA4/B,GAAAA,SAAA,CAAAzpC,SAAA,EACE2C,EAAAA,GAAAA,KAACmmC,EAAAA,EAAe,CAAA9oC,SACbnQ,KAAKC,IAAI6H,GAAQ,GAAK,MACrBgL,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CACTC,QAAS,CAAE3W,QAAS,EAAGsE,MAAO,IAC9B2G,QAAS,CAAEjL,QAAS,EAAGsE,MAAO,GAC9BkV,KAAM,CAAExZ,QAAS,EAAGsE,MAAO,IAC3BpF,WAAY,CAAE4C,SAAU,IAAM6K,UAE9B2C,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAM,aAAYyL,UACzB2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAASA,IAAM2yB,GAAiB,SAChCxxB,KAAK,QACL,aAAW,2BACX/B,GAAI,IAAKw+B,EAAYtvC,gBAAiBhB,cAAe,QACrDyK,SAAUo6B,GAAcl9B,UAExB2C,EAAAA,GAAAA,KAAC+mC,EAAAA,EAAU,CAAC52C,SAAS,mBAM/B6P,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAM,WAAUyL,UACvB2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAASA,IAAM2yB,GAAiB,OAChCxxB,KAAK,QACL,aAAW,iBACX/B,GAAI,IAAKw+B,EAAYtvC,gBAAiBhB,cAAe,QACrDyK,SAAUo6B,GAAcl9B,UAExB2C,EAAAA,GAAAA,KAACgnC,EAAAA,EAAM,CAAC72C,SAAS,eAGrB+W,EAAAA,GAAAA,MAACW,EAAAA,EAAU,CACTL,GAAI,IACCw+B,EAAYrvC,cACfxG,SAAU,CAAEjC,GAAI,UAAWC,GAAI,aAC/BkP,SAAA,CAEDnQ,KAAKS,MAAc,IAARqH,IAAa,QAE3BgL,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAM,UAASyL,UACtB2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAASA,IAAM2yB,GAAiB,MAChCxxB,KAAK,QACL,aAAW,gBACX/B,GAAI,IAAKw+B,EAAYtvC,gBAAiBhB,cAAe,QACrDyK,SAAUo6B,GAAcl9B,UAExB2C,EAAAA,GAAAA,KAACinC,EAAAA,EAAG,CAAC92C,SAAS,uBAQzBkqC,GAAel9B,QACd+J,EAAAA,GAAAA,MAACyO,EAAAA,EAAM,CACLC,MAAI,EACJC,QAASA,IAAMykB,GAAkB,CAAEj2B,KAAM,qBACzC3Q,SAAS,KACToiB,WAAS,EACTtO,GAAI,IAAKw+B,EAAY3uC,gBAAiB9C,OAAQkiC,IAC9CyQ,UAAY9nC,GAAgB,WAAVA,EAAEmL,MAAqBovB,IAAYW,GAAkB,CAAEj2B,KAAM,qBAC/E,mBAAiB,yBACjB8iC,qBAAsBxN,GAASt8B,SAAA,EAE/B2C,EAAAA,GAAAA,KAACsW,EAAAA,EAAW,CAAC9O,GAAIw+B,EAAY1uC,qBAAqB+F,SAAC,gBACnD6J,EAAAA,GAAAA,MAAC+N,EAAAA,EAAa,CAACzN,GAAIw+B,EAAYxuC,uBAAuB6F,SAAA,EACpD2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACvD,GAAG,yBAAyBkD,GAAI,CAAErW,QAAS,QAASkM,SAAC,sDAGjE2C,EAAAA,GAAAA,KAACgqB,EAAAA,EAAS,CACRE,WAAS,EACTpU,WAAS,EACT5iB,MAAM,gBACNxF,OAAmC,QAA5B6qC,EAAA8B,GAAel9B,MAAMjM,eAAO,IAAAqnC,OAAA,EAA5BA,EAA8B7qC,QAAS,GAC9Cm8B,SAAWzqB,GAAMk7B,GAAkB,CAAEj2B,KAAM,sBAAuB3W,MAAO0R,EAAE6I,OAAOva,QAClF05C,QAAS,EACThd,WAAY,CAAEC,UAAWzI,IACzBpiB,QAAoC,QAA5Bg5B,EAAA6B,GAAel9B,MAAMjM,eAAO,IAAAsnC,GAAO,QAAPC,EAA5BD,EAA8B9qC,aAAK,IAAA+qC,OAAP,EAA5BA,EAAqC/rC,SAAU,GAAKk1B,GAC5DylB,aAC+B,QAA5B3O,EAAA2B,GAAel9B,MAAMjM,eAAO,IAAAwnC,GAAO,QAAPC,EAA5BD,EAA8BhrC,aAAK,IAAAirC,OAAP,EAA5BA,EAAqCjsC,SAAU,GAAKk1B,GACjD,gCACA,IAA+B,QAA5BgX,EAAAyB,GAAel9B,MAAMjM,eAAO,IAAA0nC,GAAO,QAAPC,EAA5BD,EAA8BlrC,aAAK,IAAAmrC,OAAP,EAA5BA,EAAqCnsC,SAAU,SAExD8a,GAAIw+B,EAAYtuC,mBAChB,aAAW,gBACXuyB,WAAS,IAEV1L,GAAYuZ,kBACX5wB,EAAAA,GAAAA,MAACogC,EAAAA,EAAW,CAACxxB,WAAS,EAACtO,GAAIw+B,EAAYpuC,qBAAqByF,SAAA,EAC1D2C,EAAAA,GAAAA,KAACunC,EAAAA,EAAU,CAACjjC,GAAG,eAAcjH,SAAC,kBAC9B2C,EAAAA,GAAAA,KAACwnC,EAAAA,EAAM,CACLC,QAAQ,eACR/5C,MAAO2sC,GAAejD,UACtBlkC,MAAM,eACN22B,SAAWzqB,GAAMk7B,GAAkB,CAAEj2B,KAAM,iBAAkB6L,OAAQ9Q,EAAE6I,OAAOva,QAC9E,aAAW,eAAc2P,SAExB,CAAC,UAAW,WAAY,WAAY,eAAgB,WAAY,SAAU,YAAYmM,KACpF0G,IACClQ,EAAAA,GAAAA,KAAC0nC,EAAAA,EAAQ,CAAch6C,MAAOwiB,EAAO7S,SAClC6S,EAAOG,OAAO,GAAGC,cAAgBJ,EAAOjM,MAAM,IADlCiM,UAQxBqO,GAAYwZ,cAAgB0B,GAAO/sC,OAAS,IAC3Cwa,EAAAA,GAAAA,MAACogC,EAAAA,EAAW,CAACxxB,WAAS,EAACtO,GAAIw+B,EAAYpuC,qBAAqByF,SAAA,EAC1D2C,EAAAA,GAAAA,KAACunC,EAAAA,EAAU,CAACjjC,GAAG,cAAajH,SAAC,mBAC7B2C,EAAAA,GAAAA,KAACwnC,EAAAA,EAAM,CACLC,QAAQ,cACR/5C,MAAO2sC,GAAehD,gBACtBnkC,MAAM,gBACN22B,SAAWzqB,GAAMk7B,GAAkB,CAAEj2B,KAAM,qBAAsBqJ,QAAStO,EAAE6I,OAAOva,QACnF,aAAW,gBAAe2P,SAEzBo8B,GAAOjwB,KAAKinB,IACXzwB,EAAAA,GAAAA,KAAC0nC,EAAAA,EAAQ,CAAsBh6C,MAAO+iC,EAAM6G,SAASj6B,SAClDozB,EAAM7+B,OAAS6+B,EAAMvS,MAAQ,kBADjBuS,EAAM6G,qBAQ/BpwB,EAAAA,GAAAA,MAACsP,EAAAA,EAAa,CAAChP,GAAI,CAAElR,EAAG,EAAG9E,IAAK,GAAI6L,SAAA,EAClC2C,EAAAA,GAAAA,KAAC0qB,EAAAA,EAAM,CACLtiB,QAASA,IAAMkyB,GAAkB,CAAEj2B,KAAM,qBACzCmD,GAAIw+B,EAAYnuC,sBAChB,aAAW,oBACXsI,SAAUw5B,GAASt8B,SACpB,YAGD2C,EAAAA,GAAAA,KAAC0qB,EAAAA,EAAM,CACLtiB,QAASi7B,GACTv7B,QAAQ,YACR3H,SACEw5B,MAC6B,QAA7Bb,EAACuB,GAAel9B,MAAMjM,eAAO,IAAA4nC,GAAO,QAAPC,EAA5BD,EAA8BprC,aAAK,IAAAqrC,GAAnCA,EAAqCjc,WACT,QAA5Bkc,EAAAqB,GAAel9B,MAAMjM,eAAO,IAAA8nC,GAAO,QAAPC,EAA5BD,EAA8BtrC,aAAK,IAAAurC,OAAP,EAA5BA,EAAqCvsC,SAAU,GAAKk1B,GAEvDpa,GAAIw+B,EAAYluC,oBAChB,aAAW,oBACX6vC,UAAWhO,IAAW35B,EAAAA,GAAAA,KAACsJ,EAAAA,EAAgB,CAACC,KAAM,KAAS,KAAKlM,SAE3Ds8B,GAAW,YAAc,mBAMzB,EAuBjBrB,GAAMz3B,aAAe,CACnB4M,gBAAiB,IAGnB,MAAMm6B,GAAWA,CAACrwB,EAAWC,IAEzBD,EAAU7J,UAAY8J,EAAU9J,SAChC6J,EAAU5hB,aAAe6hB,EAAU7hB,YACnC4hB,EAAUuW,QAAUtW,EAAUsW,OAC9BvW,EAAUja,YAAYyB,eAAiByY,EAAUla,YAAYyB,cAC7DwY,EAAUja,YAAY2B,WAAauY,EAAUla,YAAY2B,UACzDsY,EAAUha,WAAaia,EAAUja,UACjCga,EAAUwW,WAAavW,EAAUuW,UACjCxW,EAAU9J,gBAAgB/gB,SAAW8qB,EAAU/J,gBAAgB/gB,QAC/D6qB,EAAU9J,gBAAgB4K,OACxB,CAACoY,EAAOnY,KAAC,IAAAuvB,EAAAC,EAAAC,EAAA,OACPtX,EAAM6G,YAAyC,QAAjCuQ,EAAKrwB,EAAU/J,gBAAgB6K,UAAE,IAAAuvB,OAAA,EAA5BA,EAA8BvQ,WACjD7G,EAAM7+B,SAAsC,QAAjCk2C,EAAKtwB,EAAU/J,gBAAgB6K,UAAE,IAAAwvB,OAAA,EAA5BA,EAA8Bl2C,QAC9C6+B,EAAMvS,QAAqC,QAAjC6pB,EAAKvwB,EAAU/J,gBAAgB6K,UAAE,IAAAyvB,OAAA,EAA5BA,EAA8B7pB,KAAI,IAKzD,IAAepd,EAAAA,EAAAA,MAAKw3B,GAAOsP,I,mEExiD3B,MA0BA,GA1BuBp6C,IAAiB,IAAhB,OAAEjB,GAAQiB,EAChC,MAAOw6C,EAAYC,IAAiBlqC,EAAAA,EAAAA,UAASxR,IACtCoP,EAASkS,IAAc9P,EAAAA,EAAAA,WAAS,GAYvC,OAVAM,EAAAA,EAAAA,YAAU,KACR,GAAI9R,IAAWy7C,EAAY,CACzBn6B,GAAW,GACXo6B,EAAc17C,GAEd,MAAMukB,EAAQ/Q,YAAW,IAAM8N,GAAW,IAAQ,KAClD,MAAO,IAAMlH,aAAamK,EAC5B,IACC,CAACvkB,EAAQy7C,KAGVhoC,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CACTzL,QAASA,EAAU,CAAE3G,MAAO,CAAC,EAAG,IAAK,IAAO,CAAC,EAC7CpF,WAAY,CAAE4C,SAAU,IAAM6K,UAE9B2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACC,QAAQ,QAAOzK,UACxB/Q,EAAAA,GAAAA,GAAaC,MAEL,ECHjB,GAnBiCiB,IAAS,MAANA,EAClC,OACEwS,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CACTC,QAAS,CAAE3W,QAAS,EAAG6E,EAAG,EAAGP,MAAO,GACpC2G,QAAS,CAAEjL,QAAS,EAAG6E,GAAI,GAAIP,MAAO,KACtCpF,WAAY,CAAE4C,SAAU,IACxBiO,MAAO,CACL7L,SAAU,WACVM,IAAK,EACLmB,MAAO,GACPgH,UAEF2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CAACoB,KAAK,QAAQ,aAAW,mBAAkBlM,UACpD2C,EAAAA,GAAAA,KAACkoC,EAAAA,EAAI,CAAC1gC,GAAI,CAAE9Y,MAAO,qBAEV,ECXXq+B,GACW,2BADXA,GAEa,sBAFbA,GAGY,4BAHZA,GAIY,uCAJZA,GAMK,qBAwCX,MAAMob,GAAc,IA/BpB,MACE5a,WAAAA,CAAYC,GACVC,KAAKD,SAAWA,EAChBC,KAAKC,MAAQ,IAAIjqB,GACnB,CAEA0B,GAAAA,CAAIoF,GACF,IAAKkjB,KAAKC,MAAMzoB,IAAIsF,GAAM,OAC1B,MAAM7c,EAAQ+/B,KAAKC,MAAMvoB,IAAIoF,GAG7B,OAFAkjB,KAAKC,MAAM9I,OAAOra,GAClBkjB,KAAKC,MAAMhnB,IAAI6D,EAAK7c,GACbA,CACT,CAEAgZ,GAAAA,CAAI6D,EAAK7c,GACP,GAAI+/B,KAAKC,MAAMnkB,MAAQkkB,KAAKD,SAAU,CACpC,MAAMG,EAAWF,KAAKC,MAAME,OAAO5H,OAAOt4B,MAC1C+/B,KAAKC,MAAM9I,OAAO+I,EACpB,CACAF,KAAKC,MAAMhnB,IAAI6D,EAAK7c,EACtB,CAEAuX,GAAAA,CAAIsF,GACF,OAAOkjB,KAAKC,MAAMzoB,IAAIsF,EACxB,CAEA6a,KAAAA,GACEqI,KAAKC,MAAMtI,OACb,GAjCqB,IA6CVgjB,GAAYA,CAACta,EAAOC,EAAUC,KACzC,MAAOqa,EAAYC,IAAiBvqC,EAAAA,EAAAA,UAAS,OACtCwqC,EAAiBC,IAAsBzqC,EAAAA,EAAAA,UAAS,KAChDqF,EAASC,IAActF,EAAAA,EAAAA,WAAS,IAChCyB,EAAOujB,IAAYhlB,EAAAA,EAAAA,UAAS,MAE7B0qC,GAAgB/qC,EAAAA,EAAAA,QAAO,MACvBgrC,GAAmBhrC,EAAAA,EAAAA,QAAO,IAAIkH,KAG9BgqB,GAAczwB,EAAAA,EAAAA,cAClB,CAACgnB,EAAKwjB,KACJ,GAAiB,eAAbxjB,EAAIjH,KAAuB,OAAO,KACtC,MAAMhO,EAASiV,EAAIjV,QAAU,IAM7B,OALe,MAAXA,GAA6B,MAAXA,IACpB6d,EAAS,kDACTC,EAAS,WAEXjL,EAAS4lB,GAAiBxjB,EAAIzD,SAAWqL,IAClC,IAAI,GAEb,CAACgB,EAAUC,IAIP7uB,GAAWhB,EAAAA,EAAAA,cAAY,CAACyqC,EAAIC,IACzB,WAAc,IAAD,IAAAC,EAAAr8C,UAAAC,OAATq8C,EAAI,IAAAvkB,MAAAskB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAJD,EAAIC,GAAAv8C,UAAAu8C,GAIb,OAHIP,EAAcnqC,SAChBqI,aAAa8hC,EAAcnqC,SAEtB,IAAI0mB,SAASC,IAClBwjB,EAAcnqC,QAAUyB,YAAWyE,UACjC,MAAMgtB,QAAeoX,KAAMG,GAC3B9jB,EAAQuM,EAAO,GACdqX,EAAG,GAEV,GACC,IAGGI,GAAwB9qC,EAAAA,EAAAA,cAAY,WACxC,OADqD1R,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,IACpC+c,KAAK0/B,IAAW,CAClCC,UAAWD,EAAYC,WAAaD,EAAYnqC,cAAgB,GAChEE,SAAUiqC,EAAYjqC,UAAY,UAClCmqC,aAAcF,EAAYE,cAAgB,EAC1CC,OAAQH,EAAYG,QAAU,KAC9BtqC,aAAcmqC,EAAYnqC,cAAgBmqC,EAAYC,WAAa,MAEvE,GAAG,IAGG5S,GAAap4B,EAAAA,EAAAA,cAAY,KAC7BmqC,EAAc,MACdE,EAAmB,IACnBzlB,EAAS,MACTolB,GAAY/iB,OAAO,GAClB,IAGGkkB,GAAwBnrC,EAAAA,EAAAA,cAAY,KACxC,MAAMq4B,EAAa,IAAIzF,gBAEvB,OADA2X,EAAiBpqC,QAAQo8B,IAAIlE,GACtBA,CAAU,GAChB,IAGG+S,GAA0BprC,EAAAA,EAAAA,cAAY,KAC1CuqC,EAAiBpqC,QAAQyG,SAASyxB,GAAeA,EAAW1F,UAC5D4X,EAAiBpqC,QAAQ8mB,OAAO,GAC/B,IAGGokB,GAAkBrrC,EAAAA,EAAAA,cACtBqG,UACE,IAAKspB,EAEH,OADA/K,EAASgK,IACF,KAGT,MAAMsD,EAAW,YACXG,EAAa2X,GAAYhjC,IAAIkrB,GACnC,GAAIG,EAEF,OADA8X,EAAc9X,GACPA,EAGTntB,GAAW,GACX0f,EAAS,MAET,IACE,MAAM1jB,OCtJamF,OAAOspB,EAAOqC,KACvC,IAKE,aAJuBsZ,GAAAA,GAAAA,IAAQ,iBAAkB,CAC/Cva,QAAS,CAAEC,cAAe,UAAUrB,KACpCqC,YAEc9wB,KAAKnO,SAAW,CAAC,CACnC,CAAE,MAAOi0B,GACP,OAAOiK,EAAAA,GAAAA,IAAejK,EACxB,GD6IyBukB,CAAY5b,EAAOqC,GACtC,IAAK9wB,EAAM,MAAM,IAAIsiB,MAAM,2BAG3B,OAFA2mB,EAAcjpC,GACd8oC,GAAYzhC,IAAI2pB,EAAUhxB,GACnBA,CACT,CAAE,MAAO8lB,GACP,OAAOyJ,EAAYzJ,EAAK4H,GAC1B,CAAC,QACC1pB,GAAW,EACb,IAEF,CAACyqB,EAAOc,IAGJ+a,GAA2B/qC,EAAAA,EAAAA,UAC/B,IAAMO,EAASqqC,EArJC,MAsJhB,CAACA,IAIGI,GAA2BzrC,EAAAA,EAAAA,cAC/BqG,iBAA+B,IAAxB6X,EAAK5vB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAAI0jC,EAAM1jC,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACvB,IAAKmhC,EAEH,OADA/K,EAASgK,IACF,KAGT,MAAMsD,EAAW,sBAAoChU,IAC/CmU,EAAa2X,GAAYhjC,IAAIkrB,GACnC,GAAIG,EAEF,OADAgY,EAAmBS,EAAsBzY,IAClCA,EAGTntB,GAAW,GACX0f,EAAS,MAET,IACE,MAAM1jB,QC9JsBmF,eAAOspB,GAA+B,IAAxBzR,EAAK5vB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAAI0jC,EAAM1jC,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAClE,IAME,aALuB88C,GAAAA,GAAAA,IAAQ,qBAAsB,CACnDva,QAAS,CAAEC,cAAe,UAAUrB,KACpCmD,OAAQ,CAAE5U,SACV8T,YAEc9wB,KAAKnO,SAAW,EAClC,CAAE,MAAOi0B,GACP,OAAOiK,EAAAA,GAAAA,IAAejK,EACxB,CACF,CDmJ2B0kB,CAAqB/b,EAAOzR,EAAO8T,GACtD,IAAK9wB,EAAM,MAAM,IAAIsiB,MAAM,iCAG3B,OAFA6mB,EAAmBS,EAAsB5pC,IACzC8oC,GAAYzhC,IAAI2pB,EAAUhxB,GACnBA,CACT,CAAE,MAAO8lB,GACP,OAAOyJ,EAAYzJ,EAAK4H,GAC1B,CAAC,QACC1pB,GAAW,EACb,CACF,GACA,CAACyqB,EAAOc,EAAaqa,IAGjBa,GAAoClrC,EAAAA,EAAAA,UACxC,IAAMO,EAASyqC,EA3LC,MA4LhB,CAACA,IAIGG,GAAqB5rC,EAAAA,EAAAA,cACzBqG,MAAOwlC,EAAaC,KAClB,IAAKnc,GAAqB,OAAXkc,QAAW,IAAXA,IAAAA,EAAaltB,SAAWmtB,EAQrC,OAPAlnB,EACG+K,EAEIkc,EAEDjd,GADAA,GAFAA,IAKC,KAGT1pB,GAAW,GACX0f,EAAS,MAET,IACE,MAAM1jB,OCpNgBmF,OAAOwlC,EAAaC,EAAQnc,KACxD,IAAKkc,IAAgBC,EAAQ,MAAM,IAAItoB,MAAM,wCAC7C,IAQE,aAPuB8nB,GAAAA,GAAAA,KACrB,0BACA,CAAEO,cAAaC,UACf,CACE/a,QAAS,CAAEC,cAAe,UAAUrB,QAGxBzuB,KAAKnO,SAAW,CAAC,CACnC,CAAE,MAAOi0B,GACP,OAAOiK,EAAAA,GAAAA,IAAejK,EACxB,GDuMyB+kB,CAAeF,EAAaC,EAAQnc,GACvD,IAAKzuB,EAAM,MAAM,IAAIsiB,MAAM,6BAO3B,OANA2mB,GAAez2B,IAAI,IACdA,EACHu3B,aAAc/pC,EAAK8qC,cACnBC,iBAAqB,OAAJv4B,QAAI,IAAJA,OAAI,EAAJA,EAAMu4B,iBAAkB,GAAKH,MAEhD9B,GAAY/iB,QACL/lB,CACT,CAAE,MAAO8lB,GACP,OAAOyJ,EAAYzJ,EAAK4H,GAC1B,CAAC,QACC1pB,GAAW,EACb,IAEF,CAACyqB,EAAOc,IAIJyb,GAAmBlsC,EAAAA,EAAAA,cACvBqG,MAAO8lC,EAAcL,EAAQM,KAC3B,IAAKzc,GAAsB,OAAZwc,QAAY,IAAZA,IAAAA,EAAcxtB,SAAWmtB,GAAiB,OAANM,QAAM,IAANA,IAAAA,EAAQztB,OAUzD,OATAiG,EACG+K,EAEIwc,EAEAL,EAEDld,GADAA,GAFAA,GAFAA,IAOC,KAGT1pB,GAAW,GACX0f,EAAS,MAET,IACE,MAAM1jB,OC3NcmF,OAAO8lC,EAAcL,EAAQM,EAAQzc,KAC/D,IAAKwc,IAAiBL,IAAWM,EAAQ,MAAM,IAAI5oB,MAAM,mDACzD,IAQE,aAPuB8nB,GAAAA,GAAAA,IACrB,wBACA,CAAEa,eAAcL,SAAQM,UACxB,CACErb,QAAS,CAAEC,cAAe,UAAUrB,QAGxBzuB,KAAKnO,SAAW,CAAC,CACnC,CAAE,MAAOi0B,GACP,OAAOiK,EAAAA,GAAAA,IAAejK,EACxB,GD8MyBqlB,CAAaF,EAAcL,EAAQM,EAAQzc,GAC9D,IAAKzuB,EAAM,MAAM,IAAIsiB,MAAM,2BAE3B,OADAwmB,GAAY/iB,QACL/lB,CACT,CAAE,MAAO8lB,GACP,OAAOyJ,EAAYzJ,EAAK4H,GAC1B,CAAC,QACC1pB,GAAW,EACb,IAEF,CAACyqB,EAAOc,IA2BV,OAvBAvwB,EAAAA,EAAAA,YAAU,KACR,IAAKyvB,EAGH,OAFAyb,SACAhT,IAIF,MAAMC,EAAa8S,IAOnB,OANAK,EAAyBnT,EAAWrG,QAAQhK,OAAOhB,IAChC,eAAbA,EAAIjH,MACN3e,QAAQC,MAAM,8BAA+B2lB,EAC/C,IAGK,KACLokB,IACId,EAAcnqC,SAChBqI,aAAa8hC,EAAcnqC,QAC7B,CACD,GACA,CAACwvB,EAAO6b,EAA0BpT,EAAY+S,EAAuBC,KAGjE3qC,EAAAA,EAAAA,UACL,MACEypC,aACAE,kBACAnlC,UACA5D,QACAgqC,gBAAiBG,EACjBC,yBAA0BE,EAC1BC,qBACAM,mBACA9T,gBAEF,CACE8R,EACAE,EACAnlC,EACA5D,EACAmqC,EACAG,EACAC,EACAM,EACA9T,GAEH,E,0BEnRH,MAAMkU,GAAiB,CACrBpjC,QAAS,CAAE3W,QAAS,EAAGsE,MAAO,IAC9B2G,QAAS,CAAEjL,QAAS,EAAGsE,MAAO,EAAGpF,WAAY,CAAE4C,SAAU,KACzD0X,KAAM,CAAExZ,QAAS,EAAGsE,MAAO,GAAKpF,WAAY,CAAE4C,SAAU,MAskB1D,IAnkBkBsO,EAAAA,EAAAA,OAAK,KAAO,IAAD4pC,EAC3B,MAAM1c,GAAWkL,EAAAA,EAAAA,OACX,iBAAEC,IAAqBC,EAAAA,GAAAA,KACvBrrC,GAAQ48C,EAAAA,EAAAA,MACR,SAAErT,IAAasT,EAAAA,EAAAA,MACf,MAAE9c,EAAK,SAAE+c,EAAQ,aAAEC,EAAY,gBAAEC,EAAiB3nC,QAAS4nC,IAAgBC,EAAAA,GAAAA,GAAQjd,GACnFkd,GAAYxtC,EAAAA,EAAAA,QAAO,OAClBytC,EAAeC,IAAoBrtC,EAAAA,EAAAA,WAAS,IAC5CstC,EAAcC,IAAmBvtC,EAAAA,EAAAA,UAAS,OAC1CwtC,EAAmBC,IAAwBztC,EAAAA,EAAAA,WAAS,IACpD0tC,EAAiBC,IAAsB3tC,EAAAA,EAAAA,WAAS,IAChD4tC,EAAkBC,IAAuB7tC,EAAAA,EAAAA,WAAS,IAClD8tC,EAAUC,KAAe/tC,EAAAA,EAAAA,UAAS,OAClCyhB,GAAYusB,KAAiBhuC,EAAAA,EAAAA,UAAS,KACtCiuC,GAAaC,KAAkBluC,EAAAA,EAAAA,UAAS,GACzCmuC,IAAYxuC,EAAAA,EAAAA,SAAO,IAIvByuC,UAAWC,GAAS,QACpBjuB,GACA/a,QAASipC,GACT7sC,MAAO8sC,GAAU,WACjBC,GAAU,oBACVC,GAAmB,oBACnBC,GAAmB,oBACnBC,GAAmB,iBACnBC,GAAgB,sBAChBC,GAAqB,iBACrBC,GAAgB,iBAChBC,KACEjS,EAAAA,GAAAA,GAAU/M,EAAOgd,EAAc9c,IAE7B,WACJqa,GACAjlC,QAAS2pC,GAAa,gBACtBvD,IACEpB,GAAUta,EAAOgd,EAAc9c,IAE7B,MACJgf,GACA5pC,QAAS6pC,GAAY,eACrBC,KACEC,EAAAA,GAAAA,GAASrf,EAAOgd,EAAc9c,IAE5B,QACJof,GACAhqC,QAASiqC,GAAc,iBACvBC,KACEC,EAAAA,GAAAA,GAAWzf,EAAOgd,EAAc9c,GAG9BzwB,IAAWqB,EAAAA,EAAAA,UACf,SAAA4uC,EAAA,OACEpB,IAAavB,EACTuB,GAAUqB,cAAuB,OAAR5C,QAAQ,IAARA,OAAQ,EAARA,EAAU9rC,cACjC,QACAqtC,GAAUsB,UACV,UAC8D,QAA9DF,EAAArvB,GAAQ5wB,MAAM4nB,GAAMA,EAAEpW,gBAAyB,OAAR8rC,QAAQ,IAARA,OAAQ,EAARA,EAAU9rC,uBAAa,IAAAyuC,OAAA,EAA9DA,EAAgE9sC,OAAQ,SAC1E,QAAQ,GACd,CAAC0rC,GAAWvB,EAAU1sB,KAGlBwvB,IAAc/uC,EAAAA,EAAAA,UAClB,SAAAgvC,EAAAC,EAAA,OAA2F,QAA3FD,EAAe,OAATxB,SAAS,IAATA,IAAuB,QAAdyB,EAATzB,GAAW0B,oBAAY,IAAAD,OAAd,EAATA,EAAyBp+B,MAAMF,GAASA,EAAKxQ,gBAAyB,OAAR8rC,QAAQ,IAARA,OAAQ,EAARA,EAAU9rC,uBAAa,IAAA6uC,GAAAA,CAAS,GACpG,CAAU,OAATxB,SAAS,IAATA,QAAS,EAATA,GAAW0B,aAAsB,OAARjD,QAAQ,IAARA,OAAQ,EAARA,EAAU9rC,eAGhCgvC,IAAkBnvC,EAAAA,EAAAA,UACtB,SAAAovC,EAAA,OAA2B,QAA3BA,EAAe,OAAT5B,SAAS,IAATA,QAAS,EAATA,GAAWruB,kBAAU,IAAAiwB,EAAAA,EAAc,OAAT5B,SAAS,IAATA,IAAAA,GAAWsB,UAAY,SAAW,SAAS,GAC3E,CAAU,OAATtB,SAAS,IAATA,QAAS,EAATA,GAAWruB,WAAqB,OAATquB,SAAS,IAATA,QAAS,EAATA,GAAWsB,YAI/BO,IAAsBrvC,EAAAA,EAAAA,UAC1B,KACEO,EAAAA,EAAAA,WAASqF,MAAOF,EAAI6rB,KAClB,GAAK+b,GAAU5tC,QACf,UACQiuC,GAAWjoC,EAAI6rB,EACvB,CAAE,MAAOhL,GACU,eAAbA,EAAIjH,MACNib,EAAiBhU,EAAIzD,SAAW,wBAAyB,QAE7D,IACC,MACL,CAAC6qB,GAAYpT,IAGT+U,IAAuBtvC,EAAAA,EAAAA,UAC3B,KACEO,EAAAA,EAAAA,WAASqF,UACP,GAAK0nC,GAAU5tC,QACf,UACQkrC,GAAgBrZ,EACxB,CAAE,MAAOhL,GACU,eAAbA,EAAIjH,MACNib,EAAiBhU,EAAIzD,SAAW,yBAA0B,QAE9D,IACC,MACL,CAAC8nB,GAAiBrQ,KAIpB96B,EAAAA,EAAAA,YAAU,KACR,IAAKyvB,IAAUwJ,IAAayT,EAAiB,OAE7C,MAAMvU,EAAa,IAAIzF,gBAGvB,OAFAkd,GAAoB3W,EAAUd,EAAWrG,QAElC,KACLqG,EAAW1F,QACXmd,GAAoBtuC,SACpBusC,GAAU5tC,SAAU,CAAK,CAC1B,GACA,CAACwvB,EAAOwJ,EAAUyT,EAAiBkD,MAEtC5vC,EAAAA,EAAAA,YAAU,KACR,IAAKyvB,IAAUid,IAAoBI,EAAe,OAElD,MAAM3U,EAAa,IAAIzF,gBAGvB,OAFAmd,GAAqB1X,EAAWrG,QAEzB,KACLqG,EAAW1F,QACXod,GAAqBvuC,QAAQ,CAC9B,GACA,CAACmuB,EAAOid,EAAiBI,EAAe+C,MAG3C7vC,EAAAA,EAAAA,YAAU,KACR,IAAK6sC,EAAU5sC,QAAS,OAExB,MAAM6vC,EAAW,IAAIC,sBACnB5gD,IAAc,IAAZ6gD,GAAM7gD,EACF6gD,EAAMC,iBAAmBnD,GAC3BC,GAAiB,EACnB,GAEF,CAAE/9C,UAAW,KAIf,OADA8gD,EAASI,QAAQrD,EAAU5sC,SACpB,IAAM6vC,EAASrN,YAAY,GACjC,KAGHziC,EAAAA,EAAAA,YAAU,KACR,IAAKgtC,IAAiBvd,IAAUid,GAAiC,UAAbxtC,IAAqC,UAAbA,GAAuB,OAEnG,MAAMi5B,EAAa,IAAIzF,gBAUvB,OATA/L,QAAQmN,IAAI,CACV+a,GAAe,CAAEnvB,WAAY,UAAYyY,EAAWrG,QACpDmd,GAAiB,CAAC,EAAG9W,EAAWrG,UAC/BhK,OAAOhB,IACS,eAAbA,EAAIjH,MACNib,EAAiBhU,EAAIzD,SAAW,kCAAmC,QACrE,IAGK,IAAM8U,EAAW1F,OAAO,GAC9B,CAACua,EAAcvd,EAAOid,EAAiBxtC,GAAU2vC,GAAgBI,GAAkBnU,KAGtF96B,EAAAA,EAAAA,YAAU,KACJiuC,KACFnT,EAAiBmT,IAAc,oBAAqB,SACtC,OAAVA,SAAU,IAAVA,IAAAA,GAAYxtC,SAAS,oBACvBiB,YAAW,IAAMiuB,EAAS,YAAY,KAE1C,GACC,CAACse,GAAYnT,EAAkBnL,KAGlC3vB,EAAAA,EAAAA,YAAU,KACR,GAAe,OAAVgqC,SAAU,IAAVA,KAAAA,GAAYe,aAAc,OAE/B,MAAMpB,EAAaK,GAAWmG,aAAenG,GAAWe,aACxD,GAAIf,GAAWe,aAAepB,EAAY,CACxCiE,GAAejE,EAAaK,GAAWe,cACvC,MAAM1jC,EAAU3F,YAAW,IAAMksC,GAAe,IAAI,KACpD,MAAO,IAAMtlC,aAAajB,EAC5B,IACC,CAAW,OAAV2iC,SAAU,IAAVA,QAAU,EAAVA,GAAYe,eAGhB,MAAMqF,IAAoBtwC,EAAAA,EAAAA,cAAYqG,UACpC,IAAK6mC,GAA8B,UAAb9tC,IAAqC,UAAbA,GAAuB,OAErE,MAAMmxC,EAAkBC,GAAkBtD,GAC1C,GAAIqD,EACFvV,EAAiBuV,EAAiB,cAIpC,UACQlC,GAAoBnB,EAAa/T,SAAU,CAC/CpZ,KAAMmtB,EAAantB,KACnBvY,YAAa0lC,EAAa1lC,YAC1B+nC,UAAuC,WAA5BrC,EAAattB,WACxBA,WAAYstB,EAAattB,WACzB1Z,KAAMgnC,EAAahnC,KACnBuqC,QAASvD,EAAauD,SAAW,KACjCC,SAAUxD,EAAawD,UAAY,KACnCC,SAAUzD,EAAayD,SACvB1wB,KAAMitB,EAAajtB,OAErB+a,EAAiB,gBAAiB,WAClCmS,EAAgB,KAClB,CAAE,MAAOnmB,GACPgU,EAAiBhU,EAAIzD,SAAW,yBAA0B,QAC5D,IACC,CAAC2pB,EAAc9tC,GAAUivC,GAAqBrT,EAAkB7B,IAE7DyX,IAAiB5wC,EAAAA,EAAAA,cAAYqG,UACjC,GAAK4nC,GAEL,UACQK,GAAoBnV,EAAUqW,IACpCxU,EAAiB,UAASwU,GAAc,cAAgB,aAAe,UACzE,CAAE,MAAOxoB,GACPgU,EAAiB,4BAA6B,QAChD,IACC,CAACiT,GAAW9U,EAAUqW,GAAalB,GAAqBtT,IAErD1nB,IAAatT,EAAAA,EAAAA,cAAY,KAAO,IAAD6wC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAClB,UAAbjyC,IAAqC,UAAbA,KAAyB6uC,IACrDd,EAAgB,CACdhU,SAAU8U,GAAU9U,SACpBpZ,KAAMkuB,GAAUluB,MAAQ,GACxBvY,YAAaymC,GAAUzmC,aAAe,GACtC+nC,UAAWtB,GAAUsB,YAAa,EAClC3vB,WAAYquB,GAAUruB,aAAequB,GAAUsB,UAAY,SAAW,WACtErpC,KAAM+nC,GAAU/nC,MAAQ,WACxBuqC,QAASxC,GAAUwC,SAAW,GAC9BC,SAAUzC,GAAUyC,UAAY,GAChCC,SAAU,CACRW,YAA8B,QAAlBT,EAAA5C,GAAU0C,gBAAQ,IAAAE,OAAA,EAAlBA,EAAoBS,aAAc,IAC9CC,YAA8B,QAAlBT,EAAA7C,GAAU0C,gBAAQ,IAAAG,OAAA,EAAlBA,EAAoBS,aAAc,EAC9CC,aAA+B,QAAlBT,EAAA9C,GAAU0C,gBAAQ,IAAAI,OAAA,EAAlBA,EAAoBS,cAAe,GAChDC,eAAiC,QAAlBT,EAAA/C,GAAU0C,gBAAQ,IAAAK,OAAA,EAAlBA,EAAoBS,gBAAiB,EACpDC,mBAAqC,QAAlBT,EAAAhD,GAAU0C,gBAAQ,IAAAM,OAAA,EAAlBA,EAAoBS,oBAAqB,EAC5DC,eAAqD,KAApB,QAAlBT,EAAAjD,GAAU0C,gBAAQ,IAAAO,OAAA,EAAlBA,EAAoBS,eACnCC,kBAAoC,QAAlBT,EAAAlD,GAAU0C,gBAAQ,IAAAQ,OAAA,EAAlBA,EAAoBS,oBAAoB,EAC1DC,uBAAqE,KAA5B,QAAlBT,EAAAnD,GAAU0C,gBAAQ,IAAAS,OAAA,EAAlBA,EAAoBS,uBAC3CC,oBAAsC,QAAlBT,EAAApD,GAAU0C,gBAAQ,IAAAU,OAAA,EAAlBA,EAAoBS,qBAAsB,IAEhE7xB,KAAMguB,GAAUhuB,MAAQ,GACxB8xB,aAAc,CAAEnxC,aAAsB,OAAR8rC,QAAQ,IAARA,OAAQ,EAARA,EAAU9rC,aAAc2B,KAAMnD,KAC5D,GACD,CAAC6uC,GAAmB,OAARvB,QAAQ,IAARA,OAAQ,EAARA,EAAU9rC,aAAcxB,KAEjC4yC,IAAsBhyC,EAAAA,EAAAA,cAAY,KACrB,UAAbZ,IAAqC,UAAbA,IAC5BiuC,GAAqB,EAAK,GACzB,CAACjuC,KAEE6yC,IAAcjyC,EAAAA,EAAAA,cAAY,KAC9B4tC,GAAc,GAAGzlC,OAAOC,SAAS8pC,gBAAgB/Y,KACjDoU,GAAmB,EAAK,GACvB,CAACpU,IAEEgZ,IAAyBnyC,EAAAA,EAAAA,cAAY,KACxB,UAAbZ,IACJquC,GAAoB,EAAK,GACxB,CAACruC,KAEEoU,IAAexT,EAAAA,EAAAA,cAAYqG,UAC/B,UACQkoC,GAAoBpV,GAC1B6B,EAAiB,gBAAiB,WAClCnL,EAAS,UACX,CAAE,MAAO7I,GACPgU,EAAiB,yBAA0B,QAC7C,CAAC,QACCyS,GAAoB,EACtB,IACC,CAACtU,EAAUoV,GAAqB1e,EAAUmL,IAGvCoX,IAAiBpyC,EAAAA,EAAAA,cAAYqG,UACjC,GAAKgb,GAIL,UACQgH,UAAUgqB,UAAUC,MAAMjxB,IAChC2Z,EAAiB,cAAe,UAClC,CAAE,MAAOhU,GACPgU,EAAiB,sBAAuB,QAC1C,CAAC,QACCuS,GAAmB,EACrB,MAVEvS,EAAiB,qBAAsB,QAUzC,GACC,CAAC3Z,GAAY2Z,IAEVuX,IAAiBvyC,EAAAA,EAAAA,cAAawnB,GAAUmmB,GAAYnmB,EAAMgF,gBAAgB,IAC1EgmB,IAAkBxyC,EAAAA,EAAAA,cAAY,IAAM2tC,GAAY,OAAO,IAEvD6C,IAAoBxwC,EAAAA,EAAAA,cACvBkB,IAAU,IAADuxC,EACR,GAAS,OAAJvxC,QAAI,IAAJA,GAAU,QAANuxC,EAAJvxC,EAAM6e,YAAI,IAAA0yB,IAAVA,EAAY9zB,OAAQ,MAAO,yBAChC,MAAM+zB,EAAIxxC,EAAKyvC,UAAY,CAAC,EAC5B,OAAI+B,EAAEpB,WAAa,GAAKoB,EAAEpB,WAAa,IAAc,6BACjDoB,EAAEnB,WAAa,EAAU,kCACzBmB,EAAEjB,cAAgB,EAAU,qCAC5BiB,EAAEhB,kBAAoB,GAAKgB,EAAEhB,kBAAoB,IAAY,kCAC7DgB,EAAElB,YAAc,GAAKkB,EAAElB,YAAc,IAAc,8BAC/B,WAApBtwC,EAAK0e,aAA4B1e,EAAKuvC,UAAYvvC,EAAKwvC,WAAiB,OAAL7B,SAAK,IAALA,QAAK,EAALA,GAAOtgD,QAAS,EAC9E,wCAEF,EAAE,GAEX,CAACsgD,KAGG8D,IAAsBlyC,EAAAA,EAAAA,UAAQ,KAAO,IAADmyC,EAExC,MADuB,IAAI,IAAInsC,KAAa,OAATwnC,SAAS,IAATA,IAA0B,QAAjB2E,EAAT3E,GAAW4E,uBAAe,IAAAD,OAAjB,EAATA,EAA4B/8C,QAAQsQ,GAAOA,MAAO,KAC/DkF,KAAKynC,IACzB/pC,EAAAA,GAAAA,MAACwgC,EAAAA,EAAQ,CAEPt/B,QAASA,KACP4lB,EAAS,UAAUijB,KACnBN,IAAiB,EAEnB,aAAY,qBAAqBM,EAAQhtC,MAAM,EAAG,KAAK5G,SAAA,CACxD,qBACoB4zC,EAAQhtC,MAAM,EAAG,KAP/BgtC,IASP,GACD,CAAU,OAAT7E,SAAS,IAATA,QAAS,EAATA,GAAW4E,gBAAiBhjB,EAAU2iB,KAE1C,OAAI3F,GACKhrC,EAAAA,GAAAA,KAACqmC,EAAAA,EAAc,KAItBn/B,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CAACf,GAAI,CAAE5S,SAAU,WAAY5D,MAAO,OAAQhB,OAAQ,SAAUqN,SAAA,EAChE6J,EAAAA,GAAAA,MAACqB,EAAAA,EAAG,CACFf,GAAI,CACF5S,SAAU,WACVM,IAAK,GACLmB,MAAO,EACPlF,QAAS,OACTK,IAAK,GACLO,SAAU,OACVT,eAAgB,WAChBiD,OAAQ,IACR,4BAA6B,CAAEzF,UAAW,eAC1CuO,SAAA,EAEF2C,EAAAA,GAAAA,KAACmmC,EAAAA,EAAe,CAAA9oC,SACbgvC,IACCrsC,EAAAA,GAAAA,KAAA8mC,GAAAA,SAAA,CAAAzpC,UACE2C,EAAAA,GAAAA,KAACkxC,EAAAA,EAAQ,CAACppC,QAAQ,WAAW9W,MAAO,GAAIhB,OAAQ,QAGlDkX,EAAAA,GAAAA,MAAA4/B,GAAAA,SAAA,CAAAzpC,SAAA,EACE2C,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAACwD,SAAU6/B,GAAgBpjC,QAAQ,UAAU1L,QAAQ,UAAUuO,KAAK,OAAM7M,UACnF2C,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAO,qBAAqBm8C,KAAkB1wC,UACrD2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CAAC,aAAY,qBAAqB4lC,KAAkB1wC,SACxC,WAApB0wC,IAA+B/tC,EAAAA,GAAAA,KAACmxC,EAAAA,EAAM,KAAMnxC,EAAAA,GAAAA,KAACoxC,EAAAA,EAAI,WAIxDpxC,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAACwD,SAAU6/B,GAAgBpjC,QAAQ,UAAU1L,QAAQ,UAAUuO,KAAK,OAAM7M,UACnF2C,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAO+7C,GAAc,mBAAqB,iBAAiBtwC,UAClE2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAAS2mC,GACT,aAAYpB,GAAc,mBAAqB,iBAAiBtwC,SAE/DswC,IAAc3tC,EAAAA,GAAAA,KAACqxC,EAAAA,EAAQ,CAAC3iD,MAAM,WAAasR,EAAAA,GAAAA,KAACsxC,EAAAA,EAAc,WAIjEtxC,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAACwD,SAAU6/B,GAAgBpjC,QAAQ,UAAU1L,QAAQ,UAAUuO,KAAK,OAAM7M,UACnF2C,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAM,cAAayL,UAC1B2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CAACC,QAASgoC,GAAa,aAAW,cAAa/yC,UACxD2C,EAAAA,GAAAA,KAACuxC,EAAAA,EAAK,WAIG,UAAbh0C,IAAqC,UAAbA,MACxB2J,EAAAA,GAAAA,MAAA4/B,GAAAA,SAAA,CAAAzpC,SAAA,EACE2C,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAACwD,SAAU6/B,GAAgBpjC,QAAQ,UAAU1L,QAAQ,UAAUuO,KAAK,OAAM7M,UACnF2C,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAM,iBAAgByL,UAC7B2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACTC,QAAS+nC,GACT,aAAY,mCAAyC,OAAPhyB,SAAO,IAAPA,QAAO,EAAPA,GAASzxB,SAAU,KAAK2Q,UAEtE2C,EAAAA,GAAAA,KAACwxC,EAAAA,EAAK,CAACC,cAAqB,OAAPtzB,SAAO,IAAPA,QAAO,EAAPA,GAASzxB,SAAU,EAAGgC,MAAM,UAAS2O,UACxD2C,EAAAA,GAAAA,KAAC0xC,EAAAA,EAAM,aAKf1xC,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAACwD,SAAU6/B,GAAgBpjC,QAAQ,UAAU1L,QAAQ,UAAUuO,KAAK,OAAM7M,UACnF2C,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAM,aAAYyL,UACzB2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CAACC,QAASqJ,GAAY,aAAW,aAAYpU,UACtD2C,EAAAA,GAAAA,KAAC2xC,EAAAA,EAAI,aAMD,UAAbp0C,KACCyC,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAACwD,SAAU6/B,GAAgBpjC,QAAQ,UAAU1L,QAAQ,UAAUuO,KAAK,OAAM7M,UACnF2C,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAM,eAAcyL,UAC3B2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CAACC,QAASkoC,GAAwB,aAAW,eAAcjzC,UACpE2C,EAAAA,GAAAA,KAAC8oB,EAAAA,EAAM,CAACp6B,MAAM,iBAKZ,OAAT09C,SAAS,IAATA,IAA0B,QAAjB1B,EAAT0B,GAAW4E,uBAAe,IAAAtG,OAAjB,EAATA,EAA4Bh+C,QAAS,IACpCsT,EAAAA,GAAAA,KAACmH,EAAAA,EAAOC,IAAG,CAACwD,SAAU6/B,GAAgBpjC,QAAQ,UAAU1L,QAAQ,UAAUuO,KAAK,OAAM7M,UACnF2C,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAM,eAAcyL,UAC3B2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CACT,gBAAc,aACd,gBAAc,OACdC,QAASsoC,GACTlpC,GAAI,CAAE1T,QAAS,mBAAoB,UAAW,CAAEA,QAAS,iBACzD,aAAW,yBAAwBuJ,UAEnC2C,EAAAA,GAAAA,KAAC4xC,EAAAA,EAAQ,gBAQvB5xC,EAAAA,GAAAA,KAAC6xC,EAAAA,EAAI,CACHvtC,GAAG,aACHunC,SAAUA,EACVj2B,KAAMgf,QAAQiX,GACdh2B,QAAS86B,GACTmB,UAAW,CACTp5C,MAAO,CACL8O,GAAI,CAAE/X,aAAc1B,EAAMwB,MAAMC,sBAElC6N,SAEDyzC,SAIL9wC,EAAAA,GAAAA,KAACuI,EAAAA,EAAG,CACFjI,IAAK4qC,EACL1jC,GAAI,CACF5S,SAAU,WACVwB,OAAQ,GACRjB,KAAM,GACNZ,OAAQ,IACRpD,QAAS,OACTE,WAAY,SACZG,IAAK,EACL,4BAA6B,CAAE1C,UAAW,eAC1CuO,UAEF2C,EAAAA,GAAAA,KAACmmC,EAAAA,EAAe,CAAA9oC,UACZ6J,EAAAA,GAAAA,MAACC,EAAAA,EAAOC,IAAG,CAETC,QAAS,CAAE3W,QAAS,EAAGsE,MAAO,IAC9B2G,QAAS,CAAEjL,QAAS,EAAGsE,MAAO,GAC9BkV,KAAM,CAAExZ,QAAS,EAAGsE,MAAO,IAC3BpF,WAAY,CAAE4C,SAAU,IAAM6K,SAAA,EAE9B2C,EAAAA,GAAAA,KAACopB,EAAAA,EAAO,CAACx3B,MAAM,mBAAkByL,UAC/B2C,EAAAA,GAAAA,KAACmI,EAAAA,EAAU,CAACoB,KAAK,QAAQ,aAAY,sBAA+B,OAAV8+B,SAAU,IAAVA,QAAU,EAAVA,GAAYe,eAAgB,IAAI/rC,UACxF2C,EAAAA,GAAAA,KAACkoC,EAAAA,EAAI,SAGTloC,EAAAA,GAAAA,KAAC+xC,GAAc,CAACxlD,QAAkB,OAAV87C,SAAU,IAAVA,QAAU,EAAVA,GAAYe,eAAgB,IACnD4C,GAAc,IAAKhsC,EAAAA,GAAAA,KAACgyC,GAAwB,CAAChG,YAAaA,OAZvD,eAiBZhsC,EAAAA,GAAAA,KAACs4B,GAAK,CACJ5qB,QAAS4pB,EACT3hC,YAAqB,OAATy2C,SAAS,IAATA,QAAS,EAATA,GAAWluB,OAAQ,GAC/B4P,MAAOA,EACPxwB,YAAautC,EACbttC,SAAUA,GACVwwB,SAAU+c,EACVr9B,gBAAiB,KAGlB49B,IACCrrC,EAAAA,GAAAA,KAACiyC,GAAAA,EAAe,CACdr8B,MAAM,EACNhkB,MAAM,aACN6+B,MAAO4a,EACP6G,SAAU5G,EACV6G,OAAQ1D,GACR2D,SAAUA,IAAM9G,EAAgB,MAChCnrC,SAAUksC,IAAgBY,IAAgBI,GAC1CL,MAAOA,IAAS,GAChBI,QAASA,IAAW,GACpBtf,MAAOA,EACPvwB,SAAUA,KAIbguC,IACCvrC,EAAAA,GAAAA,KAACqyC,GAAAA,EAAgB,CACfz8B,KAAM21B,EACN35C,MAAM,uBACN8b,QAAS4pB,EACTxJ,MAAOA,EACPqkB,OAAQA,KACNlE,GAAoB3W,GACpBkU,GAAqB,EAAM,EAE7B4G,SAAUA,IAAM5G,GAAqB,GACrCrrC,SAAuB,UAAb5C,IAAqC,UAAbA,GAClC4gB,QAASA,IAAW,GACpBm0B,UAAW3F,GACX4F,aAAc3F,GACdC,iBAAkBA,MAItB3lC,EAAAA,GAAAA,MAACyO,EAAAA,EAAM,CACLC,KAAM61B,EACN51B,QAASA,IAAM61B,GAAmB,GAClCh4C,SAAS,KACToiB,WAAS,EACTtO,GAAI,CAAE,qBAAsB,CAAE/X,aAAc1B,EAAMwB,MAAMC,qBACxD,kBAAgB,qBAAoB6N,SAAA,EAEpC2C,EAAAA,GAAAA,KAACsW,EAAAA,EAAW,CAAChS,GAAG,qBAAoBjH,SAAC,iBACrC6J,EAAAA,GAAAA,MAAC+N,EAAAA,EAAa,CAAA5X,SAAA,EACZ2C,EAAAA,GAAAA,KAAC6H,EAAAA,EAAU,CAACC,QAAQ,QAAQN,GAAI,CAAEzW,GAAI,GAAIsM,SAAC,8CAG3C2C,EAAAA,GAAAA,KAACgqB,EAAAA,EAAS,CACRlU,WAAS,EACTpoB,MAAO8xB,GACPgzB,WAAY,CAAEC,UAAU,GACxB,aAAW,yBAGfvrC,EAAAA,GAAAA,MAACsP,EAAAA,EAAa,CAAAnZ,SAAA,EACZ2C,EAAAA,GAAAA,KAAC0qB,EAAAA,EAAM,CACLtiB,QAASA,IAAMsjC,GAAmB,GAClClkC,GAAIpX,GAAAA,GACJ,aAAW,qBAAoBiN,SAChC,WAGD2C,EAAAA,GAAAA,KAAC0qB,EAAAA,EAAM,CACLtiB,QAASmoC,GACT/oC,GAAIzX,GAAAA,GACJ43C,WAAW3nC,EAAAA,GAAAA,KAAC+H,EAAAA,EAAI,IAChB,aAAW,kBAAiB1K,SAC7B,qBAML2C,EAAAA,GAAAA,KAAC0yC,GAAAA,EAAwB,CACvB98B,KAAM+1B,EACN91B,QAASA,IAAM+1B,GAAoB,GACnC+G,UAAWhhC,GACX+P,QAAQ,4EACRvhB,SAAUksC,OAER,G","sources":["utils/formatPoints.js","styles/BaseStyles.js","components/social-features/Board/BoardStyles.js","hooks/useBoard.js","components/social-features/Tweet/TweetContentStyles.js","components/social-features/Tweet/Tweet.jsx","components/social-features/Tweet/ModalStyles.js","components/social-features/Tweet/LinkPreview.jsx","components/social-features/Tweet/TweetContent.jsx","components/social-features/Tweet/TweetPopupStyles.js","constants/validations.js","components/social-features/Tweet/TweetPopup.jsx","hooks/useFileUpload.js","api/tweetsApi.js","utils/tweetUtils.js","hooks/useTweets.js","components/social-features/Board/Board.jsx","hooks/useWebSocket.js","components/AnimatedPoints/AnimatedPoints.jsx","components/PointsDeductionAnimation/PointsDeductionAnimation.jsx","hooks/usePoints.js","api/pointsApi.js","pages/BoardPage.jsx"],"sourcesContent":["/**\n * Formats a number into a compact string representation (e.g., 1500 -> \"1.5K\", 1500000 -> \"1.5M\").\n * @param {number} points - The number to format.\n * @param {Object} [options] - Formatting options.\n * @param {number} [options.decimals=1] - Number of decimal places (0 to disable).\n * @param {boolean} [options.allowNegative=false] - Allow negative numbers.\n * @returns {string} Formatted string or \"0\" for invalid inputs.\n */\nexport const formatPoints = (points, options = {}) => {\n  const { decimals = 1, allowNegative = false } = options;\n\n  // Validate input\n  if (typeof points !== 'number' || Number.isNaN(points)) {\n    return '0';\n  }\n\n  // Handle negative numbers\n  const isNegative = points < 0;\n  if (isNegative && !allowNegative) {\n    return '0';\n  }\n  const absPoints = Math.abs(points);\n\n  // Configuration for thresholds and suffixes\n  const formats = [\n    { threshold: 1_000_000_000, suffix: 'B' },\n    { threshold: 1_000_000, suffix: 'M' },\n    { threshold: 1_000, suffix: 'K' },\n    { threshold: 0, suffix: '' },\n  ];\n\n  // Find appropriate format\n  const { threshold, suffix } = formats.find(({ threshold }) => absPoints >= threshold) || formats[formats.length - 1];\n\n  // Format number\n  if (threshold === 0) {\n    return (isNegative ? '-' : '') + absPoints.toString();\n  }\n\n  const value = absPoints / threshold;\n  const formattedValue = decimals === 0\n    ? Math.round(value).toString()\n    : value.toFixed(decimals).replace(/\\.0+$/, '');\n\n  return (isNegative ? '-' : '') + formattedValue + suffix;\n};","import { alpha } from \"@mui/material\";\nimport theme from \"../Theme\";\n\n// Override theme breakpoints to include sm at 770px\nconst customTheme = {\n  ...theme,\n  breakpoints: {\n    ...theme.breakpoints,\n    values: {\n      xs: 150,\n      sm: 700,\n      md: 1200,\n      lg: 1500,\n      xl: 1536,\n    },\n  },\n};\n\nexport const BOARD_SIZE = 10000;\nexport const BASE_Z_INDEX = 10;\nexport const BASE_SHADOW = \"0 4px 16px rgba(0,0,0,0.12)\";\nexport const HOVER_SHADOW = \"0 8px 24px rgba(0,0,0,0.18)\";\nexport const MODAL_Z_INDEX = 111;\nexport const MODAL_SHADOW = \"0 8px 28px rgba(0,0,0,0.22)\";\nexport const MEDIA_PREVIEW_SIZE = 250;\nexport const TWEET_Z_INDEX = 99;\n\nexport const baseTypographyStyles = {\n  color: \"text.primary\",\n  fontWeight: 400,\n  lineHeight: 1.6,\n};\n\nexport const baseHoverEffect = {\n  \"&:hover\": { transform: \"translateY(-2px)\", boxShadow: HOVER_SHADOW },\n  \"&:focus\": { outline: (theme) => `2px solid ${alpha(theme.palette.primary.main, 0.5)}`, outlineOffset: 2 },\n};\n\nexport const baseCardStyles = {\n  bgcolor: \"background.paper\",\n  borderRadius: customTheme.shape.borderRadiusMedium,\n  boxShadow: BASE_SHADOW,\n  border: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.6)}`,\n  transition: \"all 0.3s ease\",\n  ...baseHoverEffect,\n  width: { xs: \"100%\", sm: \"auto\" },\n  boxSizing: \"border-box\",\n};\n\nexport const baseButtonStyles = {\n  borderRadius: customTheme.shape.borderRadiusLarge,\n  textTransform: \"none\",\n  transition: \"all 0.2s ease\",\n  fontWeight: 600,\n  \"&:hover\": { transform: \"scale(1.02)\", backgroundColor: (theme) => theme.palette.primary.dark },\n  \"&:active\": { transform: \"scale(0.98)\" },\n  \"&:focus\": { outline: (theme) => `2px solid ${alpha(theme.palette.primary.main, 0.5)}`, outlineOffset: 2 },\n  \"&:disabled\": { backgroundColor: \"action.disabled\", color: \"action.disabledOpacity\" },\n};\n\nexport const actionButtonStyles = {\n  height: { xs: \"40px\", sm: \"50px\" },\n  minWidth: { xs: \"120px\", sm: \"150px\" },\n  borderRadius: customTheme.shape.borderRadiusLarge,\n  padding: { xs: \"0 15px\", sm: \"0 25px\" },\n  backgroundColor: \"primary.main\",\n  color: \"primary.contrastText\",\n  boxShadow: \"none\",\n  fontSize: { xs: \"0.7rem\", sm: \"1rem\" },\n  fontWeight: 600,\n  transition: \"all 0.3s ease-in-out\",\n  \"&:hover\": { backgroundColor: \"primary.dark\", boxShadow: \"none\" },\n  \"&:disabled\": { backgroundColor: \"action.disabled\", color: \"action.disabledOpacity\" },\n};\n\nexport const cancelButtonStyle = {\n  height: { xs: \"40px\", sm: \"50px\" },\n  minWidth: { xs: \"120px\", sm: \"150px\" },\n  borderRadius: customTheme.shape.borderRadiusLarge,\n  padding: { xs: \"0 15px\", sm: \"0 25px\" },\n  backgroundColor: \"background.default\",\n  color: \"text.primary\",\n  boxShadow: \"none\",\n  fontSize: { xs: \"0.7rem\", sm: \"1rem\" },\n  fontWeight: 600,\n  transition: \"all 0.3s ease-in-out\",\n  \"&:hover\": { backgroundColor: \"background.hover\", boxShadow: \"none\" },\n  \"&:disabled\": { backgroundColor: \"action.disabled\", color: \"action.disabledOpacity\" },\n};\n\nexport const deleteButtonStyle = {\n  height: { xs: \"40px\", sm: \"50px\" },\n  minWidth: { xs: \"120px\", sm: \"150px\" },\n  borderRadius: customTheme.shape.borderRadiusLarge,\n  padding: { xs: \"0 15px\", sm: \"0 25px\" },\n  backgroundColor: \"error.main\",\n  color: \"error.contrastText\",\n  boxShadow: \"none\",\n  fontSize: { xs: \"0.7rem\", sm: \"1rem\" },\n  fontWeight: 600,\n  transition: \"all 0.3s ease-in-out\",\n  \"&:hover\": { backgroundColor: \"error.dark\", boxShadow: \"none\" },\n  \"&:disabled\": { backgroundColor: \"action.disabled\", color: \"action.disabledOpacity\" },\n};\n\nexport const inputStyles = {\n  mt: customTheme.spacing(1),\n  backgroundColor: \"background.default\",\n  borderRadius: customTheme.shape.borderRadiusSmall,\n  \"& .MuiInputLabel-root\": { color: \"text.secondary\", fontSize: { xs: \"0.7rem\", sm: \"1rem\" } },\n  \"& .MuiInputLabel-root.Mui-focused\": { color: \"primary.main\" },\n  \"& .MuiOutlinedInput-root\": {\n    borderRadius: customTheme.shape.borderRadiusSmall,\n    \"& .MuiOutlinedInput-notchedOutline\": { border: \"none\" },\n    \"&:hover .MuiOutlinedInput-notchedOutline\": { border: \"none\" },\n    \"&.Mui-focused .MuiOutlinedInput-notchedOutline\": { border: \"none\" },\n  },\n  \"& .MuiInputBase-input\": { fontSize: { xs: \"0.7rem\", sm: \"1rem\" } },\n  \"& .MuiInputBase-input::placeholder\": { color: \"text.secondary\", opacity: 1 },\n};\n\nexport const inputStylesWhite = {\n  mt: customTheme.spacing(1),\n  backgroundColor: \"background.paper\",\n  borderRadius: customTheme.shape.borderRadiusSmall,\n  \"& .MuiInputLabel-root\": { color: \"text.secondary\", fontSize: { xs: \"0.7rem\", sm: \"1rem\" } },\n  \"& .MuiInputLabel-root.Mui-focused\": { color: \"primary.main\" },\n  \"& .MuiOutlinedInput-root\": {\n    borderRadius: customTheme.shape.borderRadiusSmall,\n    \"& .MuiOutlinedInput-notchedOutline\": { border: \"none\" },\n    \"&:hover .MuiOutlinedInput-notchedOutline\": { border: \"none\" },\n    \"&.Mui-focused .MuiOutlinedInput-notchedOutline\": { border: \"none\" },\n  },\n  \"& .MuiInputBase-input\": { fontSize: { xs: \"0.7rem\", sm: \"1rem\" } },\n  \"& .MuiInputBase-input::placeholder\": { color: \"text.secondary\", opacity: 1 },\n};\n\nexport const selectStyles = {\n  mt: customTheme.spacing(1),\n  backgroundColor: \"background.default\",\n  borderRadius: customTheme.shape.borderRadiusSmall,\n  \"& .MuiOutlinedInput-root\": {\n    borderRadius: customTheme.shape.borderRadiusSmall,\n    \"& fieldset\": { border: \"none\" },\n    \"&:hover fieldset\": { border: \"none\" },\n    \"&.Mui-focused fieldset\": { border: \"none\" },\n  },\n  \"& .MuiSelect-select\": { fontSize: { xs: \"0.7rem\", sm: \"1rem\" } },\n  \"& .MuiSelect-icon\": { color: \"text.primary\" },\n  \"& .MuiInputLabel-root\": { fontSize: { xs: \"0.7rem\", sm: \"1rem\" } },\n};\n\nexport const chipStyles = {\n  fontSize: { xs: \"0.75rem\", md: \"0.7rem\" },\n  padding: { xs: \"0.3rem 0.5rem\", md: \"0.5rem 1rem\" },\n  border: \"none\",\n};\n\nexport const headerStyles = {\n  card: {\n    borderRadius: { xs: 1, sm: 1.5 },\n    mb: 3,\n    backgroundColor: \"background.paper\",\n    boxShadow: \"none\",\n    width: { xs: \"100%\", sm: \"auto\" },\n    boxSizing: \"border-box\",\n  },\n  content: {\n    display: \"flex\",\n    flexDirection: { xs: \"column\", sm: \"row\" }, // Stack on mobile, row on desktop\n    alignItems: { xs: \"center\", sm: \"center\" },\n    justifyContent: { xs: \"center\", sm: \"space-between\" },\n    mt: 1,\n    mb: 1,\n    mx: { xs: 2, sm: 3 },\n    gap: { xs: 2, sm: 3 },\n    textAlign: { xs: \"center\", sm: \"left\" },\n  },\n  leftSection: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: 1,\n    width: { xs: \"100%\", sm: \"auto\" }, // Full width on mobile\n  },\n  rightSection: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: { xs: \"center\", sm: \"flex-end\" },\n    width: { xs: \"100%\", sm: \"auto\" },\n    mt: { xs: 1, sm: 0 },\n  },\n  title: { fontWeight: 400, color: \"text.primary\" },\n  level: { color: \"text.secondary\" },\n  buttonGroup: {\n    display: \"contents\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: { xs: \"center\", sm: \"flex-end\" },\n    gap: { xs: 1, sm: 0.5 },\n    width: { xs: \"100%\", sm: \"100%\" },\n    flexWrap: \"wrap\",\n  },\n  splitButtonGroup: {\n    display: \"flex\",\n    flexDirection: { xs: \"row\", sm: \"column\" },\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: { xs: \"100%\", sm: \"auto\" },\n    gap: { xs: 1, sm: 2 },\n    flexWrap: { xs: \"wrap\", sm: \"nowrap\" },\n  },\n  chipContainer: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    flexWrap: { xs: \"nowrap\", sm: \"wrap\" },\n    gap: { xs: 0.5, sm: 1 },\n    mt: 1,\n    width: { xs: \"100%\", sm: \"auto\" },\n    justifyContent: { xs: \"center\", sm: \"start\" },\n    overflowX: { xs: \"auto\", sm: \"visible\" },\n    \"&::-webkit-scrollbar\": { display: \"none\" },\n    msOverflowStyle: \"none\",\n    scrollbarWidth: \"none\",\n  },\n  chip: {\n    fontSize: { xs: \"0.65rem\", sm: \"0.75rem\" },\n    padding: { xs: \"0.2rem\", sm: \"0.3rem 0.6rem\" },\n    height: { xs: \"32px\", sm: \"28px\" },\n    transition: customTheme.transitions.create([\"width\", \"padding\"], {\n      duration: customTheme.transitions.duration.short,\n      easing: customTheme.transitions.easing.easeInOut,\n    }),\n    cursor: \"pointer\",\n    \"& .MuiChip-label\": { padding: { xs: 0, sm: \"0 6px\" }, display: { xs: \"none\", sm: \"inline\" } },\n    \"& .MuiChip-icon\": { margin: { xs: \"0\", sm: \"0 0 0 -4px\" }, fontSize: { xs: \"0.7rem\", sm: \"1rem\" } },\n  },\n  chipExpanded: {\n    width: \"auto\",\n    padding: { xs: \"0.2rem 0.6rem\", sm: \"0.5rem 1rem\" },\n    \"& .MuiChip-label\": { display: \"inline\" },\n  },\n  chipCollapsed: {\n    width: { xs: \"32px\", sm: \"auto\" },\n    padding: { xs: \"0.2rem\", sm: \"0.3rem 0.6rem\" },\n    \"& .MuiChip-label\": { display: { xs: \"none\", sm: \"inline\" } },\n  },\n};\n\nexport const fieldStyles = {\n  container: { mb: 2 },\n  label: { fontWeight: 400, mb: 0.5 },\n  input: {\n    \"& .MuiOutlinedInput-notchedOutline\": { border: \"none\" },\n    backgroundColor: \"background.default\",\n    borderRadius: customTheme.shape.borderRadiusSmall,\n  },\n  value: { color: \"text.secondary\" },\n};\n\nexport const sectionStyles = {\n  card: {\n    borderRadius: { xs: 1, sm: 1.5 },\n    backgroundColor: \"background.paper\",\n    boxShadow: \"none\",\n    mb: 3,\n    width: { xs: \"100%\", sm: \"auto\" },\n    boxSizing: \"border-box\",\n  },\n  content: { mx: { xs: 2, sm: 3 }, my: 3 },\n  title: { fontWeight: 500, mb: 5 },\n};\n\nexport const toggleStyles = {\n  formControl: { gap: 2, \"& .MuiFormControlLabel-label\": { minWidth: \"120px\", fontWeight: 400 } },\n  switch: {\n    width: 42,\n    height: 24,\n    padding: 0,\n    \"&:active .MuiSwitch-thumb\": { width: 15 },\n    \"& .MuiSwitch-switchBase\": {\n      padding: 0.25,\n      \"&.Mui-checked\": { transform: \"translateX(18px)\", color: \"#fff\", \"& + .MuiSwitch-track\": { backgroundColor: \"primary.main\", opacity: 1 } },\n      \"&.Mui-disabled\": { color: \"grey.400\", \"& + .MuiSwitch-track\": { backgroundColor: \"action.disabledBackground\", opacity: 1 } },\n    },\n    \"& .MuiSwitch-thumb\": {\n      boxShadow: \"0 2px 4px rgba(0,0,0,0.3)\",\n      width: 20,\n      height: 20,\n      borderRadius: 10,\n      transition: customTheme.transitions.create([\"width\"], { duration: 200 }),\n      backgroundColor: \"background.default\",\n    },\n    \"& .MuiSwitch-track\": {\n      borderRadius: 12,\n      backgroundColor: \"grey.400\",\n      opacity: 1,\n      transition: customTheme.transitions.create([\"background-color\"], { duration: 200 }),\n      \"&.Mui-disabled\": { backgroundColor: \"action.disabledBackground\", opacity: 0.7 },\n    },\n  },\n};\n\nexport const containerStyles = {\n  width: { xs: \"100%\", sm: \"auto\" },\n  maxWidth: { xs: \"100%\", sm: \"1500px\" },\n  margin: { xs: 0, sm: \"0 auto\" },\n  padding: { xs: 0, sm: 1 },\n  boxSizing: \"border-box\",\n};\n\nexport const gridStyles = {\n  container: {\n    display: \"grid\",\n    gap: 2,\n    gridTemplateColumns: {\n      xs: \"1fr\",\n      sm: \"repeat(auto-fill, minmax(300px, 1fr))\",\n    },\n  },\n};\n\nexport const skeletonStyles = {\n  container: {\n    borderRadius: customTheme.shape.borderRadiusMedium,\n    bgcolor: \"grey.200\",\n  },\n  header: {\n    height: { xs: 80, sm: 100 },\n    mb: 2,\n  },\n  filter: {\n    height: { xs: 40, sm: 50 },\n    mb: 2,\n  },\n  card: {\n    height: { xs: 180, sm: 200 },\n  },\n};\n\nexport const dialogStyles = {\n  paper: {\n    borderRadius: customTheme.shape.borderRadiusMedium,\n    boxShadow: MODAL_SHADOW,\n    bgcolor: \"background.paper\",\n    width: { xs: \"90%\", sm: \"500px\" },\n    maxWidth: \"100%\",\n    p: { xs: 2, sm: 3 },\n  },\n  title: {\n    ...baseTypographyStyles,\n    fontSize: { xs: \"1.25rem\", sm: \"1.5rem\" },\n    fontWeight: 500,\n    mb: 2,\n  },\n  content: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: 2,\n  },\n  actions: {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    gap: 1,\n    mt: 2,\n  },\n};\n\nexport const filterStyles = {\n  container: {\n    display: \"flex\",\n    flexDirection: { xs: \"column\", sm: \"row\" },\n    gap: { xs: 1, sm: 2 },\n    mb: 3,\n    alignItems: { xs: \"stretch\", sm: \"center\" },\n  },\n  search: {\n    flex: 1,\n    maxWidth: { xs: \"100%\", sm: \"400px\" },\n  },\n  select: {\n    minWidth: { xs: \"100%\", sm: \"150px\" },\n  },\n  resetButton: {\n    height: { xs: \"40px\", sm: \"50px\" },\n    minWidth: { xs: \"100%\", sm: \"120px\" },\n  },\n};","import { alpha } from '@mui/material';\n\n// Constants for reuse\nconst BOARD_SIZE = 10000;\nconst BASE_Z_INDEX = 10; // Board\nconst BASE_SHADOW = '0 4px 16px rgba(0,0,0,0.12)';\nconst MODAL_Z_INDEX = 111; // Edit Tweet Modal, Options Modal, Media Modal\nconst MODAL_SHADOW = '0 8px 28px rgba(0,0,0,0.22)';\n\n// Reusable style objects\nconst baseModalStyles = {\n  bgcolor: 'background.paper',\n  boxShadow: MODAL_SHADOW,\n  borderRadius: 3,\n  outline: 'none',\n  animation: 'fadeIn 0.3s ease-in-out',\n  '@keyframes fadeIn': {\n    from: { opacity: 0, transform: 'translate(-50%, -48%) scale(0.98)' },\n    to: { opacity: 1, transform: 'translate(-50%, -50%) scale(1)' },\n  },\n};\n\nconst baseButtonStyles = {\n  borderRadius: '24px',\n  textTransform: 'none',\n  transition: 'all 0.2s ease',\n  '&:hover': { transform: 'scale(1.02)' },\n};\n\nconst baseTypographyStyles = {\n  color: 'text.primary',\n  fontWeight: 400,\n  lineHeight: 1.6,\n};\n\nconst BoardStyles = {\n  boardContainer: {\n    display: 'flex',\n    width: '100%',\n    height: '100%',\n    overflow: 'hidden',\n    zIndex: BASE_Z_INDEX,\n  },\n  boardMain: (isListView, dragging) => ({\n    flex: 1,\n    position: 'relative',\n    overflow: isListView ? 'auto' : 'hidden',\n    cursor: isListView ? 'default' : dragging ? 'grabbing' : 'grab',\n    touchAction: isListView ? 'auto' : 'none',\n    bgcolor: isListView ? (theme) => theme.palette.grey[50] : 'background.paper',\n    zIndex: BASE_Z_INDEX,\n  }),\n  boardCanvas: (scale, offset) => ({\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: BOARD_SIZE,\n    height: BOARD_SIZE,\n    backgroundColor: 'background.paper',\n    backgroundImage: 'radial-gradient(rgba(0,0,0,0.1) 1px, transparent 1px)',\n    backgroundSize: '20px 20px',\n    transform: `translate(${offset.x}px, ${offset.y}px) scale(${scale})`,\n    transformOrigin: 'top left',\n    zIndex: BASE_Z_INDEX,\n  }),\n  boardTitleContainer: (scale) => ({\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: `translate(-50%, -50%) scale(${1 / scale})`,\n    pointerEvents: 'none',\n    maxWidth: '85vw',\n    textAlign: 'center',\n  }),\n  boardTitle: (titleLength) => ({\n    color: (theme) => theme.palette.grey[300],\n    fontSize: `${Math.min(16, 100 / (titleLength || 1))}vw`,\n    fontWeight: 700,\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    '@media (max-width: 600px)': { fontSize: `calc(${Math.min(16, 100 / (titleLength || 1))}vw * 0.8)` },\n  }),\n  boardEmptyMessage: {\n    position: 'absolute',\n    top: '60%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    color: 'text.secondary',\n    fontSize: { xs: '0.9rem', sm: '1rem' },\n  },\n  boardBackButtonContainer: {\n    position: 'absolute',\n    top: 16,\n    left: 16,\n    zIndex: 99,\n  },\n  boardBackButton: {\n    fontSize: { xs: '1.25rem', sm: '1.5rem' },\n    bgcolor: 'background.paper',\n    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n    transition: 'all 0.2s ease',\n    '&:hover': { bgcolor: (theme) => theme.palette.grey[100], transform: 'scale(1.1)' },\n  },\n  boardControlsContainer: {\n    position: 'fixed',\n    bottom: 16,\n    right: 16,\n    zIndex: 99,\n    display: 'flex',\n    alignItems: 'center',\n    gap: 1.5,\n    bgcolor: 'background.paper',\n    borderRadius: 3,\n    p: 1,\n    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n    transition: 'all 0.2s ease',\n    '&:hover': { transform: 'scale(1.03)' },\n    '@media (max-width: 600px)': { transform: 'scale(0.9)', gap: 1 },\n  },\n  boardViewToggleButton: {\n    ...baseButtonStyles,\n    px: { xs: 1.75, sm: 2.25 },\n    py: 0.75,\n    bgcolor: (theme) => theme.palette.grey[100],\n    color: 'text.primary',\n    '&:hover': {\n      bgcolor: 'primary.light',\n      boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n    },\n    '@media (max-width: 600px)': { fontSize: '0.8rem', px: 1.25 },\n  },\n  boardZoomButton: {\n    bgcolor: (theme) => theme.palette.grey[100],\n    transition: 'all 0.2s ease',\n    '&:hover': { bgcolor: (theme) => theme.palette.grey[200], transform: 'scale(1.1)' },\n  },\n  boardZoomText: {\n    fontSize: { xs: '0.8rem', sm: '0.875rem' },\n    color: 'text.secondary',\n    fontWeight: 500,\n  },\n  boardListViewContainer: {\n    p: { xs: 2.5, sm: 3 },\n    maxWidth: { xs: '95vw', sm: '720px' },\n    mx: 'auto',\n    display: 'flex',\n    flexDirection: 'column',\n    minHeight: '100%',\n  },\n  boardListViewTweet: (isReply) => ({\n    width: '100%',\n    maxWidth: { xs: '95vw', sm: '640px' },\n    mx: 'auto',\n    mb: 2.5,\n    pl: isReply ? 4 : 0,\n    borderLeft: isReply\n      ? (theme) => `2px solid ${alpha(theme.palette.primary.main, 0.3)}`\n      : 'none',\n  }),\n  boardErrorContainer: {\n    p: 3,\n    textAlign: 'center',\n  },\n  boardErrorText: {\n    color: 'error.main',\n    mb: 2,\n    fontWeight: 500,\n    fontSize: { xs: '0.9rem', sm: '1rem' },\n  },\n  boardErrorButton: {\n    ...baseButtonStyles,\n    px: 3.5,\n    py: 1.25,\n    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n    '&:hover': { boxShadow: '0 4px 12px rgba(0,0,0,0.15)', bgcolor: 'primary.light' },\n  },\n  boardEditDialog: {\n    '& .MuiDialog-paper': {\n      ...baseModalStyles,\n      borderRadius: 3,\n      p: 2.5,\n      zIndex: MODAL_Z_INDEX,\n    },\n  },\n  boardEditDialogTitle: {\n    ...baseTypographyStyles,\n    fontWeight: 500,\n    fontSize: { xs: '1.15rem', sm: '1.25rem' },\n    pb: 1.5,\n  },\n  boardEditDialogContent: {\n    display: 'flex',\n    flexDirection: 'column',\n    gap: 2.5,\n    pt: 1.5,\n  },\n  boardEditTextField: {\n    '& .MuiOutlinedInput-root': {\n      borderRadius: 3,\n      transition: 'all 0.2s ease',\n      '&:hover fieldset': { borderColor: 'primary.main' },\n      '&.Mui-focused fieldset': {\n        boxShadow: (theme) => `0 0 0 3px ${alpha(theme.palette.primary.main, 0.1)}`,\n        borderColor: 'primary.main',\n      },\n    },\n  },\n  boardEditFormControl: {\n    '& .MuiOutlinedInput-root': {\n      borderRadius: 3,\n      transition: 'all 0.2s ease',\n      '&:hover fieldset': { borderColor: 'primary.main' },\n      '&.Mui-focused fieldset': {\n        boxShadow: (theme) => `0 0 0 3px ${alpha(theme.palette.primary.main, 0.1)}`,\n        borderColor: 'primary.main',\n      },\n    },\n  },\n  boardEditCancelButton: {\n    ...baseButtonStyles,\n    px: 3.5,\n    color: 'text.secondary',\n    '&:hover': { bgcolor: (theme) => theme.palette.grey[100] },\n  },\n  boardEditSaveButton: {\n    ...baseButtonStyles,\n    px: 3.5,\n    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n    '&:hover': {\n      boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n      bgcolor: 'primary.light',\n    },\n    '&:disabled': {\n      bgcolor: (theme) => theme.palette.grey[300],\n      color: (theme) => theme.palette.grey[500],\n      boxShadow: 'none',\n    },\n  },\n};\n\nexport default BoardStyles;","import { useState, useCallback, useEffect, useRef, useMemo } from 'react';\nimport { throttle } from 'lodash';\nimport { animate } from 'framer-motion';\n\nexport const BOARD_SIZE = 10000;\nconst ZOOM_MIN = 0.3;\nconst ZOOM_MAX = 2;\nconst ZOOM_STEP = 0.1;\nconst ZOOM_SENSITIVITY = 0.0005;\nconst MOVE_STEP = 50;\nconst PINCH_SENSITIVITY = 0.005;\nconst ANIMATION_DURATION = 400;\n\n\nexport const useBoardInteraction = (boardRef) => {\n  const [scale, setScale] = useState(1);\n  const [offset, setOffset] = useState({ x: 0, y: 0 });\n  const isDragging = useRef(false);\n  const dragStart = useRef(null);\n  const touchStart = useRef(null);\n  const pinchStart = useRef(null);\n  const scaleRef = useRef(scale);\n  const offsetRef = useRef(offset);\n  const viewportSize = useRef({ width: window.innerWidth, height: window.innerHeight });\n  const history = useRef([]);\n  const historyIndex = useRef(-1);\n\n  // Update refs\n  useEffect(() => {\n    scaleRef.current = scale;\n    offsetRef.current = offset;\n  }, [scale, offset]);\n\n  // Update viewport size on resize\n  useEffect(() => {\n    const updateViewport = () => {\n      viewportSize.current = { width: window.innerWidth, height: window.innerHeight };\n    };\n    window.addEventListener('resize', updateViewport);\n    updateViewport();\n    return () => window.removeEventListener('resize', updateViewport);\n  }, []);\n\n  // Clamp offset to keep board within viewport\n  const clampOffset = useCallback((newOffset) => {\n    const scaledSize = BOARD_SIZE * scaleRef.current;\n    const { width, height } = viewportSize.current;\n    const minX = width - scaledSize;\n    const minY = height - scaledSize;\n    return {\n      x: Math.max(minX, Math.min(0, newOffset.x)),\n      y: Math.max(minY, Math.min(0, newOffset.y)),\n    };\n  }, []);\n\n  // Center board in viewport\n  const centerBoard = useCallback(() => {\n    const { width, height } = viewportSize.current;\n    const newOffset = {\n      x: width / 2 - (BOARD_SIZE * scaleRef.current) / 2,\n      y: height / 2 - (BOARD_SIZE * scaleRef.current) / 2,\n    };\n    setOffset(clampOffset(newOffset));\n  }, [clampOffset]);\n\n  // Restore board state\n  const restoreBoardState = useCallback((state) => {\n    if (!state) return;\n    setScale(Math.min(ZOOM_MAX, Math.max(ZOOM_MIN, state.scale || 1)));\n    setOffset(clampOffset(state.offset || { x: 0, y: 0 }));\n  }, [clampOffset]);\n\n  // Export board state\n  const exportBoardState = useCallback(() => {\n    return { scale, offset, timestamp: new Date().toISOString() };\n  }, [scale, offset]);\n\n  // Animate reset to default view\n  const animateReset = useCallback(() => {\n    const startScale = scaleRef.current;\n    const startOffset = offsetRef.current;\n    const targetScale = 1;\n    const { width, height } = viewportSize.current;\n    const targetOffset = {\n      x: width / 2 - (BOARD_SIZE * targetScale) / 2,\n      y: height / 2 - (BOARD_SIZE * targetScale) / 2,\n    };\n\n    animate(0, 1, {\n      duration: ANIMATION_DURATION / 1000,\n      ease: 'easeInOut',\n      onUpdate: (progress) => {\n        const easedProgress = 1 - Math.pow(1 - progress, 3);\n        setScale(startScale + (targetScale - startScale) * easedProgress);\n        setOffset(clampOffset({\n          x: startOffset.x + (targetOffset.x - startOffset.x) * easedProgress,\n          y: startOffset.y + (targetOffset.y - startOffset.y) * easedProgress,\n        }));\n      },\n    });\n  }, [clampOffset]);\n\n  // Handle zoom with focus point\n  const handleZoom = useCallback((delta, mouseX, mouseY) => {\n    setScale((prevScale) => {\n      const newScale = Math.min(ZOOM_MAX, Math.max(ZOOM_MIN, prevScale + delta));\n      const currentOffset = offsetRef.current;\n      let newOffset;\n      if (mouseX !== undefined && mouseY !== undefined) {\n        const boardX = (mouseX - currentOffset.x) / prevScale;\n        const boardY = (mouseY - currentOffset.y) / prevScale;\n        newOffset = clampOffset({\n          x: mouseX - boardX * newScale,\n          y: mouseY - boardY * newScale,\n        });\n      } else {\n        newOffset = clampOffset({\n          x: window.innerWidth / 2 - (BOARD_SIZE * newScale) / 2,\n          y: window.innerHeight / 2 - (BOARD_SIZE * newScale) / 2,\n        });\n      }\n      setOffset(newOffset);\n      return newScale;\n    });\n  }, [clampOffset]);\n\n  // Handle zoom buttons\n  const handleZoomButton = useCallback((direction) => {\n    if (direction === 'reset') {\n      animateReset();\n    } else {\n      handleZoom(\n        direction === 'in' ? ZOOM_STEP : -ZOOM_STEP,\n        viewportSize.current.width / 2,\n        viewportSize.current.height / 2\n      );\n    }\n  }, [handleZoom, animateReset]);\n\n  // Handle wheel zoom\n  const handleWheel = useCallback(\n    throttle((e) => {\n      e.preventDefault();\n      const delta = -e.deltaY * ZOOM_SENSITIVITY;\n      handleZoom(delta, e.clientX, e.clientY);\n    }, 16),\n    [handleZoom]\n  );\n\n  // Handle mouse drag start\n  const handleMouseDown = useCallback((e) => {\n    if (e.target.closest('.tweet-card, .tweet-popup, .return-button, .user_points, .zoom-controls, .board-top-controls, .MuiIconButton-root, .MuiButton-root')) return;\n    dragStart.current = { x: e.clientX, y: e.clientY, offsetX: offset.x, offsetY: offset.y };\n    isDragging.current = false;\n  }, [offset]);\n\n  // Handle mouse drag move\n  const handleMouseMove = useCallback(\n    throttle((e) => {\n      if (!dragStart.current) return;\n      const dx = e.clientX - dragStart.current.x;\n      const dy = e.clientY - dragStart.current.y;\n      if (!isDragging.current && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\n        isDragging.current = true;\n      }\n      if (isDragging.current) {\n        setOffset(clampOffset({\n          x: dragStart.current.offsetX + dx,\n          y: dragStart.current.offsetY + dy,\n        }));\n      }\n    }, 16),\n    [clampOffset]\n  );\n\n  // Handle mouse drag end\n  const handleMouseUp = useCallback(\n    (e, onClick) => {\n      if (!isDragging.current && dragStart.current && onClick && boardRef.current) {\n        const boardRect = boardRef.current.getBoundingClientRect();\n        const clickX = e.clientX - boardRect.left;\n        const clickY = e.clientY - boardRect.top;\n        const tweetX = (clickX - offset.x) / scale;\n        const tweetY = (clickY - offset.y) / scale;\n        if (tweetX >= 0 && tweetX <= BOARD_SIZE && tweetY >= 0 && tweetY <= BOARD_SIZE) {\n          onClick(tweetX, tweetY, e.clientX, e.clientY);\n        }\n      }\n      dragStart.current = null;\n      isDragging.current = false;\n    },\n    [boardRef, offset, scale]\n  );\n\n  // Handle touch start\n  const handleTouchStart = useCallback((e) => {\n    if (e.target.closest('.tweet-card, .tweet-popup, .MuiIconButton-root, .MuiButton-root')) return;\n    if (e.touches.length === 1) {\n      touchStart.current = {\n        x: e.touches[0].clientX,\n        y: e.touches[0].clientY,\n        offsetX: offset.x,\n        offsetY: offset.y,\n      };\n      isDragging.current = false;\n    } else if (e.touches.length === 2) {\n      const touch1 = e.touches[0];\n      const touch2 = e.touches[1];\n      const dx = touch1.clientX - touch2.clientX;\n      const dy = touch1.clientY - touch2.clientY;\n      pinchStart.current = {\n        distance: Math.sqrt(dx * dx + dy * dy),\n        centerX: (touch1.clientX + touch2.clientX) / 2,\n        centerY: (touch1.clientY + touch2.clientY) / 2,\n        scale: scaleRef.current,\n      };\n    }\n  }, [offset]);\n\n  // Handle touch move\n  const handleTouchMove = useCallback(\n    throttle((e) => {\n      if (!touchStart.current && !pinchStart.current) return;\n      if (e.touches.length === 1 && touchStart.current) {\n        const touch = e.touches[0];\n        const dx = touch.clientX - touchStart.current.x;\n        const dy = touch.clientY - touchStart.current.y;\n        if (!isDragging.current && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\n          isDragging.current = true;\n        }\n        if (isDragging.current) {\n          setOffset(clampOffset({\n            x: touchStart.current.offsetX + dx,\n            y: touchStart.current.offsetY + dy,\n          }));\n        }\n      } else if (e.touches.length === 2 && pinchStart.current) {\n        const touch1 = e.touches[0];\n        const touch2 = e.touches[1];\n        const dx = touch1.clientX - touch2.clientX;\n        const dy = touch1.clientY - touch2.clientY;\n        const currentDistance = Math.sqrt(dx * dx + dy * dy);\n        const scaleChange = (currentDistance / pinchStart.current.distance) * pinchStart.current.scale;\n        const newScale = Math.min(ZOOM_MAX, Math.max(ZOOM_MIN, scaleChange));\n        const centerX = (touch1.clientX + touch2.clientX) / 2;\n        const centerY = (touch1.clientY + touch2.clientY) / 2;\n        setScale(newScale);\n        setOffset(clampOffset({\n          x: centerX - ((centerX - offsetRef.current.x) / scaleRef.current) * newScale,\n          y: centerY - ((centerY - offsetRef.current.y) / scaleRef.current) * newScale,\n        }));\n      }\n    }, 16),\n    [clampOffset]\n  );\n\n  // Handle touch end\n  const handleTouchEnd = useCallback(\n    (e, onClick) => {\n      if (\n        !isDragging.current &&\n        touchStart.current &&\n        onClick &&\n        boardRef.current &&\n        e.changedTouches.length === 1\n      ) {\n        const boardRect = boardRef.current.getBoundingClientRect();\n        const touch = e.changedTouches[0];\n        const clickX = touch.clientX - boardRect.left;\n        const clickY = touch.clientY - boardRect.top;\n        const tweetX = (clickX - offset.x) / scale;\n        const tweetY = (clickY - offset.y) / scale;\n        if (tweetX >= 0 && tweetX <= BOARD_SIZE && tweetY >= 0 && tweetY <= BOARD_SIZE) {\n          onClick(tweetX, tweetY, touch.clientX, touch.clientY);\n        }\n      }\n      touchStart.current = null;\n      pinchStart.current = null;\n      isDragging.current = false;\n    },\n    [boardRef, offset, scale]\n  );\n\n  // Handle keyboard navigation\n  const handleKeyDown = useCallback(\n    (e) => {\n      if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;\n      switch (e.key) {\n        case '+':\n        case '=':\n          e.preventDefault();\n          handleZoom(ZOOM_STEP, viewportSize.current.width / 2, viewportSize.current.height / 2);\n          break;\n        case '-':\n          e.preventDefault();\n          handleZoom(-ZOOM_STEP, viewportSize.current.width / 2, viewportSize.current.height / 2);\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          setOffset((prev) => clampOffset({ ...prev, y: prev.y + MOVE_STEP }));\n          break;\n        case 'ArrowDown':\n          e.preventDefault();\n          setOffset((prev) => clampOffset({ ...prev, y: prev.y - MOVE_STEP }));\n          break;\n        case 'ArrowLeft':\n          e.preventDefault();\n          setOffset((prev) => clampOffset({ ...prev, x: prev.x + MOVE_STEP }));\n          break;\n        case 'ArrowRight':\n          e.preventDefault();\n          setOffset((prev) => clampOffset({ ...prev, x: prev.x - MOVE_STEP }));\n          break;\n        case 'z':\n          if (e.ctrlKey && historyIndex.current > 0) {\n            e.preventDefault();\n            historyIndex.current -= 1;\n            const state = history.current[historyIndex.current];\n            setScale(state.scale);\n            setOffset(state.offset);\n          }\n          break;\n        case 'y':\n          if (e.ctrlKey && historyIndex.current < history.current.length - 1) {\n            e.preventDefault();\n            historyIndex.current += 1;\n            const state = history.current[historyIndex.current];\n            setScale(state.scale);\n            setOffset(state.offset);\n          }\n          break;\n        default:\n          break;\n      }\n    },\n    [handleZoom, clampOffset]\n  );\n\n  // Handle context menu\n  const handleContextMenu = useCallback(\n    (e, onContextMenu) => {\n      if (e.target.closest('.tweet-card, .tweet-popup, .MuiIconButton-root, .MuiButton-root')) return;\n      e.preventDefault();\n      const boardRect = boardRef.current.getBoundingClientRect();\n      const clickX = e.clientX - boardRect.left;\n      const clickY = e.clientY - boardRect.top;\n      const tweetX = (clickX - offset.x) / scale;\n      const tweetY = (clickY - offset.y) / scale;\n      if (tweetX >= 0 && tweetX <= BOARD_SIZE && tweetY >= 0 && tweetY <= BOARD_SIZE) {\n        onContextMenu(tweetX, tweetY, e.clientX, e.clientY);\n      }\n    },\n    [boardRef, offset, scale]\n  );\n\n  // Event listeners\n  useEffect(() => {\n    const boardElement = boardRef.current;\n    if (boardElement) {\n      boardElement.addEventListener('wheel', handleWheel, { passive: false });\n      boardElement.addEventListener('mousedown', handleMouseDown);\n      boardElement.addEventListener('touchstart', handleTouchStart, { passive: false });\n    }\n    window.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('mouseup', handleMouseUp);\n    window.addEventListener('touchmove', handleTouchMove, { passive: false });\n    window.addEventListener('touchend', handleTouchEnd);\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      if (boardElement) {\n        boardElement.removeEventListener('wheel', handleWheel);\n        boardElement.removeEventListener('mousedown', handleMouseDown);\n        boardElement.removeEventListener('touchstart', handleTouchStart);\n      }\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('mouseup', handleMouseUp);\n      window.removeEventListener('touchmove', handleTouchMove);\n      window.removeEventListener('touchend', handleTouchEnd);\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [\n    handleWheel,\n    handleMouseDown,\n    handleMouseMove,\n    handleMouseUp,\n    handleTouchStart,\n    handleTouchMove,\n    handleTouchEnd,\n    handleKeyDown,\n    boardRef,\n  ]);\n\n  return {\n    scale,\n    offset,\n    setOffset,\n    dragging: isDragging.current,\n    centerBoard,\n    handleZoomButton,\n    handleWheel,\n    handleMouseDown,\n    handleMouseMove,\n    handleMouseUp,\n    handleTouchStart,\n    handleTouchMove,\n    handleTouchEnd,\n    handleContextMenu,\n    restoreBoardState,\n    exportBoardState,\n  };\n};","import { alpha } from '@mui/material';\n\n// Constants for reuse\nconst TWEET_Z_INDEX = 99;\nconst BASE_SHADOW = '0 1px 6px rgba(0,0,0,0.06)'; // Subtle shadow\nconst HOVER_SHADOW = '0 3px 10px rgba(0,0,0,0.1)';\nconst MEDIA_PREVIEW_SIZE = 150; // Smaller for mobile\n\n// Reusable style objects\nconst baseTypographyStyles = {\n  color: 'text.primary',\n  fontFamily: 'Roboto, sans-serif',\n  fontWeight: 400,\n  lineHeight: 1.4,\n  letterSpacing: '0.01em',\n};\n\nconst baseHoverEffect = {\n  '&:hover': {\n    transform: 'translateY(-1px)',\n    boxShadow: HOVER_SHADOW,\n  },\n  '&:focus': {\n    outline: (theme) => `1px solid ${alpha(theme.palette.primary.main, 0.2)}`,\n    outlineOffset: 1,\n  },\n};\n\nconst TweetContentStyles = {\n  tweetCard: (isPinned, isListView) => ({\n    p: { xs: 1, sm: 1.5 }, // Tighter padding\n    mb: 0.5, // Tighter margin\n    bgcolor: (theme) =>\n      isPinned\n        ? `linear-gradient(145deg, ${alpha(theme.palette.warning.light, 0.15)}, ${alpha(\n            theme.palette.warning.light,\n            0.05\n          )})`\n        : theme.palette.background.paper,\n    borderRadius: '32px', // Consistent corners\n    width: { xs: '40vw', sm: isListView ? '90vw' : '260px' }, // 40vw mobile\n    maxHeight: { xs: '70vh', sm: 'auto' }, // 70vh mobile\n    overflowY: { xs: 'auto', sm: 'visible' }, // Scrollable mobile\n    minWidth: { xs: '30vw', sm: '220px' },\n    maxWidth: isListView ? { xs: '40vw', sm: '440px' } : { xs: '40vw', sm: '260px' },\n    boxShadow: BASE_SHADOW,\n    position: 'relative',\n    border: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.4)}`,\n    transition: 'all 0.2s ease-out',\n    zIndex: TWEET_Z_INDEX,\n    ...baseHoverEffect,\n    '&.dragging': {\n      opacity: 1,\n      boxShadow: '0 6px 12px rgba(0,0,0,0.15)',\n      transform: 'scale(1.02)',\n    },\n  }),\n  tweetPaper: {\n    position: 'relative',\n    overflow: 'visible',\n  },\n  tweetTitle: {\n    display: 'none',\n  },\n  tweetAuthorTypography: {\n    ...baseTypographyStyles,\n    color: 'text.secondary',\n    fontSize: { xs: '0.75rem', sm: '0.875rem' }, // Aligned scale\n    fontWeight: 400,\n  },\n  pinnedIconContainer: {\n    position: 'absolute',\n    top: 8,\n    right: 8,\n  },\n  pinnedIcon: {\n    fontSize: { xs: '1rem', sm: '1.25rem' }, // Proportional\n    color: '#FFD700',\n    transition: 'all 0.2s ease-out',\n    '&:hover': {\n      transform: 'scale(1.1)',\n    },\n  },\n  replyToContainer: {\n    borderLeft: (theme) => `2px solid ${theme.palette.primary.main}`,\n    pl: 0.75,\n    mb: 0.5,\n    bgcolor: (theme) => alpha(theme.palette.grey[50], 0.95),\n    p: 0.5,\n    borderRadius: '6px',\n    fontStyle: 'italic',\n    color: 'text.secondary',\n  },\n  replyToCaption: {\n    ...baseTypographyStyles,\n    fontWeight: 500,\n    color: 'primary.main',\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n  },\n  replyToText: {\n    ...baseTypographyStyles,\n    mt: 0.25,\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    color: 'text.secondary',\n  },\n  contentText: (hasMedia) => ({\n    ...baseTypographyStyles,\n    mb: hasMedia ? 0.75 : 0,\n    fontSize: { xs: '0.875rem', sm: '1rem' }, // Larger for readability\n    wordBreak: 'break-word',\n  }),\n  imageContainer: (hasText) => ({\n    position: 'relative',\n    mb: hasText ? 0.75 : 0,\n    mt: 0.5,\n    display: 'flex',\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 0.5,\n    borderRadius: '6px',\n    width: '100%',\n  }),\n  image: (isSingle) => ({\n    width: '100%',\n    maxHeight: isSingle ? { xs: '100px', sm: '120px' } : { xs: '50px', sm: '60px' }, // Fit 70vh\n    aspectRatio: '16/9',\n    objectFit: 'cover',\n    objectPosition: 'center',\n    borderRadius: '6px',\n    border: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.4)}`,\n    opacity: 0.99,\n    transition: 'all 0.2s ease-out',\n    '&:hover': {\n      transform: 'scale(1.01)',\n      opacity: 1,\n      boxShadow: '0 1px 6px rgba(0,0,0,0.06)',\n    },\n    '&:focus': {\n      outline: (theme) => `1px solid ${theme.palette.primary.main}`,\n      outlineOffset: 1,\n    },\n  }),\n  imagePlaceholder: {\n    bgcolor: (theme) => theme.palette.grey[200],\n    width: '100%',\n    height: '100%',\n    borderRadius: '6px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: (theme) => theme.palette.grey[500],\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    ...baseTypographyStyles,\n  },\n  imageViewAll: {\n    ...baseTypographyStyles,\n    color: 'primary.main',\n    cursor: 'pointer',\n    mt: 0.5,\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    fontWeight: 600,\n    textAlign: 'right',\n    textDecoration: 'underline',\n    '&:hover': {\n      color: 'primary.dark',\n    },\n  },\n  videoContainer: (hasTextOrImages) => ({\n    mb: hasTextOrImages ? 0.75 : 0,\n    mt: 0.5,\n    display: 'flex',\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n  }),\n  videoInner: {\n    position: 'relative',\n    borderRadius: '6px',\n    overflow: 'hidden',\n  },\n  video: (duration) => ({\n    width: '100%',\n    maxHeight: duration && duration < 15 ? '80px' : '160px', // Fit 70vh\n    aspectRatio: '16/9',\n    borderRadius: '6px',\n    objectFit: 'cover',\n    objectPosition: 'center',\n    backgroundColor: 'black',\n    opacity: 0.99,\n    transition: 'all 0.2s ease-out',\n    '&:hover': {\n      transform: 'scale(1.01)',\n      opacity: 1,\n      boxShadow: '0 1px 6px rgba(0,0,0,0.06)',\n    },\n  }),\n  circleVideoContainer: {\n    position: 'relative',\n    borderRadius: '50%',\n    overflow: 'hidden',\n  },\n  circleVideo: (duration) => ({\n    width: MEDIA_PREVIEW_SIZE,\n    height: MEDIA_PREVIEW_SIZE,\n    borderRadius: '50%',\n    objectFit: 'cover',\n    objectPosition: 'center',\n    backgroundColor: 'black',\n    opacity: 0.99,\n    transition: 'all 0.2s ease-out',\n    '&:hover': {\n      transform: 'scale(1.01)',\n      opacity: 1,\n      boxShadow: '0 1px 6px rgba(0,0,0,0.06)',\n    },\n  }),\n  videoViewAll: {\n    ...baseTypographyStyles,\n    color: 'primary.main',\n    cursor: 'pointer',\n    mt: 0.5,\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    fontWeight: 600,\n    textAlign: 'right',\n    textDecoration: 'underline',\n    '&:hover': {\n      color: 'primary.dark',\n    },\n  },\n  audioContainer: (hasTextOrMedia) => ({\n    mb: hasTextOrMedia ? 0.75 : 0,\n    mt: 0.5,\n    display: 'flex',\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n  }),\n  audioPlayer: {\n    width: '100%',\n    height: '32px', // Smaller for 70vh\n    bgcolor: (theme) => theme.palette.grey[100],\n    borderRadius: '6px',\n    p: 0.5,\n    position: 'relative',\n    overflow: 'hidden',\n    '& audio': {\n      width: '100%',\n      height: '100%',\n      '&::-webkit-media-controls-panel': {\n        backgroundColor: 'transparent',\n      },\n    },\n    '& .audioVisualizer': {\n      display: 'none',\n    },\n  },\n  audioViewAll: {\n    ...baseTypographyStyles,\n    color: 'primary.main',\n    cursor: 'pointer',\n    mt: 0.5,\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    fontWeight: 600,\n    textAlign: 'right',\n    textDecoration: 'underline',\n    '&:hover': {\n      color: 'primary.dark',\n    },\n  },\n  otherFilesContainer: (hasText) => ({\n    mb: hasText ? 0.75 : 0,\n    mt: 0.5,\n    width: '100%',\n    maxWidth: { xs: '40vw', sm: '220px' },\n  }),\n  otherFileItem: (index) => ({\n    display: 'flex',\n    alignItems: 'center',\n    gap: 0.5,\n    mt: index > 0 ? 0.5 : 0,\n    p: 0.5,\n    borderRadius: '6px',\n    transition: 'all 0.2s ease-out',\n    '&:hover': {\n      bgcolor: (theme) => theme.palette.grey[100],\n      boxShadow: '0 1px 6px rgba(0,0,0,0.06)',\n    },\n  }),\n  otherFileIcon: {\n    color: 'text.secondary',\n    fontSize: { xs: '1rem', sm: '1.25rem' },\n  },\n  otherFileLink: {\n    ...baseTypographyStyles,\n    color: 'primary.main',\n    textDecoration: 'none',\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    fontWeight: 500,\n    transition: 'all 0.2s ease-out',\n    '&:hover': {\n      textDecoration: 'underline',\n      color: 'primary.dark',\n    },\n  },\n  otherFilesViewAll: {\n    ...baseTypographyStyles,\n    color: 'primary.main',\n    cursor: 'pointer',\n    mt: 0.5,\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    fontWeight: 600,\n    textAlign: 'right',\n    textDecoration: 'underline',\n    '&:hover': {\n      color: 'primary.dark',\n    },\n  },\n  readMoreButton: {\n    ...baseTypographyStyles,\n    color: 'primary.main',\n    textTransform: 'none',\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    fontWeight: 600,\n    textDecoration: 'underline',\n    '&:hover': {\n      color: 'primary.dark',\n    },\n  },\n  actionsContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    mt: 0.75,\n    justifyContent: 'space-between',\n    gap: 0.5,\n  },\n  actionButtons: {\n    display: 'flex',\n    alignItems: 'center',\n    gap: { xs: 0.25, sm: '0.5rem' },\n  },\n  likeButton: {\n    p: { xs: 0.25, sm: 0.5 },\n    minWidth: 36, // Touch-friendly\n    borderRadius: '4px',\n    transition: 'all 0.2s ease-out',\n    '&:hover': {\n      bgcolor: (theme) => alpha(theme.palette.primary.light, 0.1),\n      transform: 'scale(1.1)',\n    },\n  },\n  likeIcon: (isLiked) => ({\n    color: isLiked ? 'primary.main' : 'text.secondary',\n    fontSize: { xs: '1rem', sm: '1.25rem' },\n  }),\n  likeCount: (isLiked, animate) => ({\n    ...baseTypographyStyles,\n    color: isLiked ? 'primary.main' : 'text.secondary',\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    transform: animate ? 'scale(1.15)' : 'scale(1)',\n    ml: 0.25,\n    transition: 'transform 0.2s ease-out',\n  }),\n  replyButton: {\n    p: { xs: 0.25, sm: 0.5 },\n    minWidth: 36,\n    borderRadius: '4px',\n    transition: 'all 0.2s ease-out',\n    '&:hover': {\n      bgcolor: (theme) => alpha(theme.palette.primary.light, 0.1),\n      transform: 'scale(1.1)',\n    },\n  },\n  replyIcon: {\n    color: 'text.secondary',\n    fontSize: { xs: '1rem', sm: '1.25rem' },\n  },\n  replyCount: {\n    ...baseTypographyStyles,\n    color: 'text.secondary',\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    ml: 0.25,\n  },\n  statusContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    gap: 0.5,\n    mt: 0.75,\n    flexWrap: 'wrap',\n  },\n  menuButton: {\n    p: { xs: 0.25, sm: 0.5 },\n    minWidth: 36,\n    borderRadius: '4px',\n    transition: 'all 0.2s ease-out',\n    '&:hover': {\n      bgcolor: (theme) => theme.palette.grey[100],\n      transform: 'scale(1.1)',\n    },\n  },\n  menuIcon: {\n    color: 'text.secondary',\n    fontSize: { xs: '1rem', sm: '1.25rem' },\n  },\n  tweetHighlight: (isHighlighted) => ({\n    zIndex: isHighlighted ? TWEET_Z_INDEX + 1 : TWEET_Z_INDEX,\n    boxShadow: isHighlighted ? '0 4px 12px rgba(0,0,0,0.1)' : BASE_SHADOW,\n    background: isHighlighted\n      ? 'linear-gradient(145deg, #FFFFFF, #F0F2F5)'\n      : (theme) => theme.palette.background.paper,\n    transform: isHighlighted ? 'scale(1.03) translateY(-1px)' : 'none',\n    transition: 'all 0.2s ease-out',\n    borderColor: isHighlighted\n      ? (theme) => theme.palette.primary.main\n      : (theme) => alpha(theme.palette.grey[200], 0.4),\n  }),\n  draggableContainer: (isDraggable, dragging, hovered, isPinned) => ({\n    position: 'absolute',\n    transform: 'translate(-50%, -50%)',\n    cursor: isDraggable ? (dragging ? 'grabbing' : 'grab') : 'default',\n    zIndex: dragging || hovered ? TWEET_Z_INDEX + 1 : isPinned ? TWEET_Z_INDEX + 2 : TWEET_Z_INDEX,\n    transition: 'opacity 0.2s ease-out, transform 0.2s ease-out, z-index 0.2s ease-out',\n    touchAction: isDraggable ? 'none' : 'auto',\n    '&:focus': {\n      outline: isDraggable ? (theme) => `1px solid ${alpha(theme.palette.primary.main, 0.2)}` : 'none',\n      outlineOffset: 1,\n    },\n  }),\n};\n\nexport default TweetContentStyles;","import React, { useRef, useState, useEffect, useCallback, useMemo, memo } from 'react';\nimport PropTypes from 'prop-types';\nimport Draggable from 'react-draggable';\nimport debounce from 'lodash/debounce';\nimport { BOARD_SIZE } from '../../../hooks/useBoard';\nimport TweetContentStyles from './TweetContentStyles';\n\nconst DraggableTweet = ({ tweet, onStop, children, currentUser, userRole, bypassOwnership = false, scale = 1 }) => {\n  const nodeRef = useRef(null);\n  const justDroppedRef = useRef(false);\n  const previousPosition = useRef({ x: tweet.position?.x ?? 0, y: tweet.position?.y ?? 0 });\n  const [localPosition, setLocalPosition] = useState({\n    x: tweet.position?.x ?? 0,\n    y: tweet.position?.y ?? 0,\n  });\n  const [dragging, setDragging] = useState(false);\n  const [hovered, setHovered] = useState(false);\n\n  const clampPosition = useCallback((x, y) => ({\n    x: Math.max(0, Math.min(x, BOARD_SIZE - 200)),\n    y: Math.max(0, Math.min(y, BOARD_SIZE - 100)),\n  }), []);\n\n  useEffect(() => {\n    if (!dragging && !justDroppedRef.current) {\n      const newPos = clampPosition(tweet.position?.x ?? 0, tweet.position?.y ?? 0);\n      if (localPosition.x !== newPos.x || localPosition.y !== newPos.y) {\n        setLocalPosition(newPos);\n        previousPosition.current = newPos;\n      }\n    }\n  }, [tweet.position?.x, tweet.position?.y, dragging, localPosition, clampPosition]);\n\n  // Permission logic for dragging\n  const isDraggable = useMemo(() => {\n    if (!tweet || tweet.is_pinned) return false;\n    if (bypassOwnership || ['admin', 'owner'].includes(userRole)) return true;\n    if (userRole === 'viewer') {\n      return (\n        tweet.anonymous_id === currentUser?.anonymous_id ||\n        tweet.user_id === currentUser?.anonymous_id ||\n        (tweet.username && currentUser?.username && tweet.username === currentUser.username)\n      );\n    }\n    return false;\n  }, [tweet, bypassOwnership, userRole, currentUser?.anonymous_id, currentUser?.username]);\n\n  const debouncedOnStop = useMemo(\n    () =>\n      debounce((e, data) => {\n        const clampedPos = clampPosition(data.x, data.y);\n        if (\n          clampedPos.x !== previousPosition.current.x ||\n          clampedPos.y !== previousPosition.current.y\n        ) {\n          if (isNaN(clampedPos.x) || isNaN(clampedPos.y)) {\n            console.error('Invalid position data:', data);\n            return;\n          }\n          previousPosition.current = clampedPos;\n          onStop?.(e, { x: clampedPos.x, y: clampedPos.y, tweetId: tweet.tweet_id });\n        }\n      }, 150),\n    [onStop, tweet.tweet_id, clampPosition]\n  );\n\n  useEffect(() => () => debouncedOnStop.cancel(), [debouncedOnStop]);\n\n  // --- : draggable   board-,   scale ---\n  const handleStart = useCallback(() => {\n    if (!isDraggable) return false;\n    setDragging(true);\n    return true;\n  }, [isDraggable]);\n\n  const handleDrag = useCallback((e, data) => {\n    setLocalPosition({ x: data.x, y: data.y });\n  }, []);\n\n  const handleStop = useCallback(\n    (e, data) => {\n      if (!isDraggable) return;\n      setDragging(false);\n      justDroppedRef.current = true;\n      setTimeout(() => (justDroppedRef.current = false), 100);\n      const clampedPos = clampPosition(data.x, data.y);\n      previousPosition.current = clampedPos;\n      onStop?.(e, { x: clampedPos.x, y: clampedPos.y, tweetId: tweet.tweet_id });\n    },\n    [isDraggable, clampPosition, onStop, tweet.tweet_id]\n  );\n\n  if (!tweet || !tweet.tweet_id) {\n    console.warn('Invalid tweet in DraggableTweet:', tweet);\n    return null;\n  }\n\n  return (\n    <Draggable\n      nodeRef={nodeRef}\n      position={localPosition}\n      positionOffset={{ x: '-50%', y: '-50%' }}\n      disabled={!isDraggable}\n      onStart={handleStart}\n      onDrag={handleDrag}\n      onStop={handleStop}\n      cancel={''} //    \n    >\n      <div\n        ref={nodeRef}\n        onMouseEnter={() => setHovered(true)}\n        onMouseLeave={() => setHovered(false)}\n        style={TweetContentStyles.draggableContainer(isDraggable, dragging, hovered, tweet.is_pinned)}\n        role=\"region\"\n        aria-label={`Tweet by ${tweet.username || 'Anonymous'}`}\n        aria-disabled={!isDraggable}\n        tabIndex={isDraggable ? 0 : -1}\n      >\n        {children}\n      </div>\n    </Draggable>\n  );\n};\n\nDraggableTweet.propTypes = {\n  tweet: PropTypes.shape({\n    tweet_id: PropTypes.string.isRequired,\n    position: PropTypes.shape({\n      x: PropTypes.number,\n      y: PropTypes.number,\n    }),\n    anonymous_id: PropTypes.string,\n    user_id: PropTypes.string,\n    username: PropTypes.string,\n    status: PropTypes.string,\n    is_pinned: PropTypes.bool,\n  }).isRequired,\n  onStop: PropTypes.func,\n  children: PropTypes.node.isRequired,\n  currentUser: PropTypes.shape({\n    anonymous_id: PropTypes.string,\n    username: PropTypes.string,\n  }).isRequired,\n  userRole: PropTypes.string.isRequired,\n  bypassOwnership: PropTypes.bool,\n  scale: PropTypes.number,\n};\n\nDraggableTweet.defaultProps = {\n  bypassOwnership: false,\n  onStop: () => {},\n  scale: 1,\n};\n\nexport default memo(DraggableTweet);","import { alpha } from '@mui/material';\n\nexport const BASE_SHADOW = '0 4px 16px rgba(0,0,0,0.12)';\nexport const HOVER_SHADOW = '0 8px 24px rgba(0,0,0,0.18)';\nexport const MEDIA_PREVIEW_SIZE = 250;\nexport const TWEET_Z_INDEX = 99;\n\n\n// Reusable style objects\nconst baseTypographyStyles = {\n  color: 'text.primary',\n  fontWeight: 400,\n  lineHeight: 1.6,\n};\n\nconst baseHoverEffect = {\n  '&:hover': {\n    transform: 'translateY(-2px)',\n    boxShadow: HOVER_SHADOW,\n  },\n  '&:focus': {\n    outline: (theme) => `2px solid ${theme.palette.primary.main}`,\n    outlineOffset: 2,\n  },\n};\n\nconst baseDialogStyles = {\n  bgcolor: 'background.paper',\n  boxShadow: BASE_SHADOW,\n  borderRadius: 3,\n  border: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.6)}`,\n  animation: 'fadeIn 0.3s ease-in-out',\n  ...baseHoverEffect,\n};\n\nconst ModalStyles = {\n  mediaDialogContainer: {\n    ...baseDialogStyles,\n    maxWidth: { xs: '100%', sm: '90vw', md: '80vw' },\n    margin: { xs: 0, sm: 'auto' },\n    height: { xs: '100%', sm: 'auto' },\n  },\n  mediaDialogTitle: {\n    ...baseTypographyStyles,\n    fontSize: { xs: '1.25rem', sm: '1.5rem' },\n    fontWeight: 600,\n    padding: { xs: '12px 16px', sm: '16px 24px' },\n    borderBottom: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.6)}`,\n  },\n  mediaDialogContent: {\n    maxHeight: { xs: '70vh', sm: '60vh' },\n    overflowY: 'auto',\n    padding: { xs: '12px', sm: '16px' },\n    display: 'flex',\n    flexDirection: 'column',\n    gap: { xs: 1.5, sm: 2 },\n  },\n  optionsDialogContainer: {\n    ...baseDialogStyles,\n    maxWidth: { xs: '80vw', sm: '400px' },\n  },\n  optionsDialogTitle: {\n    ...baseTypographyStyles,\n    fontSize: { xs: '1.1rem', sm: '1.25rem' },\n    fontWeight: 600,\n    padding: { xs: '12px 16px', sm: '16px 24px' },\n    borderBottom: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.6)}`,\n  },\n  optionsDialogContent: {\n    padding: { xs: '8px 0', sm: '12px 0' },\n    overflowY: 'auto',\n  },\n  dialogActions: {\n    padding: { xs: '8px', sm: '12px' },\n    justifyContent: 'flex-end',\n  },\n  dialogCloseButton: {\n    width: { xs: 48, sm: 40 },\n    height: { xs: 48, sm: 40 },\n    color: 'text.secondary',\n    borderRadius: '50%',\n    transition: 'all 0.2s ease',\n    '&:hover': {\n      bgcolor: (theme) => alpha(theme.palette.grey[100], 0.8),\n      transform: 'scale(1.15)',\n    },\n    '&:active': {\n      transform: 'scale(0.95)',\n    },\n    '&:focus': {\n      outline: (theme) => `2px solid ${theme.palette.primary.main}`,\n      outlineOffset: 2,\n    },\n  },\n  optionsDialogItem: {\n    padding: { xs: '12px 16px', sm: '12px 24px' },\n    minHeight: 48,\n    transition: 'all 0.2s ease',\n    '&:hover': {\n      bgcolor: (theme) => alpha(theme.palette.grey[100], 0.8),\n      transform: 'scale(1.03)',\n      boxShadow: '0 4px 12px rgba(0,0,0,0.1)',\n    },\n    '&:active': {\n      transform: 'scale(0.98)',\n    },\n  },\n  modalImage: {\n    width: '100%',\n    maxHeight: { xs: '280px', sm: '360px' },\n    objectFit: 'contain',\n    borderRadius: 3,\n    border: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.6)}`,\n    transition: 'all 0.2s ease',\n    '&:hover': {\n      transform: 'scale(1.03)',\n      boxShadow: '0 4px 12px rgba(0,0,0,0.1)',\n    },\n  },\n  modalImagePlaceholder: {\n    bgcolor: (theme) => theme.palette.grey[200],\n    width: '100%',\n    height: { xs: '280px', sm: '360px' },\n    borderRadius: 3,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: (theme) => theme.palette.grey[500],\n  },\n  modalOtherFile: {\n    display: 'flex',\n    alignItems: 'center',\n    gap: 1.5,\n    padding: 1.5,\n    borderRadius: 3,\n    transition: 'all 0.2s ease',\n    '&:hover': {\n      bgcolor: (theme) => alpha(theme.palette.grey[100], 0.8),\n      boxShadow: '0 4px 12px rgba(0,0,0,0.1)',\n    },\n    '&:active': {\n      transform: 'scale(0.98)',\n    },\n  },\n  modalOtherFileIcon: {\n    color: 'text.secondary',\n    fontSize: '1.25rem',\n  },\n  modalOtherFileLink: {\n    color: 'primary.main',\n    textDecoration: 'none',\n    fontSize: { xs: '0.85rem', sm: '0.9rem' },\n    transition: 'all 0.2s ease',\n    '&:hover': {\n      textDecoration: 'underline',\n      color: 'primary.dark',\n    },\n  },\n  errorPaper: {\n    padding: 2.5,\n    textAlign: 'center',\n    borderRadius: 8,\n    boxShadow: BASE_SHADOW,\n    bgcolor: 'background.paper',\n    border: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.6)}`,\n  },\n  errorTypography: {\n    color: 'error.main',\n    fontWeight: 500,\n    fontSize: { xs: '0.9rem', sm: '1rem' },\n  },\n};\n\nexport default ModalStyles;","import React, { useState, useEffect, useCallback, useMemo, useDeferredValue } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Card,\n  CardMedia,\n  CardContent,\n  Typography,\n  Box,\n  IconButton,\n  Link,\n  CircularProgress,\n} from '@mui/material';\nimport PlayArrowIcon from '@mui/icons-material/PlayArrow';\nimport PauseIcon from '@mui/icons-material/Pause';\nimport axios from 'axios';\nimport ReactPlayer from 'react-player';\nimport URLParse from 'url-parse';\nimport { LazyLoadComponent } from 'react-lazy-load-image-component';\nimport { motion } from 'framer-motion';\nimport { alpha } from '@mui/material';\n\n// Constants from TweetContentStyles\nconst BASE_SHADOW = '0 1px 6px rgba(0,0,0,0.06)';\nconst HOVER_SHADOW = '0 3px 10px rgba(0,0,0,0.1)';\n\n// Reusable style objects\nconst baseTypographyStyles = {\n  color: 'text.primary',\n  fontFamily: 'Roboto, sans-serif',\n  fontWeight: 400,\n  lineHeight: 1.4,\n  letterSpacing: '0.01em',\n};\n\nconst baseHoverEffect = {\n  '&:hover': {\n    transform: 'translateY(-1px)',\n    boxShadow: HOVER_SHADOW,\n  },\n  '&:focus': {\n    outline: (theme) => `1px solid ${alpha(theme.palette.primary.main, 0.2)}`,\n    outlineOffset: 1,\n  },\n};\n\nconst LinkPreviewStyles = {\n  previewCard: {\n    display: 'flex',\n    flexDirection: { xs: 'column', sm: 'row' }, // Stack vertically on mobile\n    maxWidth: '100%',\n    mt: 0.75,\n    borderRadius: '8px',\n    overflow: 'hidden',\n    boxShadow: BASE_SHADOW,\n    bgcolor: 'background.paper',\n    border: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.4)}`,\n    transition: 'all 0.2s ease-out',\n    ...baseHoverEffect,\n  },\n  previewImage: {\n    width: { xs: '100%', sm: '120px' }, // Full-width on mobile\n    height: { xs: '60px', sm: '80px' }, // Smaller for mobile\n    objectFit: 'cover',\n    flexShrink: 0,\n    borderRadius: { xs: '6px 6px 0 0', sm: '6px 0 0 6px' }, // Adjust for mobile\n    border: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.4)}`,\n  },\n  previewContent: {\n    flex: 1,\n    p: { xs: 0.75, sm: 1 }, // Tighter padding on mobile\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    position: 'relative',\n  },\n  previewTitle: {\n    ...baseTypographyStyles,\n    fontSize: { xs: '0.875rem', sm: '1rem' }, // Match contentText\n    fontWeight: 500,\n    color: 'text.primary',\n    textDecoration: 'none',\n    '& a': {\n      color: 'primary.main',\n      textDecoration: 'underline', // Telegram style\n      '&:hover': { color: 'primary.dark' },\n    },\n  },\n  previewDescription: {\n    ...baseTypographyStyles,\n    fontSize: { xs: '0.75rem', sm: '0.875rem' }, // Match tweetAuthorTypography\n    color: 'text.secondary',\n    display: '-webkit-box',\n    WebkitLineClamp: 2,\n    WebkitBoxOrient: 'vertical',\n    overflow: 'hidden',\n    mt: 0.25,\n  },\n  previewPlayButton: {\n    position: 'absolute',\n    top: { xs: 4, sm: 8 },\n    right: { xs: 4, sm: 8 },\n    bgcolor: 'rgba(0,0,0,0.5)',\n    color: 'white',\n    minWidth: 36, // Touch-friendly\n    p: 0.25,\n    borderRadius: '4px',\n    transition: 'all 0.2s ease-out',\n    '&:hover': { bgcolor: 'rgba(0,0,0,0.7)', transform: 'scale(1.1)' },\n    '&:focus': {\n      outline: (theme) => `1px solid ${alpha(theme.palette.primary.main, 0.2)}`,\n    },\n  },\n  previewPlayer: {\n    mt: 0.75,\n    borderRadius: '6px',\n    overflow: 'hidden',\n    width: '100%',\n  },\n  loadingContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    p: 0.75,\n  },\n};\n\nconst LinkPreview = ({ content, onTextTransform, onPlayClick }) => {\n  const [previews, setPreviews] = useState([]);\n  const [playingMedia, setPlayingMedia] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const deferredContent = useDeferredValue(content);\n  const previewCache = useMemo(() => new Map(), []);\n\n  const extractYouTubeId = useCallback((url) => {\n    const parsed = new URLParse(url);\n    if (parsed.hostname.includes('youtu.be')) {\n      return parsed.pathname.slice(1);\n    }\n    return parsed.query.split('v=')[1]?.split('&')[0];\n  }, []);\n\n  const extractTwitchId = useCallback((url) => {\n    const parsed = new URLParse(url);\n    if (parsed.pathname.includes('/videos/')) {\n      return { type: 'video', id: parsed.pathname.split('/videos/')[1] };\n    } else if (parsed.pathname.includes('/clip/')) {\n      return { type: 'clip', id: parsed.pathname.split('/clip/')[1] };\n    } else {\n      return { type: 'channel', id: parsed.pathname.slice(1) };\n    }\n  }, []);\n\n  const isYouTubeMusic = useCallback((url) => {\n    return url.includes('music.youtube.com');\n  }, []);\n\n  useEffect(() => {\n    const fetchPreviews = async () => {\n      if (!deferredContent) {\n        setPreviews([]);\n        onTextTransform?.(deferredContent);\n        return;\n      }\n\n      setLoading(true);\n      const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\n      const urls = deferredContent.match(urlRegex) || [];\n      const uniqueUrls = [...new Set(urls)];\n      const newPreviews = [];\n\n      let transformedText = deferredContent;\n      uniqueUrls.forEach((url) => {\n        const truncated = url.length > 15 ? `${url.slice(0, 15)}...` : url;\n        transformedText = transformedText.replace(url, truncated);\n      });\n      onTextTransform?.(transformedText);\n\n      for (const url of uniqueUrls) {\n        if (previewCache.has(url)) {\n          newPreviews.push(previewCache.get(url));\n          continue;\n        }\n\n        try {\n          let previewData = { url, type: 'generic' };\n\n          if (url.includes('youtube.com') || url.includes('youtu.be')) {\n            const videoId = extractYouTubeId(url);\n            const isMusic = isYouTubeMusic(url);\n            const response = await axios.get(\n              `https://www.youtube.com/oembed?url=${encodeURIComponent(url)}&format=json`,\n              { timeout: 5000 }\n            );\n            previewData = {\n              url,\n              type: isMusic ? 'youtube_music' : 'youtube',\n              title: response.data.title,\n              description: response.data.author_name,\n              thumbnail: `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`,\n              embedUrl: isMusic\n                ? `https://www.youtube.com/embed/${videoId}?autoplay=0`\n                : `https://www.youtube.com/embed/${videoId}`,\n            };\n          } else if (url.includes('spotify.com')) {\n            const response = await axios.get(\n              `https://open.spotify.com/oembed?url=${encodeURIComponent(url)}`,\n              { timeout: 5000 }\n            );\n            previewData = {\n              url,\n              type: 'spotify',\n              title: response.data.title,\n              description: response.data.provider_name,\n              thumbnail: response.data.thumbnail_url,\n              embedUrl: response.data.html.match(/src=\"([^\"]+)\"/)?.[1],\n            };\n          } else if (url.includes('soundcloud.com')) {\n            const response = await axios.get(\n              `https://soundcloud.com/oembed?url=${encodeURIComponent(url)}&format=json`,\n              { timeout: 5000 }\n            );\n            previewData = {\n              url,\n              type: 'soundcloud',\n              title: response.data.title,\n              description: response.data.author_name,\n              thumbnail: response.data.thumbnail_url,\n              embedUrl: response.data.html.match(/src=\"([^\"]+)\"/)?.[1],\n            };\n          } else if (url.includes('twitch.tv')) {\n            const twitchInfo = extractTwitchId(url);\n            let embedUrl;\n            if (twitchInfo.type === 'channel') {\n              embedUrl = `https://player.twitch.tv/?channel=${twitchInfo.id}&parent=${window.location.hostname}`;\n            } else if (twitchInfo.type === 'video') {\n              embedUrl = `https://player.twitch.tv/?video=${twitchInfo.id}&parent=${window.location.hostname}`;\n            } else if (twitchInfo.type === 'clip') {\n              embedUrl = `https://clips.twitch.tv/embed?clip=${twitchInfo.id}&parent=${window.location.hostname}`;\n            }\n            const response = await axios.get(\n              `https://api.microlink.io?url=${encodeURIComponent(url)}`,\n              { timeout: 5000 }\n            );\n            previewData = {\n              url,\n              type: 'twitch',\n              title: response.data.data.title,\n              description: response.data.data.description || 'Twitch Stream/Clip',\n              thumbnail: response.data.data.image?.url,\n              embedUrl,\n              twitchType: twitchInfo.type,\n            };\n          } else {\n            const response = await axios.get(\n              `https://api.microlink.io?url=${encodeURIComponent(url)}`,\n              { timeout: 5000 }\n            );\n            previewData = {\n              url,\n              type: 'generic',\n              title: response.data.data.title,\n              description: response.data.data.description,\n              thumbnail: response.data.data.image?.url,\n            };\n          }\n\n          if (previewData.title || previewData.thumbnail) {\n            previewCache.set(url, previewData);\n            newPreviews.push(previewData);\n          }\n        } catch (error) {\n          console.error(`Failed to fetch preview for ${url}:`, error);\n          // Silently skip failed previews\n        }\n      }\n\n      setPreviews(newPreviews);\n      setLoading(false);\n    };\n\n    const debounce = setTimeout(fetchPreviews, 500);\n    return () => clearTimeout(debounce);\n  }, [deferredContent, extractYouTubeId, extractTwitchId, isYouTubeMusic, previewCache, onTextTransform]);\n\n  const handleTogglePlay = useCallback(\n    (preview) => {\n      if (['spotify', 'soundcloud'].includes(preview.type) && !preview.embedUrl) {\n        onPlayClick?.(preview, preview.type);\n        return;\n      }\n      setPlayingMedia(playingMedia === preview.url ? null : preview.url);\n    },\n    [playingMedia, onPlayClick]\n  );\n\n  const renderPreview = useCallback(\n    (preview) => {\n      const isPlayable = ['youtube', 'youtube_music', 'spotify', 'soundcloud', 'twitch'].includes(preview.type) && preview.embedUrl;\n      const isAudio = ['youtube_music', 'spotify', 'soundcloud'].includes(preview.type);\n      const playerHeight = { xs: isAudio ? '80px' : '160px', sm: isAudio ? '100px' : '200px' }; // Smaller for mobile\n\n      return (\n        <motion.div\n          key={preview.url}\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.3, ease: 'easeOut' }}\n        >\n          <Card sx={LinkPreviewStyles.previewCard}>\n            {preview.thumbnail && (\n              <CardMedia\n                component=\"img\"\n                image={preview.thumbnail}\n                alt={preview.title || 'Link preview'}\n                sx={LinkPreviewStyles.previewImage}\n              />\n            )}\n            <CardContent sx={LinkPreviewStyles.previewContent}>\n              <Typography variant=\"subtitle2\" sx={LinkPreviewStyles.previewTitle}>\n                <Link href={preview.url} target=\"_blank\" rel=\"noopener\">\n                  {preview.title || preview.url}\n                </Link>\n              </Typography>\n              {preview.description && (\n                <Typography variant=\"caption\" sx={LinkPreviewStyles.previewDescription}>\n                  {preview.description}\n                </Typography>\n              )}\n              {isPlayable && (\n                <IconButton\n                  onClick={() => handleTogglePlay(preview)}\n                  sx={LinkPreviewStyles.previewPlayButton}\n                  aria-label={playingMedia === preview.url ? `Pause ${preview.type} content` : `Play ${preview.type} content`}\n                >\n                  {playingMedia === preview.url && preview.embedUrl ? <PauseIcon /> : <PlayArrowIcon />}\n                </IconButton>\n              )}\n            </CardContent>\n          </Card>\n          {playingMedia === preview.url && isPlayable && preview.embedUrl && (\n            <Box sx={LinkPreviewStyles.previewPlayer}>\n              <LazyLoadComponent>\n                <ReactPlayer\n                  url={preview.embedUrl}\n                  width=\"100%\"\n                  height={playerHeight}\n                  controls\n                  playing={playingMedia === preview.url}\n                  config={{\n                    youtube: {\n                      playerVars: { modestbranding: 1, ...(preview.type === 'youtube_music' ? { playsinline: 1 } : {}) },\n                    },\n                    soundcloud: { options: { visual: true } },\n                    twitch: { options: { autoplay: preview.twitchType !== 'clip' } },\n                  }}\n                  onError={() => setPlayingMedia(null)}\n                />\n              </LazyLoadComponent>\n            </Box>\n          )}\n        </motion.div>\n      );\n    },\n    [playingMedia, handleTogglePlay]\n  );\n\n  if (loading) {\n    return (\n      <Box sx={LinkPreviewStyles.loadingContainer}>\n        <CircularProgress size={20} />\n      </Box>\n    );\n  }\n\n  if (!previews.length) {\n    return null;\n  }\n\n  return <Box>{previews.map(renderPreview)}</Box>;\n};\n\nLinkPreview.propTypes = {\n  content: PropTypes.string,\n  onTextTransform: PropTypes.func,\n  onPlayClick: PropTypes.func,\n};\n\nLinkPreview.defaultProps = {\n  content: '',\n  onTextTransform: null,\n  onPlayClick: null,\n};\n\nexport default LinkPreview;","import React, { useState, useCallback, useMemo, memo, useEffect, useDeferredValue } from 'react';\nimport {\n  Paper,\n  Typography,\n  Box,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Grid,\n  Fade,\n  Link,\n  Chip,\n  Collapse,\n  CircularProgress,\n  List,\n  ListItemButton,\n  ListItemText,\n} from '@mui/material';\nimport ThumbUpIcon from '@mui/icons-material/ThumbUp';\nimport ChatBubbleOutlineIcon from '@mui/icons-material/ChatBubbleOutline';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport PushPinIcon from '@mui/icons-material/PushPin';\nimport InsertDriveFileIcon from '@mui/icons-material/InsertDriveFile';\nimport CloseIcon from '@mui/icons-material/Close';\nimport { motion } from 'framer-motion';\nimport PropTypes from 'prop-types';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport Emoji from 'react-emoji-render';\nimport { formatDistanceToNow, format, isValid, parseISO } from 'date-fns';\nimport TweetContentStyles from './TweetContentStyles';\nimport ModalStyles from './ModalStyles';\nimport LinkPreview from './LinkPreview';\n\nconst MAX_TWEET_LENGTH = 1000;\n\nconst statusColorMap = {\n  pending: 'default',\n  approved: 'success',\n  rejected: 'error',\n  announcement: 'info',\n  reminder: 'warning',\n  pinned: 'primary',\n  archived: 'default',\n};\n\nconst mediaVariants = {\n  initial: { opacity: 0, scale: 0.95 },\n  animate: { opacity: 1, scale: 1, transition: { duration: 0.3, ease: 'easeOut' } },\n  exit: { opacity: 0, scale: 0.95, transition: { duration: 0.2 } },\n};\n\nconst ViewAllButton = ({ label, onClick, sx }) => (\n  <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>\n    <Typography\n      variant=\"caption\"\n      sx={{ ...sx, cursor: 'pointer' }}\n      onClick={onClick}\n      role=\"button\"\n      tabIndex={0}\n      onKeyPress={(e) => e.key === 'Enter' && onClick(e)}\n      aria-label={label}\n    >\n      {label}\n    </Typography>\n  </motion.div>\n);\n\nViewAllButton.propTypes = {\n  label: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  sx: PropTypes.object.isRequired,\n};\n\nconst CircularVideoPlayer = memo(({ src, duration, ariaLabel }) => (\n  <motion.div variants={mediaVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n    <Box sx={TweetContentStyles.mediaWrapper} role=\"region\" aria-label={ariaLabel}>\n      <Box sx={{ ...TweetContentStyles.circleVideoContainer, display: 'flex', justifyContent: 'center' }}>\n        <video\n          src={src}\n          controls\n          style={TweetContentStyles.circleVideo(duration)}\n          preload=\"metadata\"\n          aria-label={ariaLabel}\n        />\n      </Box>\n    </Box>\n  </motion.div>\n));\n\nCircularVideoPlayer.propTypes = {\n  src: PropTypes.string.isRequired,\n  duration: PropTypes.number,\n  ariaLabel: PropTypes.string.isRequired,\n};\n\nconst StandardVideoPlayer = memo(({ src, duration, ariaLabel }) => (\n  <motion.div variants={mediaVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n    <Box sx={TweetContentStyles.mediaWrapper} role=\"region\" aria-label={ariaLabel}>\n      <Box sx={{ ...TweetContentStyles.videoInner, display: 'flex', justifyContent: 'center' }}>\n        <video\n          src={src}\n          controls\n          style={TweetContentStyles.video(duration)}\n          preload=\"metadata\"\n          aria-label={ariaLabel}\n        />\n      </Box>\n    </Box>\n  </motion.div>\n));\n\nStandardVideoPlayer.propTypes = {\n  src: PropTypes.string.isRequired,\n  duration: PropTypes.number,\n  ariaLabel: PropTypes.string.isRequired,\n};\n\nconst AudioPlayer = memo(({ src }) => (\n  <Box sx={{ ...TweetContentStyles.audioPlayer, maxWidth: '100%' }}>\n    <audio src={src} controls sx={{ width: '100%' }} preload=\"metadata\" />\n  </Box>\n));\n\nAudioPlayer.propTypes = {\n  src: PropTypes.string.isRequired,\n};\n\nconst FileItem = memo(({ file, index }) => (\n  <motion.div\n    variants={mediaVariants}\n    initial=\"initial\"\n    animate=\"animate\"\n    exit=\"exit\"\n    key={file.fileKey || `other-${index}`}\n  >\n    <Box sx={TweetContentStyles.otherFileItem(index)} role=\"region\" aria-label={`File ${index + 1}`}>\n      <InsertDriveFileIcon sx={TweetContentStyles.otherFileIcon} />\n      <Link\n        href={file.url}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        sx={TweetContentStyles.otherFileLink}\n        aria-label={`Download file ${file.fileKey || `File ${index + 1}`}`}\n      >\n        {file.fileKey || `File ${index + 1}`}\n      </Link>\n    </Box>\n  </motion.div>\n));\n\nFileItem.propTypes = {\n  file: PropTypes.shape({\n    fileKey: PropTypes.string,\n    url: PropTypes.string.isRequired,\n  }).isRequired,\n  index: PropTypes.number.isRequired,\n};\n\nconst TweetContent = ({\n  tweet,\n  currentUser,\n  userRole,\n  onLike,\n  onDelete,\n  onReply,\n  onReplyHover,\n  onEdit,\n  onPinToggle,\n  isParentHighlighted = false,\n  replyCount = 0,\n  parentTweetText = null,\n  bypassOwnership = false,\n  relatedTweetIds = [],\n  availableBoards = [],\n  boardId,\n  isListView = false,\n  error = null,\n  getParentTweetText,\n  onModalStateChange,\n}) => {\n  const [animate, setAnimate] = useState(false);\n  const [hovered, setHovered] = useState(false);\n  const [openOptionsDialog, setOpenOptionsDialog] = useState(false);\n  const [openMediaDialog, setOpenMediaDialog] = useState(false);\n  const [openLinkModal, setOpenLinkModal] = useState(null);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [timestamp, setTimestamp] = useState('');\n  const [transformedText, setTransformedText] = useState(tweet.content?.value || '');\n  const deferredContent = useDeferredValue(tweet.content?.value || '');\n\n  // Notify Board.js of modal state changes\n  useEffect(() => {\n    onModalStateChange?.(tweet.tweet_id, openOptionsDialog || openMediaDialog || !!openLinkModal);\n    return () => onModalStateChange?.(tweet.tweet_id, false);\n  }, [openOptionsDialog, openMediaDialog, openLinkModal, tweet.tweet_id, onModalStateChange]);\n\n  // Timestamp update logic\n  useEffect(() => {\n    if (!tweet.created_at) return;\n\n    const createdAt = parseISO(tweet.created_at);\n    if (!isValid(createdAt)) return;\n\n    const updateTimestamp = () => {\n      const now = new Date();\n      const diffInSeconds = (now - createdAt) / 1000;\n\n      if (diffInSeconds < 7 * 24 * 60 * 60) { // Less than 7 days\n        setTimestamp(formatDistanceToNow(createdAt, { addSuffix: true }));\n      } else {\n        setTimestamp(format(createdAt, 'MMM d'));\n      }\n    };\n\n    updateTimestamp(); // Initial update\n\n    // Update every minute for tweets less than 1 hour old\n    if ((new Date() - createdAt) / 1000 < 60 * 60) {\n      const interval = setInterval(updateTimestamp, 60 * 1000);\n      return () => clearInterval(interval);\n    }\n  }, [tweet.created_at]);\n\n  const tweetAuthor = tweet.username || tweet.user?.username || 'Anonymous';\n  const isLiked = tweet.liked_by?.some((u) => u.anonymous_id === currentUser?.anonymous_id) ?? false;\n  const canEdit =\n    bypassOwnership ||\n    ['moderator', 'admin'].includes(userRole) ||\n    tweet.anonymous_id === currentUser?.anonymous_id ||\n    tweet.user_id === currentUser?.anonymous_id ||\n    (tweet.username &&\n      currentUser?.username &&\n      tweet.username.toLowerCase() === currentUser.username.toLowerCase());\n  const isRelated = relatedTweetIds.includes(tweet.tweet_id);\n  const hasReplies = replyCount > 0 || tweet.child_tweet_ids?.length > 0;\n  const replyLabel = hasReplies\n    ? `${replyCount || tweet.child_tweet_ids?.length} ${replyCount === 1 ? 'Reply' : 'Replies'}`\n    : '';\n  const rawStatus = tweet.status || 'approved';\n  const chipColor = statusColorMap[rawStatus] || 'default';\n  const chipLabel = rawStatus.charAt(0).toUpperCase() + rawStatus.slice(1);\n  const resolvedParentTweetText = tweet.parent_tweet_id\n    ? parentTweetText || getParentTweetText?.(tweet.parent_tweet_id) || 'Parent tweet not found'\n    : null;\n  const parentExcerpt = resolvedParentTweetText\n    ? resolvedParentTweetText.split(/\\s+/).slice(0, 10).join(' ') + '...'\n    : null;\n\n  useEffect(() => {\n    if (tweet.stats?.like_count !== undefined) {\n      setAnimate(true);\n      const timer = setTimeout(() => setAnimate(false), 300);\n      return () => clearTimeout(timer);\n    }\n  }, [tweet.stats?.like_count]);\n\n  const handleMouseEnter = useCallback(() => {\n    if (openOptionsDialog || openMediaDialog || openLinkModal) return;\n    setHovered(true);\n    if ((tweet.parent_tweet_id || tweet.child_tweet_ids?.length > 0) && onReplyHover) {\n      onReplyHover(tweet.tweet_id);\n    }\n  }, [onReplyHover, tweet.tweet_id, tweet.parent_tweet_id, tweet.child_tweet_ids, openOptionsDialog, openMediaDialog, openLinkModal]);\n\n  const handleMouseLeave = useCallback(() => {\n    if (openOptionsDialog || openMediaDialog || openLinkModal) return;\n    setHovered(false);\n    if ((tweet.parent_tweet_id || tweet.child_tweet_ids?.length > 0) && onReplyHover) {\n      onReplyHover(null);\n    }\n  }, [onReplyHover, tweet.parent_tweet_id, tweet.child_tweet_ids, openOptionsDialog, openMediaDialog, openLinkModal]);\n\n  const handleOpenOptionsDialog = useCallback(() => {\n    setOpenOptionsDialog(true);\n  }, []);\n\n  const handleCloseOptionsDialog = useCallback(() => {\n    setOpenOptionsDialog(false);\n  }, []);\n\n  const handleOpenMediaDialog = useCallback(() => {\n    setOpenMediaDialog(true);\n  }, []);\n\n  const handleCloseMediaDialog = useCallback(() => {\n    setOpenMediaDialog(false);\n  }, []);\n\n  const handleOpenLinkModal = useCallback((url, type) => {\n    setOpenLinkModal({ url: url.url, type });\n  }, []);\n\n  const handleCloseLinkModal = useCallback(() => {\n    setOpenLinkModal(null);\n  }, []);\n\n  const handleEdit = useCallback(() => {\n    onEdit(tweet);\n    handleCloseOptionsDialog();\n  }, [onEdit, tweet, handleCloseOptionsDialog]);\n\n  const handlePin = useCallback(() => {\n    onPinToggle(tweet);\n    handleCloseOptionsDialog();\n  }, [onPinToggle, tweet, handleCloseOptionsDialog]);\n\n  const handleDelete = useCallback(() => {\n    onDelete(tweet.tweet_id);\n    handleCloseOptionsDialog();\n  }, [onDelete, tweet.tweet_id, handleCloseOptionsDialog]);\n\n  const handleToggleExpand = useCallback(() => {\n    setIsExpanded((prev) => !prev);\n  }, []);\n\n  const { previewText, remainderText } = useMemo(() => {\n    const text = transformedText || '';\n    const PREVIEW_LEN = 200;\n    if (text.length <= PREVIEW_LEN) {\n      return { previewText: text, remainderText: '' };\n    }\n    const cutoff = text.slice(0, PREVIEW_LEN);\n    const lastSpace = cutoff.lastIndexOf(' ') > -1 ? cutoff.lastIndexOf(' ') : PREVIEW_LEN;\n    return {\n      previewText: cutoff.slice(0, lastSpace),\n      remainderText: text.slice(lastSpace),\n    };\n  }, [transformedText]);\n\n  const fullDate = useMemo(() => {\n    if (!tweet.created_at) return '';\n    const createdAt = parseISO(tweet.created_at);\n    return isValid(createdAt) ? format(createdAt, 'PPPPpp') : '';\n  }, [tweet.created_at]);\n\n  const renderImages = useMemo(() => {\n    const imageFiles = tweet.content?.metadata?.files?.filter((f) => f.contentType?.startsWith('image')) || [];\n    if (!imageFiles.length) return null;\n    return (\n      <Box sx={{ ...TweetContentStyles.imageContainer(!!transformedText), display: 'flex', justifyContent: 'center' }} role=\"region\" aria-label=\"Images\">\n        <Grid container spacing={1} sx={{ maxWidth: '100%' }}>\n          {imageFiles.slice(0, 4).map((file, index) => (\n            <Grid\n              item\n              xs={imageFiles.length === 1 ? 12 : 6}\n              sm={imageFiles.length === 1 ? 12 : 3}\n              key={file.fileKey || `img-${index}`}\n            >\n              <motion.div variants={mediaVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\" whileHover={{ scale: 1.02 }}>\n                <LazyLoadImage\n                  src={file.url}\n                  alt={`Image ${index + 1}`}\n                  effect=\"blur\"\n                  style={TweetContentStyles.image(imageFiles.length === 1)}\n                  placeholder={\n                    <Box sx={{ ...TweetContentStyles.imagePlaceholder, borderRadius: '10px' }}>\n                      <CircularProgress size={24} />\n                    </Box>\n                  }\n                  role=\"img\"\n                />\n              </motion.div>\n            </Grid>\n          ))}\n        </Grid>\n        {imageFiles.length > 4 && (\n          <ViewAllButton\n            label={`View all images (${imageFiles.length})`}\n            onClick={handleOpenMediaDialog}\n            sx={TweetContentStyles.imageViewAll}\n          />\n        )}\n      </Box>\n    );\n  }, [tweet.content?.metadata?.files, handleOpenMediaDialog]);\n\n  const renderVideos = useMemo(() => {\n    const videoFiles = tweet.content?.metadata?.files?.filter((f) => f.contentType?.startsWith('video')) || [];\n    if (!videoFiles.length) return null;\n    return (\n      <Box\n        sx={{ ...TweetContentStyles.videoContainer(!!transformedText || renderImages), display: 'flex', justifyContent: 'center' }}\n        role=\"region\"\n        aria-label=\"Videos\"\n      >\n        {videoFiles[0].contentType === 'video/webm' ? (\n          <CircularVideoPlayer\n            src={videoFiles[0].url}\n            duration={videoFiles[0].duration}\n            ariaLabel=\"Recorded tweet video\"\n          />\n        ) : (\n          <StandardVideoPlayer\n            src={videoFiles[0].url}\n            duration={videoFiles[0].duration}\n            ariaLabel=\"Tweet video\"\n          />\n        )}\n        {videoFiles.length > 1 && (\n          <ViewAllButton\n            label={`View all videos (${videoFiles.length})`}\n            onClick={handleOpenMediaDialog}\n            sx={TweetContentStyles.videoViewAll}\n          />\n        )}\n      </Box>\n    );\n  }, [tweet.content?.metadata?.files, handleOpenMediaDialog, renderImages]);\n\n  const renderAudio = useMemo(() => {\n    const audioFiles = tweet.content?.metadata?.files?.filter((f) => f.contentType?.startsWith('audio')) || [];\n    if (!audioFiles.length) return null;\n    return (\n      <Box\n        sx={{\n          ...TweetContentStyles.audioContainer(!!transformedText || renderImages || renderVideos),\n          display: 'flex',\n          justifyContent: 'center',\n        }}\n        role=\"region\"\n        aria-label=\"Audio\"\n      >\n        <AudioPlayer src={audioFiles[0].url} />\n        {audioFiles.length > 1 && (\n          <ViewAllButton\n            label={`View all audio (${audioFiles.length})`}\n            onClick={handleOpenMediaDialog}\n            sx={TweetContentStyles.audioViewAll}\n          />\n        )}\n      </Box>\n    );\n  }, [tweet.content?.metadata?.files, handleOpenMediaDialog, renderImages, renderVideos]);\n\n  const renderOtherFiles = useMemo(() => {\n    const otherFiles = tweet.content?.metadata?.files?.filter(\n      (f) =>\n        !f.contentType?.startsWith('image') &&\n        !f.contentType?.startsWith('video') &&\n        !f.contentType?.startsWith('audio')\n    ) || [];\n    if (!otherFiles.length) return null;\n    return (\n      <Box sx={{ ...TweetContentStyles.otherFilesContainer(!!transformedText), maxWidth: '100%' }} role=\"region\" aria-label=\"Files\">\n        {otherFiles.slice(0, 2).map((file, idx) => (\n          <FileItem file={file} index={idx} key={file.fileKey || `other-${idx}`} />\n        ))}\n        {otherFiles.length > 2 && (\n          <ViewAllButton\n            label={`View all files (${otherFiles.length})`}\n            onClick={handleOpenMediaDialog}\n            sx={TweetContentStyles.otherFilesViewAll}\n          />\n        )}\n      </Box>\n    );\n  }, [tweet.content?.metadata?.files, handleOpenMediaDialog]);\n\n  const renderContent = useMemo(() => {\n    const hasText = !!transformedText;\n    return (\n      <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ duration: 0.3 }}>\n        {hasText && (\n          <Box>\n            <Typography\n              sx={TweetContentStyles.contentText(\n                !!renderImages || !!renderVideos || !!renderAudio || !!renderOtherFiles\n              )}\n            >\n              <Emoji text={previewText + (!isExpanded && remainderText ? '...' : '')} />\n            </Typography>\n            {remainderText && (\n              <Collapse in={isExpanded} timeout=\"auto\" unmountOnExit>\n                <Typography\n                  sx={TweetContentStyles.contentText(\n                    !!renderImages || !!renderVideos || !!renderAudio || !!renderOtherFiles\n                  )}\n                >\n                  <Emoji text={remainderText} />\n                </Typography>\n              </Collapse>\n            )}\n            {remainderText && (\n              <ViewAllButton\n                label={isExpanded ? 'Show less' : 'Read more'}\n                onClick={handleToggleExpand}\n                sx={TweetContentStyles.readMoreButton}\n              />\n            )}\n          </Box>\n        )}\n        {renderImages}\n        {renderVideos}\n        {renderAudio}\n        {renderOtherFiles}\n        <LinkPreview\n          content={deferredContent}\n          onTextTransform={setTransformedText}\n          onPlayClick={handleOpenLinkModal}\n        />\n      </motion.div>\n    );\n  }, [\n    transformedText,\n    previewText,\n    remainderText,\n    isExpanded,\n    renderImages,\n    renderVideos,\n    renderAudio,\n    renderOtherFiles,\n    handleToggleExpand,\n    deferredContent,\n    handleOpenLinkModal,\n  ]);\n\n  const mediaDialogContent = useMemo(() => {\n    const files = tweet.content?.metadata?.files || [];\n    return (\n      <DialogContent sx={ModalStyles.mediaDialogContent}>\n        {files.length === 0 && (\n          <Typography variant=\"body2\" sx={{ color: 'primary.main', fontStyle: 'italic',  fontSize: { xs: '0.7rem', sm: '0.8rem' }, m: 0 }}>\n            No media available\n          </Typography>\n        )}\n        {files.map((file, idx) => (\n          <motion.div\n            key={file.fileKey || `media-${idx}`}\n            variants={mediaVariants}\n            initial=\"initial\"\n            animate=\"animate\"\n            exit=\"exit\"\n          >\n            {file.contentType?.startsWith('image') ? (\n              <LazyLoadImage\n                src={file.url}\n                alt={`Media ${idx + 1}`}\n                effect=\"blur\"\n                style={{ ...ModalStyles.modalImage, maxWidth: '100%' }}\n                placeholder={\n                  <Box sx={{ ...ModalStyles.modalImagePlaceholder, borderRadius: '10px' }}>\n                    <CircularProgress size={24} />\n                  </Box>\n                }\n                role=\"img\"\n              />\n            ) : file.contentType === 'video/webm' ? (\n              <CircularVideoPlayer\n                src={file.url}\n                duration={file.duration}\n                ariaLabel={`Recorded video ${idx + 1}`}\n              />\n            ) : file.contentType?.startsWith('video') ? (\n              <StandardVideoPlayer\n                src={file.url}\n                duration={file.duration}\n                ariaLabel={`Video ${idx + 1}`}\n              />\n            ) : file.contentType?.startsWith('audio') ? (\n              <AudioPlayer src={file.url} />\n            ) : (\n              <FileItem file={file} index={idx} />\n            )}\n          </motion.div>\n        ))}\n      </DialogContent>\n    );\n  }, [tweet.content?.metadata?.files]);\n\n  const optionsDialogContent = useMemo(() => (\n    <DialogContent sx={ModalStyles.optionsDialogContent}>\n      <List>\n        <ListItemButton\n          onClick={handleEdit}\n          sx={ModalStyles.optionsDialogItem}\n          aria-label=\"Edit tweet\"\n        >\n          <ListItemText primary=\"Edit Tweet\" />\n        </ListItemButton>\n        <ListItemButton\n          onClick={handlePin}\n          sx={ModalStyles.optionsDialogItem}\n          aria-label={tweet.is_pinned ? 'Unpin tweet' : 'Pin tweet'}\n        >\n          <ListItemText primary={tweet.is_pinned ? 'Unpin Tweet' : 'Pin Tweet'} />\n        </ListItemButton>\n        <ListItemButton\n          onClick={handleDelete}\n          sx={{ ...ModalStyles.optionsDialogItem, color: 'error.main' }}\n          aria-label=\"Delete tweet\"\n        >\n          <ListItemText primary=\"Delete\" />\n        </ListItemButton>\n      </List>\n    </DialogContent>\n  ), [handleEdit, handlePin, handleDelete, tweet.is_pinned]);\n\n  const linkModalContent = useMemo(() => {\n    if (!openLinkModal) return null;\n    return (\n      <Dialog\n        open={!!openLinkModal}\n        onClose={handleCloseLinkModal}\n        maxWidth=\"sm\"\n        fullWidth\n        TransitionComponent={Fade}\n        transitionDuration={500}\n        aria-labelledby=\"link-modal-title\"\n        aria-describedby=\"link-modal-description\"\n        PaperProps={{\n          sx: {\n            ...ModalStyles.optionsDialogContainer,\n            zIndex: 110,\n          },\n          onClick: (e) => e.stopPropagation(),\n          onMouseDown: (e) => e.stopPropagation(),\n          onTouchStart: (e) => e.stopPropagation(),\n        }}\n      >\n        <DialogTitle id=\"link-modal-title\" sx={ModalStyles.optionsDialogTitle}>\n          View Content\n        </DialogTitle>\n        <DialogContent sx={ModalStyles.optionsDialogContent}>\n          <Typography id=\"link-modal-description\" variant=\"body1\" gutterBottom>\n            This content cannot be embedded directly. Visit the link below to view it:\n          </Typography>\n          <Link\n            href={openLinkModal.url}\n            target=\"_blank\"\n            rel=\"noopener\"\n            sx={{ wordBreak: 'break-all' }}\n            aria-label={`Open ${openLinkModal.type} content in a new tab`}\n          >\n            {openLinkModal.url}\n          </Link>\n        </DialogContent>\n        <DialogActions sx={ModalStyles.dialogActions}>\n          <IconButton\n            onClick={handleCloseLinkModal}\n            sx={ModalStyles.dialogCloseButton}\n            aria-label=\"Close link modal\"\n          >\n            <CloseIcon />\n          </IconButton>\n        </DialogActions>\n      </Dialog>\n    );\n  }, [openLinkModal, handleCloseLinkModal]);\n\n  if (error) {\n    return (\n      <Paper sx={TweetContentStyles.tweetCard(false, isListView)} role=\"article\">\n        <Typography sx={TweetContentStyles.tweetTitle}>Error</Typography>\n        <Box sx={{ p: 2, textAlign: 'center' }}>\n          <Typography variant=\"body2\" color=\"error\" sx={{ fontWeight: 500 }}>\n            {error}\n          </Typography>\n        </Box>\n      </Paper>\n    );\n  }\n\n  if (!tweet.tweet_id || !tweet.content) {\n    return (\n      <Paper sx={TweetContentStyles.tweetCard(false, isListView)} role=\"article\">\n        <Typography sx={TweetContentStyles.tweetTitle}>Invalid Tweet</Typography>\n        <Box sx={{ p: 2, textAlign: 'center' }}>\n          <Typography variant=\"body2\" color=\"error\" sx={{ fontWeight: 500 }}>\n            This tweet is missing required data.\n          </Typography>\n        </Box>\n      </Paper>\n    );\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.3, ease: 'easeOut' }}\n    >\n      <Paper\n        id={`tweet-${tweet.tweet_id}`}\n        className=\"tweet-card\"\n        elevation={4}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n        sx={{\n          ...TweetContentStyles.tweetCard(tweet.is_pinned, isListView),\n          ...TweetContentStyles.tweetHighlight(hovered || isRelated || isParentHighlighted),\n          pointerEvents: openOptionsDialog || openMediaDialog || openLinkModal ? 'none' : 'auto',\n        }}\n        role=\"article\"\n        aria-labelledby={`tweet-title-${tweet.tweet_id}`}\n      >\n        <Typography sx={TweetContentStyles.tweetTitle} id={`tweet-title-${tweet.tweet_id}`}>\n          Tweet by {tweetAuthor}\n        </Typography>\n        {tweet.is_pinned && (\n          <Box sx={TweetContentStyles.pinnedIconContainer}>\n            <motion.div whileHover={{ scale: 1.15 }} whileTap={{ scale: 0.95 }}>\n              <PushPinIcon sx={TweetContentStyles.pinnedIcon} />\n            </motion.div>\n          </Box>\n        )}\n        {parentExcerpt && (\n          <motion.div\n            initial={{ opacity: 0, x: -10 }}\n            animate={{ opacity: 1, x: 0 }}\n            transition={{ duration: 0.2 }}\n          >\n            <Box component=\"blockquote\" sx={{ borderLeft: '4px solid', borderColor: 'primary.main', pl: 2, m: 0, mb: 1 }}>\n              <Typography variant=\"caption\" sx={TweetContentStyles.replyToCaption}>\n                Replying to:\n              </Typography>\n              <Typography variant=\"body2\" sx={{ color: 'primary.main', fontStyle: 'italic',  fontSize: { xs: '0.7rem', sm: '0.8rem' }, m: 0 }}>\n                {parentExcerpt}\n              </Typography>\n            </Box>\n          </motion.div>\n        )}\n        {renderContent}\n        <Box sx={{ ...TweetContentStyles.statusContainer, justifyContent: 'space-between', alignItems: 'center' }}>\n          <motion.div whileHover={{ scale: 1.05 }}>\n            <Chip\n              label={chipLabel}\n              color={chipColor}\n              size=\"small\"\n              aria-label={`Tweet status: ${chipLabel}`}\n            />\n          </motion.div>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            {timestamp && (\n              <Typography\n                variant=\"caption\"\n                component=\"time\"\n                dateTime={tweet.created_at}\n                sx={TweetContentStyles.tweetAuthorTypography}\n                aria-label={`Posted on ${fullDate}`}\n              >\n                {timestamp}\n              </Typography>\n            )}\n            <Typography variant=\"caption\" sx={TweetContentStyles.tweetAuthorTypography}>\n              Author: {tweetAuthor}\n            </Typography>\n          </Box>\n        </Box>\n        <Box sx={{ ...TweetContentStyles.actionsContainer, justifyContent: 'space-between' }}>\n          <Box sx={TweetContentStyles.actionButtons}>\n            <motion.div whileHover={{ scale: 1.15 }} whileTap={{ scale: 0.95 }}>\n              <IconButton\n                size=\"medium\"\n                onClick={() => onLike(tweet.tweet_id, isLiked)}\n                aria-label={isLiked ? 'Unlike tweet' : 'Like tweet'}\n                sx={TweetContentStyles.likeButton}\n                disabled={openOptionsDialog || openMediaDialog || openLinkModal}\n              >\n                <ThumbUpIcon sx={TweetContentStyles.likeIcon(isLiked)} />\n              </IconButton>\n            </motion.div>\n            <Typography\n              variant=\"caption\"\n              sx={TweetContentStyles.likeCount(isLiked, animate)}\n            >\n              {tweet.stats?.like_count || 0}\n            </Typography>\n            <motion.div whileHover={{ scale: 1.15 }} whileTap={{ scale: 0.95 }}>\n              <IconButton\n                size=\"medium\"\n                onClick={() => onReply(tweet)}\n                aria-label=\"Reply to tweet\"\n                sx={TweetContentStyles.replyButton}\n                disabled={openOptionsDialog || openMediaDialog || openLinkModal}\n              >\n                <ChatBubbleOutlineIcon sx={TweetContentStyles.replyIcon} />\n              </IconButton>\n            </motion.div>\n            {hasReplies && (\n              <Typography\n                variant=\"caption\"\n                sx={TweetContentStyles.replyCount}\n              >\n                {replyLabel}\n              </Typography>\n            )}\n          </Box>\n          {canEdit && (\n            <motion.div whileHover={{ scale: 1.15 }} whileTap={{ scale: 0.95 }}>\n              <IconButton\n                size=\"medium\"\n                onClick={handleOpenOptionsDialog}\n                className=\"tweet-menu\"\n                aria-label=\"Tweet options\"\n                sx={TweetContentStyles.menuButton}\n                disabled={openOptionsDialog || openMediaDialog || openLinkModal}\n              >\n                <MoreVertIcon sx={TweetContentStyles.menuIcon} />\n              </IconButton>\n            </motion.div>\n          )}\n        </Box>\n      </Paper>\n\n      <Dialog\n        open={openMediaDialog}\n        onClose={handleCloseMediaDialog}\n        maxWidth=\"md\"\n        fullWidth\n        fullScreen={window.innerWidth < 600}\n        TransitionComponent={Fade}\n        transitionDuration={500}\n        aria-labelledby=\"media-dialog-title\"\n        aria-describedby=\"media-dialog-description\"\n        PaperProps={{\n          sx: {\n            ...ModalStyles.mediaDialogContainer,\n            zIndex: 110,\n          },\n          onClick: (e) => e.stopPropagation(),\n          onMouseDown: (e) => e.stopPropagation(),\n          onTouchStart: (e) => e.stopPropagation(),\n        }}\n      >\n        <DialogTitle id=\"media-dialog-title\" sx={ModalStyles.mediaDialogTitle}>\n          All Media\n        </DialogTitle>\n        <DialogContent sx={ModalStyles.mediaDialogContent} dividers>\n          <Typography id=\"media-dialog-description\" sx={{ display: 'none' }}>\n            View all media files attached to the tweet.\n          </Typography>\n          {mediaDialogContent}\n        </DialogContent>\n        <DialogActions sx={ModalStyles.dialogActions}>\n          <IconButton\n            onClick={handleCloseMediaDialog}\n            sx={ModalStyles.dialogCloseButton}\n            aria-label=\"Close media dialog\"\n          >\n            <CloseIcon />\n          </IconButton>\n        </DialogActions>\n      </Dialog>\n\n      <Dialog\n        open={openOptionsDialog}\n        onClose={handleCloseOptionsDialog}\n        maxWidth=\"xs\"\n        fullWidth\n        TransitionComponent={Fade}\n        transitionDuration={500}\n        aria-labelledby=\"options-dialog-title\"\n        aria-describedby=\"options-dialog-description\"\n        PaperProps={{\n          sx: {\n            ...ModalStyles.optionsDialogContainer,\n            zIndex: 110,\n          },\n          onClick: (e) => e.stopPropagation(),\n          onMouseDown: (e) => e.stopPropagation(),\n          onTouchStart: (e) => e.stopPropagation(),\n        }}\n      >\n        <DialogTitle id=\"options-dialog-title\" sx={ModalStyles.optionsDialogTitle}>\n          Tweet Options\n        </DialogTitle>\n        <DialogContent sx={ModalStyles.optionsDialogContent} dividers>\n          <Typography id=\"options-dialog-description\" sx={{ display: 'none' }}>\n            Select an option to edit, pin, or delete the tweet.\n          </Typography>\n          {optionsDialogContent}\n        </DialogContent>\n        <DialogActions sx={ModalStyles.dialogActions}>\n          <IconButton\n            onClick={handleCloseOptionsDialog}\n            sx={ModalStyles.dialogCloseButton}\n            aria-label=\"Close options dialog\"\n          >\n            <CloseIcon />\n          </IconButton>\n        </DialogActions>\n      </Dialog>\n\n      {linkModalContent}\n    </motion.div>\n  );\n};\n\nconst arePropsEqual = (prevProps, nextProps) => {\n  return (\n    prevProps.tweet.tweet_id === nextProps.tweet.tweet_id &&\n    prevProps.tweet.content?.value === nextProps.tweet.content?.value &&\n    prevProps.tweet.stats?.like_count === nextProps.tweet.stats?.like_count &&\n    prevProps.tweet.is_pinned === nextProps.tweet.is_pinned &&\n    prevProps.tweet.status === nextProps.tweet.status &&\n    prevProps.tweet.liked_by?.length === nextProps.tweet.liked_by?.length &&\n    prevProps.tweet.content?.metadata?.files?.length === nextProps.tweet.content?.metadata?.files?.length &&\n    prevProps.tweet.created_at === nextProps.tweet.created_at &&\n    prevProps.currentUser.anonymous_id === nextProps.currentUser.anonymous_id &&\n    prevProps.currentUser.username === nextProps.currentUser.username &&\n    prevProps.userRole === nextProps.userRole &&\n    prevProps.isParentHighlighted === nextProps.isParentHighlighted &&\n    prevProps.replyCount === nextProps.replyCount &&\n    prevProps.parentTweetText === nextProps.parentTweetText &&\n    prevProps.bypassOwnership === nextProps.bypassOwnership &&\n    prevProps.relatedTweetIds.length === nextProps.relatedTweetIds.length &&\n    prevProps.relatedTweetIds.every((id, i) => id === nextProps.relatedTweetIds[i]) &&\n    prevProps.availableBoards.length === nextProps.availableBoards.length &&\n    prevProps.boardId === nextProps.boardId &&\n    prevProps.isListView === nextProps.isListView &&\n    prevProps.error === nextProps.error\n  );\n};\n\nTweetContent.propTypes = {\n  tweet: PropTypes.shape({\n    tweet_id: PropTypes.string.isRequired,\n    content: PropTypes.shape({\n      type: PropTypes.string,\n      value: PropTypes.string,\n      metadata: PropTypes.shape({\n        files: PropTypes.arrayOf(\n          PropTypes.shape({\n            fileKey: PropTypes.string,\n            url: PropTypes.string,\n            contentType: PropTypes.string,\n            duration: PropTypes.number,\n          })\n        ),\n        hashtags: PropTypes.arrayOf(PropTypes.string),\n        mentions: PropTypes.arrayOf(PropTypes.string),\n      }),\n    }).isRequired,\n    position: PropTypes.shape({ x: PropTypes.number, y: PropTypes.number }),\n    parent_tweet_id: PropTypes.string,\n    child_tweet_ids: PropTypes.arrayOf(PropTypes.string),\n    is_anonymous: PropTypes.bool,\n    anonymous_id: PropTypes.string,\n    user_id: PropTypes.string,\n    username: PropTypes.string,\n    user: PropTypes.shape({ username: PropTypes.string }),\n    created_at: PropTypes.string,\n    liked_by: PropTypes.arrayOf(\n      PropTypes.shape({\n        anonymous_id: PropTypes.string,\n        username: PropTypes.string,\n      })\n    ),\n    stats: PropTypes.shape({\n      like_count: PropTypes.number,\n      view_count: PropTypes.number,\n    }),\n    status: PropTypes.string,\n    scheduled_at: PropTypes.string,\n    reminder: PropTypes.shape({\n      schedule: PropTypes.string,\n      enabled: PropTypes.bool,\n    }),\n    is_pinned: PropTypes.bool,\n    board_id: PropTypes.string,\n  }).isRequired,\n  currentUser: PropTypes.shape({\n    anonymous_id: PropTypes.string,\n    username: PropTypes.string,\n  }).isRequired,\n  userRole: PropTypes.string.isRequired,\n  onLike: PropTypes.func.isRequired,\n  onDelete: PropTypes.func.isRequired,\n  onReply: PropTypes.func.isRequired,\n  onReplyHover: PropTypes.func,\n  onEdit: PropTypes.func.isRequired,\n  onPinToggle: PropTypes.func.isRequired,\n  isParentHighlighted: PropTypes.bool,\n  replyCount: PropTypes.number,\n  parentTweetText: PropTypes.string,\n  bypassOwnership: PropTypes.bool,\n  relatedTweetIds: PropTypes.arrayOf(PropTypes.string),\n  availableBoards: PropTypes.arrayOf(\n    PropTypes.shape({\n      board_id: PropTypes.string.isRequired,\n      name: PropTypes.string.isRequired,\n    })\n  ),\n  boardId: PropTypes.string,\n  isListView: PropTypes.bool,\n  error: PropTypes.string,\n  getParentTweetText: PropTypes.func,\n  onModalStateChange: PropTypes.func,\n};\n\nTweetContent.defaultProps = {\n  isParentHighlighted: false,\n  replyCount: 0,\n  parentTweetText: null,\n  bypassOwnership: false,\n  relatedTweetIds: [],\n  availableBoards: [],\n  boardId: '',\n  isListView: false,\n  error: null,\n  getParentTweetText: null,\n  onModalStateChange: null,\n};\n\nexport default memo(TweetContent, arePropsEqual);","import { alpha } from '@mui/material';\n\n// Constants for reuse\nconst MAX_TWEET_LENGTH = 1000;\nconst POPUP_WIDTH = 360;\nconst POPUP_HEIGHT = 440;\nconst BASE_Z_INDEX = 10;\nconst POPUP_Z_INDEX = 100;\nconst MODAL_SHADOW = '0 8px 28px rgba(0,0,0,0.22)';\nconst MEDIA_PREVIEW_SIZE = 250;\n\n// Reusable style objects\nconst baseModalStyles = {\n  bgcolor: 'background.paper',\n  boxShadow: MODAL_SHADOW,\n  borderRadius: 3,\n  outline: 'none',\n  animation: 'fadeIn 0.3s ease-in-out',\n  '@keyframes fadeIn': {\n    from: { opacity: 0, transform: 'translate(-50%, -48%) scale(0.98)' },\n    to: { opacity: 1, transform: 'translate(-50%, -50%) scale(1)' },\n  },\n};\n\nconst baseButtonStyles = {\n  borderRadius: '24px',\n  textTransform: 'none',\n  transition: 'all 0.2s ease',\n  '&:hover': { transform: 'scale(1.02)' },\n  '&:active': { transform: 'scale(0.98)' },\n};\n\nconst baseHoverEffect = {\n  '&:hover': {\n    transform: 'translateY(-2px)',\n    boxShadow: '0 8px 24px rgba(0,0,0,0.18)',\n  },\n  '&:focus': {\n    outline: (theme) => `2px solid ${alpha(theme.palette.primary.main, 0.4)}`,\n    outlineOffset: 2,\n  },\n};\n\n// Reusable utility functions for dynamic styles\nconst dynamicCharCountColor = (isError) => ({\n  color: isError ? 'error.main' : 'text.secondary',\n});\n\nconst dynamicMediaButtonColor = (isActive) => ({\n  color: isActive ? 'primary.main' : 'text.secondary',\n  bgcolor: isActive\n    ? (theme) => alpha(theme.palette.primary.main, 0.1)\n    : 'transparent',\n  '&:hover': {\n    bgcolor: (theme) => alpha(theme.palette.primary.main, 0.2),\n    transform: 'scale(1.1)',\n  },\n  '&:active': {\n    transform: 'scale(0.95)',\n  },\n});\n\nconst TweetPopupStyles = {\n  popupModal: {\n    '& .MuiDialog-paper': {\n      ...baseModalStyles,\n      position: 'absolute',\n      minWidth: '300px',\n      maxWidth: '95vw',\n      bgcolor: (theme) => alpha(theme.palette.background.paper, 0.98),\n      backdropFilter: 'blur(12px)',\n      p: 2,\n      zIndex: POPUP_Z_INDEX,\n      ...baseHoverEffect,\n    },\n    '&.MuiBackdropRoot': {\n      backgroundColor: (theme) => alpha(theme.palette.grey[900], 0.5),\n    },\n  },\n  popupTitle: {\n    display: 'none',\n  },\n  popupTextField: {\n    '& .MuiInputBase-root': {\n      borderRadius: '16px',\n      padding: '10px 14px',\n      bgcolor: (theme) => theme.palette.grey[50],\n      transition: 'all 0.2s ease',\n      minHeight: '48px',\n    },\n    '& .MuiOutlinedInput-notchedOutline': {\n      borderColor: (theme) => theme.palette.grey[200],\n    },\n    '&:hover .MuiOutlinedInputNotchedOutline': {\n      borderColor: 'primary.main',\n      boxShadow: (theme) => `0 0 0 2px ${alpha(theme.palette.primary.main, 0.1)}`,\n    },\n    '&.Mui-focused .MuiOutlinedInputNotchedOutline': {\n      borderColor: 'primary.main',\n      boxShadow: (theme) => `0 0 0 3px ${alpha(theme.palette.primary.main, 0.15)}`,\n    },\n  },\n  popupCharCount: (isError) => ({\n    alignSelf: 'flex-end',\n    fontSize: { xs: '0.75rem', sm: '0.8rem' },\n    ...dynamicCharCountColor(isError),\n  }),\n  popupFilePreviewContainer: {\n    mt: 1,\n    bgcolor: 'transparent',\n    borderRadius: 8,\n    p: 0.5,\n    transition: 'all 0.2s ease',\n  },\n  popupPreviewMedia: {\n    width: '100%',\n    height: MEDIA_PREVIEW_SIZE,\n    objectFit: 'cover',\n    borderRadius: 4,\n    border: '1px solid',\n    borderColor: (theme) => theme.palette.grey[200],\n    transition: 'transform 0.2s ease',\n    '&:hover': { transform: 'scale(1.01)' },\n  },\n  popupCirclePreviewMedia: {\n    width: MEDIA_PREVIEW_SIZE,\n    height: MEDIA_PREVIEW_SIZE,\n    objectFit: 'cover',\n    borderRadius: '50%',\n    border: '1px solid',\n    borderColor: (theme) => theme.palette.grey[200],\n    backgroundColor: 'black',\n    transition: 'transform 0.2s ease',\n    '&:hover': { transform: 'scale(1.01)' },\n  },\n  popupPreviewPlaceholder: {\n    width: '100%',\n    height: MEDIA_PREVIEW_SIZE,\n    bgcolor: (theme) => theme.palette.grey[100],\n    borderRadius: 4,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    fontSize: '0.8rem',\n    color: 'text.secondary',\n  },\n  popupDeleteFileButton: {\n    position: 'absolute',\n    top: 8,\n    right: 8,\n    bgcolor: (theme) => alpha(theme.palette.error.main, 0.8),\n    color: 'white',\n    p: 0.5,\n    transition: 'all 0.2s ease',\n    '&:hover': { bgcolor: (theme) => theme.palette.error.dark },\n  },\n  popupActionButton: {\n    ...baseButtonStyles,\n    px: 3,\n    py: 1,\n    fontWeight: 600,\n    borderRadius: '16px',\n    '&:hover': { bgcolor: 'primary.dark' },\n  },\n  popupCancelButton: {\n    ...baseButtonStyles,\n    px: 3,\n    py: 1,\n    bgcolor: (theme) => theme.palette.grey[200],\n    color: 'text.primary',\n    borderRadius: '16px',\n    '&:hover': { bgcolor: (theme) => theme.palette.grey[300] },\n  },\n  popupInputBar: {\n    display: 'flex',\n    alignItems: 'center',\n    bgcolor: (theme) => theme.palette.grey[50],\n    borderRadius: '16px',\n    p: 0.75,\n    mt: 1,\n    position: 'sticky',\n    bottom: 0,\n    zIndex: BASE_Z_INDEX + 1,\n    boxShadow: '0 1px 4px rgba(0,0,0,0.1)',\n    transition: 'all 0.2s ease',\n    '&:hover': { boxShadow: '0 2px 8px rgba(0,0,0,0.15)' },\n  },\n  popupMediaButton: (isActive) => ({\n    p: 1,\n    borderRadius: '50%',\n    ...dynamicMediaButtonColor(isActive),\n  }),\n  popupRecordingContainer: {\n    mt: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    gap: 1,\n  },\n  popupRecordingChip: {\n    bgcolor: (theme) => theme.palette.error.main,\n    color: 'white',\n    fontWeight: 500,\n    borderRadius: '12px',\n    px: 2,\n    py: 0.5,\n    animation: 'pulse 2s infinite',\n    '@keyframes pulse': {\n      '0%': { transform: 'scale(0.95)' },\n      '50%': { transform: 'scale(1.05)' },\n      '100%': { transform: 'scale(0.95)' },\n    },\n  },\n  popupRecordingControls: {\n    display: 'flex',\n    gap: 1,\n    mt: 0.5,\n    justifyContent: 'center',\n  },\n  popupVideoPreviewContainer: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    border: '50%',\n    mt: 1.5,\n    animation: 'fadeIn 0.3s ease-in',\n    '@keyframes fadeIn': {\n      from: { opacity: 0, transform: 'scale(0.9)' },\n      to: { opacity: 1, transform: 'scale(1)' },\n    },\n  },\n  popupLivePreview: {\n    width: MEDIA_PREVIEW_SIZE,\n    height: MEDIA_PREVIEW_SIZE,\n    borderRadius: '50%',\n    border: '2px solid',\n    borderColor: (theme) => theme.palette.grey[300],\n    bgcolor: 'black',\n    objectFit: 'cover',\n    boxShadow: '0 4px 12px rgba(0,0,0,0.2)',\n    transition: 'all 0.3s ease',\n  },\n  popupAudioVisualizer: (isLive = false) => ({\n    position: 'absolute',\n    width: '30%',\n    height: '30%',\n    display: 'flex',\n    alignItems: 'center',\n    gap: '2px',\n    opacity: isLive ? 1 : 0,\n    transition: 'opacity 0.2s ease',\n    pointerEvents: 'none',\n  }),\n  popupVisualizerBar: (index) => ({\n    width: '40px',\n    height: '30%',\n    bgcolor: 'primary.main',\n    borderRadius: '1px',\n    animation: `pulse${index} ${0.5 + (index % 5) * 0.15}s ease-in-out infinite alternate`,\n    animationDelay: `${index * 0.03}s`,\n    [`@keyframes pulse${index}`]: {\n      '0%': { transform: `scaleY(${0.2 + (index % 4) * 0.1})` },\n      '100%': { transform: `scaleY(${0.8 + (index % 4) * 0.1})` },\n    },\n  }),\n  popupAudioPlayer: {\n    width: '100%',\n    height: '40px',\n    bgcolor: (theme) => theme.palette.grey[50],\n    borderRadius: '16px',\n    p: 0.75,\n    position: 'relative',\n    overflow: 'hidden',\n    transition: 'all 0.2s ease',\n    boxShadow: '0 1px 4px rgba(0,0,0,0.1)',\n    '&:hover': {\n      boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n    },\n    '& audio': {\n      width: '100%',\n      height: '100%',\n      '&::-webkit-media-controls-panel': {\n        backgroundColor: 'transparent',\n      },\n      '&:hover + .audioVisualizer, &.playing + .audioVisualizer': {\n        opacity: 1,\n      },\n    },\n  },\n  popupProgressContainer: {\n    mt: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    gap: 0.5,\n  },\n  popupDialogPaper: {\n    position: 'absolute',\n    m: 1,\n    padding: '5px',\n    width: { xs: '95vw', sm: '600px' },\n    maxWidth: { sm: '90vw' },\n    maxHeight: '90vh',\n    overflowY: 'auto',\n    backgroundColor: (theme) => alpha(theme.palette.background.paper, 0.98),\n    backdropFilter: 'blur(12px)',\n    borderRadius: 3,\n    boxShadow: '0 4px 12px rgba(0,0,0,0.2)',\n    zIndex: POPUP_Z_INDEX,\n  },\n  popupDialogBackdrop: {\n    backgroundColor: (theme) => alpha(theme.palette.grey[900], 0.5),\n  },\n  popupContentBox: {\n    display: 'flex',\n    flexDirection: 'column',\n    gap: 1.5,\n    p: { xs: 2, sm: 2.5 },\n  },\n  popupErrorAlert: {\n    borderRadius: 3,\n  },\n  popupParentTweetCaption: {\n    color: 'text.secondary',\n    fontStyle: 'italic',\n    fontSize: { xs: '0.8rem', sm: '0.85rem' },\n  },\n  popupScheduleButton: {\n    alignSelf: 'flex-start',\n    textTransform: 'none',\n    color: 'primary.main',\n    fontSize: { xs: '0.8rem', sm: '0.85rem' },\n  },\n  popupButtonContainer: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    mt: 1.5,\n    gap: 1,\n  },\n};\n\nexport default TweetPopupStyles;","// src/utils/validations.js\nimport Joi from 'joi';\n\nexport const SUPPORTED_MIME_TYPES = [\n  'image/jpeg', 'image/png', 'image/gif', 'video/mp4', 'video/webm',\n  'audio/mpeg', 'audio/wav', 'application/pdf', 'image/svg+xml', 'audio/webm'\n];\nexport const MAX_FILE_SIZE = 50 * 1024 * 1024; // 50MB\nexport const MAX_FILES = 10;\n\n// Common error messages for message schemas\nconst messageErrorMessages = {\n  string: '{{#label}} must be a string',\n  required: '{{#label}} is required',\n  uuid: '{{#label}} must be a valid UUID v4',\n  max: '{{#label}} cannot exceed {{#limit}} characters',\n  pattern: '{{#label}} has an invalid format',\n  array: '{{#label}} must be an array',\n  min: '{{#label}} must have at least {{#limit}} items',\n  enum: '{{#label}} must be one of {{#enum}}',\n  uri: '{{#label}} must be a valid HTTP/HTTPS URL',\n  number: '{{#label}} must be a number',\n  integer: '{{#label}} must be an integer',\n  boolean: '{{#label}} must be a boolean',\n  date: '{{#label}} must be a valid ISO date',\n};\n\n// UUID schema for validating IDs\nexport const uuidSchema = Joi.string().uuid({ version: ['uuidv4'] }).required().messages({\n  'string.uuid': messageErrorMessages.uuid.replace('{{#label}}', 'ID'),\n  'any.required': messageErrorMessages.required.replace('{{#label}}', 'ID'),\n});\n\n// Schema for querying data (e.g., tweets)\nexport const querySchema = Joi.object({\n  status: Joi.string()\n    .valid('pending', 'approved', 'rejected', 'announcement', 'reminder', 'pinned', 'archived')\n    .optional(),\n  page: Joi.number().integer().min(1).default(1),\n  limit: Joi.number().integer().min(1).max(100).default(20),\n  sort: Joi.string()\n    .valid('created_at:asc', 'created_at:desc', 'like_count:desc', 'comment_count:desc')\n    .default('created_at:desc'),\n  pinned_only: Joi.boolean().default(false),\n  hashtag: Joi.string().pattern(/^#[a-zA-Z0-9_]{1,50}$/).optional(),\n  mention: Joi.string().pattern(/^@[a-zA-Z0-9_]{1,50}$/).optional(),\n}).label('QuerySchema');\n\n// Schema for querying comments\nexport const commentQuerySchema = Joi.object({\n  page: Joi.number().integer().min(1).default(1),\n  limit: Joi.number().integer().min(1).max(100).default(20),\n  sort: Joi.string()\n    .valid('created_at:asc', 'created_at:desc', 'like_count:desc')\n    .default('created_at:desc'),\n}).label('CommentQuerySchema');\n\n// Schema for content (e.g., tweet content)\nexport const contentSchema = Joi.object({\n  type: Joi.string()\n    .valid(\n      'text', 'image', 'video', 'audio', 'file', 'drawing', 'poll',\n      'event', 'link', 'quote', 'embed', 'voice', 'video_message'\n    )\n    .default('text')\n    .messages({\n      'any.only': 'Invalid content type',\n    }),\n  value: Joi.string()\n    .max(1000)\n    .when('type', {\n      is: 'text',\n      then: Joi.string().trim().min(1).required().messages({\n        'string.min': 'Text content must be at least 1 character',\n        'any.required': 'Text content is required for type \"text\"',\n      }),\n      otherwise: Joi.string().allow('').optional(),\n    }),\n  metadata: Joi.object({\n    files: Joi.array().items().max(10).default([]).optional(),\n    hashtags: Joi.array().items(Joi.string().pattern(/^#[a-zA-Z0-9_]{1,50}$/)).max(10).default([]).optional(),\n    mentions: Joi.array().items(Joi.string().pattern(/^@[a-zA-Z0-9_]{1,50}$/)).max(10).default([]).optional(),\n  }).default({}),\n}).label('Content');\n\n// Schema for position coordinates\nexport const positionSchema = Joi.object({\n  x: Joi.number().min(0).required().messages({\n    'number.min': 'X coordinate must be non-negative',\n    'any.required': 'X coordinate is required',\n  }),\n  y: Joi.number().min(0).required().messages({\n    'number.min': 'Y coordinate must be non-negative',\n    'any.required': 'Y coordinate is required',\n  }),\n}).label('Position');\n\n// Schema for reminders\nexport const reminderSchema = Joi.object({\n  schedule: Joi.date().iso().min('now').required().messages({\n    'date.min': 'Reminder schedule must be in the future',\n    'any.required': 'Reminder schedule is required',\n  }),\n  recurrence: Joi.string().valid('none', 'daily', 'weekly', 'monthly').default('none').messages({\n    'any.only': 'Recurrence must be one of: none, daily, weekly, monthly',\n  }),\n  enabled: Joi.boolean().default(true),\n}).label('Reminder');\n\n// Enhanced conversation validation schemas\nconst conversationErrorMessages = {\n  string: '{{#label}} must be a string',\n  required: '{{#label}} is required',\n  uuid: '{{#label}} must be a valid UUID v4',\n  max: '{{#label}} cannot exceed {{#limit}} characters',\n  pattern: '{{#label}} has an invalid format',\n  array: '{{#label}} must be an array',\n  min: '{{#label}} must have at least {{#limit}} items',\n  enum: '{{#label}} must be one of {{#enum}}',\n  uri: '{{#label}} must be a valid HTTP/HTTPS URL',\n  hexColor: '{{#label}} must be a valid hexadecimal color code (e.g., #FFFFFF)',\n  number: '{{#label}} must be a number',\n  integer: '{{#label}} must be an integer',\n  boolean: '{{#label}} must be a boolean',\n  date: '{{#label}} must be a valid ISO date',\n};\n\n// UUID pattern for conversation IDs\nconst uuidPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\n\n// Schema for conversation ID parameter\nexport const conversationIdParamSchema = Joi.object({\n  conversationId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Conversation ID'),\n      'string.pattern.base': conversationErrorMessages.uuid.replace('{{#label}}', 'Conversation ID'),\n      'any.required': conversationErrorMessages.required.replace('{{#label}}', 'Conversation ID'),\n    }),\n}).label('ConversationIdParam');\n\n// Schema for querying conversations\nexport const getConversationsQuerySchema = Joi.object({\n  page: Joi.number()\n    .integer()\n    .min(1)\n    .default(1)\n    .messages({\n      'number.base': conversationErrorMessages.number.replace('{{#label}}', 'Page'),\n      'number.integer': conversationErrorMessages.integer.replace('{{#label}}', 'Page'),\n      'number.min': 'Page must be at least 1',\n    }),\n  limit: Joi.number()\n    .integer()\n    .min(1)\n    .max(100)\n    .default(20)\n    .messages({\n      'number.base': conversationErrorMessages.number.replace('{{#label}}', 'Limit'),\n      'number.integer': conversationErrorMessages.integer.replace('{{#label}}', 'Limit'),\n      'number.min': 'Limit must be at least 1',\n      'number.max': 'Limit cannot exceed 100',\n    }),\n  cursor: Joi.date()\n    .iso()\n    .optional()\n    .messages({\n      'date.base': conversationErrorMessages.date.replace('{{#label}}', 'Cursor'),\n    }),\n  type: Joi.string()\n    .valid('direct', 'group', 'channel')\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Type'),\n      'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Type').replace('{{#enum}}', 'direct, group, channel'),\n    }),\n  visibility: Joi.string()\n    .valid('public', 'private', 'hidden')\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Visibility'),\n      'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Visibility').replace('{{#enum}}', 'public, private, hidden'),\n    }),\n  archived: Joi.boolean()\n    .optional()\n    .messages({\n      'boolean.base': conversationErrorMessages.boolean.replace('{{#label}}', 'Archived'),\n    }),\n  pinned: Joi.boolean()\n    .optional()\n    .messages({\n      'boolean.base': conversationErrorMessages.boolean.replace('{{#label}}', 'Pinned'),\n    }),\n  muted: Joi.boolean()\n    .optional()\n    .messages({\n      'boolean.base': conversationErrorMessages.boolean.replace('{{#label}}', 'Muted'),\n    }),\n  sort: Joi.string()\n    .valid('updatedAt:desc', 'updatedAt:asc', 'name:asc', 'name:desc')\n    .default('updatedAt:desc')\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Sort'),\n      'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Sort').replace('{{#enum}}', 'updatedAt:desc, updatedAt:asc, name:asc, name:desc'),\n    }),\n}).label('GetConversationsQuery');\n\n// Schema for creating a conversation\nexport const createConversationSchema = Joi.object({\n  friendId: Joi.string()\n    .pattern(uuidPattern)\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Friend ID'),\n      'string.pattern.base': conversationErrorMessages.uuid.replace('{{#label}}', 'Friend ID'),\n    }),\n  type: Joi.string()\n    .valid('direct', 'group', 'channel')\n    .default('direct')\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Type'),\n      'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Type').replace('{{#enum}}', 'direct, group, channel'),\n    }),\n  name: Joi.string()\n    .trim()\n    .max(100)\n    .min(3)\n    .optional()\n    .when('type', {\n      is: 'group',\n      then: Joi.string().required().messages({\n        'any.required': conversationErrorMessages.required.replace('{{#label}}', 'Name'),\n      }),\n    })\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Name'),\n      'string.max': conversationErrorMessages.max.replace('{{#label}}', 'Name').replace('{{#limit}}', '100'),\n      'string.min': 'Name must be at least 3 characters',\n    }),\n  members: Joi.array()\n    .items(Joi.string().pattern(uuidPattern).messages({\n      'string.pattern.base': conversationErrorMessages.uuid.replace('{{#label}}', 'Each member ID'),\n    }))\n    .optional()\n    .when('type', {\n      is: 'group',\n      then: Joi.array().min(1).max(1000).required().messages({\n        'array.min': conversationErrorMessages.min.replace('{{#label}}', 'Members').replace('{{#limit}}', '1'),\n        'array.max': 'Members cannot exceed 1000 users',\n        'any.required': conversationErrorMessages.required.replace('{{#label}}', 'Members'),\n      }),\n    })\n    .when('type', {\n      is: 'channel',\n      then: Joi.array().min(1).max(10000).required().messages({\n        'array.min': conversationErrorMessages.min.replace('{{#label}}', 'Members').replace('{{#limit}}', '1'),\n        'array.max': 'Members cannot exceed 10000 users',\n        'any.required': conversationErrorMessages.required.replace('{{#label}}', 'Members'),\n      }),\n    })\n    .messages({\n      'array.base': conversationErrorMessages.array.replace('{{#label}}', 'Members'),\n    }),\n  visibility: Joi.string()\n    .valid('public', 'private', 'hidden')\n    .default('public')\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Visibility'),\n      'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Visibility').replace('{{#enum}}', 'public, private, hidden'),\n    }),\n  tags: Joi.array()\n    .items(Joi.string().trim().max(50).pattern(/^[a-zA-Z0-9_]+$/).messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Each tag'),\n      'string.max': conversationErrorMessages.max.replace('{{#label}}', 'Each tag').replace('{{#limit}}', '50'),\n      'string.pattern.base': 'Each tag can only contain letters, numbers, and underscores',\n    }))\n    .max(10)\n    .optional()\n    .messages({\n      'array.base': conversationErrorMessages.array.replace('{{#label}}', 'Tags'),\n      'array.max': 'Tags cannot exceed 10 items',\n    }),\n  initialMessage: Joi.object({\n    type: Joi.string()\n      .valid('text', 'image', 'video', 'audio', 'file')\n      .default('text')\n      .messages({\n        'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Initial message type').replace('{{#enum}}', 'text, image, video, audio, file'),\n      }),\n    content: Joi.string()\n      .max(2000)\n      .when('type', {\n        is: 'text',\n        then: Joi.string().trim().min(1).required().messages({\n          'string.min': 'Initial message content must be at least 1 character',\n          'any.required': 'Initial message content is required for type \"text\"',\n        }),\n        otherwise: Joi.string().uri().optional().messages({\n          'string.uri': conversationErrorMessages.uri.replace('{{#label}}', 'Initial message content'),\n        }),\n      })\n      .messages({\n        'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Initial message content'),\n        'string.max': conversationErrorMessages.max.replace('{{#label}}', 'Initial message content').replace('{{#limit}}', '2000'),\n      }),\n    files: Joi.array()\n      .items(\n        Joi.object({\n          url: Joi.string().uri().required().messages({\n            'string.uri': conversationErrorMessages.uri.replace('{{#label}}', 'File URL'),\n            'any.required': conversationErrorMessages.required.replace('{{#label}}', 'File URL'),\n          }),\n          fileKey: Joi.string().required().messages({\n            'string.base': conversationErrorMessages.string.replace('{{#label}}', 'File key'),\n            'any.required': conversationErrorMessages.required.replace('{{#label}}', 'File key'),\n          }),\n          contentType: Joi.string()\n            .valid(...SUPPORTED_MIME_TYPES)\n            .required()\n            .messages({\n              'any.only': 'File content type must be one of supported MIME types',\n              'any.required': conversationErrorMessages.required.replace('{{#label}}', 'File content type'),\n            }),\n          size: Joi.number().max(MAX_FILE_SIZE).required().messages({\n            'number.max': `File size cannot exceed ${MAX_FILE_SIZE / (1024 * 1024)}MB`,\n            'any.required': conversationErrorMessages.required.replace('{{#label}}', 'File size'),\n          }),\n        })\n      )\n      .max(MAX_FILES)\n      .optional()\n      .messages({\n        'array.max': `Files cannot exceed ${MAX_FILES} items`,\n      }),\n  }).optional(),\n})\n  .or('friendId', 'members')\n  .messages({\n    'object.missing': 'Either friendId (for direct) or members (for group/channel) is required',\n  })\n  .label('CreateConversation');\n\n// Schema for updating a conversation\nexport const updateConversationSchema = Joi.object({\n  name: Joi.string()\n    .trim()\n    .max(100)\n    .min(3)\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Name'),\n      'string.max': conversationErrorMessages.max.replace('{{#label}}', 'Name').replace('{{#limit}}', '100'),\n      'string.min': 'Name must be at least 3 characters',\n    }),\n  description: Joi.string()\n    .trim()\n    .max(500)\n    .allow('')\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Description'),\n      'string.max': conversationErrorMessages.max.replace('{{#label}}', 'Description').replace('{{#limit}}', '500'),\n    }),\n  visibility: Joi.string()\n    .valid('public', 'private', 'hidden')\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Visibility'),\n      'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Visibility').replace('{{#enum}}', 'public, private, hidden'),\n    }),\n  permissions: Joi.object({\n    sendMessages: Joi.string()\n      .valid('all', 'admins', 'moderators')\n      .optional()\n      .messages({\n        'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Send messages permission'),\n        'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Send messages permission').replace('{{#enum}}', 'all, admins, moderators'),\n      }),\n    addMembers: Joi.string()\n      .valid('all', 'admins', 'moderators')\n      .optional()\n      .messages({\n        'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Add members permission'),\n        'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Add members permission').replace('{{#enum}}', 'all, admins, moderators'),\n      }),\n    pinMessages: Joi.string()\n      .valid('all', 'admins', 'moderators')\n      .optional()\n      .messages({\n        'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Pin messages permission'),\n        'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Pin messages permission').replace('{{#enum}}', 'all, admins, moderators'),\n      }),\n  }).optional(),\n  tags: Joi.array()\n    .items(Joi.string().trim().max(50).pattern(/^[a-zA-Z0-9_]+$/).messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Each tag'),\n      'string.max': conversationErrorMessages.max.replace('{{#label}}', 'Each tag').replace('{{#limit}}', '50'),\n      'string.pattern.base': 'Each tag can only contain letters, numbers, and underscores',\n    }))\n    .max(10)\n    .optional()\n    .messages({\n      'array.base': conversationErrorMessages.array.replace('{{#label}}', 'Tags'),\n      'array.max': 'Tags cannot exceed 10 items',\n    }),\n  admins: Joi.array()\n    .items(Joi.string().pattern(uuidPattern).messages({\n      'string.pattern.base': conversationErrorMessages.uuid.replace('{{#label}}', 'Each admin ID'),\n    }))\n    .optional()\n    .messages({\n      'array.base': conversationErrorMessages.array.replace('{{#label}}', 'Admins'),\n    }),\n  moderators: Joi.array()\n    .items(Joi.string().pattern(uuidPattern).messages({\n      'string.pattern.base': conversationErrorMessages.uuid.replace('{{#label}}', 'Each moderator ID'),\n    }))\n    .optional()\n    .messages({\n      'array.base': conversationErrorMessages.array.replace('{{#label}}', 'Moderators'),\n    }),\n})\n  .min(1)\n  .messages({\n    'object.min': 'At least one field must be provided for update',\n  })\n  .label('UpdateConversation');\n\n// Schema for adding members\nexport const addMembersSchema = Joi.object({\n  members: Joi.array()\n    .items(Joi.string().pattern(uuidPattern).messages({\n      'string.pattern.base': conversationErrorMessages.uuid.replace('{{#label}}', 'Each member ID'),\n    }))\n    .min(1)\n    .max(1000)\n    .required()\n    .messages({\n      'array.base': conversationErrorMessages.array.replace('{{#label}}', 'Members'),\n      'array.min': conversationErrorMessages.min.replace('{{#label}}', 'Members').replace('{{#limit}}', '1'),\n      'array.max': 'Cannot add more than 1000 members at once',\n      'any.required': conversationErrorMessages.required.replace('{{#label}}', 'Members'),\n    }),\n}).label('AddMembers');\n\n// Schema for removing members\nexport const removeMembersSchema = Joi.object({\n  members: Joi.array()\n    .items(Joi.string().pattern(uuidPattern).messages({\n      'string.pattern.base': conversationErrorMessages.uuid.replace('{{#label}}', 'Each member ID'),\n    }))\n    .min(1)\n    .max(1000)\n    .required()\n    .messages({\n      'array.base': conversationErrorMessages.array.replace('{{#label}}', 'Members'),\n      'array.min': conversationErrorMessages.min.replace('{{#label}}', 'Members').replace('{{#limit}}', '1'),\n      'array.max': 'Cannot remove more than 1000 members at once',\n      'any.required': conversationErrorMessages.required.replace('{{#label}}', 'Members'),\n    }),\n}).label('RemoveMembers');\n\n// Schema for updating chat settings\nexport const updateChatSettingsSchema = Joi.object({\n  theme: Joi.string()\n    .valid('light', 'dark', 'custom')\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Theme'),\n      'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Theme').replace('{{#enum}}', 'light, dark, custom'),\n    }),\n  background: Joi.string()\n    .uri({ scheme: ['http', 'https'] })\n    .allow(null)\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Background'),\n      'string.uri': conversationErrorMessages.uri.replace('{{#label}}', 'Background'),\n    }),\n  font: Joi.string()\n    .pattern(/^[a-zA-Z\\s-]+$/)\n    .max(50)\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Font'),\n      'string.pattern.base': conversationErrorMessages.pattern.replace('{{#label}}', 'Font'),\n      'string.max': conversationErrorMessages.max.replace('{{#label}}', 'Font').replace('{{#limit}}', '50'),\n    }),\n  bubbleStyle: Joi.object({\n    senderColor: Joi.string()\n      .pattern(/^#[0-9A-Fa-f]{6}$/)\n      .optional()\n      .messages({\n        'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Sender color'),\n        'string.pattern.base': conversationErrorMessages.hexColor.replace('{{#label}}', 'Sender color'),\n      }),\n    receiverColor: Joi.string()\n      .pattern(/^#[0-9A-Fa-f]{6}$/)\n      .optional()\n      .messages({\n        'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Receiver color'),\n        'string.pattern.base': conversationErrorMessages.hexColor.replace('{{#label}}', 'Receiver color'),\n      }),\n    textColor: Joi.string()\n      .pattern(/^#[0-9A-Fa-f]{6}$/)\n      .optional()\n      .messages({\n        'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Text color'),\n        'string.pattern.base': conversationErrorMessages.hexColor.replace('{{#label}}', 'Text color'),\n      }),\n  }).optional(),\n  accessibility: Joi.object({\n    highContrast: Joi.boolean().optional().messages({\n      'boolean.base': conversationErrorMessages.boolean.replace('{{#label}}', 'High contrast'),\n    }),\n    largeText: Joi.boolean().optional().messages({\n      'boolean.base': conversationErrorMessages.boolean.replace('{{#label}}', 'Large text'),\n    }),\n    screenReader: Joi.boolean().optional().messages({\n      'boolean.base': conversationErrorMessages.boolean.replace('{{#label}}', 'Screen reader'),\n    }),\n  }).optional(),\n  notificationSound: Joi.string()\n    .valid('default', 'silent', 'custom1', 'custom2')\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Notification sound'),\n      'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Notification sound').replace('{{#enum}}', 'default, silent, custom1, custom2'),\n    }),\n})\n  .min(1)\n  .messages({\n    'object.min': 'At least one field must be provided for settings update',\n  })\n  .label('UpdateChatSettings');\n\n// Schema for joining via invite link\nexport const joinViaInviteSchema = Joi.object({\n  inviteLink: Joi.string()\n    .uri({ scheme: ['http', 'https'] })\n    .required()\n    .pattern(/\\/conversations\\/join\\/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Invite link'),\n      'string.uri': conversationErrorMessages.uri.replace('{{#label}}', 'Invite link'),\n      'string.pattern.base': 'Invite link must contain a valid conversation ID',\n      'any.required': conversationErrorMessages.required.replace('{{#label}}', 'Invite link'),\n    }),\n}).label('JoinViaInvite');\n\n// Schema for updating ephemeral settings\nexport const updateEphemeralSettingsSchema = Joi.object({\n  ephemeral: Joi.boolean()\n    .optional()\n    .messages({\n      'boolean.base': conversationErrorMessages.boolean.replace('{{#label}}', 'Ephemeral'),\n    }),\n  ephemeralTTL: Joi.number()\n    .integer()\n    .min(60)\n    .max(604800) // 7 days in seconds\n    .optional()\n    .when('ephemeral', {\n      is: true,\n      then: Joi.required().messages({\n        'any.required': conversationErrorMessages.required.replace('{{#label}}', 'Ephemeral TTL'),\n      }),\n    })\n    .messages({\n      'number.base': conversationErrorMessages.number.replace('{{#label}}', 'Ephemeral TTL'),\n      'number.integer': conversationErrorMessages.integer.replace('{{#label}}', 'Ephemeral TTL'),\n      'number.min': 'Ephemeral TTL must be at least 60 seconds',\n      'number.max': 'Ephemeral TTL cannot exceed 604800 seconds (7 days)',\n    }),\n})\n  .min(1)\n  .messages({\n    'object.min': 'At least one field must be provided for ephemeral settings update',\n  })\n  .label('UpdateEphemeralSettings');\n\n// Schema for muting a conversation\nexport const muteConversationSchema = Joi.object({\n  muteUntil: Joi.date()\n    .iso()\n    .min('now')\n    .optional()\n    .messages({\n      'date.base': conversationErrorMessages.date.replace('{{#label}}', 'Mute until'),\n      'date.min': 'Mute until must be in the future',\n    }),\n  pushEnabled: Joi.boolean()\n    .optional()\n    .messages({\n      'boolean.base': conversationErrorMessages.boolean.replace('{{#label}}', 'Push enabled'),\n    }),\n  notificationSound: Joi.string()\n    .valid('default', 'silent', 'custom1', 'custom2')\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Notification sound'),\n      'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Notification sound').replace('{{#enum}}', 'default, silent, custom1, custom2'),\n    }),\n})\n  .min(1)\n  .messages({\n    'object.min': 'At least one field must be provided for mute settings',\n  })\n  .label('MuteConversation');\n\n// Message-related schemas\nexport const sendMessageBodySchema = Joi.object({\n  conversationId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': 'Conversation ID must be a string (e.g)',\n      'string.pattern.base': 'Conversation ID must be a valid UUID format',\n      'any.required': 'Conversation ID is required to send a message',\n    }),\n  content: Joi.string()\n    .allow('')\n    .max(10000)\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Content'),\n      'string.max': messageErrorMessages.max.replace('{{#label}}', 'Content').replace('{{#limit}}', '10000'),\n    }),\n  media: Joi.array()\n    .items(\n      Joi.object({\n        type: Joi.string()\n          .valid('file', 'image', 'video', 'voice', 'sticker', 'gif')\n          .required()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Media type'),\n            'any.only': messageErrorMessages.enum.replace('{{#label}}', 'Media type').replace('{{#enum}}', 'file, image, video, voice, sticker, gif'),\n          }),\n        content: Joi.string()\n          .required()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Media content'),\n            'any.required': messageErrorMessages.required.replace('{{#label}}', 'Media content'),\n          }),\n        contentType: Joi.string()\n          .valid(...SUPPORTED_MIME_TYPES)\n          .required()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Content type'),\n            'any.only': 'Content type must be one of supported MIME types',\n            'any.required': messageErrorMessages.required.replace('{{#label}}', 'Content type'),\n          }),\n        thumbnail: Joi.string()\n          .uri({ scheme: ['http', 'https'] })\n          .optional()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Thumbnail'),\n            'string.uri': messageErrorMessages.uri.replace('{{#label}}', 'Thumbnail'),\n          }),\n        shape: Joi.string()\n          .valid('square', 'circle', 'rectangle')\n          .default('square')\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Shape'),\n            'any.only': messageErrorMessages.enum.replace('{{#label}}', 'Shape').replace('{{#enum}}', 'square, circle, rectangle'),\n          }),\n        metadata: Joi.object({\n          size: Joi.number().integer().min(0).max(MAX_FILE_SIZE).optional().messages({\n            'number.max': `File size cannot exceed ${MAX_FILE_SIZE / (1024 * 1024)}MB`,\n          }),\n          duration: Joi.number().min(0).optional(),\n          width: Joi.number().integer().min(0).optional(),\n          height: Joi.number().integer().min(0).optional(),\n        }).optional(),\n      })\n    )\n    .max(MAX_FILES)\n    .optional()\n    .messages({\n      'array.base': messageErrorMessages.array.replace('{{#label}}', 'Media'),\n      'array.max': `Media cannot exceed ${MAX_FILES} items`,\n    }),\n  replyTo: Joi.string()\n    .pattern(uuidPattern)\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'ReplyTo'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'ReplyTo'),\n    }),\n  scheduledAt: Joi.date()\n    .iso()\n    .min('now')\n    .optional()\n    .messages({\n      'date.base': 'ScheduledAt must be a valid ISO date',\n      'date.min': 'ScheduledAt must be a future date',\n    }),\n  forwardedFrom: Joi.string()\n    .pattern(uuidPattern)\n    .optional()\n    .allow(null)\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'ForwardedFrom'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'ForwardedFrom'),\n    }),\n  threadId: Joi.string()\n    .pattern(uuidPattern)\n    .optional()\n    .allow(null)\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Thread ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Thread ID'),\n    }),\n  hashtags: Joi.array()\n    .items(Joi.string().pattern(/^#[a-zA-Z0-9_]{1,50}$/).messages({\n      'string.pattern.base': 'Each hashtag must start with # and contain only letters, numbers, or underscores',\n    }))\n    .max(10)\n    .optional()\n    .messages({\n      'array.base': messageErrorMessages.array.replace('{{#label}}', 'Hashtags'),\n      'array.max': 'Hashtags cannot exceed 10 items',\n    }),\n  mentions: Joi.array()\n    .items(Joi.string().pattern(/^@[a-zA-Z0-9_]{1,50}$/).messages({\n      'string.pattern.base': 'Each mention must start with @ and contain only letters, numbers, or underscores',\n    }))\n    .max(10)\n    .optional()\n    .messages({\n      'array.base': messageErrorMessages.array.replace('{{#label}}', 'Mentions'),\n      'array.max': 'Mentions cannot exceed 10 items',\n    }),\n})\n  .or('content', 'media')\n  .messages({\n    'object.missing': 'Either message content or media is required',\n  })\n  .label('SendMessageBody');\n\nexport const getMessagesQuerySchema = Joi.object({\n  page: Joi.number()\n    .integer()\n    .min(1)\n    .default(1)\n    .messages({\n      'number.base': messageErrorMessages.number.replace('{{#label}}', 'Page'),\n      'number.min': 'Page must be at least 1',\n    }),\n  limit: Joi.number()\n    .integer()\n    .min(1)\n    .max(100)\n    .default(20)\n    .messages({\n      'number.base': messageErrorMessages.number.replace('{{#label}}', 'Limit'),\n      'number.min': 'Limit must be at least 1',\n      'number.max': 'Limit cannot exceed 100',\n    }),\n  cursor: Joi.date()\n    .iso()\n    .optional()\n    .messages({\n      'date.base': messageErrorMessages.date.replace('{{#label}}', 'Cursor'),\n    }),\n  threadId: Joi.string()\n    .pattern(uuidPattern)\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Thread ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Thread ID'),\n    }),\n  sort: Joi.string()\n    .valid('createdAt:asc', 'createdAt:desc')\n    .default('createdAt:desc')\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Sort'),\n      'any.only': messageErrorMessages.enum.replace('{{#label}}', 'Sort').replace('{{#enum}}', 'createdAt:asc, createdAt:desc'),\n    }),\n}).label('GetMessagesQuery');\n\nexport const messageIdParamSchema = Joi.object({\n  messageId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Message ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Message ID'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Message ID'),\n    }),\n}).label('MessageIdParam');\n\nexport const editMessageSchema = Joi.object({\n  messageId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Message ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Message ID'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Message ID'),\n    }),\n  newContent: Joi.string()\n    .max(10000)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'New content'),\n      'string.max': messageErrorMessages.max.replace('{{#label}}', 'New content').replace('{{#limit}}', '10000'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'New content'),\n    }),\n}).label('EditMessage');\n\nexport const searchMessagesSchema = Joi.object({\n  query: Joi.string()\n    .trim()\n    .min(1)\n    .max(500)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Query'),\n      'string.min': 'Query must be at least 1 character',\n      'string.max': messageErrorMessages.max.replace('{{#label}}', 'Query').replace('{{#limit}}', '500'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Query'),\n    }),\n  limit: Joi.number()\n    .integer()\n    .min(1)\n    .max(100)\n    .default(50)\n    .messages({\n      'number.base': messageErrorMessages.number.replace('{{#label}}', 'Limit'),\n      'number.min': 'Limit must be at least 1',\n      'number.max': 'Limit cannot exceed 100',\n    }),\n  fromUserId: Joi.string()\n    .pattern(uuidPattern)\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'From user ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'From user ID'),\n    }),\n  mediaType: Joi.string()\n    .valid('image', 'video', 'audio', 'file', 'sticker', 'gif')\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Media type'),\n      'any.only': messageErrorMessages.enum.replace('{{#label}}', 'Media type').replace('{{#enum}}', 'image, video, audio, file, sticker, gif'),\n    }),\n}).label('SearchMessages');\n\nexport const createPollSchema = Joi.object({\n  conversationId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Conversation ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Conversation ID'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Conversation ID'),\n    }),\n  question: Joi.string()\n    .trim()\n    .max(500)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Question'),\n      'string.max': messageErrorMessages.max.replace('{{#label}}', 'Question').replace('{{#limit}}', '500'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Question'),\n    }),\n  options: Joi.array()\n    .items(Joi.string().trim().max(100))\n    .min(2)\n    .max(10)\n    .required()\n    .messages({\n      'array.base': messageErrorMessages.array.replace('{{#label}}', 'Options'),\n      'array.min': messageErrorMessages.min.replace('{{#label}}', 'Options').replace('{{#limit}}', '2'),\n      'array.max': 'Options cannot exceed 10 items',\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Each option'),\n      'string.max': messageErrorMessages.max.replace('{{#label}}', 'Each option').replace('{{#limit}}', '100'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Options'),\n    }),\n  allowMultipleVotes: Joi.boolean()\n    .optional()\n    .messages({\n      'boolean.base': messageErrorMessages.boolean.replace('{{#label}}', 'Allow multiple votes'),\n    }),\n  pollExpiresAt: Joi.date()\n    .iso()\n    .min('now')\n    .optional()\n    .messages({\n      'date.base': messageErrorMessages.date.replace('{{#label}}', 'Poll expiration'),\n      'date.min': 'Poll expiration must be in the future',\n    }),\n}).label('CreatePoll');\n\nexport const votePollSchema = Joi.object({\n  optionIndex: Joi.number()\n    .integer()\n    .min(0)\n    .required()\n    .messages({\n      'number.base': messageErrorMessages.number.replace('{{#label}}', 'Option index'),\n      'number.min': 'Option index must be at least 0',\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Option index'),\n    }),\n}).label('VotePoll');\n\nexport const addReactionSchema = Joi.object({\n  reaction: Joi.string()\n    .trim()\n    .max(10)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Reaction'),\n      'string.max': messageErrorMessages.max.replace('{{#label}}', 'Reaction').replace('{{#limit}}', '10'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Reaction'),\n    }),\n}).label('AddReaction');\n\nexport const generatePresignedUrlSchema = Joi.object({\n  fileType: Joi.string()\n    .valid(...SUPPORTED_MIME_TYPES)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'File type'),\n      'any.only': 'File type must be one of supported MIME types',\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'File type'),\n    }),\n  contentType: Joi.string()\n    .valid('file', 'image', 'video', 'voice', 'sticker', 'gif')\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Content type'),\n      'any.only': messageErrorMessages.enum.replace('{{#label}}', 'Content type').replace('{{#enum}}', 'file, image, video, voice, sticker, gif'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Content type'),\n    }),\n  fileSize: Joi.number()\n    .integer()\n    .min(1)\n    .max(MAX_FILE_SIZE)\n    .optional()\n    .messages({\n      'number.base': messageErrorMessages.number.replace('{{#label}}', 'File size'),\n      'number.min': 'File size must be at least 1 byte',\n      'number.max': `File size cannot exceed ${MAX_FILE_SIZE / (1024 * 1024)}MB`,\n    }),\n}).label('GeneratePresignedUrl');\n\n// Schema for forwarding a message\nexport const forwardMessageSchema = Joi.object({\n  messageId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Message ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Message ID'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Message ID'),\n    }),\n  targetConversationIds: Joi.array()\n    .items(Joi.string().pattern(uuidPattern).messages({\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Each target conversation ID'),\n    }))\n    .min(1)\n    .max(50)\n    .required()\n    .messages({\n      'array.base': messageErrorMessages.array.replace('{{#label}}', 'Target conversation IDs'),\n      'array.min': messageErrorMessages.min.replace('{{#label}}', 'Target conversation IDs').replace('{{#limit}}', '1'),\n      'array.max': 'Cannot forward to more than 50 conversations',\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Target conversation IDs'),\n    }),\n  comment: Joi.string()\n    .max(500)\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Comment'),\n      'string.max': messageErrorMessages.max.replace('{{#label}}', 'Comment').replace('{{#limit}}', '500'),\n    }),\n}).label('ForwardMessage');\n\n// Schema for creating a message draft\nexport const createMessageDraftSchema = Joi.object({\n  conversationId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Conversation ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Conversation ID'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Conversation ID'),\n    }),\n  content: Joi.string()\n    .allow('')\n    .max(10000)\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Content'),\n      'string.max': messageErrorMessages.max.replace('{{#label}}', 'Content').replace('{{#limit}}', '10000'),\n    }),\n  media: Joi.array()\n    .items(\n      Joi.object({\n        type: Joi.string()\n          .valid('file', 'image', 'video', 'voice', 'sticker', 'gif')\n          .required()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Media type'),\n            'any.only': messageErrorMessages.enum.replace('{{#label}}', 'Media type').replace('{{#enum}}', 'file, image, video, voice, sticker, gif'),\n          }),\n        content: Joi.string()\n          .required()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Media content'),\n            'any.required': messageErrorMessages.required.replace('{{#label}}', 'Media content'),\n          }),\n        contentType: Joi.string()\n          .valid(...SUPPORTED_MIME_TYPES)\n          .required()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Content type'),\n            'any.only': 'Content type must be one of supported MIME types',\n            'any.required': messageErrorMessages.required.replace('{{#label}}', 'Content type'),\n          }),\n        thumbnail: Joi.string()\n          .uri({ scheme: ['http', 'https'] })\n          .optional()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Thumbnail'),\n            'string.uri': messageErrorMessages.uri.replace('{{#label}}', 'Thumbnail'),\n          }),\n        metadata: Joi.object({\n          size: Joi.number().integer().min(0).max(MAX_FILE_SIZE).optional().messages({\n            'number.max': `File size cannot exceed ${MAX_FILE_SIZE / (1024 * 1024)}MB`,\n          }),\n          duration: Joi.number().min(0).optional(),\n          width: Joi.number().integer().min(0).optional(),\n          height: Joi.number().integer().min(0).optional(),\n        }).optional(),\n      })\n    )\n    .max(MAX_FILES)\n    .optional()\n    .messages({\n      'array.base': messageErrorMessages.array.replace('{{#label}}', 'Media'),\n      'array.max': `Media cannot exceed ${MAX_FILES} items`,\n    }),\n  replyTo: Joi.string()\n    .pattern(uuidPattern)\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'ReplyTo'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'ReplyTo'),\n    }),\n  threadId: Joi.string()\n    .pattern(uuidPattern)\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Thread ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Thread ID'),\n    }),\n}).label('CreateMessageDraft');\n\n// Schema for bulk message actions (e.g., bulk delete, mark as read)\nexport const bulkMessageActionSchema = Joi.object({\n  messageIds: Joi.array()\n    .items(Joi.string().pattern(uuidPattern).messages({\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Each message ID'),\n    }))\n    .min(1)\n    .max(100)\n    .required()\n    .messages({\n      'array.base': messageErrorMessages.array.replace('{{#label}}', 'Message IDs'),\n      'array.min': messageErrorMessages.min.replace('{{#label}}', 'Message IDs').replace('{{#limit}}', '1'),\n      'array.max': 'Cannot process more than 100 messages at once',\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Message IDs'),\n    }),\n}).label('BulkMessageAction');\n\n// Schema for creating a thread\nexport const createThreadSchema = Joi.object({\n  conversationId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Conversation ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Conversation ID'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Conversation ID'),\n    }),\n  parentMessageId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Parent message ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Parent message ID'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Parent message ID'),\n    }),\n  content: Joi.string()\n    .allow('')\n    .max(10000)\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Content'),\n      'string.max': messageErrorMessages.max.replace('{{#label}}', 'Content').replace('{{#limit}}', '10000'),\n    }),\n  media: Joi.array()\n    .items(\n      Joi.object({\n        type: Joi.string()\n          .valid('file', 'image', 'video', 'voice', 'sticker', 'gif')\n          .required()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Media type'),\n            'any.only': messageErrorMessages.enum.replace('{{#label}}', 'Media type').replace('{{#enum}}', 'file, image, video, voice, sticker, gif'),\n          }),\n        content: Joi.string()\n          .required()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Media content'),\n            'any.required': messageErrorMessages.required.replace('{{#label}}', 'Media content'),\n          }),\n        contentType: Joi.string()\n          .valid(...SUPPORTED_MIME_TYPES)\n          .required()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Content type'),\n            'any.only': 'Content type must be one of supported MIME types',\n            'any.required': messageErrorMessages.required.replace('{{#label}}', 'Content type'),\n          }),\n        thumbnail: Joi.string()\n          .uri({ scheme: ['http', 'https'] })\n          .optional()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Thumbnail'),\n            'string.uri': messageErrorMessages.uri.replace('{{#label}}', 'Thumbnail'),\n          }),\n        metadata: Joi.object({\n          size: Joi.number().integer().min(0).max(MAX_FILE_SIZE).optional().messages({\n            'number.max': `File size cannot exceed ${MAX_FILE_SIZE / (1024 * 1024)}MB`,\n          }),\n          duration: Joi.number().min(0).optional(),\n          width: Joi.number().integer().min(0).optional(),\n          height: Joi.number().integer().min(0).optional(),\n        }).optional(),\n      })\n    )\n    .max(MAX_FILES)\n    .optional()\n    .messages({\n      'array.base': messageErrorMessages.array.replace('{{#label}}', 'Media'),\n      'array.max': `Media cannot exceed ${MAX_FILES} items`,\n    }),\n})\n  .or('content', 'media')\n  .messages({\n    'object.missing': 'Either content or media is required',\n  })\n  .label('CreateThread');\n\n// Schema for managing message notifications\nexport const messageNotificationSchema = Joi.object({\n  messageId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Message ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Message ID'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Message ID'),\n    }),\n  notify: Joi.boolean()\n    .required()\n    .messages({\n      'boolean.base': messageErrorMessages.boolean.replace('{{#label}}', 'Notify'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Notify'),\n    }),\n}).label('MessageNotification');\n\n/**\n * Validates a payload against a schema and throws an error if invalid.\n * @param {Joi.Schema} schema - Joi schema to validate against\n * @param {any} payload - Data to validate\n * @param {string} [errorMessage] - Custom error message prefix\n * @throws {Error} - Throws error with validation details\n */\nexport const validatePayload = (schema, payload, errorMessage = 'Validation error') => {\n  const { error } = schema.validate(payload, { abortEarly: false, stripUnknown: true });\n  if (error) {\n    const details = error.details.map(d => d.message).join('; ');\n    throw new Error(`${errorMessage}: ${details}`);\n  }\n};","import React, { useRef, useState, useEffect, useCallback, useMemo, memo } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Dialog,\n  TextField,\n  Button,\n  Box,\n  IconButton,\n  Typography,\n  CircularProgress,\n  Grid,\n  Alert,\n  LinearProgress,\n  Chip,\n  Collapse,\n  Tooltip,\n  Menu,\n  MenuItem,\n  useMediaQuery,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Link,\n} from '@mui/material';\nimport { Mic, Videocam, Stop, Schedule, Pause, Delete, PlayArrow, Close, AttachFile } from '@mui/icons-material';\nimport { motion } from 'framer-motion';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport { isEqual } from 'lodash';\nimport { useDrag } from '@use-gesture/react';\nimport TweetPopupStyles from './TweetPopupStyles';\nimport { useFileUpload } from '../../../hooks/useFileUpload';\nimport { SUPPORTED_MIME_TYPES } from '../../../constants/validations';\nimport LinkPreview from './LinkPreview';\n\nconst MAX_TWEET_LENGTH = 1000;\nconst MAX_FILE_SIZE = 50 * 1024 * 1024; // 50MB\nconst RECORDING_TIMEOUT = 5 * 60 * 1000; // 5 minutes\nconst LONG_PRESS_DELAY = 500; // 500ms for long-press\n\nconst TweetPopup = ({ x, y, onSubmit, onClose, parentTweet, onBoardUpdate }) => {\n  const [form, setForm] = useState({ draft: '', scheduledAt: '' });\n  const [transformedText, setTransformedText] = useState('');\n  const [recording, setRecording] = useState(null);\n  const [recordingType, setRecordingType] = useState(null);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [recordingMode, setRecordingMode] = useState('voice');\n  const [isPaused, setIsPaused] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [showSchedule, setShowSchedule] = useState(false);\n  const [submitSuccess, setSubmitSuccess] = useState(false);\n  const [menuAnchorEl, setMenuAnchorEl] = useState(null);\n  const [linkModal, setLinkModal] = useState(null);\n  const fileInputRef = useRef(null);\n  const mediaRecorderRef = useRef(null);\n  const dialogRef = useRef(null);\n  const videoPreviewRef = useRef(null);\n  const recordingTimerRef = useRef(null);\n  const longPressTimerRef = useRef(null);\n  const { files, handleFileChange, removeFile, cleanup, fileUrlsRef } = useFileUpload();\n  const isMobile = useMediaQuery((theme) => theme.breakpoints.down('sm'));\n\n  const bindDrag = useDrag(({ movement: [mx], event }) => {\n    if (Math.abs(mx) > 50) {\n      setRecordingMode(recordingMode === 'voice' ? 'video_message' : 'voice');\n      event.preventDefault();\n    }\n  }, { enabled: isMobile && !recordingType });\n\n  useEffect(() => {\n    dialogRef.current?.focus();\n    setTransformedText(form.draft);\n    return () => {\n      cleanup();\n      stopRecording();\n    };\n  }, [cleanup]);\n\n  useEffect(() => {\n    if (recording && !isPaused) {\n      recordingTimerRef.current = setInterval(() => {\n        setRecordingTime((prev) => {\n          const next = prev + 1;\n          if (next * 1000 >= RECORDING_TIMEOUT) {\n            stopRecording();\n            setError('Recording stopped: Maximum duration reached (5 minutes).');\n          }\n          return next;\n        });\n      }, 1000);\n    }\n    return () => clearInterval(recordingTimerRef.current);\n  }, [recording, isPaused]);\n\n  useEffect(() => {\n    if (recording && recordingType === 'video_message' && videoPreviewRef.current) {\n      videoPreviewRef.current.srcObject = recording;\n      videoPreviewRef.current.play().catch((err) => {\n        console.error('Video preview error:', err);\n        setError('Failed to display video preview.');\n      });\n    }\n    return () => {\n      if (videoPreviewRef.current) {\n        videoPreviewRef.current.srcObject = null;\n      }\n    };\n  }, [recording, recordingType]);\n\n  const startRecording = useCallback(async (type) => {\n    try {\n      const constraints = type === 'voice' ? { audio: true } : { audio: true, video: { width: 1280, height: 720 } };\n      const stream = await navigator.mediaDevices.getUserMedia(constraints);\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType: type === 'voice' ? 'audio/webm' : 'video/webm;codecs=vp8,opus',\n      });\n      const chunks = [];\n      mediaRecorder.ondataavailable = (e) => chunks.push(e.data);\n      mediaRecorder.onstop = () => {\n        const mimeType = type === 'voice' ? 'audio/webm' : 'video/webm';\n        const blob = new Blob(chunks, { type: mimeType });\n        const fileName = `${type}_${Date.now()}.webm`;\n        const file = new File([blob], fileName, { type: mimeType });\n        if (blob.size > MAX_FILE_SIZE) {\n          setError('Recorded file exceeds 50MB limit.');\n          return;\n        }\n        handleFileChange({ target: { files: [file] } });\n        stream.getTracks().forEach((track) => track.stop());\n      };\n      mediaRecorder.start(1000);\n      mediaRecorderRef.current = mediaRecorder;\n      setRecording(stream);\n      setRecordingType(type);\n      setRecordingTime(0);\n      setIsPaused(false);\n      setError(null);\n    } catch (err) {\n      setError('Failed to start recording. Please check microphone/camera permissions.');\n      console.error('Recording error:', err);\n    }\n  }, [handleFileChange]);\n\n  const pauseRecording = useCallback(() => {\n    if (mediaRecorderRef.current && recording && !isPaused) {\n      mediaRecorderRef.current.pause();\n      setIsPaused(true);\n    }\n  }, [recording, isPaused]);\n\n  const resumeRecording = useCallback(() => {\n    if (mediaRecorderRef.current && recording && isPaused) {\n      mediaRecorderRef.current.resume();\n      setIsPaused(false);\n    }\n  }, [recording, isPaused]);\n\n  const stopRecording = useCallback(() => {\n    if (mediaRecorderRef.current) {\n      mediaRecorderRef.current.stop();\n      mediaRecorderRef.current = null;\n    }\n    if (recording) {\n      recording.getTracks().forEach((track) => track.stop());\n    }\n    if (videoPreviewRef.current) {\n      videoPreviewRef.current.srcObject = null;\n    }\n    setRecording(null);\n    setRecordingType(null);\n    setRecordingTime(0);\n    setIsPaused(false);\n    clearInterval(recordingTimerRef.current);\n  }, [recording]);\n\n  const discardRecording = useCallback(() => {\n    stopRecording();\n    setError(null);\n  }, [stopRecording]);\n\n  const handleFileInputChange = useCallback((e) => {\n    const selectedFiles = Array.from(e.target.files);\n    const validFiles = selectedFiles.filter((file) => {\n      if (!SUPPORTED_MIME_TYPES.includes(file.type)) {\n        setError(`Unsupported file type: ${file.name}`);\n        return false;\n      }\n      if (file.size > MAX_FILE_SIZE) {\n        setError(`File too large: ${file.name} exceeds 50MB limit`);\n        return false;\n      }\n      return true;\n    });\n    if (validFiles.length) {\n      handleFileChange({ target: { files: validFiles } });\n      setError(null);\n    }\n    fileInputRef.current.value = null;\n  }, [handleFileChange]);\n\n  const handleSubmit = useCallback(async () => {\n    if (!form.draft.trim() && !files.length) {\n      setError('Please add text or media to submit.');\n      return;\n    }\n    if (form.draft.length > MAX_TWEET_LENGTH) {\n      setError(`Tweet exceeds ${MAX_TWEET_LENGTH} character limit.`);\n      return;\n    }\n    if (form.scheduledAt && new Date(form.scheduledAt) < new Date()) {\n      setError('Scheduled time must be in the future.');\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    try {\n      const contentType = files.length ? files[0].type.split('/')[0] : 'text';\n      const content = {\n        type: contentType,\n        value: form.draft.trim() || '',\n        metadata: {\n          files: files.map((file, index) => ({\n            fileKey: file.name,\n            url: fileUrlsRef.current.get(file) || URL.createObjectURL(file),\n            contentType: file.type,\n            duration: file.type.startsWith('video') ? 0 : undefined,\n          })),\n          style: {},\n          hashtags: [],\n          mentions: [],\n          poll_options: [],\n          event_details: {},\n          quote_ref: null,\n          embed_data: null,\n        },\n      };\n      const position = parentTweet\n        ? { x: parentTweet.position.x, y: parentTweet.position.y + 180 }\n        : { x, y: y + 180 };\n      const newTweet = await onSubmit(\n        content,\n        position.x,\n        position.y,\n        form.scheduledAt || null,\n        files,\n        (progress) => setUploadProgress(progress),\n        parentTweet?.tweet_id || null\n      );\n      if (onBoardUpdate && newTweet) {\n        onBoardUpdate(newTweet);\n      }\n      setSubmitSuccess(true);\n      setTimeout(() => {\n        setForm({ draft: '', scheduledAt: '' });\n        cleanup();\n        onClose();\n        setSubmitSuccess(false);\n      }, 500);\n    } catch (err) {\n      setError(err.message || 'Failed to submit tweet.');\n      console.error('Submit error:', err);\n    } finally {\n      setLoading(false);\n      setUploadProgress(0);\n    }\n  }, [form, files, onSubmit, cleanup, onClose, fileUrlsRef, parentTweet, x, y, onBoardUpdate]);\n\n  const handleKeyPress = useCallback((e) => {\n    if (e.key === 'Enter' && !e.shiftKey && !recording) {\n      e.preventDefault();\n      handleSubmit();\n    }\n  }, [handleSubmit, recording]);\n\n  const isSubmitDisabled = useMemo(() => {\n    return (\n      loading ||\n      (!form.draft.trim() && !files.length) ||\n      form.draft.length > MAX_TWEET_LENGTH ||\n      !!recording\n    );\n  }, [loading, form.draft, files, recording]);\n\n  const renderFilePreview = useCallback((file, index) => {\n    const fileUrl = fileUrlsRef.current.get(file) || URL.createObjectURL(file);\n    fileUrlsRef.current.set(file, fileUrl);\n\n    return (\n      <Grid item xs={12} key={`file-${index}`}>\n        <Box sx={TweetPopupStyles.popupFilePreviewContainer}>\n          {file.type.startsWith('image') ? (\n            <LazyLoadImage\n              src={fileUrl}\n              alt={`Preview ${index + 1}`}\n              style={TweetPopupStyles.popupPreviewMedia}\n              effect=\"blur\"\n              placeholder={<Box sx={TweetPopupStyles.popupPreviewPlaceholder}>Loading Image...</Box>}\n            />\n          ) : file.type.startsWith('video') ? (\n            <Box sx={{ position: 'relative' }}>\n              <video\n                src={fileUrl}\n                style={TweetPopupStyles.popupCirclePreviewMedia}\n                controls\n                preload=\"metadata\"\n                poster={fileUrl + '#t=0.1'}\n                aria-label={`Video preview ${index + 1}`}\n              />\n              <Box sx={TweetPopupStyles.popupPreviewOverlay}>\n                <IconButton\n                  size=\"small\"\n                  onClick={() => removeFile(index)}\n                  sx={TweetPopupStyles.popupDeleteFileButton}\n                  aria-label={`Remove file ${index + 1}`}\n                >\n                  <Delete fontSize=\"small\" />\n                </IconButton>\n              </Box>\n            </Box>\n          ) : file.type.startsWith('audio') ? (\n            <Box sx={TweetPopupStyles.popupAudioPlayer}>\n              <audio\n                src={fileUrl}\n                controls\n                style={{ width: '100%' }}\n                preload=\"metadata\"\n                aria-label={`Audio preview ${index + 1}`}\n              />\n              <Box sx={TweetPopupStyles.popupAudioVisualizer(false)}>\n                {[...Array(24)].map((_, i) => (\n                  <Box key={i} sx={TweetPopupStyles.popupVisualizerBar(i)} />\n                ))}\n              </Box>\n              <Box sx={TweetPopupStyles.popupPreviewOverlay}>\n                <IconButton\n                  size=\"small\"\n                  onClick={() => removeFile(index)}\n                  sx={TweetPopupStyles.popupDeleteFileButton}\n                  aria-label={`Remove file ${index + 1}`}\n                >\n                  <Delete fontSize=\"small\" />\n                </IconButton>\n              </Box>\n            </Box>\n          ) : (\n            <Box sx={TweetPopupStyles.popupPreviewPlaceholder}>\n              <Typography variant=\"caption\">File: {file.name}</Typography>\n            </Box>\n          )}\n        </Box>\n      </Grid>\n    );\n  }, [removeFile, fileUrlsRef]);\n\n  const recordingStatus = useMemo(() => {\n    if (!recording) return null;\n    const minutes = Math.floor(recordingTime / 60);\n    const seconds = recordingTime % 60;\n    const label = `Recording ${recordingType === 'voice' ? 'Audio' : 'Video'}: ${minutes}:${seconds.toString().padStart(2, '0')}`;\n\n    return (\n      <Box sx={TweetPopupStyles.popupRecordingContainer}>\n        <Chip\n          label={label}\n          sx={TweetPopupStyles.popupRecordingChip}\n          aria-label={`Recording ${recordingType} duration`}\n        />\n        {recordingType === 'video_message' ? (\n          <Box sx={TweetPopupStyles.popupVideoPreviewContainer}>\n            <video\n              ref={videoPreviewRef}\n              style={TweetPopupStyles.popupLivePreview}\n              muted\n              autoPlay\n              aria-label=\"Live video recording preview\"\n            />\n          </Box>\n        ) : (\n          <Box sx={TweetPopupStyles.popupAudioVisualizer(true)}>\n            {[...Array(24)].map((_, i) => (\n              <Box key={i} sx={TweetPopupStyles.popupVisualizerBar(i)} />\n            ))}\n          </Box>\n        )}\n        <Box sx={TweetPopupStyles.popupRecordingControls}>\n          <Tooltip title={isPaused ? 'Resume' : 'Pause'} placement=\"top\">\n            <IconButton\n              onClick={isPaused ? resumeRecording : pauseRecording}\n              sx={TweetPopupStyles.popupMediaButton(isPaused)}\n              aria-label={isPaused ? 'Resume recording' : 'Pause recording'}\n            >\n              {isPaused ? <PlayArrow fontSize=\"small\" /> : <Pause fontSize=\"small\" />}\n            </IconButton>\n          </Tooltip>\n          <Tooltip title=\"Stop\" placement=\"top\">\n            <IconButton\n              onClick={stopRecording}\n              sx={TweetPopupStyles.popupMediaButton(false)}\n              aria-label=\"Stop recording\"\n            >\n              <Stop fontSize=\"small\" />\n            </IconButton>\n          </Tooltip>\n        </Box>\n      </Box>\n    );\n  }, [recording, recordingType, recordingTime, isPaused, pauseRecording, resumeRecording, stopRecording]);\n\n  const toggleRecording = useCallback((type) => () => {\n    return recordingType === type ? stopRecording() : startRecording(type);\n  }, [recordingType, startRecording, stopRecording]);\n\n  const renderInputBar = useMemo(() => {\n    return (\n      <Box sx={{ ...TweetPopupStyles.popupInputBar, position: 'static', zIndex: 'auto', gap: 1, flexDirection: 'column' }}>\n        <Box sx={{ display: 'flex', gap: 1, width: '100%' }}>\n          <input\n            type=\"file\"\n            accept={SUPPORTED_MIME_TYPES.join(',')}\n            multiple\n            onChange={handleFileInputChange}\n            style={{ display: 'none' }}\n            ref={fileInputRef}\n            disabled={loading || recording}\n          />\n          <Tooltip title=\"Upload Media\" placement=\"top\">\n            <IconButton\n              onClick={() => fileInputRef.current.click()}\n              sx={TweetPopupStyles.popupMediaButton(false)}\n              aria-label=\"Upload media\"\n              disabled={loading || recording}\n            >\n              <AttachFile fontSize=\"small\" />\n            </IconButton>\n          </Tooltip>\n          <Box sx={{ position: 'relative', flex: 1 }}>\n            <TextField\n              placeholder={parentTweet ? 'Write your reply...' : \"What's on your mind?\"}\n              value={form.draft}\n              onChange={(e) => setForm((prev) => ({ ...prev, draft: e.target.value }))}\n              onKeyPress={handleKeyPress}\n              autoFocus\n              fullWidth\n              multiline\n              maxRows={4}\n              variant=\"outlined\"\n              sx={{\n                ...TweetPopupStyles.popupTextField,\n                '& .MuiOutlinedInput-root': {\n                  borderRadius: '12px',\n                  padding: '6px 12px',\n                  minHeight: '32px',\n                  fontSize: '0.875rem',\n                },\n              }}\n              inputProps={{ maxLength: MAX_TWEET_LENGTH }}\n              aria-label={parentTweet ? 'Reply content' : 'Tweet content'}\n              disabled={loading}\n            />\n            <Typography\n              variant=\"caption\"\n              sx={{\n                ...TweetPopupStyles.popupCharCount(form.draft.length > MAX_TWEET_LENGTH),\n                position: 'absolute',\n                right: '8px',\n                bottom: '4px',\n                fontSize: '0.75rem',\n              }}\n              aria-live=\"polite\"\n            >\n              {form.draft.length}/{MAX_TWEET_LENGTH}\n            </Typography>\n          </Box>\n          <motion.div key={recordingType || recordingMode} initial={{ opacity: 0, scale: 0.8 }} animate={{ opacity: 1, scale: 1 }} transition={{ duration: 0.2 }}>\n            {recordingType === 'voice' ? (\n              <Tooltip title=\"Stop Audio Recording (save to add another)\" placement=\"top\">\n                <IconButton\n                  onClick={toggleRecording('voice')}\n                  sx={TweetPopupStyles.popupMediaButton(true)}\n                  aria-label=\"Stop audio recording\"\n                  disabled={loading}\n                >\n                  <Stop fontSize=\"small\" />\n                </IconButton>\n              </Tooltip>\n            ) : recordingType === 'video_message' ? (\n              <Tooltip title=\"Stop Video Recording (save to add another)\" placement=\"top\">\n                <IconButton\n                  onClick={toggleRecording('video_message')}\n                  sx={TweetPopupStyles.popupMediaButton(true)}\n                  aria-label=\"Stop video recording\"\n                  disabled={loading}\n                >\n                  <Stop fontSize=\"small\" />\n                </IconButton>\n              </Tooltip>\n            ) : (\n              <Tooltip\n                title={isMobile ? `Start ${recordingMode === 'voice' ? 'Audio' : 'Video'} Recording (swipe or hold to switch)` : `Start ${recordingMode === 'voice' ? 'Audio' : 'Video'} Recording (right-click to switch)`}\n                placement=\"top\"\n              >\n                <IconButton\n                  {...bindDrag()}\n                  onClick={() => toggleRecording(recordingMode)()}\n                  onTouchStart={() => {\n                    if (isMobile) {\n                      longPressTimerRef.current = setTimeout(() => {\n                        setRecordingMode(recordingMode === 'voice' ? 'video_message' : 'voice');\n                      }, LONG_PRESS_DELAY);\n                    }\n                  }}\n                  onTouchEnd={() => {\n                    if (isMobile && longPressTimerRef.current) {\n                      clearTimeout(longPressTimerRef.current);\n                      longPressTimerRef.current = null;\n                    }\n                  }}\n                  onContextMenu={(e) => {\n                    if (!isMobile) {\n                      e.preventDefault();\n                      setRecordingMode(recordingMode === 'voice' ? 'video_message' : 'voice');\n                    }\n                  }}\n                  sx={TweetPopupStyles.popupMediaButton(false)}\n                  aria-label={isMobile ? `Start ${recordingMode === 'voice' ? 'audio' : 'video'} recording, hold to switch mode` : `Start ${recordingMode === 'voice' ? 'audio' : 'video'} recording, right-click to switch mode`}\n                  aria-haspopup=\"true\"\n                  disabled={loading}\n                >\n                  {recordingMode === 'voice' ? <Mic fontSize=\"small\" /> : <Videocam fontSize=\"small\" />}\n                </IconButton>\n              </Tooltip>\n            )}\n          </motion.div>\n          <Tooltip title={isMobile ? 'Submit tweet (long-press for schedule)' : 'Submit tweet (right-click for schedule)'} placement=\"top\">\n            <Button\n              onClick={(e) => {\n                if (!menuAnchorEl) {\n                  handleSubmit();\n                }\n                e.preventDefault();\n              }}\n              onContextMenu={(e) => {\n                if (!isMobile) {\n                  e.preventDefault();\n                  setMenuAnchorEl(e.currentTarget);\n                }\n              }}\n              onTouchStart={() => {\n                if (isMobile) {\n                  longPressTimerRef.current = setTimeout(() => {\n                    setMenuAnchorEl(fileInputRef.current);\n                  }, LONG_PRESS_DELAY);\n                }\n              }}\n              onTouchEnd={() => {\n                if (isMobile && longPressTimerRef.current) {\n                  clearTimeout(longPressTimerRef.current);\n                  longPressTimerRef.current = null;\n                }\n              }}\n              variant=\"contained\"\n              color=\"primary\"\n              sx={{ ...TweetPopupStyles.popupActionButton, minWidth: '90px' }}\n              disabled={isSubmitDisabled}\n              aria-label=\"Submit tweet or open schedule menu\"\n              aria-controls={menuAnchorEl ? 'schedule-menu' : undefined}\n              aria-haspopup=\"true\"\n            >\n              {loading ? <CircularProgress size={24} color=\"inherit\" /> : parentTweet ? 'Reply' : 'Add Post'}\n            </Button>\n          </Tooltip>\n        </Box>\n        <LinkPreview content={form.draft} onTextTransform={setTransformedText} onPlayClick={(url, type) => {\n          if (['spotify', 'soundcloud'].includes(type) && !url.embedUrl) {\n            setLinkModal({ url: url.url, type });\n          }\n        }} />\n      </Box>\n    );\n  }, [recordingType, recording, loading, handleFileInputChange, startRecording, stopRecording, form.draft, parentTweet, handleKeyPress, handleSubmit, isSubmitDisabled, files, recordingMode, isMobile, bindDrag, toggleRecording]);\n\n  const linkModalContent = useMemo(() => {\n    if (!linkModal) return null;\n    return (\n      <Dialog open={!!linkModal} onClose={() => setLinkModal(null)} maxWidth=\"sm\" fullWidth>\n        <DialogTitle>View Content</DialogTitle>\n        <DialogContent>\n          <Typography variant=\"body1\" gutterBottom>\n            This content cannot be embedded directly. Visit the link below to view it:\n          </Typography>\n          <Link href={linkModal.url} target=\"_blank\" rel=\"noopener\" sx={{ wordBreak: 'break-all' }}>\n            {linkModal.url}\n          </Link>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setLinkModal(null)} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }, [linkModal]);\n\n  return (\n    <motion.div initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: submitSuccess ? 1.05 : 1 }} transition={{ duration: 0.3 }}>\n      <Dialog\n        open={true}\n        onClose={onClose}\n        PaperProps={{ sx: { ...TweetPopupStyles.popupDialogPaper, position: 'relative' } }}\n        sx={{ '& .MuiBackdrop-root': TweetPopupStyles.popupDialogBackdrop }}\n        aria-labelledby=\"tweet-popup-title\"\n        ref={dialogRef}\n      >\n        <IconButton\n          onClick={onClose}\n          sx={{ position: 'absolute', top: 10, right: 25, zIndex: 1, color: 'grey.600', padding: '4px', '&:hover': { bgcolor: 'grey.200' } }}\n          aria-label=\"Close tweet popup\"\n          disabled={loading || uploadProgress > 0}\n        >\n          <Close fontSize=\"small\" />\n        </IconButton>\n        <Typography id=\"tweet-popup-title\" sx={{ ...TweetPopupStyles.popupTitle, pr: 5 }}>\n          {parentTweet ? 'Reply to Tweet' : 'Create a new tweet'}\n        </Typography>\n        <Box sx={TweetPopupStyles.popupContentBox}>\n          {error && (\n            <Alert severity=\"error\" onClose={() => setError(null)} sx={TweetPopupStyles.popupErrorAlert}>\n              {error}\n            </Alert>\n          )}\n          {parentTweet && (\n            <Box sx={{ mb: 2 }}>\n              <Typography variant=\"subtitle2\" sx={{ mb: 0.5, fontWeight: 'medium' }}>\n                Replying to:\n              </Typography>\n              <Box component=\"blockquote\" sx={{ borderLeft: '4px solid', borderColor: 'primary.main', pl: 2, color: 'text.secondary', fontStyle: 'italic', m: 0 }}>\n                <Typography variant=\"body2\">\n                  {parentTweet.content?.value.split(/\\s+/).slice(0, 10).join(' ')}...\n                </Typography>\n              </Box>\n            </Box>\n          )}\n          {files.length > 0 && (\n            <Box sx={TweetPopupStyles.popupFilePreviewContainer}>\n              <Grid container spacing={1}>\n                {files.slice(0, 4).map((file, index) => renderFilePreview(file, index))}\n              </Grid>\n              {files.length > 4 && (\n                <Typography variant=\"caption\" sx={{ mt: 1, color: 'text.secondary' }}>\n                  +{files.length - 4} more file(s)\n                </Typography>\n              )}\n            </Box>\n          )}\n          {recordingStatus}\n          {loading && uploadProgress > 0 && (\n            <Box sx={TweetPopupStyles.popupProgressContainer}>\n              <LinearProgress variant=\"determinate\" value={uploadProgress} />\n              <Typography variant=\"caption\" sx={{ color: 'text.secondary' }}>\n                Uploading: {uploadProgress}%\n              </Typography>\n            </Box>\n          )}\n          <Collapse in={showSchedule} timeout=\"auto\">\n            <TextField\n              label=\"Schedule (optional)\"\n              type=\"datetime-local\"\n              value={form.scheduledAt}\n              onChange={(e) => setForm((prev) => ({ ...prev, scheduledAt: e.target.value }))}\n              fullWidth\n              InputLabelProps={{ shrink: true }}\n              sx={{ ...TweetPopupStyles.popupTextField, mb: 1 }}\n              inputProps={{ min: new Date().toISOString().slice(0, 16) }}\n              aria-label=\"Schedule tweet\"\n              disabled={loading || recording}\n            />\n          </Collapse>\n          {renderInputBar}\n        </Box>\n      </Dialog>\n      {linkModalContent}\n    </motion.div>\n  );\n};\n\nTweetPopup.propTypes = {\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  parentTweet: PropTypes.shape({\n    tweet_id: PropTypes.string,\n    username: PropTypes.string,\n    position: PropTypes.shape({ x: PropTypes.number, y: PropTypes.number }),\n    content: PropTypes.shape({ value: PropTypes.string }),\n  }),\n  onBoardUpdate: PropTypes.func,\n};\n\nTweetPopup.defaultProps = {\n  parentTweet: null,\n  onBoardUpdate: null,\n};\n\nconst arePropsEqual = (prevProps, nextProps) => {\n  return (\n    prevProps.x === nextProps.x &&\n    prevProps.y === nextProps.y &&\n    prevProps.onSubmit === nextProps.onSubmit &&\n    prevProps.onClose === nextProps.onClose &&\n    isEqual(prevProps.parentTweet, nextProps.parentTweet) &&\n    prevProps.onBoardUpdate === nextProps.onBoardUpdate\n  );\n};\n\nexport default memo(TweetPopup, arePropsEqual);","// src/hooks/useFileUpload.js\nimport { useState, useCallback, useRef } from 'react';\nimport { SUPPORTED_MIME_TYPES, MAX_FILE_SIZE, MAX_FILES } from '../constants/validations';\n\nexport const useFileUpload = () => {\n  const [files, setFiles] = useState([]);\n  const [error, setError] = useState(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const fileUrlsRef = useRef(new Map());\n\n  // Validate a single file\n  const validateFile = useCallback((file) => {\n    if (!file) {\n      setError('No file selected');\n      return false;\n    }\n    if (!SUPPORTED_MIME_TYPES.includes(file.type)) {\n      setError(`Unsupported file type: ${file.type}. Supported types: images, videos, audio.`);\n      return false;\n    }\n    if (file.size > MAX_FILE_SIZE) {\n      setError('File size exceeds 50MB limit');\n      return false;\n    }\n    return true;\n  }, []);\n\n  // Handle file selection\n  const handleFileChange = useCallback((e) => {\n    const newFiles = Array.from(e.target.files).filter(validateFile);\n    if (newFiles.length + files.length > MAX_FILES) {\n      setError(`Maximum ${MAX_FILES} files allowed`);\n      return;\n    }\n    setFiles((prev) => [...prev, ...newFiles]);\n    setError(null);\n  }, [files, validateFile]);\n\n  // Remove a file\n  const removeFile = useCallback((index) => {\n    setFiles((prev) => {\n      const fileToRemove = prev[index];\n      const url = fileUrlsRef.current.get(fileToRemove);\n      if (url) {\n        URL.revokeObjectURL(url);\n        fileUrlsRef.current.delete(fileToRemove);\n      }\n      return prev.filter((_, i) => i !== index);\n    });\n  }, []);\n\n  // Simulate file upload (replace with actual API call)\n  const uploadFiles = useCallback(async (files, onProgress) => {\n    try {\n      // Simulate upload process\n      for (let i = 0; i <= 100; i += 10) {\n        await new Promise((resolve) => setTimeout(resolve, 200));\n        onProgress(i);\n      }\n      return files.map((file) => ({\n        fileKey: file.name,\n        url: URL.createObjectURL(file), // In a real app, this would be a server URL\n        contentType: file.type,\n      }));\n    } catch (err) {\n      setError('Failed to upload files');\n      throw err;\n    }\n  }, []);\n\n  // Clean up file URLs\n  const cleanup = useCallback(() => {\n    fileUrlsRef.current.forEach((url) => URL.revokeObjectURL(url));\n    fileUrlsRef.current.clear();\n    setFiles([]);\n    setUploadProgress(0);\n    setError(null);\n  }, []);\n\n  return {\n    files,\n    setFiles,\n    error,\n    setError,\n    uploadProgress,\n    setUploadProgress,\n    handleFileChange,\n    removeFile,\n    uploadFiles,\n    cleanup,\n    fileUrlsRef,\n  };\n};","import { get, post, put, del, handleApiError } from './apiClient';\nimport { uuidSchema, contentSchema, positionSchema, reminderSchema, validatePayload, querySchema, commentQuerySchema } from '../constants/validations';\nimport Joi from 'joi';\n\nconst BASE_TWEET_PATH = '/api/v1/tweets';\n\n/**\n * Fetch all tweets for a board\n * @param {string} boardId - Board ID\n * @param {string} token - Authorization token\n * @param {object} [options={}] - Query options\n * @param {AbortSignal} [signal] - Abort signal\n * @returns {Promise<object>} Tweets data\n */\nexport const fetchTweetsApi = async (boardId, token, options = {}, signal) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(querySchema, options, 'Invalid query options');\n  try {\n    const response = await get(`${BASE_TWEET_PATH}/${boardId}`, {\n      headers: { Authorization: `Bearer ${token}` },\n      params: options,\n      signal: signal instanceof AbortSignal ? signal : undefined,\n    });\n    return response.data.content || { tweets: [] };\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Fetch a single tweet by ID\n * @param {string} boardId - Board ID\n * @param {string} tweetId - Tweet ID\n * @param {string} token - Authorization token\n * @param {AbortSignal} [signal] - Abort signal\n * @returns {Promise<object>} Tweet data\n */\nexport const fetchTweetById = async (boardId, tweetId, token, signal) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  try {\n    const response = await get(`${BASE_TWEET_PATH}/${boardId}/${tweetId}`, {\n      headers: { Authorization: `Bearer ${token}` },\n      signal: signal instanceof AbortSignal ? signal : undefined,\n    });\n    return response.data.content || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Fetch comments for a tweet\n * @param {string} boardId - Board ID\n * @param {string} tweetId - Tweet ID\n * @param {string} token - Authorization token\n * @param {object} [options={}] - Query options\n * @param {AbortSignal} [signal] - Abort signal\n * @returns {Promise<object>} Comments data\n */\nexport const getTweetCommentsApi = async (boardId, tweetId, token, options = {}, signal) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  validatePayload(commentQuerySchema, options, 'Invalid comment query options');\n  try {\n    const response = await get(`${BASE_TWEET_PATH}/${boardId}/${tweetId}/comments`, {\n      headers: { Authorization: `Bearer ${token}` },\n      params: options,\n      signal: signal instanceof AbortSignal ? signal : undefined,\n    });\n    return response.data.content || { comments: [] };\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Generate presigned URL for file upload\n * @param {string} fileType - File type\n * @param {string} contentType - Content type\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Presigned URL data\n */\nexport const generatePresignedUrlApi = async (fileType, contentType, token) => {\n  validatePayload(Joi.string().required(), fileType, 'Invalid fileType');\n  validatePayload(Joi.string().required(), contentType, 'Invalid contentType');\n  try {\n    const response = await post(`${BASE_TWEET_PATH}/presigned-url`, { fileType, contentType }, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Create a new tweet\n * @param {string} boardId - Board ID\n * @param {object} content - Tweet content\n * @param {number} x - X position\n * @param {number} y - Y position\n * @param {string} [parentTweetId] - Parent tweet ID\n * @param {boolean} isAnonymous - Is anonymous\n * @param {string} anonymousId - Anonymous ID\n * @param {string} status - Tweet status\n * @param {string} [scheduledAt] - Scheduled date\n * @param {object} [reminder] - Reminder data\n * @param {array} [files] - Files array\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Created tweet data\n */\nexport const createTweetApi = async (\n  boardId,\n  content,\n  x,\n  y,\n  parentTweetId,\n  isAnonymous,\n  anonymousId,\n  status,\n  scheduledAt,\n  reminder,\n  files,\n  token\n) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(contentSchema, content, 'Invalid content');\n  validatePayload(positionSchema, { x, y }, 'Invalid position');\n  validatePayload(uuidSchema, anonymousId, 'Invalid anonymousId');\n  if (parentTweetId) validatePayload(uuidSchema, parentTweetId, 'Invalid parentTweetId');\n  if (reminder) validatePayload(reminderSchema, reminder, 'Invalid reminder');\n  if (files?.length) {\n    validatePayload(\n      Joi.array().items(\n        Joi.object({\n          url: Joi.string().uri().optional(),\n          fileKey: Joi.string().required(),\n          contentType: Joi.string().required(),\n          size: Joi.number().max(50 * 1024 * 1024).required(),\n        })\n      ).max(10),\n      files,\n      'Invalid files'\n    );\n  }\n  try {\n    const payload = {\n      content: {\n        ...content,\n        metadata: {\n          ...content.metadata,\n          files: files || [],\n        },\n      },\n      position: { x, y },\n      is_anonymous: isAnonymous,\n      anonymous_id: anonymousId,\n      status,\n      scheduled_at: scheduledAt || null,\n    };\n    if (parentTweetId) payload.parent_tweet_id = parentTweetId;\n    if (reminder) payload.reminder = reminder;\n\n    const response = await post(`${BASE_TWEET_PATH}/${boardId}`, payload, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    const tweet = response.data.content?.tweets?.[0];\n    if (!tweet || !tweet.tweet_id) throw new Error('Invalid tweet response from server');\n    return tweet;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Update an existing tweet\n * @param {string} boardId - Board ID\n * @param {string} tweetId - Tweet ID\n * @param {object} updates - Tweet updates\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Updated tweet data\n */\nexport const updateTweetApi = async (boardId, tweetId, updates, token) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  validatePayload(\n    Joi.object({\n      content: contentSchema.optional(),\n      position: positionSchema.optional(),\n      status: Joi.string().valid('pending', 'approved', 'rejected', 'announcement', 'reminder', 'pinned', 'archived').optional(),\n      scheduled_at: Joi.date().iso().allow(null).optional(),\n      reminder: reminderSchema.optional(),\n    }).min(1),\n    updates,\n    'Invalid updates'\n  );\n  try {\n    const response = await put(`${BASE_TWEET_PATH}/${boardId}/${tweetId}`, updates, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content?.tweets?.[0] || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Update tweet status\n * @param {string} boardId - Board ID\n * @param {string} tweetId - Tweet ID\n * @param {string} status - New status\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Updated tweet data\n */\nexport const updateTweetStatusApi = async (boardId, tweetId, status, token) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  validatePayload(\n    Joi.string().valid('pending', 'approved', 'rejected', 'announcement', 'reminder', 'pinned', 'archived').required(),\n    status,\n    'Invalid status'\n  );\n  try {\n    const response = await put(`${BASE_TWEET_PATH}/${boardId}/${tweetId}/status`, { status }, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content?.tweets?.[0] || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Toggle like/dislike for a tweet\n * @param {string} tweetId - Tweet ID\n * @param {boolean} isLiked - Current like state\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Updated tweet data\n */\nexport const toggleLikeApi = async (tweetId, isLiked, token) => {\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  try {\n    const endpoint = isLiked ? 'dislike' : 'like';\n    const response = await post(`${BASE_TWEET_PATH}/${tweetId}/${endpoint}`, {}, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content?.tweets?.[0] || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Delete a tweet\n * @param {string} boardId - Board ID\n * @param {string} tweetId - Tweet ID\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Deleted tweet data\n */\nexport const deleteTweetApi = async (boardId, tweetId, token) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  try {\n    const response = await del(`${BASE_TWEET_PATH}/${boardId}/${tweetId}`, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content?.tweets?.[0] || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Move a tweet to another board\n * @param {string} tweetId - Tweet ID\n * @param {string} targetBoardId - Target board ID\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Moved tweet data\n */\nexport const moveTweetApi = async (tweetId, targetBoardId, token) => {\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  validatePayload(uuidSchema, targetBoardId, 'Invalid targetBoardId');\n  try {\n    const response = await post(`${BASE_TWEET_PATH}/${tweetId}/move`, { targetBoardId }, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content?.tweets?.[0] || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Pin a tweet\n * @param {string} boardId - Board ID\n * @param {string} tweetId - Tweet ID\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Pinned tweet data\n */\nexport const pinTweetApi = async (boardId, tweetId, token) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  try {\n    const response = await post(`${BASE_TWEET_PATH}/${boardId}/${tweetId}/pin`, {}, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content?.tweets?.[0] || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Unpin a tweet\n * @param {string} boardId - Board ID\n * @param {string} tweetId - Tweet ID\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Unpinned tweet data\n */\nexport const unpinTweetApi = async (boardId, tweetId, token) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  try {\n    const response = await post(`${BASE_TWEET_PATH}/${boardId}/${tweetId}/unpin`, {}, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content?.tweets?.[0] || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Set a reminder for a tweet\n * @param {string} boardId - Board ID\n * @param {string} tweetId - Tweet ID\n * @param {object} reminder - Reminder data\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Updated tweet data\n */\nexport const setReminderApi = async (boardId, tweetId, reminder, token) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  validatePayload(reminderSchema, reminder, 'Invalid reminder');\n  try {\n    const response = await put(`${BASE_TWEET_PATH}/${boardId}/${tweetId}/reminder`, reminder, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content?.tweets?.[0] || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Share a tweet\n * @param {string} boardId - Board ID\n * @param {string} tweetId - Tweet ID\n * @param {string} sharedTo - Share destination\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Shared tweet data\n */\nexport const shareTweetApi = async (boardId, tweetId, sharedTo, token) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  validatePayload(Joi.string().required(), sharedTo, 'Invalid sharedTo');\n  try {\n    const response = await post(`${BASE_TWEET_PATH}/${boardId}/${tweetId}/share`, { shared_to: sharedTo }, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content?.tweets?.[0] || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};","/**\n * @module normalizeTweet\n * @description Utility function to normalize tweet data for consistent frontend usage.\n */\n\n/**\n * Normalizes tweet data for frontend consistency.\n * @param {Object} tweet\n * @param {Object} currentUser\n * @returns {Object}\n */\nexport const normalizeTweet = (tweet, currentUser) => {\n  if (!tweet || typeof tweet !== 'object') {\n    console.warn('Invalid tweet input:', tweet);\n    return {\n      tweet_id: '',\n      content: { type: 'text', value: '', metadata: { files: [], hashtags: [], mentions: [] } },\n      anonymous_id: currentUser?.anonymous_id || '',\n      username: currentUser?.username || '',\n      position: { x: 0, y: 0 },\n      parent_tweet_id: null,\n      child_tweet_ids: [],\n      is_anonymous: false,\n      liked_by: [],\n      is_liked: false,\n      stats: { likes: 0, like_count: 0, view_count: 0 },\n      created_at: new Date().toISOString(),\n      status: 'approved',\n      scheduled_at: null,\n      reminder: null,\n      is_pinned: false,\n      analytics: { views: [], shares: [] },\n    };\n  }\n\n  const content = tweet.content || { type: 'text', value: '', metadata: {} };\n  const metadata = {\n    files: content.metadata?.files || [],\n    hashtags: content.metadata?.hashtags || [],\n    mentions: content.metadata?.mentions || [],\n    style: content.metadata?.style || {},\n    poll_options: content.metadata?.poll_options || [],\n    event_details: content.metadata?.event_details || {},\n    quote_ref: content.metadata?.quote_ref || null,\n    embed_data: content.metadata?.embed_data || null,\n  };\n\n  return {\n    tweet_id: tweet.tweet_id || '',\n    content: { type: content.type || 'text', value: content.value || '', metadata },\n    anonymous_id: tweet.anonymous_id || currentUser?.anonymous_id || '',\n    username: tweet.is_anonymous ? 'Anonymous' : tweet.username || currentUser?.username || '',\n    position: { x: Number(tweet.position?.x) || 0, y: Number(tweet.position?.y) || 0 },\n    parent_tweet_id: tweet.parent_tweet_id || null,\n    child_tweet_ids: tweet.child_tweet_ids || [],\n    children: tweet.children?.map(child => normalizeTweet(child, currentUser)) || [],\n    is_anonymous: !!tweet.is_anonymous,\n    liked_by: tweet.liked_by || [],\n    is_liked: tweet.is_liked || (tweet.liked_by || []).some(u => u.anonymous_id === currentUser?.anonymous_id) || false,\n    stats: {\n      likes: tweet.stats?.like_count ?? (tweet.liked_by || []).length,\n      like_count: tweet.stats?.like_count ?? (tweet.liked_by || []).length,\n      view_count: tweet.stats?.view_count ?? 0,\n    },\n    created_at: tweet.created_at || new Date().toISOString(),\n    updated_at: tweet.updated_at || tweet.created_at || new Date().toISOString(),\n    status: tweet.status || 'approved',\n    scheduled_at: tweet.scheduled_at || null,\n    reminder: tweet.reminder || null,\n    is_pinned: !!tweet.is_pinned,\n    analytics: {\n      views: tweet.analytics?.views || [],\n      shares: tweet.analytics?.shares || [],\n    },\n  };\n};","/**\n * @module useTweets\n * @description React hook for managing tweets with caching and debounced API calls.\n */\nimport { useState, useCallback, useMemo, useEffect, useRef } from 'react';\nimport debounce from 'lodash/debounce';\nimport {\n  fetchTweetsApi,\n  createTweetApi,\n  updateTweetApi,\n  toggleLikeApi,\n  deleteTweetApi,\n  moveTweetApi,\n  pinTweetApi,\n  unpinTweetApi,\n  setReminderApi,\n  shareTweetApi,\n  generatePresignedUrlApi,\n} from '../api/tweetsApi';\nimport { normalizeTweet } from '../utils/tweetUtils';\n\n// Constants\nconst ERROR_MESSAGES = {\n  AUTH_REQUIRED: 'Authentication required.',\n  BOARD_ID_MISSING: 'Board ID is missing.',\n  TWEET_ID_MISSING: 'Tweet ID is missing.',\n  CONTENT_MISSING: 'Tweet must have text or files.',\n  POSITION_INVALID: 'Valid position (x, y) is required.',\n  TARGET_BOARD_ID_MISSING: 'Target board ID is missing.',\n  REMINDER_INVALID: 'Invalid reminder data.',\n  SHARE_PLATFORM_MISSING: 'Share platform is missing.',\n  FILE_UPLOAD_FAILED: 'Failed to upload file.',\n  GENERIC: 'An error occurred.',\n};\n\nconst CONFIG = {\n  MAX_CACHE_SIZE: 10,\n  CACHE_EXPIRY_MS: 30 * 60 * 1000, // 30 minutes\n  DEBOUNCE_MS: 300,\n  DEFAULT_LIMIT: 20,\n  CACHE_VERSION: 'v1',\n};\n\n// LRU Cache implementation\nclass LRUCache {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.cache = new Map();\n  }\n\n  get(key) {\n    if (!this.cache.has(key)) return null;\n    const { value, timestamp } = this.cache.get(key);\n    if (Date.now() - timestamp > CONFIG.CACHE_EXPIRY_MS) {\n      this.cache.delete(key);\n      return null;\n    }\n    this.cache.delete(key);\n    this.cache.set(key, { value, timestamp });\n    return value;\n  }\n\n  set(key, value) {\n    if (this.cache.size >= this.capacity) {\n      const firstKey = this.cache.keys().next().value;\n      this.cache.delete(firstKey);\n    }\n    this.cache.set(key, { value, timestamp: Date.now() });\n  }\n\n  clear() {\n    this.cache.clear();\n  }\n}\n\nconst tweetCache = new LRUCache(CONFIG.MAX_CACHE_SIZE);\n\n/**\n * Hook for managing tweets.\n * @param {string|null} token - Authentication token.\n * @param {string|null} boardId - ID of the board.\n * @param {object} currentUser - Current user data.\n * @param {function} onLogout - Logout callback.\n * @param {function} navigate - Navigation callback.\n * @param {boolean} skipInitialFetch - Skip initial tweets fetch.\n * @returns {object} Tweet management functions and state.\n */\nexport const useTweets = (token, boardId, currentUser, onLogout, navigate, skipInitialFetch = false) => {\n  const [tweets, setTweets] = useState([]);\n  const [tweet, setTweet] = useState(null);\n  const [pagination, setPagination] = useState({ page: 1, limit: CONFIG.DEFAULT_LIMIT, total: 0, hasMore: true });\n  const [boardInfo, setBoardInfo] = useState(null);\n  const [error, setError] = useState(null);\n  const abortControllerRef = useRef(null);\n\n  const handleError = useCallback(\n    (err, message) => {\n      if (err.name === 'AbortError') return Promise.resolve(null);\n      const status = err.status || 500;\n      if (status === 401 || status === 403) {\n        onLogout('Session expired. Please log in again.');\n        navigate('/login');\n      }\n      const errorMessage = message || err.message || ERROR_MESSAGES.GENERIC;\n      setError(errorMessage);\n      return Promise.reject(new Error(errorMessage));\n    },\n    [onLogout, navigate]\n  );\n\n  const uploadFileToS3 = useCallback(\n    async (file, token, onProgress) => {\n      try {\n        const contentType = file.type.split('/')[0];\n        const { presignedUrl, fileKey, contentType: fileContentType } = await generatePresignedUrlApi(\n          file.type,\n          contentType,\n          token\n        );\n\n        const xhr = new XMLHttpRequest();\n        xhr.open('PUT', presignedUrl, true);\n        xhr.setRequestHeader('Content-Type', file.type);\n\n        xhr.upload.onprogress = (event) => {\n          if (event.lengthComputable) {\n            const percent = Math.round((event.loaded / event.total) * 100);\n            onProgress?.(percent);\n          }\n        };\n\n        return new Promise((resolve, reject) => {\n          xhr.onload = () => {\n            if (xhr.status === 200) {\n              resolve({\n                fileKey,\n                contentType: fileContentType,\n                size: file.size,\n                url: presignedUrl.split('?')[0],\n              });\n            } else {\n              reject(new Error(`Upload failed with status ${xhr.status}`));\n            }\n          };\n          xhr.onerror = () => reject(new Error('Upload failed'));\n          xhr.send(file);\n        });\n      } catch (err) {\n        return handleError(err, ERROR_MESSAGES.FILE_UPLOAD_FAILED);\n      }\n    },\n    [handleError]\n  );\n\n  const fetchTweetsList = useCallback(\n    async (filters = {}, signal, append = false) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!boardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.BOARD_ID_MISSING);\n\n      const { page = 1, limit = CONFIG.DEFAULT_LIMIT } = filters;\n      const cacheKey = `${CONFIG.CACHE_VERSION}:tweets:${boardId}:${JSON.stringify({ ...filters, page, limit })}`;\n      const cachedData = tweetCache.get(cacheKey);\n\n      if (cachedData && !append) {\n        setTweets(cachedData.tweets || []);\n        setPagination(cachedData.pagination || { page, limit, total: 0, hasMore: true });\n        setBoardInfo(cachedData.board || null);\n        return Promise.resolve(cachedData);\n      }\n\n      setError(null);\n\n      try {\n        abortControllerRef.current?.abort();\n        abortControllerRef.current = new AbortController();\n        const effectiveSignal = signal || abortControllerRef.current.signal;\n\n        const data = await fetchTweetsApi(boardId, token, { ...filters, page, limit }, effectiveSignal);\n        if (!data) throw new Error('No data received');\n\n        const normalizedTweets = data.tweets.map((tweet) => ({\n          ...normalizeTweet(tweet, currentUser),\n          children: tweet.children?.map((child) => normalizeTweet(child, currentUser)) || [],\n        }));\n\n        setTweets((prev) => (append ? [...prev, ...normalizedTweets] : normalizedTweets));\n        setPagination({\n          page: data.pagination?.page || page,\n          limit: data.pagination?.limit || limit,\n          total: data.pagination?.total || 0,\n          hasMore: normalizedTweets.length === limit,\n        });\n        setBoardInfo(data.board || null);\n\n        const cacheData = { tweets: normalizedTweets, pagination: data.pagination, board: data.board };\n        tweetCache.set(cacheKey, cacheData);\n        return Promise.resolve(cacheData);\n      } catch (err) {\n        if (err.name === 'AbortError') return Promise.resolve(null);\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, boardId, currentUser, handleError]\n  );\n\n  const debouncedFetchTweetsList = useMemo(() => {\n    return debounce((filters, signal, append, callback) => {\n      fetchTweetsList(filters, signal, append)\n        .then((result) => callback(null, result))\n        .catch((err) => callback(err, null));\n    }, CONFIG.DEBOUNCE_MS);\n  }, [fetchTweetsList]);\n\n  const createNewTweet = useCallback(\n    async (\n      content,\n      x,\n      y,\n      parentTweetId = null,\n      isAnonymous = false,\n      status = 'approved',\n      scheduledAt = null,\n      reminder = null,\n      files = [],\n      onProgress\n    ) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!boardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.BOARD_ID_MISSING);\n      if (isNaN(x) || isNaN(y)) return handleError(new Error(), ERROR_MESSAGES.POSITION_INVALID);\n      if (!content?.value?.trim() && !files.length) return handleError(new Error(), ERROR_MESSAGES.CONTENT_MISSING);\n\n      setError(null);\n\n      const contentObj = {\n        type: files.length ? files[0].type?.split('/')[0] || 'image' : content.type || 'text',\n        value: content.value || '',\n        metadata: {\n          files: [],\n          hashtags: content.metadata?.hashtags || [],\n          mentions: content.metadata?.mentions || [],\n          style: content.metadata?.style || {},\n          poll_options: content.metadata?.poll_options || [],\n          event_details: content.metadata?.event_details || {},\n          quote_ref: content.metadata?.quote_ref || null,\n          embed_data: content.metadata?.embed_data || null,\n        },\n      };\n\n      const optimisticTweet = {\n        tweet_id: `temp-${Date.now()}`,\n        content: contentObj,\n        position: { x, y },\n        parent_tweet_id: parentTweetId,\n        child_tweet_ids: [],\n        is_anonymous: isAnonymous,\n        anonymous_id: currentUser.anonymous_id,\n        username: isAnonymous ? 'Anonymous' : currentUser.username,\n        created_at: new Date().toISOString(),\n        liked_by: [],\n        stats: { like_count: 0, view_count: 0, comment_count: 0, share_count: 0 },\n        status,\n        scheduled_at: scheduledAt,\n        reminder: reminder?.schedule ? reminder : null,\n        is_pinned: false,\n        children: [],\n      };\n\n      setTweets((prev) => [...prev, optimisticTweet]);\n\n      try {\n        const uploadedFiles = await Promise.all(\n          files.map((file) => uploadFileToS3(file, token, (progress) => onProgress?.(progress / files.length)))\n        );\n\n        const finalContent = {\n          ...contentObj,\n          type: uploadedFiles.length ? uploadedFiles[0].contentType.split('/')[0] : contentObj.type,\n          metadata: {\n            ...contentObj.metadata,\n            files: uploadedFiles,\n          },\n        };\n\n        const createdTweet = await createTweetApi(\n          boardId,\n          finalContent,\n          x,\n          y,\n          parentTweetId,\n          isAnonymous,\n          currentUser.anonymous_id,\n          status,\n          scheduledAt,\n          reminder?.schedule ? reminder : null,\n          uploadedFiles,\n          token\n        );\n\n        const normalizedTweet = normalizeTweet(\n          { ...createdTweet, position: createdTweet.position || { x, y } },\n          currentUser\n        );\n\n        setTweets((prev) =>\n          prev.map((t) => (t.tweet_id === optimisticTweet.tweet_id ? normalizedTweet : t))\n        );\n        setPagination((prev) => ({ ...prev, total: prev.total + 1 }));\n\n        if (parentTweetId) {\n          setTweets((prev) =>\n            prev.map((t) =>\n              t.tweet_id === parentTweetId\n                ? {\n                    ...t,\n                    child_tweet_ids: [...(t.child_tweet_ids || []), normalizedTweet.tweet_id],\n                    children: [...(t.children || []), normalizedTweet],\n                    stats: { ...t.stats, comment_count: (t.stats.comment_count || 0) + 1 },\n                  }\n                : t\n            )\n          );\n        }\n\n        tweetCache.clear();\n        return Promise.resolve(normalizedTweet);\n      } catch (err) {\n        setTweets((prev) => prev.filter((t) => t.tweet_id !== optimisticTweet.tweet_id));\n        setPagination((prev) => ({ ...prev, total: prev.total - 1 }));\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, boardId, currentUser, handleError, uploadFileToS3]\n  );\n\n  const updateExistingTweet = useCallback(\n    async (tweetId, updates, files = [], onProgress) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!boardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.BOARD_ID_MISSING);\n      if (!tweetId?.trim()) return handleError(new Error(), ERROR_MESSAGES.TWEET_ID_MISSING);\n      if (!updates || !Object.keys(updates).length) return handleError(new Error(), 'At least one update field is required');\n\n      const currentTweet = tweets.find((t) => t.tweet_id === tweetId);\n      if (!currentTweet) return handleError(new Error(), 'Tweet not found');\n\n      if (updates.content && !updates.content.value?.trim() && !files.length && !currentTweet.content.metadata.files.length) {\n        return handleError(new Error(), ERROR_MESSAGES.CONTENT_MISSING);\n      }\n      if (updates.position && (isNaN(updates.position.x) || isNaN(updates.position.y))) {\n        return handleError(new Error(), ERROR_MESSAGES.POSITION_INVALID);\n      }\n      setError(null);\n\n      const contentObj = updates.content\n        ? {\n            type: files.length\n              ? files[0].type?.split('/')[0] || 'image'\n              : updates.content.type || currentTweet.content.type || 'text',\n            value: updates.content.value || '',\n            metadata: {\n              files: currentTweet.content.metadata.files || [],\n              hashtags: updates.content.metadata?.hashtags || currentTweet.content.metadata.hashtags || [],\n              mentions: updates.content.metadata?.mentions || currentTweet.content.metadata.mentions || [],\n              style: updates.content.metadata?.style || currentTweet.content.metadata.style || [],\n              poll_options: updates.content.metadata?.poll_options || currentTweet.content.metadata.poll_options || [],\n              event_details:\n                updates.content.metadata?.event_details || currentTweet.content.metadata.event_details || {},\n              quote_ref: updates.content.metadata?.quote_ref || currentTweet.content.metadata.quote_ref || null,\n              embed_data: updates.content.metadata?.embed_data || currentTweet.content.metadata.embed_data || null,\n            },\n          }\n        : currentTweet.content;\n\n      const optimisticTweet = {\n        ...currentTweet,\n        ...updates,\n        content: contentObj,\n        position: updates.position || currentTweet.position,\n        status: updates.status || currentTweet.status,\n        scheduled_at: updates.scheduled_at !== undefined ? updates.scheduled_at : currentTweet.scheduled_at,\n        reminder: updates.reminder || currentTweet.reminder,\n        updated_at: new Date().toISOString(),\n      };\n\n      setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? optimisticTweet : t)));\n\n      try {\n        const uploadedFiles = await Promise.all(\n          files.map((file) => uploadFileToS3(file, token, (progress) => onProgress?.(progress / files.length)))\n        );\n\n        const finalUpdates = {\n          ...updates,\n          content: updates.content\n            ? {\n                ...contentObj,\n                type: uploadedFiles.length ? uploadedFiles[0].contentType.split('/')[0] : contentObj.type,\n                metadata: {\n                  ...contentObj.metadata,\n                  files: [...contentObj.metadata.files, ...uploadedFiles],\n                },\n              }\n            : undefined,\n          position: updates.position ? { x: updates.position.x, y: updates.position.y } : undefined,\n          status: updates.status,\n          scheduled_at: updates.scheduled_at !== undefined ? updates.scheduled_at : undefined,\n          reminder: updates.reminder ? { ...updates.reminder, enabled: !!updates.reminder.schedule } : undefined,\n        };\n\n        Object.keys(finalUpdates).forEach((key) => finalUpdates[key] === undefined && delete finalUpdates[key]);\n\n        const updatedTweet = await updateTweetApi(boardId, tweetId, finalUpdates, token);\n        const normalizedTweet = normalizeTweet(\n          { ...updatedTweet, position: updatedTweet.position || currentTweet.position },\n          currentUser\n        );\n\n        setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? normalizedTweet : t)));\n        tweetCache.clear();\n        return Promise.resolve(normalizedTweet);\n      } catch (err) {\n        setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? currentTweet : t)));\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, boardId, currentUser, handleError, tweets, uploadFileToS3]\n  );\n\n  const toggleLikeTweet = useCallback(\n    async (tweetId, isLiked) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!tweetId?.trim()) return handleError(new Error(), ERROR_MESSAGES.TWEET_ID_MISSING);\n\n      const currentTweet = tweets.find((t) => t.tweet_id === tweetId);\n      if (!currentTweet) return handleError(new Error(), 'Tweet not found');\n\n      setError(null);\n\n      const optimisticTweet = {\n        ...currentTweet,\n        liked_by: isLiked\n          ? currentTweet.liked_by.filter((l) => l.anonymous_id !== currentUser.anonymous_id)\n          : [...currentTweet.liked_by, { anonymous_id: currentUser.anonymous_id, username: currentUser.username }],\n        stats: {\n          ...currentTweet.stats,\n          like_count: isLiked ? currentTweet.stats.like_count - 1 : currentTweet.stats.like_count + 1,\n        },\n        is_liked: !isLiked,\n      };\n\n      setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? optimisticTweet : t)));\n\n      try {\n        const updatedTweet = await toggleLikeApi(tweetId, isLiked, token);\n        const normalizedTweet = normalizeTweet(updatedTweet, currentUser);\n\n        setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? normalizedTweet : t)));\n        tweetCache.clear();\n        return Promise.resolve(normalizedTweet);\n      } catch (err) {\n        setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? currentTweet : t)));\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, currentUser, handleError, tweets]\n  );\n\n  const deleteExistingTweet = useCallback(\n    async (tweetId) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!boardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.BOARD_ID_MISSING);\n      if (!tweetId?.trim()) return handleError(new Error(), ERROR_MESSAGES.TWEET_ID_MISSING);\n\n      const currentTweet = tweets.find((t) => t.tweet_id === tweetId);\n      if (!currentTweet) return handleError(new Error(), 'Tweet not found');\n\n      setError(null);\n\n      const childTweetIds = currentTweet.child_tweet_ids || [];\n      const parentTweetId = currentTweet.parent_tweet_id;\n\n      setTweets((prev) =>\n        prev\n          .filter((t) => t.tweet_id !== tweetId && !childTweetIds.includes(t.tweet_id))\n          .map((t) =>\n            t.tweet_id === parentTweetId\n              ? {\n                  ...t,\n                  child_tweet_ids: t.child_tweet_ids.filter((id) => id !== tweetId),\n                  children: t.children.filter((c) => c.tweet_id !== tweetId),\n                  stats: { ...t.stats, comment_count: (t.stats.comment_count || 0) - 1 },\n                }\n              : t\n          )\n      );\n      setPagination((prev) => ({ ...prev, total: prev.total - (1 + childTweetIds.length) }));\n      setTweet((prev) => (prev?.tweet_id === tweetId ? null : prev));\n\n      try {\n        await deleteTweetApi(boardId, tweetId, token);\n        tweetCache.clear();\n        return Promise.resolve(true);\n      } catch (err) {\n        setTweets((prev) => [\n          ...prev,\n          currentTweet,\n          ...childTweetIds.map((id) => tweets.find((t) => t.tweet_id === id)).filter(Boolean),\n        ].map((t) =>\n          t.tweet_id === parentTweetId\n            ? {\n                ...t,\n                child_tweet_ids: [...t.child_tweet_ids, tweetId],\n                children: [...t.children, currentTweet],\n                stats: { ...t.stats, comment_count: (t.stats.comment_count || 0) + 1 },\n              }\n            : t\n        ));\n        setPagination((prev) => ({ ...prev, total: prev.total + (1 + childTweetIds.length) }));\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, boardId, handleError, tweets]\n  );\n\n  const moveTweet = useCallback(\n    async (tweetId, targetBoardId) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!boardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.BOARD_ID_MISSING);\n      if (!tweetId?.trim()) return handleError(new Error(), ERROR_MESSAGES.TWEET_ID_MISSING);\n      if (!targetBoardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.TARGET_BOARD_ID_MISSING);\n\n      const currentTweet = tweets.find((t) => t.tweet_id === tweetId);\n      if (!currentTweet) return handleError(new Error(), 'Tweet not found');\n\n      setError(null);\n\n      const parentTweetId = currentTweet.parent_tweet_id;\n\n      setTweets((prev) =>\n        prev\n          .filter((t) => t.tweet_id !== tweetId)\n          .map((t) =>\n            t.tweet_id === parentTweetId\n              ? {\n                  ...t,\n                  child_tweet_ids: t.child_tweet_ids.filter((id) => id !== tweetId),\n                  children: t.children.filter((c) => c.tweet_id !== tweetId),\n                  stats: { ...t.stats, comment_count: (t.stats.comment_count || 0) - 1 },\n                }\n              : t\n          )\n      );\n      setPagination((prev) => ({ ...prev, total: prev.total - 1 }));\n\n      try {\n        const updatedTweet = await moveTweetApi(tweetId, targetBoardId, token);\n        const normalizedTweet = normalizeTweet(updatedTweet, currentUser);\n\n        setTweet(normalizedTweet);\n        tweetCache.clear();\n        return Promise.resolve(normalizedTweet);\n      } catch (err) {\n        setTweets((prev) => [\n          ...prev,\n          currentTweet,\n        ].map((t) =>\n          t.tweet_id === parentTweetId\n            ? {\n                ...t,\n                child_tweet_ids: [...t.child_tweet_ids, tweetId],\n                children: [...t.children, currentTweet],\n                stats: { ...t.stats, comment_count: (t.stats.comment_count || 0) + 1 },\n              }\n            : t\n        ));\n        setPagination((prev) => ({ ...prev, total: prev.total + 1 }));\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, boardId, currentUser, handleError, tweets]\n  );\n\n  const pinTweet = useCallback(\n    async (tweetId) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!boardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.BOARD_ID_MISSING);\n      if (!tweetId?.trim()) return handleError(new Error(), ERROR_MESSAGES.TWEET_ID_MISSING);\n\n      const currentTweet = tweets.find((t) => t.tweet_id === tweetId);\n      if (!currentTweet) return handleError(new Error(), 'Tweet not found');\n\n      setError(null);\n\n      setTweets((prev) =>\n        prev.map((t) => (t.tweet_id === tweetId ? { ...t, is_pinned: true } : t))\n      );\n\n      try {\n        const updatedTweet = await pinTweetApi(boardId, tweetId, token);\n        const normalizedTweet = normalizeTweet(updatedTweet, currentUser);\n\n        setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? normalizedTweet : t)));\n        tweetCache.clear();\n        return Promise.resolve(normalizedTweet);\n      } catch (err) {\n        setTweets((prev) =>\n          prev.map((t) => (t.tweet_id === tweetId ? { ...t, is_pinned: false } : t))\n        );\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, boardId, currentUser, handleError, tweets]\n  );\n\n  const unpinTweet = useCallback(\n    async (tweetId) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!boardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.BOARD_ID_MISSING);\n      if (!tweetId?.trim()) return handleError(new Error(), ERROR_MESSAGES.TWEET_ID_MISSING);\n\n      const currentTweet = tweets.find((t) => t.tweet_id === tweetId);\n      if (!currentTweet) return handleError(new Error(), 'Tweet not found');\n\n      setError(null);\n\n      setTweets((prev) =>\n        prev.map((t) => (t.tweet_id === tweetId ? { ...t, is_pinned: false } : t))\n      );\n\n      try {\n        const updatedTweet = await unpinTweetApi(boardId, tweetId, token);\n        const normalizedTweet = normalizeTweet(updatedTweet, currentUser);\n\n        setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? normalizedTweet : t)));\n        tweetCache.clear();\n        return Promise.resolve(normalizedTweet);\n      } catch (err) {\n        setTweets((prev) =>\n          prev.map((t) => (t.tweet_id === tweetId ? { ...t, is_pinned: true } : t))\n        );\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, boardId, currentUser, handleError, tweets]\n  );\n\n  const setReminder = useCallback(\n    async (tweetId, reminder) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!boardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.BOARD_ID_MISSING);\n      if (!tweetId?.trim()) return handleError(new Error(), ERROR_MESSAGES.TWEET_ID_MISSING);\n      if (!reminder?.schedule) return handleError(new Error(), ERROR_MESSAGES.REMINDER_INVALID);\n\n      const currentTweet = tweets.find((t) => t.tweet_id === tweetId);\n      if (!currentTweet) return handleError(new Error(), 'Tweet not found');\n\n      setError(null);\n\n      setTweets((prev) =>\n        prev.map((t) => (t.tweet_id === tweetId ? { ...t, reminder: { ...reminder, enabled: true } } : t))\n      );\n\n      try {\n        const updatedTweet = await setReminderApi(boardId, tweetId, reminder, token);\n        const normalizedTweet = normalizeTweet(updatedTweet, currentUser);\n\n        setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? normalizedTweet : t)));\n        tweetCache.clear();\n        return Promise.resolve(normalizedTweet);\n      } catch (err) {\n        setTweets((prev) =>\n          prev.map((t) => (t.tweet_id === tweetId ? { ...t, reminder: currentTweet.reminder } : t))\n        );\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, boardId, currentUser, handleError, tweets]\n  );\n\n  const shareTweet = useCallback(\n    async (tweetId, sharedTo) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!boardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.BOARD_ID_MISSING);\n      if (!tweetId?.trim()) return handleError(new Error(), ERROR_MESSAGES.TWEET_ID_MISSING);\n      if (!sharedTo?.trim()) return handleError(new Error(), ERROR_MESSAGES.SHARE_PLATFORM_MISSING);\n\n      const currentTweet = tweets.find((t) => t.tweet_id === tweetId);\n      if (!currentTweet) return handleError(new Error(), 'Tweet not found');\n\n      setError(null);\n\n      const optimisticTweet = {\n        ...currentTweet,\n        analytics: {\n          ...currentTweet.analytics,\n          shares: [\n            ...(currentTweet.analytics?.shares || []),\n            { platform: sharedTo, timestamp: new Date().toISOString(), user_id: currentUser.anonymous_id },\n          ],\n        },\n        stats: {\n          ...currentTweet.stats,\n          share_count: (currentTweet.stats.share_count || 0) + 1,\n        },\n      };\n\n      setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? optimisticTweet : t)));\n\n      try {\n        const sharedTweet = await shareTweetApi(boardId, tweetId, sharedTo, token);\n        const normalizedTweet = normalizeTweet(sharedTweet, currentUser);\n\n        setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? normalizedTweet : t)));\n        tweetCache.clear();\n        return Promise.resolve(normalizedTweet);\n      } catch (err) {\n        setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? currentTweet : t)));\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, boardId, currentUser, handleError, tweets]\n  );\n\n  const resetState = useCallback(() => {\n    setTweets([]);\n    setTweet(null);\n    setPagination({ page: 1, limit: CONFIG.DEFAULT_LIMIT, total: 0, hasMore: true });\n    setBoardInfo(null);\n    setError(null);\n    tweetCache.clear();\n  }, []);\n\n  useEffect(() => {\n    if (!token || !boardId || skipInitialFetch) {\n      resetState();\n      return;\n    }\n\n    const controller = new AbortController();\n    debouncedFetchTweetsList({}, controller.signal, false, (err, result) => {\n      if (err && err.name !== 'AbortError') {\n        setError(err.message || ERROR_MESSAGES.GENERIC);\n      }\n    });\n\n    return () => {\n      controller.abort();\n      debouncedFetchTweetsList.cancel();\n    };\n  }, [token, boardId, skipInitialFetch, resetState, debouncedFetchTweetsList]);\n\n  return useMemo(\n    () => ({\n      tweets,\n      tweet,\n      setTweet,\n      setTweets,\n      pagination,\n      boardInfo,\n      error,\n      fetchTweetsList: debouncedFetchTweetsList,\n      createNewTweet,\n      updateExistingTweet,\n      toggleLikeTweet,\n      deleteExistingTweet,\n      moveTweet,\n      pinTweet,\n      unpinTweet,\n      setReminder,\n      shareTweet,\n      resetState,\n    }),\n    [\n      tweets,\n      tweet,\n      pagination,\n      boardInfo,\n      error,\n      debouncedFetchTweetsList,\n      createNewTweet,\n      updateExistingTweet,\n      toggleLikeTweet,\n      deleteExistingTweet,\n      moveTweet,\n      pinTweet,\n      unpinTweet,\n      setReminder,\n      shareTweet,\n      resetState,\n    ]\n  );\n};\n\nexport default useTweets;","/**\n * @module Board\n * @description Component for displaying and interacting with a board of tweets.\n */\nimport React, { useRef, useState, useEffect, useCallback, useMemo, memo, useReducer } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  Box,\n  IconButton,\n  Tooltip,\n  Typography,\n  Button,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  CircularProgress,\n} from \"@mui/material\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport PropTypes from \"prop-types\";\nimport {\n  RestartAlt,\n  Add,\n  ArrowBack,\n  Remove,\n  ViewList,\n  ViewModule,\n  Refresh,\n  ArrowCircleRight,\n  ArrowCircleLeft,\n} from \"@mui/icons-material\";\nimport BoardStyles from \"./BoardStyles\";\nimport { BOARD_SIZE, useBoardInteraction } from \"../../../hooks/useBoard\";\nimport { useWebSocket } from \"../../../hooks/useWebSocket\";\nimport LoadingSpinner from \"../../Layout/LoadingSpinner\";\nimport DraggableTweet from \"../Tweet/Tweet\";\nimport TweetContent from \"../Tweet/TweetContent\";\nimport TweetPopup from \"../Tweet/TweetPopup\";\nimport { useTweets } from \"../../../hooks/useTweets\";\nimport { useBoards } from \"../../../hooks/useBoards\";\nimport { useNotification } from \"../../../context/NotificationContext\";\nimport throttle from \"lodash/throttle\";\nimport debounce from \"lodash/debounce\";\n\n// Constants\nconst MAX_TWEET_LENGTH = 1000;\nconst Z_INDEX = {\n  BOARD: 10,\n  TWEET: 99,\n  POPUP: 100,\n  MODAL: 110,\n  OVERLAY: 109,\n};\n\n// Reducer for tweet popup state\nconst popupReducer = (state, action) => {\n  switch (action.type) {\n    case \"OPEN_POPUP\":\n      return {\n        visible: true,\n        x: action.x,\n        y: action.y,\n        clientX: action.clientX,\n        clientY: action.clientY,\n        replyTweet: action.replyTweet || null,\n      };\n    case \"CLOSE_POPUP\":\n      return { visible: false, x: 0, y: 0, clientX: 0, clientY: 0, replyTweet: null };\n    default:\n      return state;\n  }\n};\n\n// Reducer for edit modal state\nconst editModalReducer = (state, action) => {\n  switch (action.type) {\n    case \"SET_EDIT_MODAL\":\n      return {\n        tweet: action.payload,\n        newStatus: action.payload?.status || \"approved\",\n        selectedBoardId: action.payload?.board_id || \"\",\n      };\n    case \"CLEAR_EDIT_MODAL\":\n      return { tweet: null, newStatus: \"\", selectedBoardId: \"\" };\n    case \"UPDATE_EDIT_CONTENT\":\n      return {\n        ...state,\n        tweet: { ...state.tweet, content: { ...state.tweet.content, value: action.value } },\n      };\n    case \"SET_NEW_STATUS\":\n      return { ...state, newStatus: action.status };\n    case \"SET_SELECTED_BOARD\":\n      return { ...state, selectedBoardId: action.boardId };\n    default:\n      return state;\n  }\n};\n\n// Custom hook for permission management\nconst usePermissions = (userRole, currentUser, tweet = null, tweets = null, bypassOwnership = false) => {\n  return useMemo(() => {\n    const isOwnerOrAdmin = [\"owner\", \"admin\"].includes(userRole);\n    const isModerator = userRole === \"moderator\";\n    const isViewer = userRole === \"viewer\";\n\n    const computePermissions = (t) => {\n      const isTweetOwner =\n        t &&\n        (t.anonymous_id === currentUser?.anonymous_id ||\n          t.user_id === currentUser?.anonymous_id ||\n          (t.username &&\n            currentUser?.username &&\n            t.username.toLowerCase() === currentUser.username.toLowerCase()));\n\n      return {\n        canEdit: bypassOwnership || isOwnerOrAdmin || isModerator || (isViewer && isTweetOwner),\n        canPin: isOwnerOrAdmin,\n        canChangeStatus: isOwnerOrAdmin,\n        canMoveBoard: isOwnerOrAdmin,\n        canCreate: isOwnerOrAdmin || isModerator || isViewer,\n        canLike: isOwnerOrAdmin || isModerator || isViewer,\n        canReply: isOwnerOrAdmin || isModerator || isViewer,\n        canDrag: t && !t.is_pinned && (bypassOwnership || isOwnerOrAdmin || isModerator || isTweetOwner),\n      };\n    };\n\n    if (tweets && Array.isArray(tweets)) {\n      const permissionsMap = new Map();\n      tweets.forEach((t) => {\n        if (t.tweet_id) {\n          permissionsMap.set(t.tweet_id, computePermissions(t));\n        }\n      });\n      return permissionsMap;\n    }\n\n    return computePermissions(tweet);\n  }, [userRole, currentUser?.anonymous_id, currentUser?.username, tweet?.tweet_id, tweets?.length, bypassOwnership]);\n};\n\nconst Board = ({\n  boardId,\n  boardTitle,\n  token,\n  currentUser,\n  userRole,\n  onLogout,\n  availableBoards = [],\n}) => {\n  const navigate = useNavigate();\n  const { showNotification } = useNotification();\n  const boardMainRef = useRef(null);\n  const isFetching = useRef(false);\n  const [isListView, setIsListView] = useState(false);\n  const [page, setPage] = useState(1);\n  const [boards, setBoards] = useState(availableBoards);\n  const [isSaving, setIsSaving] = useState(false);\n  const [highlightedTweetId, setHighlightedTweetId] = useState(null);\n  const [onlineUsers, setOnlineUsers] = useState(0);\n  const openModals = useRef(new Set());\n\n  const [popupState, dispatchPopup] = useReducer(popupReducer, {\n    visible: false,\n    x: 0,\n    y: 0,\n    clientX: 0,\n    clientY: 0,\n    replyTweet: null,\n  });\n\n  const [editModalState, dispatchEditModal] = useReducer(editModalReducer, {\n    tweet: null,\n    newStatus: \"\",\n    selectedBoardId: \"\",\n  });\n\n  const isOverlayOpen = useMemo(() => {\n    return popupState.visible || !!editModalState.tweet || openModals.current.size > 0;\n  }, [popupState.visible, editModalState.tweet]);\n\n  const handleModalStateChange = useCallback((tweetId, isOpen) => {\n    if (isOpen) {\n      openModals.current.add(tweetId);\n    } else {\n      openModals.current.delete(tweetId);\n    }\n  }, []);\n\n  const {\n    tweets,\n    tweet,\n    setTweet,\n    setTweets,\n    pagination,\n    boardInfo,\n    loading: isLoading,\n    error,\n    fetchTweetsList,\n    createNewTweet,\n    updateExistingTweet,\n    toggleLikeTweet,\n    deleteExistingTweet,\n    moveTweet,\n    pinTweet,\n    unpinTweet,\n    setReminder,\n    shareTweet,\n    resetState,\n  } = useTweets(token, boardId, currentUser, onLogout, navigate);\n\n  const { fetchBoardsList } = useBoards(token, onLogout, navigate);\n  const {\n    scale,\n    offset,\n    dragging,\n    centerBoard,\n    handleZoomButton,\n    handleMouseDown: originalHandleMouseDown,\n    handleMouseMove: originalHandleMouseMove,\n    handleMouseUp: originalHandleMouseUp,\n    handleTouchStart: originalHandleTouchStart,\n    handleTouchMove: originalHandleTouchMove,\n    handleTouchEnd: originalHandleTouchEnd,\n  } = useBoardInteraction(boardMainRef);\n\n  const permissions = usePermissions(userRole, currentUser);\n  const tweetPermissionsMap = usePermissions(userRole, currentUser, null, tweets);\n\n  const socketRef = useWebSocket(token, boardId, currentUser, setTweets, setOnlineUsers, onLogout, navigate, showNotification);\n\n  // WebSocket event listeners\n  useEffect(() => {\n    if (!socketRef.current || !boardId || !currentUser?.anonymous_id) return;\n\n    const socket = socketRef.current;\n\n    // Join the board room\n    socket.on(\"connect\", () => {\n      socket.emit(\"joinBoard\", { board_id: boardId, user_id: currentUser.anonymous_id });\n    });\n\n    // Handle online users update\n    socket.on(\"onlineUsersUpdate\", (count) => {\n      setOnlineUsers(count);\n    });\n\n    // Handle new tweet\n    socket.on(\"newTweet\", (newTweet) => {\n      newTweet.timestamp = newTweet.timestamp || new Date().toISOString();\n      setTweets((prev) => {\n        if (prev.some((t) => t.tweet_id === newTweet.tweet_id)) {\n          return prev; // Avoid duplicates\n        }\n        return [...prev, newTweet];\n      });\n    });\n\n    // Handle tweet update\n    socket.on(\"tweetUpdated\", (updatedTweet) => {\n      updatedTweet.timestamp = updatedTweet.timestamp || new Date().toISOString();\n      setTweets((prev) =>\n        prev.map((tweet) =>\n          tweet.tweet_id === updatedTweet.tweet_id ? { ...tweet, ...updatedTweet } : tweet\n        )\n      );\n    });\n\n    // Handle tweet deletion\n    socket.on(\"tweetDeleted\", ({ tweet_id }) => {\n      setTweets((prev) => prev.filter((t) => t.tweet_id !== tweet_id));\n    });\n\n    // Handle tweet like\n    socket.on(\"likeTweet\", ({ tweet_id, like_data }) => {\n      setTweets((prev) =>\n        prev.map((tweet) =>\n          tweet.tweet_id === tweet_id\n            ? {\n                ...tweet,\n                stats: { ...tweet.stats, like_count: (tweet.stats.like_count || 0) + 1 },\n                liked_by: [...(tweet.liked_by || []), like_data],\n                timestamp: new Date().toISOString(),\n              }\n            : tweet\n        )\n      );\n    });\n\n    // Handle tweet dislike\n    socket.on(\"dislikeTweet\", ({ tweet_id, user_id }) => {\n      setTweets((prev) =>\n        prev.map((tweet) =>\n          tweet.tweet_id === tweet_id\n            ? {\n                ...tweet,\n                stats: { ...tweet.stats, like_count: Math.max(0, (tweet.stats.like_count || 0) - 1) },\n                liked_by: (tweet.liked_by || []).filter((like) => like.anonymous_id !== user_id),\n                timestamp: new Date().toISOString(),\n              }\n            : tweet\n        )\n      );\n    });\n\n    // Handle tweet status update\n    socket.on(\"tweetStatusUpdated\", ({ tweet_id, status }) => {\n      setTweets((prev) =>\n        prev.map((tweet) =>\n          tweet.tweet_id === tweet_id\n            ? { ...tweet, status, timestamp: new Date().toISOString() }\n            : tweet\n        )\n      );\n    });\n\n    // Handle tweet move\n    socket.on(\"moveTweet\", ({ tweet_id, new_board_id }) => {\n      if (new_board_id !== boardId) {\n        setTweets((prev) => prev.filter((t) => t.tweet_id !== tweet_id));\n      } else {\n        setTweets((prev) => {\n          const movedTweet = prev.find((t) => t.tweet_id === tweet_id);\n          if (movedTweet) {\n            return prev; // Tweet already in this board\n          }\n          // Fetch the moved tweet if needed\n          fetchTweetsList({ page: 1, limit: 20 });\n          return prev;\n        });\n      }\n    });\n\n    // Handle tweet pin\n    socket.on(\"pinTweet\", ({ tweet_id }) => {\n      setTweets((prev) =>\n        prev.map((tweet) =>\n          tweet.tweet_id === tweet_id\n            ? { ...tweet, is_pinned: true, timestamp: new Date().toISOString() }\n            : tweet\n        )\n      );\n    });\n\n    // Handle tweet unpin\n    socket.on(\"unpinTweet\", ({ tweet_id }) => {\n      setTweets((prev) =>\n        prev.map((tweet) =>\n          tweet.tweet_id === tweet_id\n            ? { ...tweet, is_pinned: false, timestamp: new Date().toISOString() }\n            : tweet\n        )\n      );\n    });\n\n    // Handle tweet reminder set\n    socket.on(\"setReminder\", ({ tweet_id, reminder }) => {\n      setTweets((prev) =>\n        prev.map((tweet) =>\n          tweet.tweet_id === tweet_id\n            ? { ...tweet, reminder, timestamp: new Date().toISOString() }\n            : tweet\n        )\n      );\n    });\n\n    // Handle tweet share\n    socket.on(\"tweetShared\", ({ tweet_id, share_data }) => {\n      setTweets((prev) =>\n        prev.map((tweet) =>\n          tweet.tweet_id === tweet_id\n            ? {\n                ...tweet,\n                stats: { ...tweet.stats, share_count: (tweet.stats.share_count || 0) + 1 },\n                analytics: {\n                  ...tweet.analytics,\n                  shares: [...(tweet.analytics?.shares || []), share_data],\n                },\n                timestamp: new Date().toISOString(),\n              }\n            : tweet\n        )\n      );\n    });\n\n    // Handle board updates\n    socket.on(\"shareTweet\", (updatedBoard) => {\n      if (updatedBoard.board_id === boardId) {\n        showNotification(\"Board updated\", \"success\");\n      }\n    });\n\n    // Handle board deletion\n    socket.on(\"boardDeleted\", ({ board_id }) => {\n      if (board_id === boardId) {\n        showNotification(\"This board has been deleted\", \"error\");\n        navigate(\"/boards\");\n      }\n    });\n\n    // Cleanup listeners on unmount\n    return () => {\n      // The useWebSocket hook handles socket disconnection\n    };\n  }, [socketRef, boardId, currentUser?.anonymous_id, setTweets, showNotification, navigate, fetchTweetsList]);\n\n  const debouncedRefresh = useMemo(\n    () =>\n      debounce(async () => {\n        if (isFetching.current) return;\n        isFetching.current = true;\n        try {\n          setTweets([]); // Clear tweets before refresh\n          await new Promise((resolve, reject) => {\n            fetchTweetsList({ page: 1, limit: 20 }, null, false, (err, result) => {\n              if (err) reject(err);\n              else resolve(result);\n            });\n          });\n          setPage(1);\n          centerBoard();\n          showNotification(\"Board refreshed successfully!\", \"success\");\n        } catch (err) {\n          if (err.name !== \"AbortError\") {\n            showNotification(err.message || \"Failed to refresh board\", \"error\");\n          }\n        } finally {\n          isFetching.current = false;\n        }\n      }, 1000),\n    [fetchTweetsList, showNotification, centerBoard, setTweets]\n  );\n\n  useEffect(() => {\n    if (!token || !boardId) return;\n\n    const controller = new AbortController();\n    const fetchData = async () => {\n      if (isFetching.current) return;\n      isFetching.current = true;\n      try {\n        await new Promise((resolve, reject) => {\n          fetchTweetsList({ page: 1, limit: 20 }, controller.signal, false, (err, result) => {\n            if (err) reject(err);\n            else resolve(result);\n          });\n        });\n        setPage(1);\n        centerBoard();\n      } catch (err) {\n        if (err.name !== \"AbortError\") {\n          showNotification(err.message || \"Failed to load tweets\", \"error\");\n        }\n      } finally {\n        isFetching.current = false;\n      }\n    };\n\n    fetchData();\n    return () => {\n      controller.abort();\n      debouncedRefresh.cancel();\n    };\n  }, [token, boardId, fetchTweetsList, showNotification, centerBoard, debouncedRefresh]);\n\n  useEffect(() => {\n    if (!editModalState.tweet || boards.length > 0 || !permissions.canMoveBoard) return;\n\n    const controller = new AbortController();\n    const fetchBoards = async () => {\n      try {\n        const boardsData = await fetchBoardsList({}, controller.signal);\n        const validBoards = boardsData?.boards.filter((b) => b.board_id) || [];\n        setBoards(validBoards);\n      } catch (err) {\n        if (err.name !== \"AbortError\") {\n          showNotification(\"Failed to load boards\", \"error\");\n        }\n      }\n    };\n\n    fetchBoards();\n    return () => controller.abort();\n  }, [editModalState.tweet, boards, fetchBoardsList, showNotification, permissions.canMoveBoard]);\n\n  useEffect(() => {\n    const handleWheel = (e) => {\n      if (isOverlayOpen) {\n        e.preventDefault();\n      }\n    };\n    window.addEventListener(\"wheel\", handleWheel, { passive: false });\n    return () => window.removeEventListener(\"wheel\", handleWheel);\n  }, [isOverlayOpen]);\n\n  const handleOptimisticUpdate = useCallback(\n    async (tweet, optimisticUpdateFn, serverUpdateFn, rollbackFn, isNewTweet = false) => {\n      const tweetId = tweet.tweet_id;\n      try {\n        setTweets((prev) => optimisticUpdateFn(tweetId, prev));\n        await serverUpdateFn();\n      } catch (err) {\n        setTweets((prev) => rollbackFn(tweetId, prev));\n        showNotification(err.message || (isNewTweet ? \"Failed to create tweet\" : \"Failed to update tweet\"), \"error\");\n      }\n    },\n    [showNotification, setTweets]\n  );\n\n  const handleTweetCreation = useCallback(\n    async (content, x, y, scheduledAt, files, onProgress) => {\n      if (!permissions.canCreate) {\n        showNotification(\"You do not have permission to create tweets\", \"error\");\n        return;\n      }\n      if (!content?.value?.trim() && (!files || files.length === 0)) {\n        showNotification(\"Tweet must have either content or files\", \"error\");\n        return;\n      }\n      if (content?.value?.length > MAX_TWEET_LENGTH) {\n        showNotification(`Tweet exceeds ${MAX_TWEET_LENGTH} character limit`, \"error\");\n        return;\n      }\n\n      const tempTweetId = `temp-${Date.now()}`;\n      const optimisticTweet = {\n        tweet_id: tempTweetId,\n        content: {\n          type: \"text\",\n          value: content?.value || \"\",\n          metadata: { files: files ? files.map((f) => ({ fileKey: f.name, url: URL.createObjectURL(f), contentType: f.type })) : [] },\n        },\n        position: { x, y },\n        parent_tweet_id: popupState.replyTweet?.tweet_id || null,\n        status: \"approved\",\n        created_at: new Date().toISOString(),\n        anonymous_id: currentUser.anonymous_id,\n        username: currentUser.username,\n        stats: { like_count: 0, view_count: 0, comment_count: 0, share_count: 0 },\n        is_pinned: false,\n        board_id: boardId,\n        children: [],\n      };\n\n      await handleOptimisticUpdate(\n        optimisticTweet,\n        (tweetId, tweets) => [...tweets, optimisticTweet],\n        async () => {\n          const newTweet = await createNewTweet(\n            content,\n            x,\n            y,\n            popupState.replyTweet?.tweet_id || null,\n            false,\n            \"approved\",\n            scheduledAt || null,\n            null,\n            files || [],\n            onProgress\n          );\n          setTweets((prev) =>\n            prev.map((t) => (t.tweet_id === tempTweetId ? newTweet : t))\n          );\n          // Emit the new tweet via WebSocket\n          socketRef.current?.emit(\"newTweet\", newTweet);\n        },\n        (tweetId, tweets) => tweets.filter((t) => t.tweet_id !== tweetId),\n        true\n      );\n\n      dispatchPopup({ type: \"CLOSE_POPUP\" });\n    },\n    [permissions.canCreate, createNewTweet, popupState.replyTweet, showNotification, currentUser, boardId, handleOptimisticUpdate, setTweets, socketRef]\n  );\n\n  const handleReply = useCallback(\n    (tweet) => {\n      if (!permissions.canReply) {\n        showNotification(\"You do not have permission to reply to tweets\", \"error\");\n        return;\n      }\n      const clientX = tweet.position.x * scale + offset.x;\n      const clientY = tweet.position.y * scale + offset.y;\n      dispatchPopup({ type: \"OPEN_POPUP\", x: tweet.position.x, y: tweet.position.y, clientX, clientY, replyTweet: tweet });\n    },\n    [permissions.canReply, scale, offset, showNotification]\n  );\n\n  const throttlePopup = useMemo(\n    () =>\n      throttle((x, y, clientX, clientY) => {\n        if (!permissions.canCreate) {\n          showNotification(\"You do not have permission to create tweets\", \"error\");\n          return;\n        }\n        dispatchPopup({ type: \"OPEN_POPUP\", x, y, clientX, clientY });\n      }, 300),\n    [permissions.canCreate, showNotification]\n  );\n\n  const handleMouseDown = useCallback(\n    (e) => {\n      if (isOverlayOpen) {\n        e.preventDefault();\n        return;\n      }\n      originalHandleMouseDown(e);\n    },\n    [isOverlayOpen, originalHandleMouseDown]\n  );\n\n  const handleMouseMove = useCallback(\n    (e) => {\n      if (isOverlayOpen) return;\n      originalHandleMouseMove(e);\n    },\n    [isOverlayOpen, originalHandleMouseMove]\n  );\n\n  const handleMouseUpWithPopup = useCallback(\n    (e) => {\n      if (isOverlayOpen) return;\n      if (e.target.closest(\".tweet-card, .tweet-popup, .MuiIconButton-root, .MuiButton-root\")) {\n        originalHandleMouseUp(e);\n        return;\n      }\n      originalHandleMouseUp(e, throttlePopup);\n    },\n    [isOverlayOpen, originalHandleMouseUp, throttlePopup]\n  );\n\n  const handleTouchStart = useCallback(\n    (e) => {\n      if (isOverlayOpen) {\n        return;\n      }\n      originalHandleTouchStart(e);\n    },\n    [isOverlayOpen, originalHandleTouchStart]\n  );\n\n  const handleTouchMove = useCallback(\n    (e) => {\n      if (isOverlayOpen) {\n        e.preventDefault();\n        return;\n      }\n      originalHandleTouchMove(e);\n    },\n    [isOverlayOpen, originalHandleTouchMove]\n  );\n\n  const handleTouchEndWithPopup = useCallback(\n    (e) => {\n      if (isOverlayOpen) return;\n      if (e.target.closest(\".tweet-card, .tweet-popup, .MuiIconButton-root, .MuiButton-root\")) {\n        originalHandleTouchEnd(e);\n        return;\n      }\n      originalHandleTouchEnd(e, throttlePopup);\n    },\n    [isOverlayOpen, originalHandleTouchEnd, throttlePopup]\n  );\n\n  const handleEditTweet = useCallback(\n    (tweet) => {\n      const tweetPermissions = tweetPermissionsMap.get(tweet.tweet_id);\n      if (!tweetPermissions?.canEdit) {\n        showNotification(\"You do not have permission to edit this tweet\", \"error\");\n        return;\n      }\n      dispatchEditModal({ type: \"SET_EDIT_MODAL\", payload: { ...tweet, availableBoards: boards } });\n    },\n    [tweetPermissionsMap, boards, showNotification]\n  );\n\n  const handlePinToggle = useCallback(\n    async (tweet) => {\n      if (!permissions.canPin) {\n        showNotification(\"You do not have permission to pin tweets\", \"error\");\n        return;\n      }\n      const isPinning = !tweet.is_pinned;\n      await handleOptimisticUpdate(\n        tweet,\n        (tweetId, tweets) =>\n          tweets.map((t) =>\n            t.tweet_id === tweetId ? { ...t, is_pinned: isPinning } : t\n          ),\n        async () => {\n          const action = isPinning ? pinTweet : unpinTweet;\n          await action(tweet.tweet_id);\n          // Emit the pin/unpin event via WebSocket\n          socketRef.current?.emit(isPinning ? \"pinTweet\" : \"unpinTweet\", { tweet_id: tweet.tweet_id });\n        },\n        (tweetId, tweets) =>\n          tweets.map((t) =>\n            t.tweet_id === tweetId ? { ...t, is_pinned: tweet.is_pinned } : t\n          ),\n        false\n      );\n      showNotification(`Tweet ${isPinning ? \"pinned\" : \"unpinned\"} successfully!`, \"success\");\n    },\n    [permissions.canPin, pinTweet, unpinTweet, showNotification, handleOptimisticUpdate, socketRef]\n  );\n\n  const handleSaveEditedTweet = useCallback(\n    async () => {\n      if (!editModalState.tweet) return;\n      const tweetPermissions = tweetPermissionsMap.get(editModalState.tweet.tweet_id);\n      if (!tweetPermissions?.canEdit) {\n        showNotification(\"You do not have permission to edit this tweet\", \"error\");\n        return;\n      }\n      if (!editModalState.tweet.content?.value?.trim()) {\n        showNotification(\"Tweet content cannot be empty\", \"error\");\n        return;\n      }\n      if (editModalState.tweet.content?.value?.length > MAX_TWEET_LENGTH) {\n        showNotification(`Tweet exceeds ${MAX_TWEET_LENGTH} character limit`, \"error\");\n        return;\n      }\n\n      setIsSaving(true);\n      const updatedTweet = {\n        ...editModalState.tweet,\n        content: {\n          type: editModalState.tweet.content?.type || \"text\",\n          value: editModalState.tweet.content?.value || \"\",\n          metadata: editModalState.tweet.content?.metadata || {},\n        },\n        status: tweetPermissions.canChangeStatus ? editModalState.newStatus : editModalState.tweet.status,\n        board_id: tweetPermissions.canMoveBoard ? editModalState.selectedBoardId : editModalState.tweet.board_id,\n      };\n\n      await handleOptimisticUpdate(\n        updatedTweet,\n        (tweetId, tweets) =>\n          tweets.map((t) => (t.tweet_id === tweetId ? updatedTweet : t)),\n        async () => {\n          await updateExistingTweet(editModalState.tweet.tweet_id, {\n            content: updatedTweet.content,\n            status: tweetPermissions.canChangeStatus ? editModalState.newStatus : editModalState.tweet.status,\n            position: editModalState.tweet.position,\n          });\n          if (tweetPermissions.canMoveBoard && editModalState.tweet.board_id !== editModalState.selectedBoardId) {\n            await moveTweet(editModalState.tweet.tweet_id, editModalState.selectedBoardId);\n            socketRef.current?.emit(\"moveTweet\", {\n              tweet_id: editModalState.tweet.tweet_id,\n              new_board_id: editModalState.selectedBoardId,\n            });\n          }\n          // Emit update event via WebSocket\n          socketRef.current?.emit(\"tweetUpdated\", updatedTweet);\n          if (tweetPermissions.canChangeStatus && editModalState.newStatus !== editModalState.tweet.status) {\n            socketRef.current?.emit(\"tweetStatusUpdated\", {\n              tweet_id: editModalState.tweet.tweet_id,\n              status: editModalState.newStatus,\n            });\n          }\n        },\n        (tweetId, tweets) => tweets,\n        false\n      );\n\n      setIsSaving(false);\n      dispatchEditModal({ type: \"CLEAR_EDIT_MODAL\" });\n    },\n    [editModalState, updateExistingTweet, moveTweet, showNotification, tweetPermissionsMap, handleOptimisticUpdate, socketRef]\n  );\n\n  const handleLikeTweet = useCallback(\n    async (tweetId, isLiked) => {\n      if (!permissions.canLike) {\n        showNotification(\"You do not have permission to like tweets\", \"error\");\n        return;\n      }\n      const likeData = { anonymous_id: currentUser.anonymous_id, username: currentUser.username, liked_at: new Date() };\n      await handleOptimisticUpdate(\n        { tweet_id: tweetId },\n        (tweetId, tweets) =>\n          tweets.map((t) =>\n            t.tweet_id === tweetId\n              ? {\n                  ...t,\n                  stats: {\n                    ...t.stats,\n                    like_count: isLiked\n                      ? Math.max(0, (t.stats.like_count || 0) - 1)\n                      : (t.stats.like_count || 0) + 1,\n                  },\n                  liked_by: isLiked\n                    ? (t.liked_by || []).filter((l) => l.anonymous_id !== currentUser.anonymous_id)\n                    : [...(t.liked_by || []), likeData],\n                }\n              : t\n          ),\n        async () => {\n          const updatedTweet = await toggleLikeTweet(tweetId, isLiked);\n          // Emit like/dislike event via WebSocket\n          socketRef.current?.emit(isLiked ? \"dislikeTweet\" : \"likeTweet\", {\n            tweet_id: tweetId,\n            like_data: isLiked ? null : likeData,\n            user_id: isLiked ? currentUser.anonymous_id : null,\n          });\n        },\n        (tweetId, tweets) => tweets,\n        false\n      );\n    },\n    [permissions.canLike, toggleLikeTweet, showNotification, currentUser, handleOptimisticUpdate, socketRef]\n  );\n\n  const handleDeleteTweet = useCallback(\n    async (tweetId) => {\n      const tweetPermissions = tweetPermissionsMap.get(tweetId);\n      if (!tweetPermissions?.canEdit) {\n        showNotification(\"You do not have permission to delete this tweet\", \"error\");\n        return;\n      }\n      await handleOptimisticUpdate(\n        { tweet_id: tweetId },\n        (tweetId, tweets) => tweets.filter((t) => t.tweet_id !== tweetId),\n        async () => {\n          await deleteExistingTweet(tweetId);\n          // Emit delete event via WebSocket\n          socketRef.current?.emit(\"tweetDeleted\", { tweet_id: tweetId });\n        },\n        (tweetId, tweets) => tweets,\n        false\n      );\n    },\n    [deleteExistingTweet, showNotification, tweetPermissionsMap, handleOptimisticUpdate, socketRef]\n  );\n\n  const handleSetReminder = useCallback(\n    async (tweetId, reminder) => {\n      const tweetPermissions = tweetPermissionsMap.get(tweetId);\n      if (!tweetPermissions?.canEdit) {\n        showNotification(\"You do not have permission to set reminders\", \"error\");\n        return;\n      }\n      await handleOptimisticUpdate(\n        { tweet_id: tweetId },\n        (tweetId, tweets) =>\n          tweets.map((t) => (t.tweet_id === tweetId ? { ...t, reminder } : t)),\n        async () => {\n          await setReminder(tweetId, reminder);\n          // Emit reminder event via WebSocket\n          socketRef.current?.emit(\"setReminder\", { tweet_id: tweetId, reminder });\n        },\n        (tweetId, tweets) => tweets,\n        false\n      );\n    },\n    [setReminder, showNotification, tweetPermissionsMap, handleOptimisticUpdate, socketRef]\n  );\n\n  const handleShareTweet = useCallback(\n    async (tweetId, sharedTo) => {\n      if (!permissions.canReply) {\n        showNotification(\"You do not have permission to share tweets\", \"error\");\n        return;\n      }\n      const shareData = { user_id: currentUser.anonymous_id, shared_to: sharedTo, shared_at: new Date() };\n      await handleOptimisticUpdate(\n        { tweet_id: tweetId },\n        (tweetId, tweets) =>\n          tweets.map((t) =>\n            t.tweet_id === tweetId\n              ? {\n                  ...t,\n                  stats: { ...t.stats, share_count: (t.stats.share_count || 0) + 1 },\n                  analytics: {\n                    ...t.analytics,\n                    shares: [...(t.analytics?.shares || []), shareData],\n                  },\n                }\n              : t\n          ),\n        async () => {\n          await shareTweet(tweetId, sharedTo);\n          // Emit share event via WebSocket\n          socketRef.current?.emit(\"shareTweet\", { tweet_id: tweetId, share_data: shareData });\n        },\n        (tweetId, tweets) => tweets,\n        false\n      );\n    },\n    [permissions.canReply, shareTweet, showNotification, currentUser, handleOptimisticUpdate, socketRef]\n  );\n\n  const handleLoadMore = useCallback(async () => {\n    if (isFetching.current || !pagination.hasMore) return;\n    isFetching.current = true;\n    try {\n      await new Promise((resolve, reject) => {\n        fetchTweetsList({ page: page + 1, limit: 20 }, null, true, (err, result) => {\n          if (err) reject(err);\n          else resolve(result);\n        });\n      });\n      setPage((prev) => prev + 1);\n    } catch (err) {\n      if (err.name !== \"AbortError\") {\n        showNotification(err.message || \"Failed to load more tweets\", \"error\");\n      }\n    } finally {\n      isFetching.current = false;\n    }\n  }, [fetchTweetsList, page, pagination.hasMore, showNotification]);\n\n  const handlePrevPage = useCallback(async () => {\n    if (isFetching.current || page <= 1) return;\n    isFetching.current = true;\n    try {\n      setTweets([]);\n      await new Promise((resolve, reject) => {\n        fetchTweetsList({ page: page - 1, limit: 20 }, null, false, (err, result) => {\n          if (err) reject(err);\n          else resolve(result);\n        });\n      });\n      setPage((prev) => prev - 1);\n      centerBoard();\n    } catch (err) {\n      if (err.name !== \"AbortError\") {\n        showNotification(err.message || \"Failed to load previous page\", \"error\");\n      }\n    } finally {\n      isFetching.current = false;\n    }\n  }, [fetchTweetsList, page, showNotification, centerBoard, setTweets]);\n\n  const handleNextPage = useCallback(async () => {\n    if (isFetching.current || !pagination.hasMore) return;\n    isFetching.current = true;\n    try {\n      setTweets([]); // Clear tweets before fetching\n      await new Promise((resolve, reject) => {\n        fetchTweetsList({ page: page + 1, limit: 20 }, null, false, (err, result) => {\n          if (err) reject(err);\n          else resolve(result);\n        });\n      });\n      setPage((prev) => prev + 1);\n      centerBoard();\n    } catch (err) {\n      if (err.name !== \"AbortError\") {\n        showNotification(err.message || \"Failed to load next page\", \"error\");\n      }\n    } finally {\n      isFetching.current = false;\n    }\n  }, [fetchTweetsList, page, pagination.hasMore, showNotification, centerBoard, setTweets]);\n\n  const getRelatedTweetIds = useCallback(\n    (tweetId) => {\n      const tweetIds = new Set([tweetId]);\n      const tweet = tweets.find((t) => t.tweet_id === tweetId);\n      if (tweet) {\n        if (tweet.parent_tweet_id) tweetIds.add(tweet.parent_tweet_id);\n        tweet.child_tweet_ids?.forEach((id) => tweetIds.add(id));\n      }\n      return Array.from(tweetIds);\n    },\n    [tweets]\n  );\n\n  const handleViewToggle = useCallback(() => {\n    setIsListView((prev) => {\n      if (prev) centerBoard();\n      return !prev;\n    });\n  }, [centerBoard]);\n\n  const validTweets = useMemo(() => {\n    const seenIds = new Set();\n    return tweets\n      .filter((tweet) => {\n        const isValid =\n          tweet &&\n          tweet.tweet_id &&\n          typeof tweet.tweet_id === \"string\" &&\n          tweet.tweet_id.trim() &&\n          !seenIds.has(tweet.tweet_id) &&\n          tweet.position &&\n          typeof tweet.position.x === \"number\" &&\n          typeof tweet.position.y === \"number\" &&\n          !isNaN(tweet.position.x) &&\n          !isNaN(tweet.position.y) &&\n          tweet.content &&\n          typeof tweet.content === \"object\" &&\n          tweet.content.type &&\n          tweet.content.value !== undefined &&\n          tweet.content.metadata;\n        seenIds.add(tweet.tweet_id);\n        return isValid;\n      })\n      .sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\n  }, [tweets]);\n\n  const tweetProps = useMemo(\n    () => ({\n      currentUser,\n      userRole,\n      onLike: handleLikeTweet,\n      onDelete: handleDeleteTweet,\n      onReply: handleReply,\n      onReplyHover: setHighlightedTweetId,\n      onEdit: handleEditTweet,\n      onPinToggle: handlePinToggle,\n      onSetReminder: handleSetReminder,\n      onShare: handleShareTweet,\n      availableBoards: editModalState.tweet?.availableBoards || boards,\n      boardId,\n      isListView,\n      onModalStateChange: handleModalStateChange,\n    }),\n    [\n      currentUser,\n      userRole,\n      handleLikeTweet,\n      handleDeleteTweet,\n      handleReply,\n      handleEditTweet,\n      handlePinToggle,\n      handleSetReminder,\n      handleShareTweet,\n      editModalState.tweet,\n      boards,\n      boardId,\n      isListView,\n      handleModalStateChange,\n    ]\n  );\n\n  const renderTweet = useCallback(\n    (tweet) => {\n      const replyCount = tweet.child_tweet_ids?.length || 0;\n      const relatedTweetIds = highlightedTweetId ? getRelatedTweetIds(highlightedTweetId) : [];\n      const tweetContent = (\n        <TweetContent\n          key={`content-${tweet.tweet_id}`}\n          tweet={tweet}\n          {...tweetProps}\n          isParentHighlighted={relatedTweetIds.includes(tweet.tweet_id)}\n          replyCount={replyCount}\n          parentTweet={\n            tweet.parent_tweet_id\n              ? tweets.find((t) => t.tweet_id === tweet.parent_tweet_id)?.content?.value || null\n              : null\n          }\n          relatedTweetIds={relatedTweetIds}\n        />\n      );\n\n      // Animation variants for tweets\n      const tweetVariants = {\n        initial: {\n          opacity: 0,\n          x: Math.random() * 50 - 25, // Random slide-in from left/right\n          y: Math.random() * 50 - 25, // Random slide-in from top/bottom\n        },\n        animate: {\n          opacity: 1,\n          x: 0,\n          y: 0,\n          transition: { duration: 0.3, ease: \"easeOut\" },\n        },\n        exit: {\n          opacity: 0,\n          x: Math.random() * 100 - 50, // Random scatter on exit\n          y: Math.random() * 100 - 50, // Random scatter on exit\n          transition: { duration: 0.3, ease: \"easeIn\" },\n        },\n      };\n\n      if (isListView) {\n        return (\n          <motion.div\n            key={`tweet-${tweet.tweet_id}`}\n            variants={tweetVariants}\n            initial=\"initial\"\n            animate=\"animate\"\n            transition={{ duration: 0.3 }}\n            exit=\"exit\"\n            sx={BoardStyles.boardListViewTweet(tweet.parent_tweet_id)}\n          >\n            {tweetContent}\n          </motion.div>\n        );\n      }\n\n      return (\n        <DraggableTweet\n          key={`tweet-${tweet.tweet_id}`}\n          tweet={tweet}\n          onStop={(e, data) => {\n            if (e.target.closest(\".MuiIconButton-root, .MuiTypography-root, .MuiChip-root\")) return;\n            updateExistingTweet(tweet.tweet_id, { position: { x: data.x, y: data.y } }).then(() => {\n              socketRef.current?.emit(\"tweetUpdated\", {\n                tweet_id: tweet.tweet_id,\n                position: { x: data.x, y: data.y },\n                timestamp: new Date().toISOString(),\n              });\n            });\n          }}\n          currentUser={currentUser}\n          userRole={userRole}\n          scale={scale}\n        >\n          <motion.div variants={tweetVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n            {tweetContent}\n          </motion.div>\n        </DraggableTweet>\n      );\n    },\n    [highlightedTweetId, getRelatedTweetIds, tweets, tweetProps, updateExistingTweet, currentUser, userRole, isListView, scale, socketRef]\n  );\n\n  const renderedTweets = useMemo(() => {\n    if (!validTweets.length) return null;\n    return <AnimatePresence>{validTweets.map((tweet) => renderTweet(tweet))}</AnimatePresence>;\n  }, [validTweets, renderTweet]);\n\n  const renderError = useCallback(\n    () => (\n      <Box sx={BoardStyles.boardErrorContainer}>\n        <Typography sx={BoardStyles.boardErrorText}>{error || \"An error occurred\"}</Typography>\n        <Button\n          variant=\"contained\"\n          onClick={debouncedRefresh}\n          sx={BoardStyles.boardErrorButton}\n          aria-label=\"Retry fetching tweets\"\n        >\n          Retry\n        </Button>\n      </Box>\n    ),\n    [error, debouncedRefresh]\n  );\n\n  if (isLoading && page === 1) return <LoadingSpinner />;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      transition={{ duration: 0.4 }}\n      style={{\n        ...BoardStyles.boardContainer,\n        overflow: \"hidden\",\n        height: \"100vh\",\n        width: \"100vw\",\n        position: \"relative\",\n        zIndex: Z_INDEX.BOARD,\n      }}\n    >\n      <Box sx={{ flex: 1, display: \"flex\", flexDirection: \"column\", position: \"relative\" }}>\n        {isOverlayOpen && (\n          <Box\n            sx={{\n              position: \"fixed\",\n              top: 0,\n              left: 0,\n              right: 0,\n              bottom: 0,\n              backgroundColor: \"rgba(0, 0, 0, 0.1)\",\n              zIndex: Z_INDEX.OVERLAY,\n              pointerEvents: \"auto\",\n            }}\n            onClick={(e) => e.stopPropagation()}\n            onMouseDown={(e) => e.preventDefault()}\n            onTouchStart={(e) => e.preventDefault()}\n            aria-hidden=\"true\"\n          />\n        )}\n\n        <Box sx={BoardStyles.boardBackButtonContainer}>\n          <Tooltip title=\"Go back\">\n            <IconButton\n              onClick={() => navigate(-1)}\n              aria-label=\"Previous page\"\n              sx={BoardStyles.boardBackButton}\n            >\n              <ArrowBack />\n            </IconButton>\n          </Tooltip>\n        </Box>\n        <Box\n          sx={{\n            position: \"absolute\",\n            top: 4,\n            right: 12,\n            zIndex: 100,\n            display: \"flex\",\n            alignItems: \"center\",\n            gap: 1,\n          }}\n        >\n          <Tooltip title=\"Online users\">\n            <Typography variant=\"caption\" sx={{ color: \"text.secondary\" }}>\n              Online: {onlineUsers}\n            </Typography>\n          </Tooltip>\n        </Box>\n\n        <Box\n          ref={boardMainRef}\n          sx={{\n            ...BoardStyles.boardMain(isListView, dragging),\n            touchAction: isOverlayOpen ? \"none\" : \"auto\",\n            userSelect: \"none\",\n            height: \"100%\",\n            width: \"100%\",\n            overflowY: isListView && !isOverlayOpen ? \"auto\" : \"hidden\",\n          }}\n          onMouseDown={isListView ? undefined : handleMouseDown}\n          onMouseMove={isListView ? undefined : handleMouseMove}\n          onMouseUp={isListView ? undefined : handleMouseUpWithPopup}\n          onTouchStart={isListView ? undefined : handleTouchStart}\n          onTouchMove={isListView ? undefined : handleTouchMove}\n          onTouchEnd={isListView ? undefined : handleTouchEndWithPopup}\n          role=\"region\"\n          aria-label={isListView ? \"Tweet list view\" : \"Interactive board canvas\"}\n          aria-live=\"polite\"\n          tabIndex={0}\n        >\n          {error && renderError()}\n\n          <motion.div\n            initial={{ opacity: 0, scale: isListView ? 0.95 : 1 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: isListView ? 0.95 : 1 }}\n            transition={{ duration: 0.3, ease: \"easeInOut\" }}\n          >\n            {isListView ? (\n              <Box sx={BoardStyles.boardListViewContainer}>\n                {validTweets.length === 0 ? (\n                  <Typography sx={BoardStyles.boardEmptyMessage}>\n                    No tweets yet. Create one to get started!\n                  </Typography>\n                ) : (\n                  <motion.div\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    exit={{ opacity: 0, y: -20 }}\n                    transition={{ duration: 0.3 }}\n                  >\n                    {renderedTweets}\n                    {isLoading && <LoadingSpinner />}\n                    {tweets.length < pagination.total && (\n                      <Button\n                        variant=\"outlined\"\n                        onClick={handleLoadMore}\n                        sx={{ mt: 2, alignSelf: \"center\" }}\n                        aria-label=\"Load more tweets\"\n                        disabled={isLoading || isOverlayOpen}\n                      >\n                        Load More\n                      </Button>\n                    )}\n                  </motion.div>\n                )}\n              </Box>\n            ) : (\n              <Box sx={BoardStyles.boardCanvas(scale, offset)}>\n                <Box sx={BoardStyles.boardTitleContainer(scale)}>\n                  <Typography sx={BoardStyles.boardTitle(boardTitle.length)}>\n                    {boardTitle}\n                  </Typography>\n                </Box>\n                {validTweets.length === 0 ? (\n                  <Box sx={BoardStyles.boardEmptyMessage}>\n                    <Typography variant=\"body1\" color=\"text.secondary\">\n                      No tweets yet. Tap or click anywhere to create one!\n                    </Typography>\n                  </Box>\n                ) : (\n                  renderedTweets\n                )}\n                {popupState.visible && (\n                  <TweetPopup\n                    x={popupState.x}\n                    y={popupState.y}\n                    clientX={popupState.clientX}\n                    clientY={popupState.clientY}\n                    onSubmit={handleTweetCreation}\n                    onClose={() => dispatchPopup({ type: \"CLOSE_POPUP\" })}\n                    scale={scale}\n                    offset={offset}\n                    zIndex={Z_INDEX.POPUP}\n                    parentTweet={popupState.replyTweet}\n                  />\n                )}\n              </Box>\n            )}\n          </motion.div>\n\n          <Box\n            sx={{\n              ...BoardStyles.boardControlsContainer,\n              position: \"fixed\",\n              bottom: { xs: 8, sm: 16 },\n              right: { xs: 8, sm: 16 },\n              display: \"flex\",\n              flexDirection: \"column\",\n              gap: { xs: 0.5, sm: 1 },\n              pointerEvents: isOverlayOpen ? \"none\" : \"auto\",\n            }}\n          >\n            <Tooltip title={isListView ? \"Switch to board view\" : \"Switch to list view\"}>\n              <Button\n                variant=\"contained\"\n                onClick={handleViewToggle}\n                aria-label={isListView ? \"Show as board\" : \"Show as list\"}\n                sx={{\n                  ...BoardStyles.boardViewToggleButton,\n                  fontSize: { xs: \"0.75rem\", sm: \"0.875rem\" },\n                  padding: { xs: \"4px 8px\", sm: \"6px 16px\" },\n                  pointerEvents: \"auto\",\n                }}\n                disabled={isOverlayOpen}\n              >\n                {isListView ? \"Board\" : \"List\"}\n              </Button>\n            </Tooltip>\n            <Tooltip title=\"Refresh board\">\n              <IconButton\n                onClick={debouncedRefresh}\n                size=\"small\"\n                aria-label=\"Refresh board\"\n                sx={{ ...BoardStyles.boardZoomButton, pointerEvents: \"auto\" }}\n                disabled={isLoading || isOverlayOpen}\n              >\n                <Refresh fontSize=\"small\" />\n              </IconButton>\n            </Tooltip>\n            <Tooltip title=\"Previous page\">\n              <IconButton\n                onClick={handlePrevPage}\n                size=\"small\"\n                aria-label=\"Previous page of tweets\"\n                sx={{\n                  ...BoardStyles.boardViewToggleButton,\n                  fontSize: { xs: \"0.75rem\", sm: \"0.875rem\" },\n                  padding: { xs: \"4px 8px\", sm: \"6px 16px\" },\n                  pointerEvents: \"auto\",\n                }}\n                disabled={isLoading || isOverlayOpen || page <= 1}\n              >\n                <ArrowCircleLeft fontSize=\"small\" />\n              </IconButton>\n            </Tooltip>\n            <Tooltip title=\"Next page\">\n              <IconButton\n                onClick={handleNextPage}\n                size=\"small\"\n                aria-label=\"Next page of tweets\"\n                sx={{\n                  ...BoardStyles.boardViewToggleButton,\n                  fontSize: { xs: \"0.75rem\", sm: \"0.875rem\" },\n                  padding: { xs: \"4px 8px\", sm: \"6px 16px\" },\n                  pointerEvents: \"auto\",\n                }}\n                disabled={isLoading || isOverlayOpen || !pagination.hasMore}\n              >\n                <ArrowCircleRight fontSize=\"small\" />\n              </IconButton>\n            </Tooltip>\n            {!isListView && (\n              <>\n                <AnimatePresence>\n                  {Math.abs(scale - 1) > 0.01 && (\n                    <motion.div\n                      initial={{ opacity: 0, scale: 0.9 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      exit={{ opacity: 0, scale: 0.9 }}\n                      transition={{ duration: 0.2 }}\n                    >\n                      <Tooltip title=\"Reset zoom\">\n                        <IconButton\n                          onClick={() => handleZoomButton(\"reset\")}\n                          size=\"small\"\n                          aria-label=\"Reset board zoom to 100%\"\n                          sx={{ ...BoardStyles.boardZoomButton, pointerEvents: \"auto\" }}\n                          disabled={isOverlayOpen}\n                        >\n                          <RestartAlt fontSize=\"small\" />\n                        </IconButton>\n                      </Tooltip>\n                    </motion.div>\n                  )}\n                </AnimatePresence>\n                <Tooltip title=\"Zoom out\">\n                  <IconButton\n                    onClick={() => handleZoomButton(\"out\")}\n                    size=\"small\"\n                    aria-label=\"Zoom out board\"\n                    sx={{ ...BoardStyles.boardZoomButton, pointerEvents: \"auto\" }}\n                    disabled={isOverlayOpen}\n                  >\n                    <Remove fontSize=\"small\" />\n                  </IconButton>\n                </Tooltip>\n                <Typography\n                  sx={{\n                    ...BoardStyles.boardZoomText,\n                    fontSize: { xs: \"0.75rem\", sm: \"0.875rem\" },\n                  }}\n                >\n                  {Math.round(scale * 100)}%\n                </Typography>\n                <Tooltip title=\"Zoom in\">\n                  <IconButton\n                    onClick={() => handleZoomButton(\"in\")}\n                    size=\"small\"\n                    aria-label=\"Zoom in board\"\n                    sx={{ ...BoardStyles.boardZoomButton, pointerEvents: \"auto\" }}\n                    disabled={isOverlayOpen}\n                  >\n                    <Add fontSize=\"small\" />\n                  </IconButton>\n                </Tooltip>\n              </>\n            )}\n          </Box>\n        </Box>\n\n        {editModalState.tweet && (\n          <Dialog\n            open\n            onClose={() => dispatchEditModal({ type: \"CLEAR_EDIT_MODAL\" })}\n            maxWidth=\"sm\"\n            fullWidth\n            sx={{ ...BoardStyles.boardEditDialog, zIndex: Z_INDEX.MODAL }}\n            onKeyDown={(e) => e.key === \"Escape\" && !isSaving && dispatchEditModal({ type: \"CLEAR_EDIT_MODAL\" })}\n            aria-describedby=\"edit-tweet-description\"\n            disableEscapeKeyDown={isSaving}\n          >\n            <DialogTitle sx={BoardStyles.boardEditDialogTitle}>Edit Tweet</DialogTitle>\n            <DialogContent sx={BoardStyles.boardEditDialogContent}>\n              <Typography id=\"edit-tweet-description\" sx={{ display: \"none\" }}>\n                Edit the content, status, or board of the tweet.\n              </Typography>\n              <TextField\n                multiline\n                fullWidth\n                label=\"Tweet Content\"\n                value={editModalState.tweet.content?.value || \"\"}\n                onChange={(e) => dispatchEditModal({ type: \"UPDATE_EDIT_CONTENT\", value: e.target.value })}\n                minRows={3}\n                inputProps={{ maxLength: MAX_TWEET_LENGTH }}\n                error={(editModalState.tweet.content?.value?.length || 0) > MAX_TWEET_LENGTH}\n                helperText={\n                  (editModalState.tweet.content?.value?.length || 0) > MAX_TWEET_LENGTH\n                    ? `Tweet exceeds ${MAX_TWEET_LENGTH} characters`\n                    : `${editModalState.tweet.content?.value?.length || 0}/${MAX_TWEET_LENGTH}`\n                }\n                sx={BoardStyles.boardEditTextField}\n                aria-label=\"Tweet content\"\n                autoFocus\n              />\n              {permissions.canChangeStatus && (\n                <FormControl fullWidth sx={BoardStyles.boardEditFormControl}>\n                  <InputLabel id=\"status-label\">Tweet Status</InputLabel>\n                  <Select\n                    labelId=\"status-label\"\n                    value={editModalState.newStatus}\n                    label=\"Tweet Status\"\n                    onChange={(e) => dispatchEditModal({ type: \"SET_NEW_STATUS\", status: e.target.value })}\n                    aria-label=\"Tweet status\"\n                  >\n                    {[\"pending\", \"approved\", \"rejected\", \"announcement\", \"reminder\", \"pinned\", \"archived\"].map(\n                      (status) => (\n                        <MenuItem key={status} value={status}>\n                          {status.charAt(0).toUpperCase() + status.slice(1)}\n                        </MenuItem>\n                      )\n                    )}\n                  </Select>\n                </FormControl>\n              )}\n              {permissions.canMoveBoard && boards.length > 0 && (\n                <FormControl fullWidth sx={BoardStyles.boardEditFormControl}>\n                  <InputLabel id=\"board-label\">Move to Board</InputLabel>\n                  <Select\n                    labelId=\"board-label\"\n                    value={editModalState.selectedBoardId}\n                    label=\"Move to Board\"\n                    onChange={(e) => dispatchEditModal({ type: \"SET_SELECTED_BOARD\", boardId: e.target.value })}\n                    aria-label=\"Move to board\"\n                  >\n                    {boards.map((board) => (\n                      <MenuItem key={board.board_id} value={board.board_id}>\n                        {board.title || board.name || \"Untitled Board\"}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              )}\n            </DialogContent>\n            <DialogActions sx={{ p: 2, gap: 1 }}>\n              <Button\n                onClick={() => dispatchEditModal({ type: \"CLEAR_EDIT_MODAL\" })}\n                sx={BoardStyles.boardEditCancelButton}\n                aria-label=\"Cancel edit tweet\"\n                disabled={isSaving}\n              >\n                Cancel\n              </Button>\n              <Button\n                onClick={handleSaveEditedTweet}\n                variant=\"contained\"\n                disabled={\n                  isSaving ||\n                  !editModalState.tweet.content?.value?.trim() ||\n                  (editModalState.tweet.content?.value?.length || 0) > MAX_TWEET_LENGTH\n                }\n                sx={BoardStyles.boardEditSaveButton}\n                aria-label=\"Save edited tweet\"\n                startIcon={isSaving ? <CircularProgress size={20} /> : null}\n              >\n                {isSaving ? \"Saving...\" : \"Save\"}\n              </Button>\n            </DialogActions>\n          </Dialog>\n        )}\n      </Box>\n    </motion.div>\n  );\n};\n\nBoard.propTypes = {\n  boardId: PropTypes.string.isRequired,\n  boardTitle: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  currentUser: PropTypes.shape({\n    anonymous_id: PropTypes.string,\n    username: PropTypes.string,\n  }).isRequired,\n  userRole: PropTypes.string.isRequired,\n  onLogout: PropTypes.func.isRequired,\n  availableBoards: PropTypes.arrayOf(\n    PropTypes.shape({\n      board_id: PropTypes.string.isRequired,\n      title: PropTypes.string,\n      name: PropTypes.string,\n    })\n  ),\n};\n\nBoard.defaultProps = {\n  availableBoards: [],\n};\n\nconst areEqual = (prevProps, nextProps) => {\n  return (\n    prevProps.boardId === nextProps.boardId &&\n    prevProps.boardTitle === nextProps.boardTitle &&\n    prevProps.token === nextProps.token &&\n    prevProps.currentUser.anonymous_id === nextProps.currentUser.anonymous_id &&\n    prevProps.currentUser.username === nextProps.currentUser.username &&\n    prevProps.userRole === nextProps.userRole &&\n    prevProps.onLogout === nextProps.onLogout &&\n    prevProps.availableBoards.length === nextProps.availableBoards.length &&\n    prevProps.availableBoards.every(\n      (board, i) =>\n        board.board_id === nextProps.availableBoards[i]?.board_id &&\n        board.title === nextProps.availableBoards[i]?.title &&\n        board.name === nextProps.availableBoards[i]?.name\n    )\n  );\n};\n\nexport default memo(Board, areEqual);","/**\n * @module useWebSocket\n * @description Custom hook to manage WebSocket connection for real-time updates on a board.\n */\nimport { useEffect, useRef } from \"react\";\nimport io from \"socket.io-client\";\nimport config from \"../config\";\n\nexport const useWebSocket = (\n  token,\n  boardId,\n  currentUser,\n  setTweets,\n  setOnlineUsers,\n  onLogout,\n  navigate,\n  showNotification\n) => {\n  const socketRef = useRef(null);\n\n  useEffect(() => {\n    if (!token || !boardId || !currentUser?.anonymous_id) return;\n\n    // Initialize WebSocket connection to the 'tweets' namespace\n    const socket = io(`${config.REACT_APP_WS_URL}/tweets`, {\n      query: { token, boardId },\n      reconnection: true,\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000,\n    });\n    socketRef.current = socket;\n\n    // Handle connection errors\n    socket.on(\"connect_error\", (err) => {\n      if (err.message.includes(\"Authentication\")) {\n        showNotification(\"Session expired. Please log in again.\", \"error\");\n        onLogout();\n        navigate(\"/login\");\n      } else {\n        showNotification(\"Failed to connect to real-time updates.\", \"error\");\n      }\n    });\n\n    // Cleanup on unmount\n    return () => {\n      socket.disconnect();\n    };\n  }, [token, boardId, currentUser?.anonymous_id, onLogout, navigate, showNotification]);\n\n  return socketRef;\n};","import React, { useEffect, useState } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { Typography } from \"@mui/material\";\nimport { formatPoints } from \"../../utils/formatPoints\";\n\nconst AnimatedPoints = ({ points }) => {\n  const [prevPoints, setPrevPoints] = useState(points);\n  const [animate, setAnimate] = useState(false);\n\n  useEffect(() => {\n    if (points !== prevPoints) {\n      setAnimate(true);\n      setPrevPoints(points);\n      //    500 \n      const timer = setTimeout(() => setAnimate(false), 500);\n      return () => clearTimeout(timer);\n    }\n  }, [points, prevPoints]);\n\n  return (\n    <motion.div\n      animate={animate ? { scale: [1, 1.2, 1] } : {}}\n      transition={{ duration: 0.5 }}\n    >\n      <Typography variant=\"body2\">\n        {formatPoints(points)}\n      </Typography>\n    </motion.div>\n  );\n};\n\nexport default AnimatedPoints;\n","import React from \"react\";\nimport { motion } from \"framer-motion\";\nimport { IconButton } from \"@mui/material\";\nimport { Toll } from \"@mui/icons-material\";\n\nconst PointsDeductionAnimation = ({}) => {\n  return (\n    <motion.div\n      initial={{ opacity: 1, y: 0, scale: 1 }}\n      animate={{ opacity: 0, y: -30, scale: 1.5 }}\n      transition={{ duration: 0.7 }}\n      style={{\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n      }}\n    >\n      <IconButton size=\"small\" aria-label=\"Points Deduction\">\n        <Toll sx={{ color: \"text.primary\" }} />\n      </IconButton>\n    </motion.div>\n  );\n};\n\nexport default PointsDeductionAnimation;\n","import { useState, useCallback, useEffect, useMemo, useRef } from 'react';\nimport {\n  fetchPoints,\n  transferPoints,\n  fetchTopContributors,\n  updatePoints,\n} from '../api/pointsApi';\n\n// Constants for error messages\nconst ERROR_MESSAGES = {\n  AUTH_REQUIRED: 'Authentication required.',\n  USER_ID_MISSING: 'User ID is missing.',\n  AMOUNT_MISSING: 'Points amount is missing.',\n  REASON_MISSING: 'Reason for points update is missing.',\n  DATA_MISSING: 'Required data is missing.',\n  GENERIC: 'An error occurred.',\n};\n\n// Constants for configuration\nconst MAX_CACHE_SIZE = 10;\nconst DEBOUNCE_MS = 300;\nconst CACHE_VERSION = 'v1';\n\n// LRU Cache implementation\nclass LRUCache {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.cache = new Map();\n  }\n\n  get(key) {\n    if (!this.cache.has(key)) return undefined;\n    const value = this.cache.get(key);\n    this.cache.delete(key);\n    this.cache.set(key, value);\n    return value;\n  }\n\n  set(key, value) {\n    if (this.cache.size >= this.capacity) {\n      const firstKey = this.cache.keys().next().value;\n      this.cache.delete(firstKey);\n    }\n    this.cache.set(key, value);\n  }\n\n  has(key) {\n    return this.cache.has(key);\n  }\n\n  clear() {\n    this.cache.clear();\n  }\n}\n\nconst pointsCache = new LRUCache(MAX_CACHE_SIZE);\n\n/**\n * Hook for managing points and top contributors\n * @param {string|null} token - Authorization token\n * @param {function} onLogout - Function to handle logout\n * @param {function} navigate - Function for navigation\n * @returns {object} Object with states and methods for points operations\n */\nexport const usePoints = (token, onLogout, navigate) => {\n  const [pointsData, setPointsData] = useState(null);\n  const [topContributors, setTopContributors] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const debounceTimer = useRef(null);\n  const abortControllers = useRef(new Set());\n\n  // Centralized error handling\n  const handleError = useCallback(\n    (err, customMessage) => {\n      if (err.name === 'AbortError') return null;\n      const status = err.status || 500;\n      if (status === 401 || status === 403) {\n        onLogout('Your session has expired. Please log in again.');\n        navigate('/login');\n      }\n      setError(customMessage || err.message || ERROR_MESSAGES.GENERIC);\n      return null;\n    },\n    [onLogout, navigate]\n  );\n\n  // Debounce utility\n  const debounce = useCallback((fn, ms) => {\n    return (...args) => {\n      if (debounceTimer.current) {\n        clearTimeout(debounceTimer.current);\n      }\n      return new Promise((resolve) => {\n        debounceTimer.current = setTimeout(async () => {\n          const result = await fn(...args);\n          resolve(result);\n        }, ms);\n      });\n    };\n  }, []);\n\n  // Normalize top contributors data\n  const normalizeContributors = useCallback((contributors = []) => {\n    return contributors.map((contributor) => ({\n      member_id: contributor.member_id || contributor.anonymous_id || '',\n      username: contributor.username || 'Unknown',\n      total_points: contributor.total_points || 0,\n      avatar: contributor.avatar || null,\n      anonymous_id: contributor.anonymous_id || contributor.member_id || '',\n    }));\n  }, []);\n\n  // Reset hook state\n  const resetState = useCallback(() => {\n    setPointsData(null);\n    setTopContributors([]);\n    setError(null);\n    pointsCache.clear();\n  }, []);\n\n  // Create AbortController with cleanup\n  const createAbortController = useCallback(() => {\n    const controller = new AbortController();\n    abortControllers.current.add(controller);\n    return controller;\n  }, []);\n\n  // Cleanup AbortControllers\n  const cleanupAbortControllers = useCallback(() => {\n    abortControllers.current.forEach((controller) => controller.abort());\n    abortControllers.current.clear();\n  }, []);\n\n  // Fetch points data with caching\n  const fetchPointsData = useCallback(\n    async (signal) => {\n      if (!token) {\n        setError(ERROR_MESSAGES.AUTH_REQUIRED);\n        return null;\n      }\n\n      const cacheKey = `${CACHE_VERSION}:points`;\n      const cachedData = pointsCache.get(cacheKey);\n      if (cachedData) {\n        setPointsData(cachedData);\n        return cachedData;\n      }\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        const data = await fetchPoints(token, signal);\n        if (!data) throw new Error('No points data received');\n        setPointsData(data);\n        pointsCache.set(cacheKey, data);\n        return data;\n      } catch (err) {\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [token, handleError]\n  );\n\n  const debouncedFetchPointsData = useMemo(\n    () => debounce(fetchPointsData, DEBOUNCE_MS),\n    [fetchPointsData]\n  );\n\n  // Fetch top contributors with caching\n  const fetchTopContributorsList = useCallback(\n    async (limit = 10, signal) => {\n      if (!token) {\n        setError(ERROR_MESSAGES.AUTH_REQUIRED);\n        return null;\n      }\n\n      const cacheKey = `${CACHE_VERSION}:topContributors:${limit}`;\n      const cachedData = pointsCache.get(cacheKey);\n      if (cachedData) {\n        setTopContributors(normalizeContributors(cachedData));\n        return cachedData;\n      }\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        const data = await fetchTopContributors(token, limit, signal);\n        if (!data) throw new Error('No contributors data received');\n        setTopContributors(normalizeContributors(data));\n        pointsCache.set(cacheKey, data);\n        return data;\n      } catch (err) {\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [token, handleError, normalizeContributors]\n  );\n\n  const debouncedFetchTopContributorsList = useMemo(\n    () => debounce(fetchTopContributorsList, DEBOUNCE_MS),\n    [fetchTopContributorsList]\n  );\n\n  // Transfer points to another user\n  const transferUserPoints = useCallback(\n    async (recipientId, amount) => {\n      if (!token || !recipientId?.trim() || !amount) {\n        setError(\n          !token\n            ? ERROR_MESSAGES.AUTH_REQUIRED\n            : !recipientId\n            ? ERROR_MESSAGES.USER_ID_MISSING\n            : ERROR_MESSAGES.AMOUNT_MISSING\n        );\n        return null;\n      }\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        const data = await transferPoints(recipientId, amount, token);\n        if (!data) throw new Error('Failed to transfer points');\n        setPointsData((prev) => ({\n          ...prev,\n          total_points: data.sender_points,\n          donated_points: (prev?.donated_points || 0) + amount,\n        }));\n        pointsCache.clear();\n        return data;\n      } catch (err) {\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [token, handleError]\n  );\n\n  // Update points for a user\n  const updatePointsData = useCallback(\n    async (targetUserId, amount, reason) => {\n      if (!token || !targetUserId?.trim() || !amount || !reason?.trim()) {\n        setError(\n          !token\n            ? ERROR_MESSAGES.AUTH_REQUIRED\n            : !targetUserId\n            ? ERROR_MESSAGES.USER_ID_MISSING\n            : !amount\n            ? ERROR_MESSAGES.AMOUNT_MISSING\n            : ERROR_MESSAGES.REASON_MISSING\n        );\n        return null;\n      }\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        const data = await updatePoints(targetUserId, amount, reason, token);\n        if (!data) throw new Error('Failed to update points');\n        pointsCache.clear();\n        return data;\n      } catch (err) {\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [token, handleError]\n  );\n\n  // Handle token change and initial fetch\n  useEffect(() => {\n    if (!token) {\n      cleanupAbortControllers();\n      resetState();\n      return;\n    }\n\n    const controller = createAbortController();\n    debouncedFetchPointsData(controller.signal).catch((err) => {\n      if (err.name !== 'AbortError') {\n        console.error('Initial fetch points error:', err);\n      }\n    });\n\n    return () => {\n      cleanupAbortControllers();\n      if (debounceTimer.current) {\n        clearTimeout(debounceTimer.current);\n      }\n    };\n  }, [token, debouncedFetchPointsData, resetState, createAbortController, cleanupAbortControllers]);\n\n  // Memoized return object\n  return useMemo(\n    () => ({\n      pointsData,\n      topContributors,\n      loading,\n      error,\n      fetchPointsData: debouncedFetchPointsData,\n      fetchTopContributorsList: debouncedFetchTopContributorsList,\n      transferUserPoints,\n      updatePointsData,\n      resetState,\n    }),\n    [\n      pointsData,\n      topContributors,\n      loading,\n      error,\n      debouncedFetchPointsData,\n      debouncedFetchTopContributorsList,\n      transferUserPoints,\n      updatePointsData,\n      resetState,\n    ]\n  );\n};\n\nexport default usePoints;","import api from \"./apiClient\";\nimport { handleApiError } from \"./apiClient\";\n\n// Fetch user's points data\nexport const fetchPoints = async (token, signal) => {\n  try {\n    const response = await api.get(`/api/v1/points`, {\n      headers: { Authorization: `Bearer ${token}` },\n      signal,\n    });\n    return response.data.content || {};\n  } catch (err) {\n    return handleApiError(err);\n  }\n};\n\n// Transfer points to another user\nexport const transferPoints = async (recipientId, amount, token) => {\n  if (!recipientId || !amount) throw new Error(\"Recipient ID and amount are required\");\n  try {\n    const response = await api.post(\n      `/api/v1/points/transfer`,\n      { recipientId, amount },\n      {\n        headers: { Authorization: `Bearer ${token}` },\n      }\n    );\n    return response.data.content || {};\n  } catch (err) {\n    return handleApiError(err);\n  }\n};\n\n// Fetch top contributors\nexport const fetchTopContributors = async (token, limit = 10, signal) => {\n  try {\n    const response = await api.get(`/api/v1/points/top`, {\n      headers: { Authorization: `Bearer ${token}` },\n      params: { limit },\n      signal,\n    });\n    return response.data.content || [];\n  } catch (err) {\n    return handleApiError(err);\n  }\n};\n\n// Update points (admin only)\nexport const updatePoints = async (targetUserId, amount, reason, token) => {\n  if (!targetUserId || !amount || !reason) throw new Error(\"Target user ID, amount, and reason are required\");\n  try {\n    const response = await api.put(\n      `/api/v1/points/update`,\n      { targetUserId, amount, reason },\n      {\n        headers: { Authorization: `Bearer ${token}` },\n      }\n    );\n    return response.data.content || {};\n  } catch (err) {\n    return handleApiError(err);\n  }\n};","import React, { useRef, useState, useEffect, useCallback, useMemo, memo } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport {\n  Box,\n  IconButton,\n  Menu,\n  MenuItem,\n  Tooltip,\n  Typography,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  useTheme,\n  Button,\n  Badge,\n  Skeleton,\n} from '@mui/material';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  MoreVert,\n  Edit,\n  Share,\n  Favorite,\n  FavoriteBorder,\n  Link,\n  People,\n  Public,\n  Lock,\n  Brush,\n  Delete,\n  Toll,\n} from '@mui/icons-material';\nimport PropTypes from 'prop-types';\nimport LoadingSpinner from '../components/Layout/LoadingSpinner';\nimport Board from '../components/social-features/Board/Board';\nimport useAuth from '../hooks/useAuth';\nimport BoardFormDialog from '../components/Dialogs/BoardFormDialog';\nimport MemberFormDialog from '../components/Dialogs/MemberFormDialog';\nimport DeleteConfirmationDialog from '../components/Dialogs/DeleteConfirmationDialog';\nimport { actionButtonStyles, cancelButtonStyle } from '../styles/BaseStyles';\nimport AnimatedPoints from '../components/AnimatedPoints/AnimatedPoints';\nimport PointsDeductionAnimation from '../components/PointsDeductionAnimation/PointsDeductionAnimation';\nimport { useBoards } from '../hooks/useBoards';\nimport { usePoints } from '../hooks/usePoints';\nimport { useGates } from '../hooks/useGates';\nimport { useClasses } from '../hooks/useClasses';\nimport { useNotification } from '../context/NotificationContext';\nimport { debounce } from 'lodash';\n\n// Animation variants for buttons\nconst buttonVariants = {\n  initial: { opacity: 0, scale: 0.8 },\n  animate: { opacity: 1, scale: 1, transition: { duration: 0.2 } },\n  exit: { opacity: 0, scale: 0.8, transition: { duration: 0.2 } },\n};\n\nconst BoardPage = memo(() => {\n  const navigate = useNavigate();\n  const { showNotification } = useNotification();\n  const theme = useTheme();\n  const { board_id } = useParams();\n  const { token, authData, handleLogout, isAuthenticated, loading: authLoading } = useAuth(navigate);\n  const pointsRef = useRef(null);\n  const [pointsVisible, setPointsVisible] = useState(false);\n  const [editingBoard, setEditingBoard] = useState(null);\n  const [membersDialogOpen, setMembersDialogOpen] = useState(false);\n  const [shareDialogOpen, setShareDialogOpen] = useState(false);\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [inviteLink, setInviteLink] = useState('');\n  const [pointsSpent, setPointsSpent] = useState(0);\n  const isMounted = useRef(true);\n\n  // Hooks\n  const {\n    boardItem: boardData,\n    members,\n    loading: boardLoading,\n    error: boardError,\n    fetchBoard,\n    updateExistingBoard,\n    toggleFavoriteBoard,\n    deleteExistingBoard,\n    addMemberToBoard,\n    removeMemberFromBoard,\n    updateMemberRole,\n    clearBoardTweets,\n  } = useBoards(token, handleLogout, navigate);\n\n  const {\n    pointsData,\n    loading: pointsLoading,\n    fetchPointsData,\n  } = usePoints(token, handleLogout, navigate);\n\n  const {\n    gates,\n    loading: gatesLoading,\n    fetchGatesList,\n  } = useGates(token, handleLogout, navigate);\n\n  const {\n    classes,\n    loading: classesLoading,\n    fetchClassesList,\n  } = useClasses(token, handleLogout, navigate);\n\n  // Memoized derived state\n  const userRole = useMemo(\n    () =>\n      boardData && authData\n        ? boardData.creator_id === authData?.anonymous_id\n          ? 'owner'\n          : boardData.is_public\n          ? 'viewer'\n          : members.find((m) => m.anonymous_id === authData?.anonymous_id)?.role || 'viewer'\n        : 'viewer',\n    [boardData, authData, members]\n  );\n\n  const isFavorited = useMemo(\n    () => boardData?.favorited_by?.some((user) => user.anonymous_id === authData?.anonymous_id) ?? false,\n    [boardData?.favorited_by, authData?.anonymous_id]\n  );\n\n  const boardVisibility = useMemo(\n    () => boardData?.visibility ?? (boardData?.is_public ? 'public' : 'private'),\n    [boardData?.visibility, boardData?.is_public]\n  );\n\n  // Debounced API calls\n  const debouncedFetchBoard = useMemo(\n    () =>\n      debounce(async (id, signal) => {\n        if (!isMounted.current) return;\n        try {\n          await fetchBoard(id, signal);\n        } catch (err) {\n          if (err.name !== 'AbortError') {\n            showNotification(err.message || 'Failed to fetch board', 'error');\n          }\n        }\n      }, 300),\n    [fetchBoard, showNotification]\n  );\n\n  const debouncedFetchPoints = useMemo(\n    () =>\n      debounce(async (signal) => {\n        if (!isMounted.current) return;\n        try {\n          await fetchPointsData(signal);\n        } catch (err) {\n          if (err.name !== 'AbortError') {\n            showNotification(err.message || 'Failed to fetch points', 'error');\n          }\n        }\n      }, 300),\n    [fetchPointsData, showNotification]\n  );\n\n  // Fetch board data only\n  useEffect(() => {\n    if (!token || !board_id || !isAuthenticated) return;\n\n    const controller = new AbortController();\n    debouncedFetchBoard(board_id, controller.signal);\n\n    return () => {\n      controller.abort();\n      debouncedFetchBoard.cancel();\n      isMounted.current = false;\n    };\n  }, [token, board_id, isAuthenticated, debouncedFetchBoard]);\n\n  useEffect(() => {\n    if (!token || !isAuthenticated || !pointsVisible) return;\n\n    const controller = new AbortController();\n    debouncedFetchPoints(controller.signal);\n\n    return () => {\n      controller.abort();\n      debouncedFetchPoints.cancel();\n    };\n  }, [token, isAuthenticated, pointsVisible, debouncedFetchPoints]);\n\n  // Points visibility observer\n  useEffect(() => {\n    if (!pointsRef.current) return;\n\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting && !pointsVisible) {\n          setPointsVisible(true);\n        }\n      },\n      { threshold: 0.1 }\n    );\n\n    observer.observe(pointsRef.current);\n    return () => observer.disconnect();\n  }, []);\n\n  // Fetch gates and classes only when editing\n  useEffect(() => {\n    if (!editingBoard || !token || !isAuthenticated || (userRole !== 'owner' && userRole !== 'admin')) return;\n\n    const controller = new AbortController();\n    Promise.all([\n      fetchGatesList({ visibility: 'public' }, controller.signal),\n      fetchClassesList({}, controller.signal),\n    ]).catch((err) => {\n      if (err.name !== 'AbortError') {\n        showNotification(err.message || 'Failed to load gates or classes', 'error');\n      }\n    });\n\n    return () => controller.abort();\n  }, [editingBoard, token, isAuthenticated, userRole, fetchGatesList, fetchClassesList, showNotification]);\n\n  // Handle board errors\n  useEffect(() => {\n    if (boardError) {\n      showNotification(boardError || 'An error occurred', 'error');\n      if (boardError?.includes('Board not found')) {\n        setTimeout(() => navigate('/boards'), 2000);\n      }\n    }\n  }, [boardError, showNotification, navigate]);\n\n  // Track points changes\n  useEffect(() => {\n    if (!pointsData?.total_points) return;\n\n    const prevPoints = pointsData.prev_points || pointsData.total_points;\n    if (pointsData.total_points < prevPoints) {\n      setPointsSpent(prevPoints - pointsData.total_points);\n      const timeout = setTimeout(() => setPointsSpent(0), 700);\n      return () => clearTimeout(timeout);\n    }\n  }, [pointsData?.total_points]);\n\n  // Handlers\n  const handleUpdateBoard = useCallback(async () => {\n    if (!editingBoard || (userRole !== 'owner' && userRole !== 'admin')) return;\n\n    const validationError = validateBoardData(editingBoard);\n    if (validationError) {\n      showNotification(validationError, 'error');\n      return;\n    }\n\n    try {\n      await updateExistingBoard(editingBoard.board_id, {\n        name: editingBoard.name,\n        description: editingBoard.description,\n        is_public: editingBoard.visibility === 'public',\n        visibility: editingBoard.visibility,\n        type: editingBoard.type,\n        gate_id: editingBoard.gate_id || null,\n        class_id: editingBoard.class_id || null,\n        settings: editingBoard.settings,\n        tags: editingBoard.tags,\n      });\n      showNotification('Board updated', 'success');\n      setEditingBoard(null);\n    } catch (err) {\n      showNotification(err.message || 'Failed to update board', 'error');\n    }\n  }, [editingBoard, userRole, updateExistingBoard, showNotification, board_id]);\n\n  const handleFavorite = useCallback(async () => {\n    if (!boardData) return;\n\n    try {\n      await toggleFavoriteBoard(board_id, isFavorited);\n      showNotification(`Board ${isFavorited ? 'unfavorited' : 'favorited'}`, 'success');\n    } catch (err) {\n      showNotification('Failed to toggle favorite', 'error');\n    }\n  }, [boardData, board_id, isFavorited, toggleFavoriteBoard, showNotification]);\n\n  const handleEdit = useCallback(() => {\n    if (userRole !== 'owner' && userRole !== 'admin' || !boardData) return;\n    setEditingBoard({\n      board_id: boardData.board_id,\n      name: boardData.name || '',\n      description: boardData.description || '',\n      is_public: boardData.is_public || false,\n      visibility: boardData.visibility || (boardData.is_public ? 'public' : 'private'),\n      type: boardData.type || 'personal',\n      gate_id: boardData.gate_id || '',\n      class_id: boardData.class_id || '',\n      settings: {\n        max_tweets: boardData.settings?.max_tweets || 100,\n        tweet_cost: boardData.settings?.tweet_cost || 1,\n        max_members: boardData.settings?.max_members || 50,\n        favorite_cost: boardData.settings?.favorite_cost || 1,\n        points_to_creator: boardData.settings?.points_to_creator || 1,\n        allow_invites: boardData.settings?.allow_invites !== false,\n        require_approval: boardData.settings?.require_approval || false,\n        ai_moderation_enabled: boardData.settings?.ai_moderation_enabled !== false,\n        auto_archive_after: boardData.settings?.auto_archive_after || 30,\n      },\n      tags: boardData.tags || [],\n      current_user: { anonymous_id: authData?.anonymous_id, role: userRole },\n    });\n  }, [boardData, authData?.anonymous_id, userRole]);\n\n  const handleManageMembers = useCallback(() => {\n    if (userRole !== 'owner' && userRole !== 'admin') return;\n    setMembersDialogOpen(true);\n  }, [userRole]);\n\n  const handleShare = useCallback(() => {\n    setInviteLink(`${window.location.origin}/board/${board_id}`);\n    setShareDialogOpen(true);\n  }, [board_id]);\n\n  const handleOpenDeleteDialog = useCallback(() => {\n    if (userRole !== 'owner') return;\n    setDeleteDialogOpen(true);\n  }, [userRole]);\n\n  const handleDelete = useCallback(async () => {\n    try {\n      await deleteExistingBoard(board_id);\n      showNotification('Board deleted', 'success');\n      navigate('/boards');\n    } catch (err) {\n      showNotification('Failed to delete board', 'error');\n    } finally {\n      setDeleteDialogOpen(false);\n    }\n  }, [board_id, deleteExistingBoard, navigate, showNotification]);\n\n\n  const handleCopyLink = useCallback(async () => {\n    if (!inviteLink) {\n      showNotification('Invalid share link', 'error');\n      return;\n    }\n    try {\n      await navigator.clipboard.write(inviteLink);\n      showNotification('Link copied', 'success');\n    } catch (err) {\n      showNotification('Failed to copy link', 'error');\n    } finally {\n      setShareDialogOpen(false);\n    }\n  }, [inviteLink, showNotification]);\n\n  const handleMenuOpen = useCallback((event) => setAnchorEl(event.currentTarget), []);\n  const handleMenuClose = useCallback(() => setAnchorEl(null), []);\n\n  const validateBoardData = useCallback(\n    (data) => {\n      if (!data?.name?.trim()) return 'Board name is required';\n      const s = data.settings || {};\n      if (s.max_tweets < 1 || s.max_tweets > 10000) return 'Max tweets must be 1-10000';\n      if (s.tweet_cost < 0) return 'Tweet cost must be non-negative';\n      if (s.favorite_cost < 0) return 'Favorite cost must be non-negative';\n      if (s.points_to_creator < 0 || s.points_to_creator > 100) return 'Points to creator must be 0-100';\n      if (s.max_members < 1 || s.max_members > 10000) return 'Max members must be 1-10000';\n      if (data.visibility === 'public' && !data.gate_id && !data.class_id && gates?.length > 0) {\n        return 'Public boards require a gate or class';\n      }\n      return '';\n    },\n    [gates]\n  );\n\n  const childBoardMenuItems = useMemo(() => {\n    const uniqueChildIds = [...new Set(boardData?.child_board_ids?.filter((id) => id) || [])];\n    return uniqueChildIds.map((childId) => (\n      <MenuItem\n        key={childId}\n        onClick={() => {\n          navigate(`/board/${childId}`);\n          handleMenuClose();\n        }}\n        aria-label={`Go to child board ${childId.slice(0, 8)}`}\n      >\n        Go to Child Board {childId.slice(0, 8)}\n      </MenuItem>\n    ));\n  }, [boardData?.child_board_ids, navigate, handleMenuClose]);\n\n  if (authLoading) {\n    return <LoadingSpinner />;\n  }\n\n  return (\n    <Box sx={{ position: 'relative', width: '100%', height: '100vh' }}>\n      <Box\n        sx={{\n          position: 'absolute',\n          top: 16,\n          right: 0,\n          display: 'flex',\n          gap: 0.3,\n          flexWrap: 'wrap',\n          justifyContent: 'flex-end',\n          zIndex: 100,\n          '@media (max-width: 600px)': { transform: 'scale(0.8)' },\n        }}\n      >\n        <AnimatePresence>\n          {boardLoading ? (\n            <>\n              <Skeleton variant=\"circular\" width={40} height={40} />\n            </>\n          ) : (\n            <>\n              <motion.div variants={buttonVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n                <Tooltip title={`Board visibility: ${boardVisibility}`}>\n                  <IconButton aria-label={`Board visibility: ${boardVisibility}`}>\n                    {boardVisibility === 'public' ? <Public /> : <Lock />}\n                  </IconButton>\n                </Tooltip>\n              </motion.div>\n              <motion.div variants={buttonVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n                <Tooltip title={isFavorited ? 'Unfavorite Board' : 'Favorite Board'}>\n                  <IconButton\n                    onClick={handleFavorite}\n                    aria-label={isFavorited ? 'Unfavorite board' : 'Favorite board'}\n                  >\n                    {isFavorited ? <Favorite color=\"error\" /> : <FavoriteBorder />}\n                  </IconButton>\n                </Tooltip>\n              </motion.div>\n              <motion.div variants={buttonVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n                <Tooltip title=\"Share Board\">\n                  <IconButton onClick={handleShare} aria-label=\"Share board\">\n                    <Share />\n                  </IconButton>\n                </Tooltip>\n              </motion.div>\n              {(userRole === 'owner' || userRole === 'admin') && (\n                <>\n                  <motion.div variants={buttonVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n                    <Tooltip title=\"Manage Members\">\n                      <IconButton\n                        onClick={handleManageMembers}\n                        aria-label={`Manage members (current count: ${members?.length || 0})`}\n                      >\n                        <Badge badgeContent={members?.length || 0} color=\"default\">\n                          <People />\n                        </Badge>\n                      </IconButton>\n                    </Tooltip>\n                  </motion.div>\n                  <motion.div variants={buttonVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n                    <Tooltip title=\"Edit Board\">\n                      <IconButton onClick={handleEdit} aria-label=\"Edit board\">\n                        <Edit />\n                      </IconButton>\n                    </Tooltip>\n                  </motion.div>\n                </>\n              )}\n              {userRole === 'owner' && (\n                <motion.div variants={buttonVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n                  <Tooltip title=\"Delete Board\">\n                    <IconButton onClick={handleOpenDeleteDialog} aria-label=\"Delete board\">\n                      <Delete color=\"error\" />\n                    </IconButton>\n                  </Tooltip>\n                </motion.div>\n              )}\n              {boardData?.child_board_ids?.length > 0 && (\n                <motion.div variants={buttonVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n                  <Tooltip title=\"Child Boards\">\n                    <IconButton\n                      aria-controls=\"board-menu\"\n                      aria-haspopup=\"true\"\n                      onClick={handleMenuOpen}\n                      sx={{ bgcolor: 'background.paper', '&:hover': { bgcolor: 'action.hover' } }}\n                      aria-label=\"Open child boards menu\"\n                    >\n                      <MoreVert />\n                    </IconButton>\n                  </Tooltip>\n                </motion.div>\n              )}\n            </>\n          )}\n        </AnimatePresence>\n        <Menu\n          id=\"board-menu\"\n          anchorEl={anchorEl}\n          open={Boolean(anchorEl)}\n          onClose={handleMenuClose}\n          slotProps={{\n            paper: {\n              sx: { borderRadius: theme.shape.borderRadiusMedium },\n            },\n          }}\n        >\n          {childBoardMenuItems}\n        </Menu>\n      </Box>\n\n      <Box\n        ref={pointsRef}\n        sx={{\n          position: 'absolute',\n          bottom: 16,\n          left: 16,\n          zIndex: 100,\n          display: 'flex',\n          alignItems: 'center',\n          gap: 1,\n          '@media (max-width: 600px)': { transform: 'scale(0.8)' },\n        }}\n      >\n        <AnimatePresence>\n            <motion.div\n              key=\"points\"\n              initial={{ opacity: 0, scale: 0.8 }}\n              animate={{ opacity: 1, scale: 1 }}\n              exit={{ opacity: 0, scale: 0.8 }}\n              transition={{ duration: 0.2 }}\n            >\n              <Tooltip title=\"Available points\">\n                <IconButton size=\"small\" aria-label={`Available points: ${pointsData?.total_points || 0}`}>\n                  <Toll />\n                </IconButton>\n              </Tooltip>\n              <AnimatedPoints points={pointsData?.total_points || 0} />\n              {pointsSpent > 0 && <PointsDeductionAnimation pointsSpent={pointsSpent} />}\n            </motion.div>\n        </AnimatePresence>\n      </Box>\n\n      <Board\n        boardId={board_id}\n        boardTitle={boardData?.name || ''}\n        token={token}\n        currentUser={authData}\n        userRole={userRole}\n        onLogout={handleLogout}\n        availableBoards={[]}\n      />\n\n      {editingBoard && (\n        <BoardFormDialog\n          open={true}\n          title=\"Edit Board\"\n          board={editingBoard}\n          setBoard={setEditingBoard}\n          onSave={handleUpdateBoard}\n          onCancel={() => setEditingBoard(null)}\n          disabled={boardLoading || gatesLoading || classesLoading}\n          gates={gates || []}\n          classes={classes || []}\n          token={token}\n          userRole={userRole}\n        />\n      )}\n\n      {membersDialogOpen && (\n        <MemberFormDialog\n          open={membersDialogOpen}\n          title=\"Manage Board Members\"\n          boardId={board_id}\n          token={token}\n          onSave={() => {\n            debouncedFetchBoard(board_id);\n            setMembersDialogOpen(false);\n          }}\n          onCancel={() => setMembersDialogOpen(false)}\n          disabled={userRole !== 'owner' && userRole !== 'admin'}\n          members={members || []}\n          addMember={addMemberToBoard}\n          removeMember={removeMemberFromBoard}\n          updateMemberRole={updateMemberRole}\n        />\n      )}\n\n      <Dialog\n        open={shareDialogOpen}\n        onClose={() => setShareDialogOpen(false)}\n        maxWidth=\"sm\"\n        fullWidth\n        sx={{ '& .MuiDialog-paper': { borderRadius: theme.shape.borderRadiusMedium } }}\n        aria-labelledby=\"share-dialog-title\"\n      >\n        <DialogTitle id=\"share-dialog-title\">Share Board</DialogTitle>\n        <DialogContent>\n          <Typography variant=\"body2\" sx={{ mb: 2 }}>\n            Copy the link below to share this board:\n          </Typography>\n          <TextField\n            fullWidth\n            value={inviteLink}\n            InputProps={{ readOnly: true }}\n            aria-label=\"Board share link\"\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={() => setShareDialogOpen(false)}\n            sx={cancelButtonStyle}\n            aria-label=\"Close share dialog\"\n          >\n            Close\n          </Button>\n          <Button\n            onClick={handleCopyLink}\n            sx={actionButtonStyles}\n            startIcon={<Link />}\n            aria-label=\"Copy share link\"\n          >\n            Copy Link\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      <DeleteConfirmationDialog\n        open={deleteDialogOpen}\n        onClose={() => setDeleteDialogOpen(false)}\n        onConfirm={handleDelete}\n        message=\"Are you sure you want to delete this board? This action cannot be undone.\"\n        disabled={boardLoading}\n      />\n    </Box>\n  );\n});\n\nBoardPage.propTypes = {\n  // No props are expected as this is a top-level page component\n};\n\nexport default BoardPage;"],"names":["formatPoints","points","options","arguments","length","undefined","decimals","allowNegative","Number","isNaN","isNegative","absPoints","Math","abs","formats","threshold","suffix","find","_ref","toString","value","round","toFixed","replace","customTheme","theme","breakpoints","values","xs","sm","md","lg","xl","BASE_SHADOW","HOVER_SHADOW","baseTypographyStyles","color","fontWeight","lineHeight","baseHoverEffect","transform","boxShadow","outline","alpha","palette","primary","main","outlineOffset","baseButtonStyles","shape","borderRadiusMedium","borderRadius","borderRadiusLarge","textTransform","transition","backgroundColor","dark","actionButtonStyles","height","minWidth","padding","fontSize","cancelButtonStyle","inputStyles","mt","spacing","borderRadiusSmall","border","opacity","inputStylesWhite","selectStyles","headerStyles","card","mb","width","boxSizing","content","display","flexDirection","alignItems","justifyContent","mx","gap","textAlign","leftSection","rightSection","title","level","buttonGroup","flexWrap","splitButtonGroup","chipContainer","overflowX","msOverflowStyle","scrollbarWidth","chip","transitions","create","duration","short","easing","easeInOut","cursor","margin","chipExpanded","chipCollapsed","fieldStyles","container","label","input","sectionStyles","my","toggleStyles","formControl","switch","containerStyles","maxWidth","gridStyles","gridTemplateColumns","skeletonStyles","bgcolor","header","filter","baseModalStyles","animation","from","to","boardContainer","overflow","zIndex","boardMain","isListView","dragging","flex","position","touchAction","grey","boardCanvas","scale","offset","top","left","backgroundImage","backgroundSize","x","y","transformOrigin","boardTitleContainer","pointerEvents","boardTitle","titleLength","min","whiteSpace","textOverflow","boardEmptyMessage","boardBackButtonContainer","boardBackButton","boardControlsContainer","bottom","right","p","boardViewToggleButton","px","py","boardZoomButton","boardZoomText","boardListViewContainer","minHeight","boardListViewTweet","isReply","pl","borderLeft","boardErrorContainer","boardErrorText","boardErrorButton","boardEditDialog","boardEditDialogTitle","pb","boardEditDialogContent","pt","boardEditTextField","borderColor","boardEditFormControl","boardEditCancelButton","boardEditSaveButton","BOARD_SIZE","ZOOM_STEP","TWEET_Z_INDEX","fontFamily","letterSpacing","TweetContentStyles","tweetCard","isPinned","warning","light","background","paper","maxHeight","overflowY","tweetPaper","tweetTitle","tweetAuthorTypography","pinnedIconContainer","pinnedIcon","replyToContainer","fontStyle","replyToCaption","replyToText","contentText","hasMedia","wordBreak","imageContainer","hasText","image","isSingle","aspectRatio","objectFit","objectPosition","imagePlaceholder","imageViewAll","textDecoration","videoContainer","hasTextOrImages","videoInner","video","circleVideoContainer","circleVideo","videoViewAll","audioContainer","hasTextOrMedia","audioPlayer","audioViewAll","otherFilesContainer","otherFileItem","index","otherFileIcon","otherFileLink","otherFilesViewAll","readMoreButton","actionsContainer","actionButtons","likeButton","likeIcon","isLiked","likeCount","animate","ml","replyButton","replyIcon","replyCount","statusContainer","menuButton","menuIcon","tweetHighlight","isHighlighted","draggableContainer","isDraggable","hovered","DraggableTweet","_tweet$position$x","_tweet$position","_tweet$position$y","_tweet$position2","_tweet$position$x2","_tweet$position3","_tweet$position$y2","_tweet$position4","_tweet$position7","_tweet$position8","tweet","onStop","children","currentUser","userRole","bypassOwnership","nodeRef","useRef","justDroppedRef","previousPosition","localPosition","setLocalPosition","useState","setDragging","setHovered","clampPosition","useCallback","max","useEffect","current","_tweet$position$x3","_tweet$position5","_tweet$position$y3","_tweet$position6","newPos","useMemo","is_pinned","includes","anonymous_id","user_id","username","debouncedOnStop","debounce","e","data","clampedPos","console","error","tweetId","tweet_id","cancel","handleStart","handleDrag","handleStop","setTimeout","_jsx","Draggable","positionOffset","disabled","onStart","onDrag","ref","onMouseEnter","onMouseLeave","style","role","tabIndex","warn","defaultProps","memo","baseDialogStyles","mediaDialogContainer","mediaDialogTitle","borderBottom","mediaDialogContent","optionsDialogContainer","optionsDialogTitle","optionsDialogContent","dialogActions","dialogCloseButton","optionsDialogItem","modalImage","modalImagePlaceholder","modalOtherFile","modalOtherFileIcon","modalOtherFileLink","errorPaper","errorTypography","LinkPreviewStyles","previewCard","previewImage","flexShrink","previewContent","previewTitle","previewDescription","WebkitLineClamp","WebkitBoxOrient","previewPlayButton","previewPlayer","loadingContainer","LinkPreview","onTextTransform","onPlayClick","previews","setPreviews","playingMedia","setPlayingMedia","loading","setLoading","deferredContent","useDeferredValue","previewCache","Map","extractYouTubeId","url","_parsed$query$split$","parsed","URLParse","hostname","pathname","slice","query","split","extractTwitchId","type","id","isYouTubeMusic","async","urls","match","uniqueUrls","Set","newPreviews","transformedText","forEach","truncated","has","push","get","previewData","videoId","isMusic","response","axios","encodeURIComponent","timeout","description","author_name","thumbnail","embedUrl","_response$data$html$m","provider_name","thumbnail_url","html","_response$data$html$m2","_response$data$data$i","twitchInfo","window","location","twitchType","_response$data$data$i2","set","clearTimeout","handleTogglePlay","preview","renderPreview","isPlayable","isAudio","playerHeight","_jsxs","motion","div","initial","ease","Card","sx","CardMedia","component","alt","CardContent","Typography","variant","Link","href","target","rel","IconButton","onClick","PauseIcon","PlayArrowIcon","Box","LazyLoadComponent","ReactPlayer","controls","playing","config","youtube","playerVars","modestbranding","playsinline","soundcloud","visual","twitch","autoplay","onError","CircularProgress","size","map","statusColorMap","pending","approved","rejected","announcement","reminder","pinned","archived","mediaVariants","exit","ViewAllButton","whileHover","whileTap","onKeyPress","key","CircularVideoPlayer","_ref2","src","ariaLabel","variants","mediaWrapper","preload","propTypes","PropTypes","isRequired","StandardVideoPlayer","_ref3","AudioPlayer","_ref4","FileItem","_ref5","file","InsertDriveFileIcon","fileKey","TweetContent","_ref6","_tweet$content","_tweet$content2","_tweet$user","_tweet$liked_by$some","_tweet$liked_by","_tweet$child_tweet_id","_tweet$child_tweet_id2","_tweet$stats2","_tweet$content4","_tweet$content4$metad","_tweet$content6","_tweet$content6$metad","_tweet$content8","_tweet$content8$metad","_tweet$content10","_tweet$content10$meta","_tweet$content12","_tweet$content12$meta","_tweet$stats3","onLike","onDelete","onReply","onReplyHover","onEdit","onPinToggle","isParentHighlighted","parentTweetText","relatedTweetIds","availableBoards","boardId","getParentTweetText","onModalStateChange","setAnimate","openOptionsDialog","setOpenOptionsDialog","openMediaDialog","setOpenMediaDialog","openLinkModal","setOpenLinkModal","isExpanded","setIsExpanded","timestamp","setTimestamp","setTransformedText","created_at","createdAt","parseISO","isValid","updateTimestamp","now","Date","formatDistanceToNow","addSuffix","format","interval","setInterval","clearInterval","tweetAuthor","user","liked_by","some","u","canEdit","toLowerCase","isRelated","hasReplies","child_tweet_ids","replyLabel","rawStatus","status","chipColor","chipLabel","charAt","toUpperCase","resolvedParentTweetText","parent_tweet_id","parentExcerpt","join","_tweet$stats","stats","like_count","timer","handleMouseEnter","_tweet$child_tweet_id3","handleMouseLeave","_tweet$child_tweet_id4","handleOpenOptionsDialog","handleCloseOptionsDialog","handleOpenMediaDialog","handleCloseMediaDialog","handleOpenLinkModal","handleCloseLinkModal","handleEdit","handlePin","handleDelete","handleToggleExpand","prev","previewText","remainderText","text","cutoff","lastSpace","lastIndexOf","fullDate","renderImages","_tweet$content3","_tweet$content3$metad","_tweet$content3$metad2","imageFiles","metadata","files","f","_f$contentType","contentType","startsWith","Grid","item","LazyLoadImage","effect","placeholder","renderVideos","_tweet$content5","_tweet$content5$metad","_tweet$content5$metad2","videoFiles","_f$contentType2","renderAudio","_tweet$content7","_tweet$content7$metad","_tweet$content7$metad2","audioFiles","_f$contentType3","renderOtherFiles","_tweet$content9","_tweet$content9$metad","_tweet$content9$metad2","otherFiles","_f$contentType4","_f$contentType5","_f$contentType6","idx","renderContent","Emoji","Collapse","in","unmountOnExit","_tweet$content11","_tweet$content11$meta","DialogContent","ModalStyles","m","_file$contentType","_file$contentType2","_file$contentType3","List","ListItemButton","ListItemText","linkModalContent","Dialog","open","onClose","fullWidth","TransitionComponent","Fade","transitionDuration","PaperProps","stopPropagation","onMouseDown","onTouchStart","DialogTitle","gutterBottom","DialogActions","CloseIcon","Paper","className","elevation","PushPinIcon","Chip","dateTime","ThumbUpIcon","ChatBubbleOutlineIcon","MoreVertIcon","fullScreen","innerWidth","dividers","arePropsEqual","prevProps","nextProps","_prevProps$tweet$cont","_nextProps$tweet$cont","_prevProps$tweet$stat","_nextProps$tweet$stat","_prevProps$tweet$like","_nextProps$tweet$like","_prevProps$tweet$cont2","_prevProps$tweet$cont3","_prevProps$tweet$cont4","_nextProps$tweet$cont2","_nextProps$tweet$cont3","_nextProps$tweet$cont4","every","i","MEDIA_PREVIEW_SIZE","dynamicCharCountColor","isError","dynamicMediaButtonColor","isActive","popupModal","backdropFilter","popupTitle","popupTextField","popupCharCount","alignSelf","popupFilePreviewContainer","popupPreviewMedia","popupCirclePreviewMedia","popupPreviewPlaceholder","popupDeleteFileButton","popupActionButton","popupCancelButton","popupInputBar","BASE_Z_INDEX","popupMediaButton","popupRecordingContainer","popupRecordingChip","popupRecordingControls","popupVideoPreviewContainer","popupLivePreview","popupAudioVisualizer","popupVisualizerBar","animationDelay","popupAudioPlayer","popupProgressContainer","popupDialogPaper","popupDialogBackdrop","popupContentBox","popupErrorAlert","popupParentTweetCaption","popupScheduleButton","popupButtonContainer","SUPPORTED_MIME_TYPES","MAX_FILE_SIZE","MAX_FILES","messageErrorMessages","string","required","uuid","pattern","array","enum","uri","number","integer","boolean","date","uuidSchema","Joi","version","messages","querySchema","valid","optional","page","default","limit","sort","pinned_only","hashtag","mention","contentSchema","when","is","then","trim","otherwise","allow","items","hashtags","mentions","positionSchema","reminderSchema","schedule","iso","recurrence","enabled","conversationErrorMessages","hexColor","uuidPattern","validatePayload","conversationId","visibility","muted","friendId","name","members","tags","initialMessage","or","permissions","sendMessages","addMembers","pinMessages","admins","moderators","scheme","font","bubbleStyle","senderColor","receiverColor","textColor","accessibility","highContrast","largeText","screenReader","notificationSound","inviteLink","ephemeral","ephemeralTTL","muteUntil","pushEnabled","media","replyTo","scheduledAt","forwardedFrom","threadId","messageId","newContent","fromUserId","mediaType","question","allowMultipleVotes","pollExpiresAt","optionIndex","reaction","fileType","fileSize","targetConversationIds","comment","messageIds","parentMessageId","notify","schema","payload","errorMessage","validate","abortEarly","stripUnknown","details","d","message","Error","MAX_TWEET_LENGTH","TweetPopup","_parentTweet$content","onSubmit","parentTweet","onBoardUpdate","form","setForm","draft","recording","setRecording","recordingType","setRecordingType","recordingTime","setRecordingTime","recordingMode","setRecordingMode","isPaused","setIsPaused","setError","uploadProgress","setUploadProgress","showSchedule","setShowSchedule","submitSuccess","setSubmitSuccess","menuAnchorEl","setMenuAnchorEl","linkModal","setLinkModal","fileInputRef","mediaRecorderRef","dialogRef","videoPreviewRef","recordingTimerRef","longPressTimerRef","handleFileChange","removeFile","cleanup","fileUrlsRef","useFileUpload","setFiles","validateFile","newFiles","Array","fileToRemove","URL","revokeObjectURL","delete","_","uploadFiles","onProgress","Promise","resolve","createObjectURL","err","clear","isMobile","useMediaQuery","down","bindDrag","useDrag","movement","event","preventDefault","_dialogRef$current","focus","stopRecording","next","srcObject","play","catch","startRecording","constraints","audio","stream","navigator","mediaDevices","getUserMedia","mediaRecorder","MediaRecorder","mimeType","chunks","ondataavailable","onstop","blob","Blob","fileName","File","getTracks","track","stop","start","pauseRecording","pause","resumeRecording","resume","handleFileInputChange","validFiles","handleSubmit","poll_options","event_details","quote_ref","embed_data","newTweet","progress","handleKeyPress","shiftKey","isSubmitDisabled","renderFilePreview","fileUrl","TweetPopupStyles","poster","popupPreviewOverlay","Delete","recordingStatus","minutes","floor","padStart","autoPlay","Tooltip","placement","PlayArrow","Pause","Stop","toggleRecording","renderInputBar","accept","multiple","onChange","click","AttachFile","TextField","autoFocus","multiline","maxRows","inputProps","maxLength","onTouchEnd","onContextMenu","Mic","Videocam","Button","currentTarget","Close","pr","Alert","severity","LinearProgress","InputLabelProps","shrink","toISOString","isEqual","BASE_TWEET_PATH","normalizeTweet","_content$metadata","_content$metadata2","_content$metadata3","_content$metadata4","_content$metadata5","_content$metadata6","_content$metadata7","_content$metadata8","_tweet$children","_tweet$stats$like_cou","_tweet$stats$like_cou2","_tweet$stats$view_cou","_tweet$analytics","_tweet$analytics2","is_anonymous","is_liked","likes","view_count","scheduled_at","analytics","views","shares","child","updated_at","ERROR_MESSAGES","CONFIG","MAX_CACHE_SIZE","CACHE_EXPIRY_MS","DEBOUNCE_MS","DEFAULT_LIMIT","CACHE_VERSION","tweetCache","constructor","capacity","this","cache","firstKey","keys","useTweets","token","onLogout","navigate","skipInitialFetch","tweets","setTweets","setTweet","pagination","setPagination","total","hasMore","boardInfo","setBoardInfo","abortControllerRef","handleError","reject","uploadFileToS3","presignedUrl","fileContentType","post","headers","Authorization","handleApiError","generatePresignedUrlApi","xhr","XMLHttpRequest","setRequestHeader","upload","onprogress","lengthComputable","percent","loaded","onload","onerror","send","fetchTweetsList","filters","signal","append","cacheKey","JSON","stringify","cachedData","board","_abortControllerRef$c","_data$pagination","_data$pagination2","_data$pagination3","abort","AbortController","effectiveSignal","params","AbortSignal","fetchTweetsApi","normalizedTweets","cacheData","debouncedFetchTweetsList","callback","result","createNewTweet","_content$value","_files$0$type","parentTweetId","isAnonymous","contentObj","optimisticTweet","comment_count","share_count","uploadedFiles","all","finalContent","createdTweet","anonymousId","_response$data$conten","_response$data$conten2","createTweetApi","normalizedTweet","t","updateExistingTweet","updates","_updates$content$valu","_files$0$type2","_updates$content$meta","_updates$content$meta2","_updates$content$meta3","_updates$content$meta4","_updates$content$meta5","_updates$content$meta6","_updates$content$meta7","Object","currentTweet","finalUpdates","updatedTweet","_response$data$conten3","_response$data$conten4","put","updateTweetApi","toggleLikeTweet","l","_response$data$conten7","_response$data$conten8","endpoint","toggleLikeApi","deleteExistingTweet","childTweetIds","c","_response$data$conten9","_response$data$conten10","del","deleteTweetApi","Boolean","moveTweet","targetBoardId","_response$data$conten11","_response$data$conten12","moveTweetApi","pinTweet","_response$data$conten13","_response$data$conten14","pinTweetApi","unpinTweet","_response$data$conten15","_response$data$conten16","unpinTweetApi","setReminder","_response$data$conten17","_response$data$conten18","setReminderApi","shareTweet","sharedTo","_currentTweet$analyti","platform","sharedTweet","_response$data$conten19","_response$data$conten20","shared_to","shareTweetApi","resetState","controller","Z_INDEX","popupReducer","state","action","visible","clientX","clientY","replyTweet","editModalReducer","_action$payload","_action$payload2","newStatus","selectedBoardId","board_id","usePermissions","isOwnerOrAdmin","isModerator","isViewer","computePermissions","isTweetOwner","canPin","canChangeStatus","canMoveBoard","canCreate","canLike","canReply","canDrag","isArray","permissionsMap","Board","_editModalState$tweet9","_editModalState$tweet10","_editModalState$tweet11","_editModalState$tweet12","_editModalState$tweet13","_editModalState$tweet14","_editModalState$tweet15","_editModalState$tweet16","_editModalState$tweet17","_editModalState$tweet18","_editModalState$tweet19","useNavigate","showNotification","useNotification","boardMainRef","isFetching","setIsListView","setPage","boards","setBoards","isSaving","setIsSaving","highlightedTweetId","setHighlightedTweetId","onlineUsers","setOnlineUsers","openModals","popupState","dispatchPopup","useReducer","editModalState","dispatchEditModal","isOverlayOpen","handleModalStateChange","isOpen","add","isLoading","fetchBoardsList","useBoards","centerBoard","handleZoomButton","handleMouseDown","originalHandleMouseDown","handleMouseMove","originalHandleMouseMove","handleMouseUp","originalHandleMouseUp","handleTouchStart","originalHandleTouchStart","handleTouchMove","originalHandleTouchMove","handleTouchEnd","originalHandleTouchEnd","boardRef","setScale","setOffset","isDragging","dragStart","touchStart","pinchStart","scaleRef","offsetRef","viewportSize","innerHeight","history","historyIndex","updateViewport","addEventListener","removeEventListener","clampOffset","newOffset","scaledSize","minX","minY","restoreBoardState","exportBoardState","animateReset","startScale","startOffset","targetOffset","ANIMATION_DURATION","onUpdate","easedProgress","pow","handleZoom","delta","mouseX","mouseY","prevScale","newScale","currentOffset","boardX","boardY","direction","handleWheel","throttle","deltaY","closest","offsetX","offsetY","dx","dy","boardRect","getBoundingClientRect","clickX","clickY","tweetX","tweetY","touches","touch1","touch2","distance","sqrt","centerX","centerY","touch","scaleChange","changedTouches","handleKeyDown","tagName","ctrlKey","handleContextMenu","boardElement","passive","useBoardInteraction","tweetPermissionsMap","socketRef","useWebSocket","socket","io","REACT_APP_WS_URL","reconnection","reconnectionAttempts","reconnectionDelay","on","disconnect","emit","count","like_data","like","new_board_id","_ref7","_ref8","_ref9","_ref10","share_data","updatedBoard","_ref11","debouncedRefresh","fetchData","boardsData","validBoards","b","fetchBoards","handleOptimisticUpdate","optimisticUpdateFn","serverUpdateFn","rollbackFn","isNewTweet","handleTweetCreation","_content$value2","_popupState$replyTwee","tempTweetId","_popupState$replyTwee2","_socketRef$current","handleReply","throttlePopup","handleMouseUpWithPopup","handleTouchEndWithPopup","handleEditTweet","tweetPermissions","handlePinToggle","isPinning","_socketRef$current2","handleSaveEditedTweet","_editModalState$tweet","_editModalState$tweet2","_editModalState$tweet3","_editModalState$tweet4","_editModalState$tweet5","_editModalState$tweet6","_editModalState$tweet7","_socketRef$current4","_socketRef$current3","_socketRef$current5","handleLikeTweet","likeData","liked_at","_socketRef$current6","handleDeleteTweet","_socketRef$current7","handleSetReminder","_socketRef$current8","handleShareTweet","shareData","shared_at","_t$analytics","_socketRef$current9","handleLoadMore","handlePrevPage","handleNextPage","getRelatedTweetIds","tweetIds","handleViewToggle","validTweets","seenIds","a","tweetProps","_editModalState$tweet8","onSetReminder","onShare","renderTweet","_tweets$find","_tweets$find$content","tweetContent","tweetVariants","random","BoardStyles","_socketRef$current10","renderedTweets","AnimatePresence","renderError","LoadingSpinner","ArrowBack","userSelect","onMouseMove","onMouseUp","onTouchMove","Refresh","ArrowCircleLeft","ArrowCircleRight","_Fragment","RestartAlt","Remove","Add","onKeyDown","disableEscapeKeyDown","minRows","helperText","FormControl","InputLabel","Select","labelId","MenuItem","startIcon","areEqual","_nextProps$availableB","_nextProps$availableB2","_nextProps$availableB3","prevPoints","setPrevPoints","Toll","pointsCache","usePoints","pointsData","setPointsData","topContributors","setTopContributors","debounceTimer","abortControllers","customMessage","fn","ms","_len","args","_key","normalizeContributors","contributor","member_id","total_points","avatar","createAbortController","cleanupAbortControllers","fetchPointsData","api","fetchPoints","debouncedFetchPointsData","fetchTopContributorsList","fetchTopContributors","debouncedFetchTopContributorsList","transferUserPoints","recipientId","amount","transferPoints","sender_points","donated_points","updatePointsData","targetUserId","reason","updatePoints","buttonVariants","_boardData$child_boar2","useTheme","useParams","authData","handleLogout","isAuthenticated","authLoading","useAuth","pointsRef","pointsVisible","setPointsVisible","editingBoard","setEditingBoard","membersDialogOpen","setMembersDialogOpen","shareDialogOpen","setShareDialogOpen","deleteDialogOpen","setDeleteDialogOpen","anchorEl","setAnchorEl","setInviteLink","pointsSpent","setPointsSpent","isMounted","boardItem","boardData","boardLoading","boardError","fetchBoard","updateExistingBoard","toggleFavoriteBoard","deleteExistingBoard","addMemberToBoard","removeMemberFromBoard","updateMemberRole","clearBoardTweets","pointsLoading","gates","gatesLoading","fetchGatesList","useGates","classes","classesLoading","fetchClassesList","useClasses","_members$find","creator_id","is_public","isFavorited","_boardData$favorited_","_boardData$favorited_2","favorited_by","boardVisibility","_boardData$visibility","debouncedFetchBoard","debouncedFetchPoints","observer","IntersectionObserver","entry","isIntersecting","observe","prev_points","handleUpdateBoard","validationError","validateBoardData","gate_id","class_id","settings","handleFavorite","_boardData$settings","_boardData$settings2","_boardData$settings3","_boardData$settings4","_boardData$settings5","_boardData$settings6","_boardData$settings7","_boardData$settings8","_boardData$settings9","max_tweets","tweet_cost","max_members","favorite_cost","points_to_creator","allow_invites","require_approval","ai_moderation_enabled","auto_archive_after","current_user","handleManageMembers","handleShare","origin","handleOpenDeleteDialog","handleCopyLink","clipboard","write","handleMenuOpen","handleMenuClose","_data$name","s","childBoardMenuItems","_boardData$child_boar","child_board_ids","childId","Skeleton","Public","Lock","Favorite","FavoriteBorder","Share","Badge","badgeContent","People","Edit","MoreVert","Menu","slotProps","AnimatedPoints","PointsDeductionAnimation","BoardFormDialog","setBoard","onSave","onCancel","MemberFormDialog","addMember","removeMember","InputProps","readOnly","DeleteConfirmationDialog","onConfirm"],"sourceRoot":""}