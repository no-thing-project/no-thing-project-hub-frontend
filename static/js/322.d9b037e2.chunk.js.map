{"version":3,"file":"static/js/322.d9b037e2.chunk.js","mappings":"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","sources":["utils/formatPoints.js","styles/BaseStyles.js","components/social-features/Board/BoardStyles.js","hooks/useBoard.js","components/social-features/Tweet/TweetContentStyles.js","components/social-features/Tweet/Tweet.jsx","components/social-features/Tweet/ModalStyles.js","components/social-features/Tweet/LinkPreview.jsx","components/social-features/Tweet/TweetContent.jsx","components/social-features/Tweet/TweetPopupStyles.js","constants/validations.js","components/social-features/Tweet/TweetPopup.jsx","hooks/useFileUpload.js","api/tweetsApi.js","utils/tweetUtils.js","hooks/useTweets.js","components/social-features/Board/Board.jsx","hooks/useWebSocket.js","components/AnimatedPoints/AnimatedPoints.jsx","components/PointsDeductionAnimation/PointsDeductionAnimation.jsx","hooks/usePoints.js","api/pointsApi.js","pages/BoardPage.jsx"],"sourcesContent":["/**\n * Formats a number into a compact string representation (e.g., 1500 -> \"1.5K\", 1500000 -> \"1.5M\").\n * @param {number} points - The number to format.\n * @param {Object} [options] - Formatting options.\n * @param {number} [options.decimals=1] - Number of decimal places (0 to disable).\n * @param {boolean} [options.allowNegative=false] - Allow negative numbers.\n * @returns {string} Formatted string or \"0\" for invalid inputs.\n */\nexport const formatPoints = (points, options = {}) => {\n  const { decimals = 1, allowNegative = false } = options;\n\n  // Validate input\n  if (typeof points !== 'number' || Number.isNaN(points)) {\n    return '0';\n  }\n\n  // Handle negative numbers\n  const isNegative = points < 0;\n  if (isNegative && !allowNegative) {\n    return '0';\n  }\n  const absPoints = Math.abs(points);\n\n  // Configuration for thresholds and suffixes\n  const formats = [\n    { threshold: 1_000_000_000, suffix: 'B' },\n    { threshold: 1_000_000, suffix: 'M' },\n    { threshold: 1_000, suffix: 'K' },\n    { threshold: 0, suffix: '' },\n  ];\n\n  // Find appropriate format\n  const { threshold, suffix } = formats.find(({ threshold }) => absPoints >= threshold) || formats[formats.length - 1];\n\n  // Format number\n  if (threshold === 0) {\n    return (isNegative ? '-' : '') + absPoints.toString();\n  }\n\n  const value = absPoints / threshold;\n  const formattedValue = decimals === 0\n    ? Math.round(value).toString()\n    : value.toFixed(decimals).replace(/\\.0+$/, '');\n\n  return (isNegative ? '-' : '') + formattedValue + suffix;\n};","import { alpha } from \"@mui/material\";\nimport theme from \"../Theme\";\n\n// Override theme breakpoints to include sm at 770px\nconst customTheme = {\n  ...theme,\n  breakpoints: {\n    ...theme.breakpoints,\n    values: {\n      xs: 150,\n      sm: 700,\n      md: 1200,\n      lg: 1500,\n      xl: 1536,\n    },\n  },\n};\n\nexport const BOARD_SIZE = 10000;\nexport const BASE_Z_INDEX = 10;\nexport const BASE_SHADOW = \"0 4px 16px rgba(0,0,0,0.12)\";\nexport const HOVER_SHADOW = \"0 8px 24px rgba(0,0,0,0.18)\";\nexport const MODAL_Z_INDEX = 111;\nexport const MODAL_SHADOW = \"0 8px 28px rgba(0,0,0,0.22)\";\nexport const MEDIA_PREVIEW_SIZE = 250;\nexport const TWEET_Z_INDEX = 99;\n\nexport const baseTypographyStyles = {\n  color: \"text.primary\",\n  fontWeight: 400,\n  lineHeight: 1.6,\n};\n\nexport const baseHoverEffect = {\n  \"&:hover\": { transform: \"translateY(-2px)\", boxShadow: HOVER_SHADOW },\n  \"&:focus\": { outline: (theme) => `2px solid ${alpha(theme.palette.primary.main, 0.5)}`, outlineOffset: 2 },\n};\n\nexport const baseCardStyles = {\n  bgcolor: \"background.paper\",\n  borderRadius: customTheme.shape.borderRadiusMedium,\n  boxShadow: BASE_SHADOW,\n  border: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.6)}`,\n  transition: \"all 0.3s ease\",\n  ...baseHoverEffect,\n  width: { xs: \"100%\", sm: \"auto\" },\n  boxSizing: \"border-box\",\n};\n\nexport const baseButtonStyles = {\n  borderRadius: customTheme.shape.borderRadiusLarge,\n  textTransform: \"none\",\n  transition: \"all 0.2s ease\",\n  fontWeight: 600,\n  \"&:hover\": { transform: \"scale(1.02)\", backgroundColor: (theme) => theme.palette.primary.dark },\n  \"&:active\": { transform: \"scale(0.98)\" },\n  \"&:focus\": { outline: (theme) => `2px solid ${alpha(theme.palette.primary.main, 0.5)}`, outlineOffset: 2 },\n  \"&:disabled\": { backgroundColor: \"action.disabled\", color: \"action.disabledOpacity\" },\n};\n\nexport const actionButtonStyles = {\n  height: { xs: \"40px\", sm: \"50px\" },\n  minWidth: { xs: \"120px\", sm: \"150px\" },\n  borderRadius: customTheme.shape.borderRadiusLarge,\n  padding: { xs: \"0 15px\", sm: \"0 25px\" },\n  backgroundColor: \"primary.main\",\n  color: \"primary.contrastText\",\n  boxShadow: \"none\",\n  fontSize: { xs: \"0.7rem\", sm: \"1rem\" },\n  fontWeight: 600,\n  transition: \"all 0.3s ease-in-out\",\n  \"&:hover\": { backgroundColor: \"primary.dark\", boxShadow: \"none\" },\n  \"&:disabled\": { backgroundColor: \"action.disabled\", color: \"action.disabledOpacity\" },\n};\n\nexport const cancelButtonStyle = {\n  height: { xs: \"40px\", sm: \"50px\" },\n  minWidth: { xs: \"120px\", sm: \"150px\" },\n  borderRadius: customTheme.shape.borderRadiusLarge,\n  padding: { xs: \"0 15px\", sm: \"0 25px\" },\n  backgroundColor: \"background.default\",\n  color: \"text.primary\",\n  boxShadow: \"none\",\n  fontSize: { xs: \"0.7rem\", sm: \"1rem\" },\n  fontWeight: 600,\n  transition: \"all 0.3s ease-in-out\",\n  \"&:hover\": { backgroundColor: \"background.hover\", boxShadow: \"none\" },\n  \"&:disabled\": { backgroundColor: \"action.disabled\", color: \"action.disabledOpacity\" },\n};\n\nexport const deleteButtonStyle = {\n  height: { xs: \"40px\", sm: \"50px\" },\n  minWidth: { xs: \"120px\", sm: \"150px\" },\n  borderRadius: customTheme.shape.borderRadiusLarge,\n  padding: { xs: \"0 15px\", sm: \"0 25px\" },\n  backgroundColor: \"error.main\",\n  color: \"error.contrastText\",\n  boxShadow: \"none\",\n  fontSize: { xs: \"0.7rem\", sm: \"1rem\" },\n  fontWeight: 600,\n  transition: \"all 0.3s ease-in-out\",\n  \"&:hover\": { backgroundColor: \"error.dark\", boxShadow: \"none\" },\n  \"&:disabled\": { backgroundColor: \"action.disabled\", color: \"action.disabledOpacity\" },\n};\n\nexport const inputStyles = {\n  mt: customTheme.spacing(1),\n  backgroundColor: \"background.default\",\n  borderRadius: customTheme.shape.borderRadiusSmall,\n  \"& .MuiInputLabel-root\": { color: \"text.secondary\", fontSize: { xs: \"0.7rem\", sm: \"1rem\" } },\n  \"& .MuiInputLabel-root.Mui-focused\": { color: \"primary.main\" },\n  \"& .MuiOutlinedInput-root\": {\n    borderRadius: customTheme.shape.borderRadiusSmall,\n    \"& .MuiOutlinedInput-notchedOutline\": { border: \"none\" },\n    \"&:hover .MuiOutlinedInput-notchedOutline\": { border: \"none\" },\n    \"&.Mui-focused .MuiOutlinedInput-notchedOutline\": { border: \"none\" },\n  },\n  \"& .MuiInputBase-input\": { fontSize: { xs: \"0.7rem\", sm: \"1rem\" } },\n  \"& .MuiInputBase-input::placeholder\": { color: \"text.secondary\", opacity: 1 },\n};\n\nexport const inputStylesWhite = {\n  mt: customTheme.spacing(1),\n  backgroundColor: \"background.paper\",\n  borderRadius: customTheme.shape.borderRadiusSmall,\n  \"& .MuiInputLabel-root\": { color: \"text.secondary\", fontSize: { xs: \"0.7rem\", sm: \"1rem\" } },\n  \"& .MuiInputLabel-root.Mui-focused\": { color: \"primary.main\" },\n  \"& .MuiOutlinedInput-root\": {\n    borderRadius: customTheme.shape.borderRadiusSmall,\n    \"& .MuiOutlinedInput-notchedOutline\": { border: \"none\" },\n    \"&:hover .MuiOutlinedInput-notchedOutline\": { border: \"none\" },\n    \"&.Mui-focused .MuiOutlinedInput-notchedOutline\": { border: \"none\" },\n  },\n  \"& .MuiInputBase-input\": { fontSize: { xs: \"0.7rem\", sm: \"1rem\" } },\n  \"& .MuiInputBase-input::placeholder\": { color: \"text.secondary\", opacity: 1 },\n};\n\nexport const selectStyles = {\n  mt: customTheme.spacing(1),\n  backgroundColor: \"background.default\",\n  borderRadius: customTheme.shape.borderRadiusSmall,\n  \"& .MuiOutlinedInput-root\": {\n    borderRadius: customTheme.shape.borderRadiusSmall,\n    \"& fieldset\": { border: \"none\" },\n    \"&:hover fieldset\": { border: \"none\" },\n    \"&.Mui-focused fieldset\": { border: \"none\" },\n  },\n  \"& .MuiSelect-select\": { fontSize: { xs: \"0.7rem\", sm: \"1rem\" } },\n  \"& .MuiSelect-icon\": { color: \"text.primary\" },\n  \"& .MuiInputLabel-root\": { fontSize: { xs: \"0.7rem\", sm: \"1rem\" } },\n};\n\nexport const chipStyles = {\n  fontSize: { xs: \"0.75rem\", md: \"0.7rem\" },\n  padding: { xs: \"0.3rem 0.5rem\", md: \"0.5rem 1rem\" },\n  border: \"none\",\n};\n\nexport const headerStyles = {\n  card: {\n    borderRadius: { xs: 1, sm: 1.5 },\n    mb: 3,\n    backgroundColor: \"background.paper\",\n    boxShadow: \"none\",\n    width: { xs: \"100%\", sm: \"auto\" },\n    boxSizing: \"border-box\",\n  },\n  content: {\n    display: \"flex\",\n    flexDirection: { xs: \"column\", sm: \"row\" }, // Stack on mobile, row on desktop\n    alignItems: { xs: \"center\", sm: \"center\" },\n    justifyContent: { xs: \"center\", sm: \"space-between\" },\n    mt: 1,\n    mb: 1,\n    mx: { xs: 2, sm: 3 },\n    gap: { xs: 2, sm: 3 },\n    textAlign: { xs: \"center\", sm: \"left\" },\n  },\n  leftSection: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: 1,\n    width: { xs: \"100%\", sm: \"auto\" }, // Full width on mobile\n  },\n  rightSection: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: { xs: \"center\", sm: \"flex-end\" },\n    width: { xs: \"100%\", sm: \"auto\" },\n    mt: { xs: 1, sm: 0 },\n  },\n  title: { fontWeight: 400, color: \"text.primary\" },\n  level: { color: \"text.secondary\" },\n  buttonGroup: {\n    display: \"contents\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: { xs: \"center\", sm: \"flex-end\" },\n    gap: { xs: 1, sm: 0.5 },\n    width: { xs: \"100%\", sm: \"100%\" },\n    flexWrap: \"wrap\",\n  },\n  splitButtonGroup: {\n    display: \"flex\",\n    flexDirection: { xs: \"row\", sm: \"column\" },\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: { xs: \"100%\", sm: \"auto\" },\n    gap: { xs: 1, sm: 2 },\n    flexWrap: { xs: \"wrap\", sm: \"nowrap\" },\n  },\n  chipContainer: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    flexWrap: { xs: \"nowrap\", sm: \"wrap\" },\n    gap: { xs: 0.5, sm: 1 },\n    mt: 1,\n    width: { xs: \"100%\", sm: \"auto\" },\n    justifyContent: { xs: \"center\", sm: \"start\" },\n    overflowX: { xs: \"auto\", sm: \"visible\" },\n    \"&::-webkit-scrollbar\": { display: \"none\" },\n    msOverflowStyle: \"none\",\n    scrollbarWidth: \"none\",\n  },\n  chip: {\n    fontSize: { xs: \"0.65rem\", sm: \"0.75rem\" },\n    padding: { xs: \"0.2rem\", sm: \"0.3rem 0.6rem\" },\n    height: { xs: \"32px\", sm: \"28px\" },\n    transition: customTheme.transitions.create([\"width\", \"padding\"], {\n      duration: customTheme.transitions.duration.short,\n      easing: customTheme.transitions.easing.easeInOut,\n    }),\n    cursor: \"pointer\",\n    \"& .MuiChip-label\": { padding: { xs: 0, sm: \"0 6px\" }, display: { xs: \"none\", sm: \"inline\" } },\n    \"& .MuiChip-icon\": { margin: { xs: \"0\", sm: \"0 0 0 -4px\" }, fontSize: { xs: \"0.7rem\", sm: \"1rem\" } },\n  },\n  chipExpanded: {\n    width: \"auto\",\n    padding: { xs: \"0.2rem 0.6rem\", sm: \"0.5rem 1rem\" },\n    \"& .MuiChip-label\": { display: \"inline\" },\n  },\n  chipCollapsed: {\n    width: { xs: \"32px\", sm: \"auto\" },\n    padding: { xs: \"0.2rem\", sm: \"0.3rem 0.6rem\" },\n    \"& .MuiChip-label\": { display: { xs: \"none\", sm: \"inline\" } },\n  },\n};\n\nexport const fieldStyles = {\n  container: { mb: 2 },\n  label: { fontWeight: 400, mb: 0.5 },\n  input: {\n    \"& .MuiOutlinedInput-notchedOutline\": { border: \"none\" },\n    backgroundColor: \"background.default\",\n    borderRadius: customTheme.shape.borderRadiusSmall,\n  },\n  value: { color: \"text.secondary\" },\n};\n\nexport const sectionStyles = {\n  card: {\n    borderRadius: { xs: 1, sm: 1.5 },\n    backgroundColor: \"background.paper\",\n    boxShadow: \"none\",\n    mb: 3,\n    width: { xs: \"100%\", sm: \"auto\" },\n    boxSizing: \"border-box\",\n  },\n  content: { mx: { xs: 2, sm: 3 }, my: 3 },\n  title: { fontWeight: 500, mb: 5 },\n};\n\nexport const toggleStyles = {\n  formControl: { gap: 2, \"& .MuiFormControlLabel-label\": { minWidth: \"120px\", fontWeight: 400 } },\n  switch: {\n    width: 42,\n    height: 24,\n    padding: 0,\n    \"&:active .MuiSwitch-thumb\": { width: 15 },\n    \"& .MuiSwitch-switchBase\": {\n      padding: 0.25,\n      \"&.Mui-checked\": { transform: \"translateX(18px)\", color: \"#fff\", \"& + .MuiSwitch-track\": { backgroundColor: \"primary.main\", opacity: 1 } },\n      \"&.Mui-disabled\": { color: \"grey.400\", \"& + .MuiSwitch-track\": { backgroundColor: \"action.disabledBackground\", opacity: 1 } },\n    },\n    \"& .MuiSwitch-thumb\": {\n      boxShadow: \"0 2px 4px rgba(0,0,0,0.3)\",\n      width: 20,\n      height: 20,\n      borderRadius: 10,\n      transition: customTheme.transitions.create([\"width\"], { duration: 200 }),\n      backgroundColor: \"background.default\",\n    },\n    \"& .MuiSwitch-track\": {\n      borderRadius: 12,\n      backgroundColor: \"grey.400\",\n      opacity: 1,\n      transition: customTheme.transitions.create([\"background-color\"], { duration: 200 }),\n      \"&.Mui-disabled\": { backgroundColor: \"action.disabledBackground\", opacity: 0.7 },\n    },\n  },\n};\n\nexport const containerStyles = {\n  width: { xs: \"100%\", sm: \"auto\" },\n  maxWidth: { xs: \"100%\", sm: \"1500px\" },\n  margin: { xs: 0, sm: \"0 auto\" },\n  padding: { xs: 0, sm: 1 },\n  boxSizing: \"border-box\",\n};\n\nexport const gridStyles = {\n  container: {\n    display: \"grid\",\n    gap: 2,\n    gridTemplateColumns: {\n      xs: \"1fr\",\n      sm: \"repeat(auto-fill, minmax(300px, 1fr))\",\n    },\n  },\n};\n\nexport const skeletonStyles = {\n  container: {\n    borderRadius: customTheme.shape.borderRadiusMedium,\n    bgcolor: \"grey.200\",\n  },\n  header: {\n    height: { xs: 80, sm: 100 },\n    mb: 2,\n  },\n  filter: {\n    height: { xs: 40, sm: 50 },\n    mb: 2,\n  },\n  card: {\n    height: { xs: 180, sm: 200 },\n  },\n};\n\nexport const dialogStyles = {\n  paper: {\n    borderRadius: customTheme.shape.borderRadiusMedium,\n    boxShadow: MODAL_SHADOW,\n    bgcolor: \"background.paper\",\n    width: { xs: \"90%\", sm: \"500px\" },\n    maxWidth: \"100%\",\n    p: { xs: 2, sm: 3 },\n  },\n  title: {\n    ...baseTypographyStyles,\n    fontSize: { xs: \"1.25rem\", sm: \"1.5rem\" },\n    fontWeight: 500,\n    mb: 2,\n  },\n  content: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: 2,\n  },\n  actions: {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    gap: 1,\n    mt: 2,\n  },\n};\n\nexport const filterStyles = {\n  container: {\n    display: \"flex\",\n    flexDirection: { xs: \"column\", sm: \"row\" },\n    gap: { xs: 1, sm: 2 },\n    mb: 3,\n    alignItems: { xs: \"stretch\", sm: \"center\" },\n  },\n  search: {\n    flex: 1,\n    maxWidth: { xs: \"100%\", sm: \"400px\" },\n  },\n  select: {\n    minWidth: { xs: \"100%\", sm: \"150px\" },\n  },\n  resetButton: {\n    height: { xs: \"40px\", sm: \"50px\" },\n    minWidth: { xs: \"100%\", sm: \"120px\" },\n  },\n};","import { alpha } from '@mui/material';\n\n// Constants for reuse\nconst BOARD_SIZE = 10000;\nconst BASE_Z_INDEX = 10; // Board\nconst BASE_SHADOW = '0 4px 16px rgba(0,0,0,0.12)';\nconst MODAL_Z_INDEX = 111; // Edit Tweet Modal, Options Modal, Media Modal\nconst MODAL_SHADOW = '0 8px 28px rgba(0,0,0,0.22)';\n\n// Reusable style objects\nconst baseModalStyles = {\n  bgcolor: 'background.paper',\n  boxShadow: MODAL_SHADOW,\n  borderRadius: 3,\n  outline: 'none',\n  animation: 'fadeIn 0.3s ease-in-out',\n  '@keyframes fadeIn': {\n    from: { opacity: 0, transform: 'translate(-50%, -48%) scale(0.98)' },\n    to: { opacity: 1, transform: 'translate(-50%, -50%) scale(1)' },\n  },\n};\n\nconst baseButtonStyles = {\n  borderRadius: '24px',\n  textTransform: 'none',\n  transition: 'all 0.2s ease',\n  '&:hover': { transform: 'scale(1.02)' },\n};\n\nconst baseTypographyStyles = {\n  color: 'text.primary',\n  fontWeight: 400,\n  lineHeight: 1.6,\n};\n\nconst BoardStyles = {\n  boardContainer: {\n    display: 'flex',\n    width: '100%',\n    height: '100%',\n    overflow: 'hidden',\n    zIndex: BASE_Z_INDEX,\n  },\n  boardMain: (isListView, dragging) => ({\n    flex: 1,\n    position: 'relative',\n    overflow: isListView ? 'auto' : 'hidden',\n    cursor: isListView ? 'default' : dragging ? 'grabbing' : 'grab',\n    touchAction: isListView ? 'auto' : 'none',\n    bgcolor: isListView ? (theme) => theme.palette.grey[50] : 'background.paper',\n    zIndex: BASE_Z_INDEX,\n  }),\n  boardCanvas: (scale, offset) => ({\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: BOARD_SIZE,\n    height: BOARD_SIZE,\n    backgroundColor: 'background.paper',\n    backgroundImage: 'radial-gradient(rgba(0,0,0,0.1) 1px, transparent 1px)',\n    backgroundSize: '20px 20px',\n    transform: `translate(${offset.x}px, ${offset.y}px) scale(${scale})`,\n    transformOrigin: 'top left',\n    zIndex: BASE_Z_INDEX,\n  }),\n  boardTitleContainer: (scale) => ({\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: `translate(-50%, -50%) scale(${1 / scale})`,\n    pointerEvents: 'none',\n    maxWidth: '85vw',\n    textAlign: 'center',\n  }),\n  boardTitle: (titleLength) => ({\n    color: (theme) => theme.palette.grey[300],\n    fontSize: `${Math.min(16, 100 / (titleLength || 1))}vw`,\n    fontWeight: 700,\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    '@media (max-width: 600px)': { fontSize: `calc(${Math.min(16, 100 / (titleLength || 1))}vw * 0.8)` },\n  }),\n  boardEmptyMessage: {\n    position: 'absolute',\n    top: '60%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    color: 'text.secondary',\n    fontSize: { xs: '0.9rem', sm: '1rem' },\n  },\n  boardBackButtonContainer: {\n    position: 'absolute',\n    top: 16,\n    left: 16,\n    zIndex: 99,\n  },\n  boardBackButton: {\n    fontSize: { xs: '1.25rem', sm: '1.5rem' },\n    bgcolor: 'background.paper',\n    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n    transition: 'all 0.2s ease',\n    '&:hover': { bgcolor: (theme) => theme.palette.grey[100], transform: 'scale(1.1)' },\n  },\n  boardControlsContainer: {\n    position: 'fixed',\n    bottom: 16,\n    right: 16,\n    zIndex: 99,\n    display: 'flex',\n    alignItems: 'center',\n    gap: 1.5,\n    bgcolor: 'background.paper',\n    borderRadius: 3,\n    p: 1,\n    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n    transition: 'all 0.2s ease',\n    '&:hover': { transform: 'scale(1.03)' },\n    '@media (max-width: 600px)': { transform: 'scale(0.9)', gap: 1 },\n  },\n  boardViewToggleButton: {\n    ...baseButtonStyles,\n    px: { xs: 1.75, sm: 2.25 },\n    py: 0.75,\n    bgcolor: (theme) => theme.palette.grey[100],\n    color: 'text.primary',\n    '&:hover': {\n      bgcolor: 'primary.light',\n      boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n    },\n    '@media (max-width: 600px)': { fontSize: '0.8rem', px: 1.25 },\n  },\n  boardZoomButton: {\n    bgcolor: (theme) => theme.palette.grey[100],\n    transition: 'all 0.2s ease',\n    '&:hover': { bgcolor: (theme) => theme.palette.grey[200], transform: 'scale(1.1)' },\n  },\n  boardZoomText: {\n    fontSize: { xs: '0.8rem', sm: '0.875rem' },\n    color: 'text.secondary',\n    fontWeight: 500,\n  },\n  boardListViewContainer: {\n    p: { xs: 2.5, sm: 3 },\n    maxWidth: { xs: '95vw', sm: '720px' },\n    mx: 'auto',\n    display: 'flex',\n    flexDirection: 'column',\n    minHeight: '100%',\n  },\n  boardListViewTweet: (isReply) => ({\n    width: '100%',\n    maxWidth: { xs: '95vw', sm: '640px' },\n    mx: 'auto',\n    mb: 2.5,\n    pl: isReply ? 4 : 0,\n    borderLeft: isReply\n      ? (theme) => `2px solid ${alpha(theme.palette.primary.main, 0.3)}`\n      : 'none',\n  }),\n  boardErrorContainer: {\n    p: 3,\n    textAlign: 'center',\n  },\n  boardErrorText: {\n    color: 'error.main',\n    mb: 2,\n    fontWeight: 500,\n    fontSize: { xs: '0.9rem', sm: '1rem' },\n  },\n  boardErrorButton: {\n    ...baseButtonStyles,\n    px: 3.5,\n    py: 1.25,\n    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n    '&:hover': { boxShadow: '0 4px 12px rgba(0,0,0,0.15)', bgcolor: 'primary.light' },\n  },\n  boardEditDialog: {\n    '& .MuiDialog-paper': {\n      ...baseModalStyles,\n      borderRadius: 3,\n      p: 2.5,\n      zIndex: MODAL_Z_INDEX,\n    },\n  },\n  boardEditDialogTitle: {\n    ...baseTypographyStyles,\n    fontWeight: 500,\n    fontSize: { xs: '1.15rem', sm: '1.25rem' },\n    pb: 1.5,\n  },\n  boardEditDialogContent: {\n    display: 'flex',\n    flexDirection: 'column',\n    gap: 2.5,\n    pt: 1.5,\n  },\n  boardEditTextField: {\n    '& .MuiOutlinedInput-root': {\n      borderRadius: 3,\n      transition: 'all 0.2s ease',\n      '&:hover fieldset': { borderColor: 'primary.main' },\n      '&.Mui-focused fieldset': {\n        boxShadow: (theme) => `0 0 0 3px ${alpha(theme.palette.primary.main, 0.1)}`,\n        borderColor: 'primary.main',\n      },\n    },\n  },\n  boardEditFormControl: {\n    '& .MuiOutlinedInput-root': {\n      borderRadius: 3,\n      transition: 'all 0.2s ease',\n      '&:hover fieldset': { borderColor: 'primary.main' },\n      '&.Mui-focused fieldset': {\n        boxShadow: (theme) => `0 0 0 3px ${alpha(theme.palette.primary.main, 0.1)}`,\n        borderColor: 'primary.main',\n      },\n    },\n  },\n  boardEditCancelButton: {\n    ...baseButtonStyles,\n    px: 3.5,\n    color: 'text.secondary',\n    '&:hover': { bgcolor: (theme) => theme.palette.grey[100] },\n  },\n  boardEditSaveButton: {\n    ...baseButtonStyles,\n    px: 3.5,\n    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n    '&:hover': {\n      boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n      bgcolor: 'primary.light',\n    },\n    '&:disabled': {\n      bgcolor: (theme) => theme.palette.grey[300],\n      color: (theme) => theme.palette.grey[500],\n      boxShadow: 'none',\n    },\n  },\n};\n\nexport default BoardStyles;","import { useState, useCallback, useEffect, useRef, useMemo } from 'react';\nimport { throttle } from 'lodash';\nimport { animate } from 'framer-motion';\n\nexport const BOARD_SIZE = 10000;\nconst ZOOM_MIN = 0.3;\nconst ZOOM_MAX = 2;\nconst ZOOM_STEP = 0.1;\nconst ZOOM_SENSITIVITY = 0.0005;\nconst MOVE_STEP = 50;\nconst PINCH_SENSITIVITY = 0.005;\nconst ANIMATION_DURATION = 400;\n\n\nexport const useBoardInteraction = (boardRef) => {\n  const [scale, setScale] = useState(1);\n  const [offset, setOffset] = useState({ x: 0, y: 0 });\n  const isDragging = useRef(false);\n  const dragStart = useRef(null);\n  const touchStart = useRef(null);\n  const pinchStart = useRef(null);\n  const scaleRef = useRef(scale);\n  const offsetRef = useRef(offset);\n  const viewportSize = useRef({ width: window.innerWidth, height: window.innerHeight });\n  const history = useRef([]);\n  const historyIndex = useRef(-1);\n\n  // Update refs\n  useEffect(() => {\n    scaleRef.current = scale;\n    offsetRef.current = offset;\n  }, [scale, offset]);\n\n  // Update viewport size on resize\n  useEffect(() => {\n    const updateViewport = () => {\n      viewportSize.current = { width: window.innerWidth, height: window.innerHeight };\n    };\n    window.addEventListener('resize', updateViewport);\n    updateViewport();\n    return () => window.removeEventListener('resize', updateViewport);\n  }, []);\n\n  // Clamp offset to keep board within viewport\n  const clampOffset = useCallback((newOffset) => {\n    const scaledSize = BOARD_SIZE * scaleRef.current;\n    const { width, height } = viewportSize.current;\n    const minX = width - scaledSize;\n    const minY = height - scaledSize;\n    return {\n      x: Math.max(minX, Math.min(0, newOffset.x)),\n      y: Math.max(minY, Math.min(0, newOffset.y)),\n    };\n  }, []);\n\n  // Center board in viewport\n  const centerBoard = useCallback(() => {\n    const { width, height } = viewportSize.current;\n    const newOffset = {\n      x: width / 2 - (BOARD_SIZE * scaleRef.current) / 2,\n      y: height / 2 - (BOARD_SIZE * scaleRef.current) / 2,\n    };\n    setOffset(clampOffset(newOffset));\n  }, [clampOffset]);\n\n  // Restore board state\n  const restoreBoardState = useCallback((state) => {\n    if (!state) return;\n    setScale(Math.min(ZOOM_MAX, Math.max(ZOOM_MIN, state.scale || 1)));\n    setOffset(clampOffset(state.offset || { x: 0, y: 0 }));\n  }, [clampOffset]);\n\n  // Export board state\n  const exportBoardState = useCallback(() => {\n    return { scale, offset, timestamp: new Date().toISOString() };\n  }, [scale, offset]);\n\n  // Animate reset to default view\n  const animateReset = useCallback(() => {\n    const startScale = scaleRef.current;\n    const startOffset = offsetRef.current;\n    const targetScale = 1;\n    const { width, height } = viewportSize.current;\n    const targetOffset = {\n      x: width / 2 - (BOARD_SIZE * targetScale) / 2,\n      y: height / 2 - (BOARD_SIZE * targetScale) / 2,\n    };\n\n    animate(0, 1, {\n      duration: ANIMATION_DURATION / 1000,\n      ease: 'easeInOut',\n      onUpdate: (progress) => {\n        const easedProgress = 1 - Math.pow(1 - progress, 3);\n        setScale(startScale + (targetScale - startScale) * easedProgress);\n        setOffset(clampOffset({\n          x: startOffset.x + (targetOffset.x - startOffset.x) * easedProgress,\n          y: startOffset.y + (targetOffset.y - startOffset.y) * easedProgress,\n        }));\n      },\n    });\n  }, [clampOffset]);\n\n  // Handle zoom with focus point\n  const handleZoom = useCallback((delta, mouseX, mouseY) => {\n    setScale((prevScale) => {\n      const newScale = Math.min(ZOOM_MAX, Math.max(ZOOM_MIN, prevScale + delta));\n      const currentOffset = offsetRef.current;\n      let newOffset;\n      if (mouseX !== undefined && mouseY !== undefined) {\n        const boardX = (mouseX - currentOffset.x) / prevScale;\n        const boardY = (mouseY - currentOffset.y) / prevScale;\n        newOffset = clampOffset({\n          x: mouseX - boardX * newScale,\n          y: mouseY - boardY * newScale,\n        });\n      } else {\n        newOffset = clampOffset({\n          x: window.innerWidth / 2 - (BOARD_SIZE * newScale) / 2,\n          y: window.innerHeight / 2 - (BOARD_SIZE * newScale) / 2,\n        });\n      }\n      setOffset(newOffset);\n      return newScale;\n    });\n  }, [clampOffset]);\n\n  // Handle zoom buttons\n  const handleZoomButton = useCallback((direction) => {\n    if (direction === 'reset') {\n      animateReset();\n    } else {\n      handleZoom(\n        direction === 'in' ? ZOOM_STEP : -ZOOM_STEP,\n        viewportSize.current.width / 2,\n        viewportSize.current.height / 2\n      );\n    }\n  }, [handleZoom, animateReset]);\n\n  // Handle wheel zoom\n  const handleWheel = useCallback(\n    throttle((e) => {\n      e.preventDefault();\n      const delta = -e.deltaY * ZOOM_SENSITIVITY;\n      handleZoom(delta, e.clientX, e.clientY);\n    }, 16),\n    [handleZoom]\n  );\n\n  // Handle mouse drag start\n  const handleMouseDown = useCallback((e) => {\n    if (e.target.closest('.tweet-card, .tweet-popup, .return-button, .user_points, .zoom-controls, .board-top-controls, .MuiIconButton-root, .MuiButton-root')) return;\n    dragStart.current = { x: e.clientX, y: e.clientY, offsetX: offset.x, offsetY: offset.y };\n    isDragging.current = false;\n  }, [offset]);\n\n  // Handle mouse drag move\n  const handleMouseMove = useCallback(\n    throttle((e) => {\n      if (!dragStart.current) return;\n      const dx = e.clientX - dragStart.current.x;\n      const dy = e.clientY - dragStart.current.y;\n      if (!isDragging.current && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\n        isDragging.current = true;\n      }\n      if (isDragging.current) {\n        setOffset(clampOffset({\n          x: dragStart.current.offsetX + dx,\n          y: dragStart.current.offsetY + dy,\n        }));\n      }\n    }, 16),\n    [clampOffset]\n  );\n\n  // Handle mouse drag end\n  const handleMouseUp = useCallback(\n    (e, onClick) => {\n      if (!isDragging.current && dragStart.current && onClick && boardRef.current) {\n        const boardRect = boardRef.current.getBoundingClientRect();\n        const clickX = e.clientX - boardRect.left;\n        const clickY = e.clientY - boardRect.top;\n        const tweetX = (clickX - offset.x) / scale;\n        const tweetY = (clickY - offset.y) / scale;\n        if (tweetX >= 0 && tweetX <= BOARD_SIZE && tweetY >= 0 && tweetY <= BOARD_SIZE) {\n          onClick(tweetX, tweetY, e.clientX, e.clientY);\n        }\n      }\n      dragStart.current = null;\n      isDragging.current = false;\n    },\n    [boardRef, offset, scale]\n  );\n\n  // Handle touch start\n  const handleTouchStart = useCallback((e) => {\n    if (e.target.closest('.tweet-card, .tweet-popup, .MuiIconButton-root, .MuiButton-root')) return;\n    if (e.touches.length === 1) {\n      touchStart.current = {\n        x: e.touches[0].clientX,\n        y: e.touches[0].clientY,\n        offsetX: offset.x,\n        offsetY: offset.y,\n      };\n      isDragging.current = false;\n    } else if (e.touches.length === 2) {\n      const touch1 = e.touches[0];\n      const touch2 = e.touches[1];\n      const dx = touch1.clientX - touch2.clientX;\n      const dy = touch1.clientY - touch2.clientY;\n      pinchStart.current = {\n        distance: Math.sqrt(dx * dx + dy * dy),\n        centerX: (touch1.clientX + touch2.clientX) / 2,\n        centerY: (touch1.clientY + touch2.clientY) / 2,\n        scale: scaleRef.current,\n      };\n    }\n  }, [offset]);\n\n  // Handle touch move\n  const handleTouchMove = useCallback(\n    throttle((e) => {\n      if (!touchStart.current && !pinchStart.current) return;\n      if (e.touches.length === 1 && touchStart.current) {\n        const touch = e.touches[0];\n        const dx = touch.clientX - touchStart.current.x;\n        const dy = touch.clientY - touchStart.current.y;\n        if (!isDragging.current && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\n          isDragging.current = true;\n        }\n        if (isDragging.current) {\n          setOffset(clampOffset({\n            x: touchStart.current.offsetX + dx,\n            y: touchStart.current.offsetY + dy,\n          }));\n        }\n      } else if (e.touches.length === 2 && pinchStart.current) {\n        const touch1 = e.touches[0];\n        const touch2 = e.touches[1];\n        const dx = touch1.clientX - touch2.clientX;\n        const dy = touch1.clientY - touch2.clientY;\n        const currentDistance = Math.sqrt(dx * dx + dy * dy);\n        const scaleChange = (currentDistance / pinchStart.current.distance) * pinchStart.current.scale;\n        const newScale = Math.min(ZOOM_MAX, Math.max(ZOOM_MIN, scaleChange));\n        const centerX = (touch1.clientX + touch2.clientX) / 2;\n        const centerY = (touch1.clientY + touch2.clientY) / 2;\n        setScale(newScale);\n        setOffset(clampOffset({\n          x: centerX - ((centerX - offsetRef.current.x) / scaleRef.current) * newScale,\n          y: centerY - ((centerY - offsetRef.current.y) / scaleRef.current) * newScale,\n        }));\n      }\n    }, 16),\n    [clampOffset]\n  );\n\n  // Handle touch end\n  const handleTouchEnd = useCallback(\n    (e, onClick) => {\n      if (\n        !isDragging.current &&\n        touchStart.current &&\n        onClick &&\n        boardRef.current &&\n        e.changedTouches.length === 1\n      ) {\n        const boardRect = boardRef.current.getBoundingClientRect();\n        const touch = e.changedTouches[0];\n        const clickX = touch.clientX - boardRect.left;\n        const clickY = touch.clientY - boardRect.top;\n        const tweetX = (clickX - offset.x) / scale;\n        const tweetY = (clickY - offset.y) / scale;\n        if (tweetX >= 0 && tweetX <= BOARD_SIZE && tweetY >= 0 && tweetY <= BOARD_SIZE) {\n          onClick(tweetX, tweetY, touch.clientX, touch.clientY);\n        }\n      }\n      touchStart.current = null;\n      pinchStart.current = null;\n      isDragging.current = false;\n    },\n    [boardRef, offset, scale]\n  );\n\n  // Handle keyboard navigation\n  const handleKeyDown = useCallback(\n    (e) => {\n      if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;\n      switch (e.key) {\n        case '+':\n        case '=':\n          e.preventDefault();\n          handleZoom(ZOOM_STEP, viewportSize.current.width / 2, viewportSize.current.height / 2);\n          break;\n        case '-':\n          e.preventDefault();\n          handleZoom(-ZOOM_STEP, viewportSize.current.width / 2, viewportSize.current.height / 2);\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          setOffset((prev) => clampOffset({ ...prev, y: prev.y + MOVE_STEP }));\n          break;\n        case 'ArrowDown':\n          e.preventDefault();\n          setOffset((prev) => clampOffset({ ...prev, y: prev.y - MOVE_STEP }));\n          break;\n        case 'ArrowLeft':\n          e.preventDefault();\n          setOffset((prev) => clampOffset({ ...prev, x: prev.x + MOVE_STEP }));\n          break;\n        case 'ArrowRight':\n          e.preventDefault();\n          setOffset((prev) => clampOffset({ ...prev, x: prev.x - MOVE_STEP }));\n          break;\n        case 'z':\n          if (e.ctrlKey && historyIndex.current > 0) {\n            e.preventDefault();\n            historyIndex.current -= 1;\n            const state = history.current[historyIndex.current];\n            setScale(state.scale);\n            setOffset(state.offset);\n          }\n          break;\n        case 'y':\n          if (e.ctrlKey && historyIndex.current < history.current.length - 1) {\n            e.preventDefault();\n            historyIndex.current += 1;\n            const state = history.current[historyIndex.current];\n            setScale(state.scale);\n            setOffset(state.offset);\n          }\n          break;\n        default:\n          break;\n      }\n    },\n    [handleZoom, clampOffset]\n  );\n\n  // Handle context menu\n  const handleContextMenu = useCallback(\n    (e, onContextMenu) => {\n      if (e.target.closest('.tweet-card, .tweet-popup, .MuiIconButton-root, .MuiButton-root')) return;\n      e.preventDefault();\n      const boardRect = boardRef.current.getBoundingClientRect();\n      const clickX = e.clientX - boardRect.left;\n      const clickY = e.clientY - boardRect.top;\n      const tweetX = (clickX - offset.x) / scale;\n      const tweetY = (clickY - offset.y) / scale;\n      if (tweetX >= 0 && tweetX <= BOARD_SIZE && tweetY >= 0 && tweetY <= BOARD_SIZE) {\n        onContextMenu(tweetX, tweetY, e.clientX, e.clientY);\n      }\n    },\n    [boardRef, offset, scale]\n  );\n\n  // Event listeners\n  useEffect(() => {\n    const boardElement = boardRef.current;\n    if (boardElement) {\n      boardElement.addEventListener('wheel', handleWheel, { passive: false });\n      boardElement.addEventListener('mousedown', handleMouseDown);\n      boardElement.addEventListener('touchstart', handleTouchStart, { passive: false });\n    }\n    window.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('mouseup', handleMouseUp);\n    window.addEventListener('touchmove', handleTouchMove, { passive: false });\n    window.addEventListener('touchend', handleTouchEnd);\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      if (boardElement) {\n        boardElement.removeEventListener('wheel', handleWheel);\n        boardElement.removeEventListener('mousedown', handleMouseDown);\n        boardElement.removeEventListener('touchstart', handleTouchStart);\n      }\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('mouseup', handleMouseUp);\n      window.removeEventListener('touchmove', handleTouchMove);\n      window.removeEventListener('touchend', handleTouchEnd);\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [\n    handleWheel,\n    handleMouseDown,\n    handleMouseMove,\n    handleMouseUp,\n    handleTouchStart,\n    handleTouchMove,\n    handleTouchEnd,\n    handleKeyDown,\n    boardRef,\n  ]);\n\n  return {\n    scale,\n    offset,\n    setOffset,\n    dragging: isDragging.current,\n    centerBoard,\n    handleZoomButton,\n    handleWheel,\n    handleMouseDown,\n    handleMouseMove,\n    handleMouseUp,\n    handleTouchStart,\n    handleTouchMove,\n    handleTouchEnd,\n    handleContextMenu,\n    restoreBoardState,\n    exportBoardState,\n  };\n};","import { alpha } from '@mui/material';\n\n// Constants for reuse\nconst TWEET_Z_INDEX = 99;\nconst BASE_SHADOW = '0 1px 6px rgba(0,0,0,0.06)'; // Subtle shadow\nconst HOVER_SHADOW = '0 3px 10px rgba(0,0,0,0.1)';\nconst MEDIA_PREVIEW_SIZE = 150; // Smaller for mobile\n\n// Reusable style objects\nconst baseTypographyStyles = {\n  color: 'text.primary',\n  fontFamily: 'Roboto, sans-serif',\n  fontWeight: 400,\n  lineHeight: 1.4,\n  letterSpacing: '0.01em',\n};\n\nconst baseHoverEffect = {\n  '&:hover': {\n    transform: 'translateY(-1px)',\n    boxShadow: HOVER_SHADOW,\n  },\n  '&:focus': {\n    outline: (theme) => `1px solid ${alpha(theme.palette.primary.main, 0.2)}`,\n    outlineOffset: 1,\n  },\n};\n\nconst TweetContentStyles = {\n  tweetCard: (isPinned, isListView) => ({\n    p: { xs: 1, sm: 1.5 }, // Tighter padding\n    mb: 0.5, // Tighter margin\n    bgcolor: (theme) =>\n      isPinned\n        ? `linear-gradient(145deg, ${alpha(theme.palette.warning.light, 0.15)}, ${alpha(\n            theme.palette.warning.light,\n            0.05\n          )})`\n        : theme.palette.background.paper,\n    borderRadius: '32px', // Consistent corners\n    width: { xs: '40vw', sm: isListView ? '90vw' : '260px' }, // 40vw mobile\n    maxHeight: { xs: '70vh', sm: 'auto' }, // 70vh mobile\n    overflowY: { xs: 'auto', sm: 'visible' }, // Scrollable mobile\n    minWidth: { xs: '30vw', sm: '220px' },\n    maxWidth: isListView ? { xs: '40vw', sm: '440px' } : { xs: '40vw', sm: '260px' },\n    boxShadow: BASE_SHADOW,\n    position: 'relative',\n    border: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.4)}`,\n    transition: 'all 0.2s ease-out',\n    zIndex: TWEET_Z_INDEX,\n    ...baseHoverEffect,\n    '&.dragging': {\n      opacity: 1,\n      boxShadow: '0 6px 12px rgba(0,0,0,0.15)',\n      transform: 'scale(1.02)',\n    },\n  }),\n  tweetPaper: {\n    position: 'relative',\n    overflow: 'visible',\n  },\n  tweetTitle: {\n    display: 'none',\n  },\n  tweetAuthorTypography: {\n    ...baseTypographyStyles,\n    color: 'text.secondary',\n    fontSize: { xs: '0.75rem', sm: '0.875rem' }, // Aligned scale\n    fontWeight: 400,\n  },\n  pinnedIconContainer: {\n    position: 'absolute',\n    top: 8,\n    right: 8,\n  },\n  pinnedIcon: {\n    fontSize: { xs: '1rem', sm: '1.25rem' }, // Proportional\n    color: '#FFD700',\n    transition: 'all 0.2s ease-out',\n    '&:hover': {\n      transform: 'scale(1.1)',\n    },\n  },\n  replyToContainer: {\n    borderLeft: (theme) => `2px solid ${theme.palette.primary.main}`,\n    pl: 0.75,\n    mb: 0.5,\n    bgcolor: (theme) => alpha(theme.palette.grey[50], 0.95),\n    p: 0.5,\n    borderRadius: '6px',\n    fontStyle: 'italic',\n    color: 'text.secondary',\n  },\n  replyToCaption: {\n    ...baseTypographyStyles,\n    fontWeight: 500,\n    color: 'primary.main',\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n  },\n  replyToText: {\n    ...baseTypographyStyles,\n    mt: 0.25,\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    color: 'text.secondary',\n  },\n  contentText: (hasMedia) => ({\n    ...baseTypographyStyles,\n    mb: hasMedia ? 0.75 : 0,\n    fontSize: { xs: '0.875rem', sm: '1rem' }, // Larger for readability\n    wordBreak: 'break-word',\n  }),\n  imageContainer: (hasText) => ({\n    position: 'relative',\n    mb: hasText ? 0.75 : 0,\n    mt: 0.5,\n    display: 'flex',\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 0.5,\n    borderRadius: '6px',\n    width: '100%',\n  }),\n  image: (isSingle) => ({\n    width: '100%',\n    maxHeight: isSingle ? { xs: '100px', sm: '120px' } : { xs: '50px', sm: '60px' }, // Fit 70vh\n    aspectRatio: '16/9',\n    objectFit: 'cover',\n    objectPosition: 'center',\n    borderRadius: '6px',\n    border: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.4)}`,\n    opacity: 0.99,\n    transition: 'all 0.2s ease-out',\n    '&:hover': {\n      transform: 'scale(1.01)',\n      opacity: 1,\n      boxShadow: '0 1px 6px rgba(0,0,0,0.06)',\n    },\n    '&:focus': {\n      outline: (theme) => `1px solid ${theme.palette.primary.main}`,\n      outlineOffset: 1,\n    },\n  }),\n  imagePlaceholder: {\n    bgcolor: (theme) => theme.palette.grey[200],\n    width: '100%',\n    height: '100%',\n    borderRadius: '6px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: (theme) => theme.palette.grey[500],\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    ...baseTypographyStyles,\n  },\n  imageViewAll: {\n    ...baseTypographyStyles,\n    color: 'primary.main',\n    cursor: 'pointer',\n    mt: 0.5,\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    fontWeight: 600,\n    textAlign: 'right',\n    textDecoration: 'underline',\n    '&:hover': {\n      color: 'primary.dark',\n    },\n  },\n  videoContainer: (hasTextOrImages) => ({\n    mb: hasTextOrImages ? 0.75 : 0,\n    mt: 0.5,\n    display: 'flex',\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n  }),\n  videoInner: {\n    position: 'relative',\n    borderRadius: '6px',\n    overflow: 'hidden',\n  },\n  video: (duration) => ({\n    width: '100%',\n    maxHeight: duration && duration < 15 ? '80px' : '160px', // Fit 70vh\n    aspectRatio: '16/9',\n    borderRadius: '6px',\n    objectFit: 'cover',\n    objectPosition: 'center',\n    backgroundColor: 'black',\n    opacity: 0.99,\n    transition: 'all 0.2s ease-out',\n    '&:hover': {\n      transform: 'scale(1.01)',\n      opacity: 1,\n      boxShadow: '0 1px 6px rgba(0,0,0,0.06)',\n    },\n  }),\n  circleVideoContainer: {\n    position: 'relative',\n    borderRadius: '50%',\n    overflow: 'hidden',\n  },\n  circleVideo: (duration) => ({\n    width: MEDIA_PREVIEW_SIZE,\n    height: MEDIA_PREVIEW_SIZE,\n    borderRadius: '50%',\n    objectFit: 'cover',\n    objectPosition: 'center',\n    backgroundColor: 'black',\n    opacity: 0.99,\n    transition: 'all 0.2s ease-out',\n    '&:hover': {\n      transform: 'scale(1.01)',\n      opacity: 1,\n      boxShadow: '0 1px 6px rgba(0,0,0,0.06)',\n    },\n  }),\n  videoViewAll: {\n    ...baseTypographyStyles,\n    color: 'primary.main',\n    cursor: 'pointer',\n    mt: 0.5,\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    fontWeight: 600,\n    textAlign: 'right',\n    textDecoration: 'underline',\n    '&:hover': {\n      color: 'primary.dark',\n    },\n  },\n  audioContainer: (hasTextOrMedia) => ({\n    mb: hasTextOrMedia ? 0.75 : 0,\n    mt: 0.5,\n    display: 'flex',\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n  }),\n  audioPlayer: {\n    width: '100%',\n    height: '32px', // Smaller for 70vh\n    bgcolor: (theme) => theme.palette.grey[100],\n    borderRadius: '6px',\n    p: 0.5,\n    position: 'relative',\n    overflow: 'hidden',\n    '& audio': {\n      width: '100%',\n      height: '100%',\n      '&::-webkit-media-controls-panel': {\n        backgroundColor: 'transparent',\n      },\n    },\n    '& .audioVisualizer': {\n      display: 'none',\n    },\n  },\n  audioViewAll: {\n    ...baseTypographyStyles,\n    color: 'primary.main',\n    cursor: 'pointer',\n    mt: 0.5,\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    fontWeight: 600,\n    textAlign: 'right',\n    textDecoration: 'underline',\n    '&:hover': {\n      color: 'primary.dark',\n    },\n  },\n  otherFilesContainer: (hasText) => ({\n    mb: hasText ? 0.75 : 0,\n    mt: 0.5,\n    width: '100%',\n    maxWidth: { xs: '40vw', sm: '220px' },\n  }),\n  otherFileItem: (index) => ({\n    display: 'flex',\n    alignItems: 'center',\n    gap: 0.5,\n    mt: index > 0 ? 0.5 : 0,\n    p: 0.5,\n    borderRadius: '6px',\n    transition: 'all 0.2s ease-out',\n    '&:hover': {\n      bgcolor: (theme) => theme.palette.grey[100],\n      boxShadow: '0 1px 6px rgba(0,0,0,0.06)',\n    },\n  }),\n  otherFileIcon: {\n    color: 'text.secondary',\n    fontSize: { xs: '1rem', sm: '1.25rem' },\n  },\n  otherFileLink: {\n    ...baseTypographyStyles,\n    color: 'primary.main',\n    textDecoration: 'none',\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    fontWeight: 500,\n    transition: 'all 0.2s ease-out',\n    '&:hover': {\n      textDecoration: 'underline',\n      color: 'primary.dark',\n    },\n  },\n  otherFilesViewAll: {\n    ...baseTypographyStyles,\n    color: 'primary.main',\n    cursor: 'pointer',\n    mt: 0.5,\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    fontWeight: 600,\n    textAlign: 'right',\n    textDecoration: 'underline',\n    '&:hover': {\n      color: 'primary.dark',\n    },\n  },\n  readMoreButton: {\n    ...baseTypographyStyles,\n    color: 'primary.main',\n    textTransform: 'none',\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    fontWeight: 600,\n    textDecoration: 'underline',\n    '&:hover': {\n      color: 'primary.dark',\n    },\n  },\n  actionsContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    mt: 0.75,\n    justifyContent: 'space-between',\n    gap: 0.5,\n  },\n  actionButtons: {\n    display: 'flex',\n    alignItems: 'center',\n    gap: { xs: 0.25, sm: '0.5rem' },\n  },\n  likeButton: {\n    p: { xs: 0.25, sm: 0.5 },\n    minWidth: 36, // Touch-friendly\n    borderRadius: '4px',\n    transition: 'all 0.2s ease-out',\n    '&:hover': {\n      bgcolor: (theme) => alpha(theme.palette.primary.light, 0.1),\n      transform: 'scale(1.1)',\n    },\n  },\n  likeIcon: (isLiked) => ({\n    color: isLiked ? 'primary.main' : 'text.secondary',\n    fontSize: { xs: '1rem', sm: '1.25rem' },\n  }),\n  likeCount: (isLiked, animate) => ({\n    ...baseTypographyStyles,\n    color: isLiked ? 'primary.main' : 'text.secondary',\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    transform: animate ? 'scale(1.15)' : 'scale(1)',\n    ml: 0.25,\n    transition: 'transform 0.2s ease-out',\n  }),\n  replyButton: {\n    p: { xs: 0.25, sm: 0.5 },\n    minWidth: 36,\n    borderRadius: '4px',\n    transition: 'all 0.2s ease-out',\n    '&:hover': {\n      bgcolor: (theme) => alpha(theme.palette.primary.light, 0.1),\n      transform: 'scale(1.1)',\n    },\n  },\n  replyIcon: {\n    color: 'text.secondary',\n    fontSize: { xs: '1rem', sm: '1.25rem' },\n  },\n  replyCount: {\n    ...baseTypographyStyles,\n    color: 'text.secondary',\n    fontSize: { xs: '0.75rem', sm: '0.875rem' },\n    ml: 0.25,\n  },\n  statusContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    gap: 0.5,\n    mt: 0.75,\n    flexWrap: 'wrap',\n  },\n  menuButton: {\n    p: { xs: 0.25, sm: 0.5 },\n    minWidth: 36,\n    borderRadius: '4px',\n    transition: 'all 0.2s ease-out',\n    '&:hover': {\n      bgcolor: (theme) => theme.palette.grey[100],\n      transform: 'scale(1.1)',\n    },\n  },\n  menuIcon: {\n    color: 'text.secondary',\n    fontSize: { xs: '1rem', sm: '1.25rem' },\n  },\n  tweetHighlight: (isHighlighted) => ({\n    zIndex: isHighlighted ? TWEET_Z_INDEX + 1 : TWEET_Z_INDEX,\n    boxShadow: isHighlighted ? '0 4px 12px rgba(0,0,0,0.1)' : BASE_SHADOW,\n    background: isHighlighted\n      ? 'linear-gradient(145deg, #FFFFFF, #F0F2F5)'\n      : (theme) => theme.palette.background.paper,\n    transform: isHighlighted ? 'scale(1.03) translateY(-1px)' : 'none',\n    transition: 'all 0.2s ease-out',\n    borderColor: isHighlighted\n      ? (theme) => theme.palette.primary.main\n      : (theme) => alpha(theme.palette.grey[200], 0.4),\n  }),\n  draggableContainer: (isDraggable, dragging, hovered, isPinned) => ({\n    position: 'absolute',\n    transform: 'translate(-50%, -50%)',\n    cursor: isDraggable ? (dragging ? 'grabbing' : 'grab') : 'default',\n    zIndex: dragging || hovered ? TWEET_Z_INDEX + 1 : isPinned ? TWEET_Z_INDEX + 2 : TWEET_Z_INDEX,\n    transition: 'opacity 0.2s ease-out, transform 0.2s ease-out, z-index 0.2s ease-out',\n    touchAction: isDraggable ? 'none' : 'auto',\n    '&:focus': {\n      outline: isDraggable ? (theme) => `1px solid ${alpha(theme.palette.primary.main, 0.2)}` : 'none',\n      outlineOffset: 1,\n    },\n  }),\n};\n\nexport default TweetContentStyles;","import React, { useRef, useState, useEffect, useCallback, useMemo, memo } from 'react';\nimport PropTypes from 'prop-types';\nimport Draggable from 'react-draggable';\nimport debounce from 'lodash/debounce';\nimport { BOARD_SIZE } from '../../../hooks/useBoard';\nimport TweetContentStyles from './TweetContentStyles';\n\nconst DraggableTweet = ({ tweet, onStop, children, currentUser, userRole, bypassOwnership = false, scale = 1 }) => {\n  const nodeRef = useRef(null);\n  const justDroppedRef = useRef(false);\n  const previousPosition = useRef({ x: tweet.position?.x ?? 0, y: tweet.position?.y ?? 0 });\n  const [localPosition, setLocalPosition] = useState({\n    x: tweet.position?.x ?? 0,\n    y: tweet.position?.y ?? 0,\n  });\n  const [dragging, setDragging] = useState(false);\n  const [hovered, setHovered] = useState(false);\n\n  const clampPosition = useCallback((x, y) => ({\n    x: Math.max(0, Math.min(x, BOARD_SIZE - 200)),\n    y: Math.max(0, Math.min(y, BOARD_SIZE - 100)),\n  }), []);\n\n  useEffect(() => {\n    if (!dragging && !justDroppedRef.current) {\n      const newPos = clampPosition(tweet.position?.x ?? 0, tweet.position?.y ?? 0);\n      if (localPosition.x !== newPos.x || localPosition.y !== newPos.y) {\n        setLocalPosition(newPos);\n        previousPosition.current = newPos;\n      }\n    }\n  }, [tweet.position?.x, tweet.position?.y, dragging, localPosition, clampPosition]);\n\n  // Permission logic for dragging\n  const isDraggable = useMemo(() => {\n    if (!tweet || tweet.is_pinned) return false;\n    if (bypassOwnership || ['admin', 'owner'].includes(userRole)) return true;\n    if (userRole === 'viewer') {\n      return (\n        tweet.anonymous_id === currentUser?.anonymous_id ||\n        tweet.user_id === currentUser?.anonymous_id ||\n        (tweet.username && currentUser?.username && tweet.username === currentUser.username)\n      );\n    }\n    return false;\n  }, [tweet, bypassOwnership, userRole, currentUser?.anonymous_id, currentUser?.username]);\n\n  const debouncedOnStop = useMemo(\n    () =>\n      debounce((e, data) => {\n        const clampedPos = clampPosition(data.x, data.y);\n        if (\n          clampedPos.x !== previousPosition.current.x ||\n          clampedPos.y !== previousPosition.current.y\n        ) {\n          if (isNaN(clampedPos.x) || isNaN(clampedPos.y)) {\n            console.error('Invalid position data:', data);\n            return;\n          }\n          previousPosition.current = clampedPos;\n          onStop?.(e, { x: clampedPos.x, y: clampedPos.y, tweetId: tweet.tweet_id });\n        }\n      }, 150),\n    [onStop, tweet.tweet_id, clampPosition]\n  );\n\n  useEffect(() => () => debouncedOnStop.cancel(), [debouncedOnStop]);\n\n  // --- Виправлення: draggable працює у board-координатах, не враховуємо scale ---\n  const handleStart = useCallback(() => {\n    if (!isDraggable) return false;\n    setDragging(true);\n    return true;\n  }, [isDraggable]);\n\n  const handleDrag = useCallback((e, data) => {\n    setLocalPosition({ x: data.x, y: data.y });\n  }, []);\n\n  const handleStop = useCallback(\n    (e, data) => {\n      if (!isDraggable) return;\n      setDragging(false);\n      justDroppedRef.current = true;\n      setTimeout(() => (justDroppedRef.current = false), 100);\n      const clampedPos = clampPosition(data.x, data.y);\n      previousPosition.current = clampedPos;\n      onStop?.(e, { x: clampedPos.x, y: clampedPos.y, tweetId: tweet.tweet_id });\n    },\n    [isDraggable, clampPosition, onStop, tweet.tweet_id]\n  );\n\n  if (!tweet || !tweet.tweet_id) {\n    console.warn('Invalid tweet in DraggableTweet:', tweet);\n    return null;\n  }\n\n  return (\n    <Draggable\n      nodeRef={nodeRef}\n      position={localPosition}\n      positionOffset={{ x: '-50%', y: '-50%' }}\n      disabled={!isDraggable}\n      onStart={handleStart}\n      onDrag={handleDrag}\n      onStop={handleStop}\n      cancel={''} // Драг за весь блок\n    >\n      <div\n        ref={nodeRef}\n        onMouseEnter={() => setHovered(true)}\n        onMouseLeave={() => setHovered(false)}\n        style={TweetContentStyles.draggableContainer(isDraggable, dragging, hovered, tweet.is_pinned)}\n        role=\"region\"\n        aria-label={`Tweet by ${tweet.username || 'Anonymous'}`}\n        aria-disabled={!isDraggable}\n        tabIndex={isDraggable ? 0 : -1}\n      >\n        {children}\n      </div>\n    </Draggable>\n  );\n};\n\nDraggableTweet.propTypes = {\n  tweet: PropTypes.shape({\n    tweet_id: PropTypes.string.isRequired,\n    position: PropTypes.shape({\n      x: PropTypes.number,\n      y: PropTypes.number,\n    }),\n    anonymous_id: PropTypes.string,\n    user_id: PropTypes.string,\n    username: PropTypes.string,\n    status: PropTypes.string,\n    is_pinned: PropTypes.bool,\n  }).isRequired,\n  onStop: PropTypes.func,\n  children: PropTypes.node.isRequired,\n  currentUser: PropTypes.shape({\n    anonymous_id: PropTypes.string,\n    username: PropTypes.string,\n  }).isRequired,\n  userRole: PropTypes.string.isRequired,\n  bypassOwnership: PropTypes.bool,\n  scale: PropTypes.number,\n};\n\nDraggableTweet.defaultProps = {\n  bypassOwnership: false,\n  onStop: () => {},\n  scale: 1,\n};\n\nexport default memo(DraggableTweet);","import { alpha } from '@mui/material';\n\nexport const BASE_SHADOW = '0 4px 16px rgba(0,0,0,0.12)';\nexport const HOVER_SHADOW = '0 8px 24px rgba(0,0,0,0.18)';\nexport const MEDIA_PREVIEW_SIZE = 250;\nexport const TWEET_Z_INDEX = 99;\n\n\n// Reusable style objects\nconst baseTypographyStyles = {\n  color: 'text.primary',\n  fontWeight: 400,\n  lineHeight: 1.6,\n};\n\nconst baseHoverEffect = {\n  '&:hover': {\n    transform: 'translateY(-2px)',\n    boxShadow: HOVER_SHADOW,\n  },\n  '&:focus': {\n    outline: (theme) => `2px solid ${theme.palette.primary.main}`,\n    outlineOffset: 2,\n  },\n};\n\nconst baseDialogStyles = {\n  bgcolor: 'background.paper',\n  boxShadow: BASE_SHADOW,\n  borderRadius: 3,\n  border: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.6)}`,\n  animation: 'fadeIn 0.3s ease-in-out',\n  ...baseHoverEffect,\n};\n\nconst ModalStyles = {\n  mediaDialogContainer: {\n    ...baseDialogStyles,\n    maxWidth: { xs: '100%', sm: '90vw', md: '80vw' },\n    margin: { xs: 0, sm: 'auto' },\n    height: { xs: '100%', sm: 'auto' },\n  },\n  mediaDialogTitle: {\n    ...baseTypographyStyles,\n    fontSize: { xs: '1.25rem', sm: '1.5rem' },\n    fontWeight: 600,\n    padding: { xs: '12px 16px', sm: '16px 24px' },\n    borderBottom: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.6)}`,\n  },\n  mediaDialogContent: {\n    maxHeight: { xs: '70vh', sm: '60vh' },\n    overflowY: 'auto',\n    padding: { xs: '12px', sm: '16px' },\n    display: 'flex',\n    flexDirection: 'column',\n    gap: { xs: 1.5, sm: 2 },\n  },\n  optionsDialogContainer: {\n    ...baseDialogStyles,\n    maxWidth: { xs: '80vw', sm: '400px' },\n  },\n  optionsDialogTitle: {\n    ...baseTypographyStyles,\n    fontSize: { xs: '1.1rem', sm: '1.25rem' },\n    fontWeight: 600,\n    padding: { xs: '12px 16px', sm: '16px 24px' },\n    borderBottom: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.6)}`,\n  },\n  optionsDialogContent: {\n    padding: { xs: '8px 0', sm: '12px 0' },\n    overflowY: 'auto',\n  },\n  dialogActions: {\n    padding: { xs: '8px', sm: '12px' },\n    justifyContent: 'flex-end',\n  },\n  dialogCloseButton: {\n    width: { xs: 48, sm: 40 },\n    height: { xs: 48, sm: 40 },\n    color: 'text.secondary',\n    borderRadius: '50%',\n    transition: 'all 0.2s ease',\n    '&:hover': {\n      bgcolor: (theme) => alpha(theme.palette.grey[100], 0.8),\n      transform: 'scale(1.15)',\n    },\n    '&:active': {\n      transform: 'scale(0.95)',\n    },\n    '&:focus': {\n      outline: (theme) => `2px solid ${theme.palette.primary.main}`,\n      outlineOffset: 2,\n    },\n  },\n  optionsDialogItem: {\n    padding: { xs: '12px 16px', sm: '12px 24px' },\n    minHeight: 48,\n    transition: 'all 0.2s ease',\n    '&:hover': {\n      bgcolor: (theme) => alpha(theme.palette.grey[100], 0.8),\n      transform: 'scale(1.03)',\n      boxShadow: '0 4px 12px rgba(0,0,0,0.1)',\n    },\n    '&:active': {\n      transform: 'scale(0.98)',\n    },\n  },\n  modalImage: {\n    width: '100%',\n    maxHeight: { xs: '280px', sm: '360px' },\n    objectFit: 'contain',\n    borderRadius: 3,\n    border: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.6)}`,\n    transition: 'all 0.2s ease',\n    '&:hover': {\n      transform: 'scale(1.03)',\n      boxShadow: '0 4px 12px rgba(0,0,0,0.1)',\n    },\n  },\n  modalImagePlaceholder: {\n    bgcolor: (theme) => theme.palette.grey[200],\n    width: '100%',\n    height: { xs: '280px', sm: '360px' },\n    borderRadius: 3,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: (theme) => theme.palette.grey[500],\n  },\n  modalOtherFile: {\n    display: 'flex',\n    alignItems: 'center',\n    gap: 1.5,\n    padding: 1.5,\n    borderRadius: 3,\n    transition: 'all 0.2s ease',\n    '&:hover': {\n      bgcolor: (theme) => alpha(theme.palette.grey[100], 0.8),\n      boxShadow: '0 4px 12px rgba(0,0,0,0.1)',\n    },\n    '&:active': {\n      transform: 'scale(0.98)',\n    },\n  },\n  modalOtherFileIcon: {\n    color: 'text.secondary',\n    fontSize: '1.25rem',\n  },\n  modalOtherFileLink: {\n    color: 'primary.main',\n    textDecoration: 'none',\n    fontSize: { xs: '0.85rem', sm: '0.9rem' },\n    transition: 'all 0.2s ease',\n    '&:hover': {\n      textDecoration: 'underline',\n      color: 'primary.dark',\n    },\n  },\n  errorPaper: {\n    padding: 2.5,\n    textAlign: 'center',\n    borderRadius: 8,\n    boxShadow: BASE_SHADOW,\n    bgcolor: 'background.paper',\n    border: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.6)}`,\n  },\n  errorTypography: {\n    color: 'error.main',\n    fontWeight: 500,\n    fontSize: { xs: '0.9rem', sm: '1rem' },\n  },\n};\n\nexport default ModalStyles;","import React, { useState, useEffect, useCallback, useMemo, useDeferredValue } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Card,\n  CardMedia,\n  CardContent,\n  Typography,\n  Box,\n  IconButton,\n  Link,\n  CircularProgress,\n} from '@mui/material';\nimport PlayArrowIcon from '@mui/icons-material/PlayArrow';\nimport PauseIcon from '@mui/icons-material/Pause';\nimport axios from 'axios';\nimport ReactPlayer from 'react-player';\nimport URLParse from 'url-parse';\nimport { LazyLoadComponent } from 'react-lazy-load-image-component';\nimport { motion } from 'framer-motion';\nimport { alpha } from '@mui/material';\n\nconst BASE_SHADOW = '0 1px 6px rgba(0,0,0,0.06)';\nconst HOVER_SHADOW = '0 3px 10px rgba(0,0,0,0.1)';\n\nconst baseTypographyStyles = {\n  color: 'text.primary',\n  fontFamily: 'Roboto, sans-serif',\n  fontWeight: 400,\n  lineHeight: 1.4,\n  letterSpacing: '0.01em',\n};\n\nconst baseHoverEffect = {\n  '&:hover': {\n    transform: 'translateY(-1px)',\n    boxShadow: HOVER_SHADOW,\n  },\n  '&:focus': {\n    outline: (theme) => `1px solid ${alpha(theme.palette.primary.main, 0.2)}`,\n    outlineOffset: 1,\n  },\n};\n\nconst LinkPreviewStyles = {\n  previewCard: {\n    display: 'flex',\n    flexDirection: { xs: 'column', sm: 'row' },\n    maxWidth: '100%',\n    mt: 0.75,\n    borderRadius: '8px',\n    overflow: 'hidden',\n    boxShadow: BASE_SHADOW,\n    bgcolor: 'background.paper',\n    border: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.4)}`,\n    transition: 'all 0.2s ease-out',\n    ...baseHoverEffect,\n  },\n  previewImage: {\n    width: { xs: '100%', sm: '120px' },\n    height: { xs: '80px', sm: '80px' },\n    objectFit: 'cover',\n    flexShrink: 0,\n    borderRadius: { xs: '8px 8px 0 0', sm: '8px 0 0 8px' },\n    border: (theme) => `1px solid ${alpha(theme.palette.grey[200], 0.4)}`,\n  },\n  previewContent: {\n    flex: 1,\n    p: { xs: 1, sm: 1.25 },\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    position: 'relative',\n  },\n  previewTitle: {\n    ...baseTypographyStyles,\n    fontSize: { xs: '0.9rem', sm: '1rem' },\n    fontWeight: 500,\n    color: 'text.primary',\n    textDecoration: 'none',\n    '& a': {\n      color: 'primary.main',\n      textDecoration: 'underline',\n      '&:hover': { color: 'primary.dark' },\n    },\n  },\n  previewDescription: {\n    ...baseTypographyStyles,\n    fontSize: { xs: '0.8rem', sm: '0.875rem' },\n    color: 'text.secondary',\n    display: '-webkit-box',\n    WebkitLineClamp: 2,\n    WebkitBoxOrient: 'vertical',\n    overflow: 'hidden',\n    mt: 0.5,\n  },\n  previewPlayButton: {\n    position: 'absolute',\n    top: { xs: 8, sm: 8 },\n    right: { xs: 8, sm: 8 },\n    bgcolor: 'rgba(0,0,0,0.5)',\n    color: 'white',\n    minWidth: 36,\n    p: 0.5,\n    borderRadius: '4px',\n    transition: 'all 0.2s ease-out',\n    '&:hover': { bgcolor: 'rgba(0,0,0,0.7)', transform: 'scale(1.1)' },\n    '&:focus': {\n      outline: (theme) => `1px solid ${alpha(theme.palette.primary.main, 0.2)}`,\n    },\n  },\n  previewPlayer: {\n    mt: 0.75,\n    borderRadius: '6px',\n    overflow: 'hidden',\n    width: '100%',\n  },\n  loadingContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    p: 1,\n  },\n};\n\nconst LinkPreview = ({ content, onTextTransform, onPlayClick }) => {\n  const [previews, setPreviews] = useState([]);\n  const [playingMedia, setPlayingMedia] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const deferredContent = useDeferredValue(content);\n  const previewCache = useMemo(() => new Map(), []);\n\n  const extractYouTubeId = useCallback((url) => {\n    const parsed = new URLParse(url);\n    if (parsed.hostname.includes('youtu.be')) {\n      return parsed.pathname.slice(1);\n    }\n    return parsed.query.split('v=')[1]?.split('&')[0];\n  }, []);\n\n  const extractTwitchId = useCallback((url) => {\n    const parsed = new URLParse(url);\n    if (parsed.pathname.includes('/videos/')) {\n      return { type: 'video', id: parsed.pathname.split('/videos/')[1] };\n    } else if (parsed.pathname.includes('/clip/')) {\n      return { type: 'clip', id: parsed.pathname.split('/clip/')[1] };\n    } else {\n      return { type: 'channel', id: parsed.pathname.slice(1) };\n    }\n  }, []);\n\n  const isYouTubeMusic = useCallback((url) => {\n    return url.includes('music.youtube.com');\n  }, []);\n\n  useEffect(() => {\n    const fetchPreviews = async () => {\n      if (!deferredContent) {\n        setPreviews([]);\n        onTextTransform?.(deferredContent);\n        return;\n      }\n\n      setLoading(true);\n      const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\n      const urls = deferredContent.match(urlRegex) || [];\n      const uniqueUrls = [...new Set(urls)];\n      const newPreviews = [];\n\n      let transformedText = deferredContent;\n      uniqueUrls.forEach((url) => {\n        const truncated = url.length > 15 ? `${url.slice(0, 15)}...` : url;\n        transformedText = transformedText.replace(url, truncated);\n      });\n      onTextTransform?.(transformedText);\n\n      for (const url of uniqueUrls) {\n        if (previewCache.has(url)) {\n          newPreviews.push(previewCache.get(url));\n          continue;\n        }\n\n        try {\n          let previewData = { url, type: 'generic' };\n\n          if (url.includes('youtube.com') || url.includes('youtu.be')) {\n            const videoId = extractYouTubeId(url);\n            const isMusic = isYouTubeMusic(url);\n            const response = await axios.get(\n              `https://www.youtube.com/oembed?url=${encodeURIComponent(url)}&format=json`,\n              { timeout: 5000 }\n            );\n            previewData = {\n              url,\n              type: isMusic ? 'youtube_music' : 'youtube',\n              title: response.data.title,\n              description: response.data.author_name,\n              thumbnail: `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`,\n              embedUrl: isMusic\n                ? `https://www.youtube.com/embed/${videoId}?autoplay=0&playsinline=1`\n                : `https://www.youtube.com/embed/${videoId}?playsinline=1`,\n            };\n          } else if (url.includes('spotify.com')) {\n            const response = await axios.get(\n              `https://open.spotify.com/oembed?url=${encodeURIComponent(url)}`,\n              { timeout: 5000 }\n            );\n            previewData = {\n              url,\n              type: 'spotify',\n              title: response.data.title,\n              description: response.data.provider_name,\n              thumbnail: response.data.thumbnail_url,\n              embedUrl: response.data.html.match(/src=\"([^\"]+)\"/)?.[1],\n            };\n          } else if (url.includes('soundcloud.com')) {\n            const response = await axios.get(\n              `https://soundcloud.com/oembed?url=${encodeURIComponent(url)}&format=json`,\n              { timeout: 5000 }\n            );\n            previewData = {\n              url,\n              type: 'soundcloud',\n              title: response.data.title,\n              description: response.data.author_name,\n              thumbnail: response.data.thumbnail_url,\n              embedUrl: response.data.html.match(/src=\"([^\"]+)\"/)?.[1],\n            };\n          } else if (url.includes('twitch.tv')) {\n            const twitchInfo = extractTwitchId(url);\n            let embedUrl;\n            if (twitchInfo.type === 'channel') {\n              embedUrl = `https://player.twitch.tv/?channel=${twitchInfo.id}&parent=${window.location.hostname}&playsinline=1`;\n            } else if (twitchInfo.type === 'video') {\n              embedUrl = `https://player.twitch.tv/?video=${twitchInfo.id}&parent=${window.location.hostname}&playsinline=1`;\n            } else if (twitchInfo.type === 'clip') {\n              embedUrl = `https://clips.twitch.tv/embed?clip=${twitchInfo.id}&parent=${window.location.hostname}&playsinline=1`;\n            }\n            const response = await axios.get(\n              `https://api.microlink.io?url=${encodeURIComponent(url)}`,\n              { timeout: 5000 }\n            );\n            previewData = {\n              url,\n              type: 'twitch',\n              title: response.data.data.title,\n              description: response.data.data.description || 'Twitch Stream/Clip',\n              thumbnail: response.data.data.image?.url,\n              embedUrl,\n              twitchType: twitchInfo.type,\n            };\n          } else {\n            const response = await axios.get(\n              `https://api.microlink.io?url=${encodeURIComponent(url)}`,\n              { timeout: 5000 }\n            );\n            previewData = {\n              url,\n              type: 'generic',\n              title: response.data.data.title,\n              description: response.data.data.description,\n              thumbnail: response.data.data.image?.url,\n            };\n          }\n\n          if (previewData.title || previewData.thumbnail) {\n            previewCache.set(url, previewData);\n            newPreviews.push(previewData);\n          }\n        } catch (error) {\n          console.error(`Failed to fetch preview for ${url}:`, error);\n        }\n      }\n\n      setPreviews(newPreviews);\n      setLoading(false);\n    };\n\n    const debounce = setTimeout(fetchPreviews, 500);\n    return () => clearTimeout(debounce);\n  }, [deferredContent, extractYouTubeId, extractTwitchId, isYouTubeMusic, previewCache, onTextTransform]);\n\n  const handleTogglePlay = useCallback(\n    (preview) => {\n      if (['spotify', 'soundcloud'].includes(preview.type) && !preview.embedUrl) {\n        onPlayClick?.(preview, preview.type);\n        return;\n      }\n      setPlayingMedia(playingMedia === preview.url ? null : preview.url);\n    },\n    [playingMedia, onPlayClick]\n  );\n\n  const renderPreview = useCallback(\n    (preview) => {\n      const isPlayable = ['youtube', 'youtube_music', 'spotify', 'soundcloud', 'twitch'].includes(preview.type) && preview.embedUrl;\n      const isAudio = ['youtube_music', 'spotify', 'soundcloud'].includes(preview.type);\n      const playerHeight = { xs: isAudio ? '100px' : '150px', sm: isAudio ? '100px' : '200px' };\n\n      return (\n        <motion.div\n          key={preview.url}\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.3, ease: 'easeOut' }}\n        >\n          <Card sx={LinkPreviewStyles.previewCard}>\n            {preview.thumbnail && (\n              <CardMedia\n                component=\"img\"\n                image={preview.thumbnail}\n                alt={preview.title || 'Link preview'}\n                sx={LinkPreviewStyles.previewImage}\n              />\n            )}\n            <CardContent sx={LinkPreviewStyles.previewContent}>\n              <Typography variant=\"subtitle2\" sx={LinkPreviewStyles.previewTitle}>\n                <Link href={preview.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                  {preview.title || preview.url}\n                </Link>\n              </Typography>\n              {preview.description && (\n                <Typography variant=\"caption\" sx={LinkPreviewStyles.previewDescription}>\n                  {preview.description}\n                </Typography>\n              )}\n              {isPlayable && (\n                <IconButton\n                  onClick={() => handleTogglePlay(preview)}\n                  onTouchStart={() => handleTogglePlay(preview)}\n                  sx={LinkPreviewStyles.previewPlayButton}\n                  aria-label={playingMedia === preview.url ? `Pause ${preview.type} content` : `Play ${preview.type} content`}\n                >\n                  {playingMedia === preview.url && preview.embedUrl ? <PauseIcon /> : <PlayArrowIcon />}\n                </IconButton>\n              )}\n            </CardContent>\n          </Card>\n          {playingMedia === preview.url && isPlayable && preview.embedUrl && (\n            <Box sx={LinkPreviewStyles.previewPlayer}>\n              <LazyLoadComponent>\n                <ReactPlayer\n                  url={preview.embedUrl}\n                  width=\"100%\"\n                  height={playerHeight}\n                  controls\n                  playing={playingMedia === preview.url}\n                  playsinline\n                  config={{\n                    youtube: {\n                      playerVars: { modestbranding: 1, playsinline: 1 },\n                    },\n                    soundcloud: { options: { visual: true } },\n                    twitch: { options: { autoplay: preview.twitchType !== 'clip', playsinline: 1 } },\n                  }}\n                  onError={() => setPlayingMedia(null)}\n                />\n              </LazyLoadComponent>\n            </Box>\n          )}\n        </motion.div>\n      );\n    },\n    [playingMedia, handleTogglePlay]\n  );\n\n  if (loading) {\n    return (\n      <Box sx={LinkPreviewStyles.loadingContainer}>\n        <CircularProgress size={20} />\n      </Box>\n    );\n  }\n\n  if (!previews.length) {\n    return null;\n  }\n\n  return <Box>{previews.map(renderPreview)}</Box>;\n};\n\nLinkPreview.propTypes = {\n  content: PropTypes.string,\n  onTextTransform: PropTypes.func,\n  onPlayClick: PropTypes.func,\n};\n\nLinkPreview.defaultProps = {\n  content: '',\n  onTextTransform: null,\n  onPlayClick: null,\n};\n\nexport default LinkPreview;","import React, { useState, useCallback, useMemo, memo, useEffect, useDeferredValue } from 'react';\nimport {\n  Paper,\n  Typography,\n  Box,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Grid,\n  Fade,\n  Link,\n  Chip,\n  Collapse,\n  CircularProgress,\n  List,\n  ListItemButton,\n  ListItemText,\n} from '@mui/material';\nimport ThumbUpIcon from '@mui/icons-material/ThumbUp';\nimport ChatBubbleOutlineIcon from '@mui/icons-material/ChatBubbleOutline';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport PushPinIcon from '@mui/icons-material/PushPin';\nimport InsertDriveFileIcon from '@mui/icons-material/InsertDriveFile';\nimport CloseIcon from '@mui/icons-material/Close';\nimport { motion } from 'framer-motion';\nimport PropTypes from 'prop-types';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport Emoji from 'react-emoji-render';\nimport { formatDistanceToNow, format, isValid, parseISO } from 'date-fns';\nimport TweetContentStyles from './TweetContentStyles';\nimport ModalStyles from './ModalStyles';\nimport LinkPreview from './LinkPreview';\n\nconst MAX_TWEET_LENGTH = 1000;\n\nconst statusColorMap = {\n  pending: 'default',\n  approved: 'success',\n  rejected: 'error',\n  announcement: 'info',\n  reminder: 'warning',\n  pinned: 'primary',\n  archived: 'default',\n};\n\nconst mediaVariants = {\n  initial: { opacity: 0, scale: 0.95 },\n  animate: { opacity: 1, scale: 1, transition: { duration: 0.3, ease: 'easeOut' } },\n  exit: { opacity: 0, scale: 0.95, transition: { duration: 0.2 } },\n};\n\nconst ViewAllButton = ({ label, onClick, sx, disabled }) => (\n  <motion.div whileHover={{ scale: disabled ? 1 : 1.05 }} whileTap={{ scale: disabled ? 1 : 0.95 }}>\n    <Typography\n      variant=\"caption\"\n      sx={{ ...sx, cursor: disabled ? 'default' : 'pointer', opacity: disabled ? 0.6 : 1 }}\n      onClick={disabled ? undefined : onClick}\n      onTouchStart={disabled ? undefined : onClick}\n      role=\"button\"\n      tabIndex={disabled ? -1 : 0}\n      onKeyPress={(e) => !disabled && e.key === 'Enter' && onClick(e)}\n      aria-label={label}\n    >\n      {label}\n    </Typography>\n  </motion.div>\n);\n\nViewAllButton.propTypes = {\n  label: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  sx: PropTypes.object.isRequired,\n  disabled: PropTypes.bool,\n};\n\nViewAllButton.defaultProps = {\n  disabled: false,\n};\n\nconst CircularVideoPlayer = memo(({ src, duration, ariaLabel }) => (\n  <motion.div variants={mediaVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n    <Box sx={TweetContentStyles.mediaWrapper} role=\"region\" aria-label={ariaLabel}>\n      <Box sx={{ ...TweetContentStyles.circleVideoContainer, display: 'flex', justifyContent: 'center' }}>\n        <video\n          src={src}\n          controls\n          playsInline\n          style={TweetContentStyles.circleVideo(duration)}\n          preload=\"metadata\"\n          aria-label={ariaLabel}\n        />\n      </Box>\n    </Box>\n  </motion.div>\n));\n\nCircularVideoPlayer.propTypes = {\n  src: PropTypes.string.isRequired,\n  duration: PropTypes.number,\n  ariaLabel: PropTypes.string.isRequired,\n};\n\nconst StandardVideoPlayer = memo(({ src, duration, ariaLabel }) => (\n  <motion.div variants={mediaVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n    <Box sx={TweetContentStyles.mediaWrapper} role=\"region\" aria-label={ariaLabel}>\n      <Box sx={{ ...TweetContentStyles.videoInner, display: 'flex', justifyContent: 'center' }}>\n        <video\n          src={src}\n          controls\n          playsInline\n          style={TweetContentStyles.video(duration)}\n          preload=\"metadata\"\n          aria-label={ariaLabel}\n        />\n      </Box>\n    </Box>\n  </motion.div>\n));\n\nStandardVideoPlayer.propTypes = {\n  src: PropTypes.string.isRequired,\n  duration: PropTypes.number,\n  ariaLabel: PropTypes.string.isRequired,\n};\n\nconst AudioPlayer = memo(({ src }) => (\n  <Box sx={{ ...TweetContentStyles.audioPlayer, maxWidth: '100%' }}>\n    <audio src={src} controls playsInline sx={{ width: '100%' }} preload=\"metadata\" />\n  </Box>\n));\n\nAudioPlayer.propTypes = {\n  src: PropTypes.string.isRequired,\n};\n\nconst FileItem = memo(({ file, index }) => (\n  <motion.div\n    variants={mediaVariants}\n    initial=\"initial\"\n    animate=\"animate\"\n    exit=\"exit\"\n    key={file.fileKey || `other-${index}`}\n  >\n    <Box sx={TweetContentStyles.otherFileItem(index)} role=\"region\" aria-label={`File ${index + 1}`}>\n      <InsertDriveFileIcon sx={TweetContentStyles.otherFileIcon} />\n      <Link\n        href={file.url}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        sx={TweetContentStyles.otherFileLink}\n        aria-label={`Download file ${file.fileKey || `File ${index + 1}`}`}\n      >\n        {file.fileKey || `File ${index + 1}`}\n      </Link>\n    </Box>\n  </motion.div>\n));\n\nFileItem.propTypes = {\n  file: PropTypes.shape({\n    fileKey: PropTypes.string,\n    url: PropTypes.string.isRequired,\n  }).isRequired,\n  index: PropTypes.number.isRequired,\n};\n\nconst TweetContent = ({\n  tweet,\n  currentUser,\n  userRole,\n  onLike,\n  onDelete,\n  onReply,\n  onReplyHover,\n  onEdit,\n  onPinToggle,\n  isParentHighlighted = false,\n  replyCount = 0,\n  parentTweetText = null,\n  bypassOwnership = false,\n  relatedTweetIds = [],\n  availableBoards = [],\n  boardId,\n  isListView = false,\n  error = null,\n  getParentTweetText,\n  onModalStateChange,\n}) => {\n  const [animate, setAnimate] = useState(false);\n  const [hovered, setHovered] = useState(false);\n  const [openOptionsDialog, setOpenOptionsDialog] = useState(false);\n  const [openMediaDialog, setOpenMediaDialog] = useState(false);\n  const [openLinkModal, setOpenLinkModal] = useState(null);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [timestamp, setTimestamp] = useState('');\n  const [transformedText, setTransformedText] = useState(tweet.content?.value || '');\n  const deferredContent = useDeferredValue(tweet.content?.value || '');\n\n  useEffect(() => {\n    onModalStateChange?.(tweet.tweet_id, openOptionsDialog || openMediaDialog || !!openLinkModal);\n    return () => onModalStateChange?.(tweet.tweet_id, false);\n  }, [openOptionsDialog, openMediaDialog, openLinkModal, tweet.tweet_id, onModalStateChange]);\n\n  useEffect(() => {\n    if (!tweet.created_at) return;\n\n    const createdAt = parseISO(tweet.created_at);\n    if (!isValid(createdAt)) return;\n\n    const updateTimestamp = () => {\n      const now = new Date();\n      const diffInSeconds = (now - createdAt) / 1000;\n\n      if (diffInSeconds < 7 * 24 * 60 * 60) {\n        setTimestamp(formatDistanceToNow(createdAt, { addSuffix: true }));\n      } else {\n        setTimestamp(format(createdAt, 'MMM d'));\n      }\n    };\n\n    updateTimestamp();\n\n    if ((new Date() - createdAt) / 1000 < 60 * 60) {\n      const interval = setInterval(updateTimestamp, 60 * 1000);\n      return () => clearInterval(interval);\n    }\n  }, [tweet.created_at]);\n\n  const tweetAuthor = tweet.username || tweet.user?.username || 'Anonymous';\n  const isLiked = tweet.liked_by?.some((u) => u.anonymous_id === currentUser?.anonymous_id) ?? false;\n  const canEdit = useMemo(\n    () =>\n      bypassOwnership ||\n      ['moderator', 'admin'].includes(userRole) ||\n      tweet.anonymous_id === currentUser?.anonymous_id ||\n      tweet.user_id === currentUser?.anonymous_id ||\n      (tweet.username &&\n        currentUser?.username &&\n        tweet.username.toLowerCase() === currentUser.username.toLowerCase()),\n    [bypassOwnership, userRole, tweet, currentUser]\n  );\n  const isRelated = relatedTweetIds.includes(tweet.tweet_id);\n  const hasReplies = replyCount > 0 || tweet.child_tweet_ids?.length > 0;\n  const replyLabel = hasReplies\n    ? `${replyCount || tweet.child_tweet_ids?.length}`\n    : '';\n  const rawStatus = tweet.status || 'approved';\n  const chipColor = statusColorMap[rawStatus] || 'default';\n  const chipLabel = rawStatus.charAt(0).toUpperCase() + rawStatus.slice(1);\n  const resolvedParentTweetText = tweet.parent_tweet_id\n    ? parentTweetText || getParentTweetText?.(tweet.parent_tweet_id) || 'Parent tweet not found'\n    : null;\n  const parentExcerpt = resolvedParentTweetText\n    ? resolvedParentTweetText.split(/\\s+/).slice(0, 10).join(' ') + '...'\n    : null;\n\n  useEffect(() => {\n    if (tweet.stats?.like_count !== undefined) {\n      setAnimate(true);\n      const timer = setTimeout(() => setAnimate(false), 300);\n      return () => clearTimeout(timer);\n    }\n  }, [tweet.stats?.like_count]);\n\n  const handleMouseEnter = useCallback(() => {\n    if (openOptionsDialog || openMediaDialog || openLinkModal) return;\n    setHovered(true);\n    if ((tweet.parent_tweet_id || tweet.child_tweet_ids?.length > 0) && onReplyHover) {\n      onReplyHover(tweet.tweet_id);\n    }\n  }, [onReplyHover, tweet.tweet_id, tweet.parent_tweet_id, tweet.child_tweet_ids, openOptionsDialog, openMediaDialog, openLinkModal]);\n\n  const handleMouseLeave = useCallback(() => {\n    if (openOptionsDialog || openMediaDialog || openLinkModal) return;\n    setHovered(false);\n    if ((tweet.parent_tweet_id || tweet.child_tweet_ids?.length > 0) && onReplyHover) {\n      onReplyHover(null);\n    }\n  }, [onReplyHover, tweet.parent_tweet_id, tweet.child_tweet_ids, openOptionsDialog, openMediaDialog, openLinkModal]);\n\n  const handleOpenOptionsDialog = useCallback(() => {\n    setOpenOptionsDialog(true);\n  }, []);\n\n  const handleCloseOptionsDialog = useCallback(() => {\n    setOpenOptionsDialog(false);\n  }, []);\n\n  const handleOpenMediaDialog = useCallback(() => {\n    setOpenMediaDialog(true);\n  }, []);\n\n  const handleCloseMediaDialog = useCallback(() => {\n    setOpenMediaDialog(false);\n  }, []);\n\n  const handleOpenLinkModal = useCallback((url, type) => {\n    setOpenLinkModal({ url: url.url, type });\n  }, []);\n\n  const handleCloseLinkModal = useCallback(() => {\n    setOpenLinkModal(null);\n  }, []);\n\n  const handleEdit = useCallback(() => {\n    onEdit(tweet);\n    handleCloseOptionsDialog();\n  }, [onEdit, tweet, handleCloseOptionsDialog]);\n\n  const handlePin = useCallback(() => {\n    onPinToggle(tweet);\n    handleCloseOptionsDialog();\n  }, [onPinToggle, tweet, handleCloseOptionsDialog]);\n\n  const handleDelete = useCallback(() => {\n    onDelete(tweet.tweet_id);\n    handleCloseOptionsDialog();\n  }, [onDelete, tweet.tweet_id, handleCloseOptionsDialog]);\n\n  const handleToggleExpand = useCallback(() => {\n    setIsExpanded((prev) => !prev);\n  }, []);\n\n  const { previewText, remainderText } = useMemo(() => {\n    const text = transformedText || '';\n    const PREVIEW_LEN = 200;\n    if (text.length <= PREVIEW_LEN) {\n      return { previewText: text, remainderText: '' };\n    }\n    const cutoff = text.slice(0, PREVIEW_LEN);\n    const lastSpace = cutoff.lastIndexOf(' ') > -1 ? cutoff.lastIndexOf(' ') : PREVIEW_LEN;\n    return {\n      previewText: cutoff.slice(0, lastSpace),\n      remainderText: text.slice(lastSpace),\n    };\n  }, [transformedText]);\n\n  const fullDate = useMemo(() => {\n    if (!tweet.created_at) return '';\n    const createdAt = parseISO(tweet.created_at);\n    return isValid(createdAt) ? format(createdAt, 'PPPPpp') : '';\n  }, [tweet.created_at]);\n\n  const isModalOpen = openOptionsDialog || openMediaDialog || openLinkModal;\n\n  const renderImages = useMemo(() => {\n    const imageFiles = tweet.content?.metadata?.files?.filter((f) => f.contentType?.startsWith('image')) || [];\n    if (!imageFiles.length) return null;\n    return (\n      <Box sx={{ ...TweetContentStyles.imageContainer(!!transformedText), display: 'flex', justifyContent: 'center' }} role=\"region\" aria-label=\"Images\">\n        <Grid container spacing={1} sx={{ maxWidth: '100%' }}>\n          {imageFiles.slice(0, 4).map((file, index) => (\n            <Grid\n              item\n              xs={imageFiles.length === 1 ? 12 : 6}\n              sm={imageFiles.length === 1 ? 12 : 3}\n              key={file.fileKey || `img-${index}`}\n            >\n              <motion.div variants={mediaVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\" whileHover={{ scale: 1.02 }}>\n                <LazyLoadImage\n                  src={file.url}\n                  alt={`Image ${index + 1}`}\n                  effect=\"blur\"\n                  style={TweetContentStyles.image(imageFiles.length === 1)}\n                  placeholder={\n                    <Box sx={{ ...TweetContentStyles.imagePlaceholder, borderRadius: '10px' }}>\n                      <CircularProgress size={24} />\n                    </Box>\n                  }\n                  role=\"img\"\n                />\n              </motion.div>\n            </Grid>\n          ))}\n        </Grid>\n        {imageFiles.length > 4 && (\n          <ViewAllButton\n            label={`View all images (${imageFiles.length})`}\n            onClick={handleOpenMediaDialog}\n            sx={TweetContentStyles.imageViewAll}\n            disabled={isModalOpen}\n          />\n        )}\n      </Box>\n    );\n  }, [tweet.content?.metadata?.files, handleOpenMediaDialog, isModalOpen]);\n\n  const renderVideos = useMemo(() => {\n    const videoFiles = tweet.content?.metadata?.files?.filter((f) => f.contentType?.startsWith('video')) || [];\n    if (!videoFiles.length) return null;\n    return (\n      <Box\n        sx={{ ...TweetContentStyles.videoContainer(!!transformedText || renderImages), display: 'flex', justifyContent: 'center' }}\n        role=\"region\"\n        aria-label=\"Videos\"\n      >\n        {videoFiles[0].contentType === 'video/webm' ? (\n          <CircularVideoPlayer\n            src={videoFiles[0].url}\n            duration={videoFiles[0].duration}\n            ariaLabel=\"Recorded tweet video\"\n          />\n        ) : (\n          <StandardVideoPlayer\n            src={videoFiles[0].url}\n            duration={videoFiles[0].duration}\n            ariaLabel=\"Tweet video\"\n          />\n        )}\n        {videoFiles.length > 1 && (\n          <ViewAllButton\n            label={`View all videos (${videoFiles.length})`}\n            onClick={handleOpenMediaDialog}\n            sx={TweetContentStyles.videoViewAll}\n            disabled={isModalOpen}\n          />\n        )}\n      </Box>\n    );\n  }, [tweet.content?.metadata?.files, handleOpenMediaDialog, renderImages, isModalOpen]);\n\n  const renderAudio = useMemo(() => {\n    const audioFiles = tweet.content?.metadata?.files?.filter((f) => f.contentType?.startsWith('audio')) || [];\n    if (!audioFiles.length) return null;\n    return (\n      <Box\n        sx={{\n          ...TweetContentStyles.audioContainer(!!transformedText || renderImages || renderVideos),\n          display: 'flex',\n          justifyContent: 'center',\n        }}\n        role=\"region\"\n        aria-label=\"Audio\"\n      >\n        <AudioPlayer src={audioFiles[0].url} />\n        {audioFiles.length > 1 && (\n          <ViewAllButton\n            label={`View all audio (${audioFiles.length})`}\n            onClick={handleOpenMediaDialog}\n            sx={TweetContentStyles.audioViewAll}\n            disabled={isModalOpen}\n          />\n        )}\n      </Box>\n    );\n  }, [tweet.content?.metadata?.files, handleOpenMediaDialog, renderImages, renderVideos, isModalOpen]);\n\n  const renderOtherFiles = useMemo(() => {\n    const otherFiles = tweet.content?.metadata?.files?.filter(\n      (f) =>\n        !f.contentType?.startsWith('image') &&\n        !f.contentType?.startsWith('video') &&\n        !f.contentType?.startsWith('audio')\n    ) || [];\n    if (!otherFiles.length) return null;\n    return (\n      <Box sx={{ ...TweetContentStyles.otherFilesContainer(!!transformedText), maxWidth: '100%' }} role=\"region\" aria-label=\"Files\">\n        {otherFiles.slice(0, 2).map((file, idx) => (\n          <FileItem file={file} index={idx} key={file.fileKey || `other-${idx}`} />\n        ))}\n        {otherFiles.length > 2 && (\n          <ViewAllButton\n            label={`View all files (${otherFiles.length})`}\n            onClick={handleOpenMediaDialog}\n            sx={TweetContentStyles.otherFilesViewAll}\n            disabled={isModalOpen}\n          />\n        )}\n      </Box>\n    );\n  }, [tweet.content?.metadata?.files, handleOpenMediaDialog, isModalOpen]);\n\n  const renderContent = useMemo(() => {\n    const hasText = !!transformedText;\n    return (\n      <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ duration: 0.3 }}>\n        {hasText && (\n          <Box>\n            <Typography\n              sx={TweetContentStyles.contentText(\n                !!renderImages || !!renderVideos || !!renderAudio || !!renderOtherFiles\n              )}\n            >\n              <Emoji text={previewText + (!isExpanded && remainderText ? '...' : '')} />\n            </Typography>\n            {remainderText && (\n              <Collapse in={isExpanded} timeout=\"auto\" unmountOnExit>\n                <Typography\n                  sx={TweetContentStyles.contentText(\n                    !!renderImages || !!renderVideos || !!renderAudio || !!renderOtherFiles\n                  )}\n                >\n                  <Emoji text={remainderText} />\n                </Typography>\n              </Collapse>\n            )}\n            {remainderText && (\n              <ViewAllButton\n                label={isExpanded ? 'Show less' : 'Read more'}\n                onClick={handleToggleExpand}\n                sx={TweetContentStyles.readMoreButton}\n                disabled={isModalOpen}\n              />\n            )}\n          </Box>\n        )}\n        {renderImages}\n        {renderVideos}\n        {renderAudio}\n        {renderOtherFiles}\n        <LinkPreview\n          content={deferredContent}\n          onTextTransform={setTransformedText}\n          onPlayClick={handleOpenLinkModal}\n        />\n      </motion.div>\n    );\n  }, [\n    transformedText,\n    previewText,\n    remainderText,\n    isExpanded,\n    renderImages,\n    renderVideos,\n    renderAudio,\n    renderOtherFiles,\n    handleToggleExpand,\n    deferredContent,\n    handleOpenLinkModal,\n    isModalOpen,\n  ]);\n\n  const mediaDialogContent = useMemo(() => {\n    const files = tweet.content?.metadata?.files || [];\n    return (\n      <DialogContent sx={ModalStyles.mediaDialogContent}>\n        {files.length === 0 && (\n          <Typography variant=\"body2\" sx={{ color: 'primary.main', fontStyle: 'italic', fontSize: { xs: '0.8rem', sm: '0.875rem' }, m: 0 }}>\n            No media available\n          </Typography>\n        )}\n        {files.map((file, idx) => (\n          <motion.div\n            key={file.fileKey || `media-${idx}`}\n            variants={mediaVariants}\n            initial=\"initial\"\n            animate=\"animate\"\n            exit=\"exit\"\n          >\n            {file.contentType?.startsWith('image') ? (\n              <LazyLoadImage\n                src={file.url}\n                alt={`Media ${idx + 1}`}\n                effect=\"blur\"\n                style={{ ...ModalStyles.modalImage, maxWidth: '100%' }}\n                placeholder={\n                  <Box sx={{ ...ModalStyles.modalImagePlaceholder, borderRadius: '10px' }}>\n                    <CircularProgress size={24} />\n                  </Box>\n                }\n                role=\"img\"\n              />\n            ) : file.contentType === 'video/webm' ? (\n              <CircularVideoPlayer\n                src={file.url}\n                duration={file.duration}\n                ariaLabel={`Recorded video ${idx + 1}`}\n              />\n            ) : file.contentType?.startsWith('video') ? (\n              <StandardVideoPlayer\n                src={file.url}\n                duration={file.duration}\n                ariaLabel={`Video ${idx + 1}`}\n              />\n            ) : file.contentType?.startsWith('audio') ? (\n              <AudioPlayer src={file.url} />\n            ) : (\n              <FileItem file={file} index={idx} />\n            )}\n          </motion.div>\n        ))}\n      </DialogContent>\n    );\n  }, [tweet.content?.metadata?.files]);\n\n  const optionsDialogContent = useMemo(() => (\n    <DialogContent sx={ModalStyles.optionsDialogContent}>\n      <List>\n        <ListItemButton\n          onClick={handleEdit}\n          onTouchStart={handleEdit}\n          sx={ModalStyles.optionsDialogItem}\n          aria-label=\"Edit tweet\"\n        >\n          <ListItemText primary=\"Edit Tweet\" />\n        </ListItemButton>\n        <ListItemButton\n          onClick={handlePin}\n          onTouchStart={handlePin}\n          sx={ModalStyles.optionsDialogItem}\n          aria-label={tweet.is_pinned ? 'Unpin tweet' : 'Pin tweet'}\n        >\n          <ListItemText primary={tweet.is_pinned ? 'Unpin Tweet' : 'Pin Tweet'} />\n        </ListItemButton>\n        <ListItemButton\n          onClick={handleDelete}\n          onTouchStart={handleDelete}\n          sx={{ ...ModalStyles.optionsDialogItem, color: 'error.main' }}\n          aria-label=\"Delete tweet\"\n        >\n          <ListItemText primary=\"Delete\" />\n        </ListItemButton>\n      </List>\n    </DialogContent>\n  ), [handleEdit, handlePin, handleDelete, tweet.is_pinned]);\n\n  const linkModalContent = useMemo(() => {\n    if (!openLinkModal) return null;\n    return (\n      <Dialog\n        open={!!openLinkModal}\n        onClose={handleCloseLinkModal}\n        maxWidth=\"xs\"\n        fullWidth\n        fullScreen={window.innerWidth < 600}\n        TransitionComponent={Fade}\n        transitionDuration={500}\n        aria-labelledby=\"link-modal-title\"\n        aria-describedby=\"link-modal-description\"\n        PaperProps={{\n          sx: {\n            ...ModalStyles.optionsDialogContainer,\n            zIndex: 1101,\n            maxHeight: { xs: '90vh', sm: 'auto' },\n            overflowY: { xs: 'auto', sm: 'visible' },\n          },\n          onClick: (e) => e.stopPropagation(),\n          onMouseDown: (e) => e.stopPropagation(),\n          onTouchStart: (e) => e.stopPropagation(),\n        }}\n      >\n        <DialogTitle id=\"link-modal-title\" sx={ModalStyles.optionsDialogTitle}>\n          View Content\n        </DialogTitle>\n        <DialogContent sx={ModalStyles.optionsDialogContent}>\n          <Typography id=\"link-modal-description\" variant=\"body1\" gutterBottom>\n            This content cannot be embedded directly. Visit the link below to view it:\n          </Typography>\n          <Link\n            href={openLinkModal.url}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            sx={{ wordBreak: 'break-all', fontSize: { xs: '0.9rem', sm: '1rem' } }}\n            aria-label={`Open ${openLinkModal.type} content in a new tab`}\n          >\n            {openLinkModal.url}\n          </Link>\n        </DialogContent>\n        <DialogActions sx={ModalStyles.dialogActions}>\n          <IconButton\n            onClick={handleCloseLinkModal}\n            onTouchStart={handleCloseLinkModal}\n            sx={ModalStyles.dialogCloseButton}\n            aria-label=\"Close link modal\"\n          >\n            <CloseIcon />\n          </IconButton>\n        </DialogActions>\n      </Dialog>\n    );\n  }, [openLinkModal, handleCloseLinkModal]);\n\n  if (error) {\n    return (\n      <Paper sx={TweetContentStyles.tweetCard(false, isListView)} role=\"article\">\n        <Typography sx={TweetContentStyles.tweetTitle}>Error</Typography>\n        <Box sx={{ p: 2, textAlign: 'center' }}>\n          <Typography variant=\"body2\" color=\"error\" sx={{ fontWeight: 500, fontSize: { xs: '0.875rem', sm: '1rem' } }}>\n            {error}\n          </Typography>\n        </Box>\n      </Paper>\n    );\n  }\n\n  if (!tweet.tweet_id || !tweet.content) {\n    return (\n      <Paper sx={TweetContentStyles.tweetCard(false, isListView)} role=\"article\">\n        <Typography sx={TweetContentStyles.tweetTitle}>Invalid Tweet</Typography>\n        <Box sx={{ p: 2, textAlign: 'center' }}>\n          <Typography variant=\"body2\" color=\"error\" sx={{ fontWeight: 500, fontSize: { xs: '0.875rem', sm: '1rem' } }}>\n            This tweet is missing required data.\n          </Typography>\n        </Box>\n      </Paper>\n    );\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.3, ease: 'easeOut' }}\n    >\n      <Paper\n        id={`tweet-${tweet.tweet_id}`}\n        className=\"tweet-card\"\n        elevation={4}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n        onTouchStart={handleMouseEnter}\n        onTouchEnd={handleMouseLeave}\n        sx={{\n          ...TweetContentStyles.tweetCard(tweet.is_pinned, isListView),\n          ...TweetContentStyles.tweetHighlight(hovered || isRelated || isParentHighlighted),\n        }}\n        role=\"article\"\n        aria-labelledby={`tweet-title-${tweet.tweet_id}`}\n      >\n        <Typography sx={TweetContentStyles.tweetTitle} id={`tweet-title-${tweet.tweet_id}`}>\n          Tweet by {tweetAuthor}\n        </Typography>\n        {tweet.is_pinned && (\n          <Box sx={TweetContentStyles.pinnedIconContainer}>\n            <motion.div whileHover={{ scale: 1.15 }} whileTap={{ scale: 0.95 }}>\n              <PushPinIcon sx={TweetContentStyles.pinnedIcon} />\n            </motion.div>\n          </Box>\n        )}\n        {parentExcerpt && (\n          <motion.div\n            initial={{ opacity: 0, x: -10 }}\n            animate={{ opacity: 1, x: 0 }}\n            transition={{ duration: 0.2 }}\n          >\n            <Box component=\"blockquote\" sx={{ borderLeft: '4px solid', borderColor: 'primary.main', pl: 2, m: 0, mb: 1 }}>\n              <Typography variant=\"caption\" sx={TweetContentStyles.replyToCaption}>\n                Replying to:\n              </Typography>\n              <Typography variant=\"body2\" sx={{ color: 'primary.main', fontStyle: 'italic', fontSize: { xs: '0.8rem', sm: '0.875rem' }, m: 0 }}>\n                {parentExcerpt}\n              </Typography>\n            </Box>\n          </motion.div>\n        )}\n        {renderContent}\n        <Box sx={{ ...TweetContentStyles.statusContainer, justifyContent: 'space-between', alignItems: 'center' }}>\n          <motion.div whileHover={{ scale: 1.05 }}>\n            <Chip\n              label={chipLabel}\n              color={chipColor}\n              size=\"small\"\n              aria-label={`Tweet status: ${chipLabel}`}\n            />\n          </motion.div>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, flexWrap: 'wrap' }}>\n            {timestamp && (\n              <Typography\n                variant=\"caption\"\n                component=\"time\"\n                dateTime={tweet.created_at}\n                sx={TweetContentStyles.tweetAuthorTypography}\n                aria-label={`Posted on ${fullDate}`}\n              >\n                {timestamp}\n              </Typography>\n            )}\n            <Typography variant=\"caption\" sx={TweetContentStyles.tweetAuthorTypography}>\n              Author: {tweetAuthor}\n            </Typography>\n          </Box>\n        </Box>\n        <Box sx={{ ...TweetContentStyles.actionsContainer, justifyContent: 'space-between' }}>\n          <Box sx={TweetContentStyles.actionButtons}>\n            <motion.div whileHover={{ scale: 1.15 }} whileTap={{ scale: 0.95 }}>\n              <IconButton\n                size=\"medium\"\n                onClick={() => onLike(tweet.tweet_id, isLiked)}\n                onTouchStart={() => onLike(tweet.tweet_id, isLiked)}\n                aria-label={isLiked ? 'Unlike tweet' : 'Like tweet'}\n                sx={{ ...TweetContentStyles.likeButton, minWidth: 36, p: 0.5 }}\n                disabled={isModalOpen}\n              >\n                <ThumbUpIcon sx={TweetContentStyles.likeIcon(isLiked)} />\n              </IconButton>\n            </motion.div>\n            <Typography\n              variant=\"caption\"\n              sx={TweetContentStyles.likeCount(isLiked, animate)}\n            >\n              {tweet.stats?.like_count || 0}\n            </Typography>\n            <motion.div whileHover={{ scale: 1.15 }} whileTap={{ scale: 0.95 }}>\n              <IconButton\n                size=\"medium\"\n                onClick={() => onReply(tweet)}\n                onTouchStart={() => onReply(tweet)}\n                aria-label=\"Reply to tweet\"\n                sx={{ ...TweetContentStyles.replyButton, minWidth: 36, p: 0.5 }}\n                disabled={isModalOpen}\n              >\n                <ChatBubbleOutlineIcon sx={TweetContentStyles.replyIcon} />\n              </IconButton>\n            </motion.div>\n            {hasReplies && (\n              <Typography\n                variant=\"caption\"\n                sx={TweetContentStyles.replyCount}\n              >\n                {replyLabel}\n              </Typography>\n            )}\n          </Box>\n          {canEdit && (\n            <motion.div whileHover={{ scale: 1.15 }} whileTap={{ scale: 0.95 }}>\n              <IconButton\n                size=\"medium\"\n                onClick={handleOpenOptionsDialog}\n                onTouchStart={handleOpenOptionsDialog}\n                className=\"tweet-menu\"\n                aria-label=\"Tweet options\"\n                sx={{ ...TweetContentStyles.menuButton, minWidth: 36, p: 0.5 }}\n                disabled={isModalOpen}\n              >\n                <MoreVertIcon sx={TweetContentStyles.menuIcon} />\n              </IconButton>\n            </motion.div>\n          )}\n        </Box>\n      </Paper>\n\n      <Dialog\n        open={openMediaDialog}\n        onClose={handleCloseMediaDialog}\n        maxWidth=\"sm\"\n        fullWidth\n        fullScreen={window.innerWidth < 600}\n        TransitionComponent={Fade}\n        transitionDuration={500}\n        aria-labelledby=\"media-dialog-title\"\n        aria-describedby=\"media-dialog-description\"\n        PaperProps={{\n          sx: {\n            ...ModalStyles.mediaDialogContainer,\n            zIndex: 1101,\n            maxHeight: { xs: '90vh', sm: 'auto' },\n            overflowY: { xs: 'auto', sm: 'visible' },\n          },\n          onClick: (e) => e.stopPropagation(),\n          onMouseDown: (e) => e.stopPropagation(),\n          onTouchStart: (e) => e.stopPropagation(),\n        }}\n      >\n        <DialogTitle id=\"media-dialog-title\" sx={ModalStyles.mediaDialogTitle}>\n          All Media\n        </DialogTitle>\n        <DialogContent sx={ModalStyles.mediaDialogContent} dividers>\n          <Typography id=\"media-dialog-description\" sx={{ display: 'none' }}>\n            View all media files attached to the tweet.\n          </Typography>\n          {mediaDialogContent}\n        </DialogContent>\n        <DialogActions sx={ModalStyles.dialogActions}>\n          <IconButton\n            onClick={handleCloseMediaDialog}\n            onTouchStart={handleCloseMediaDialog}\n            sx={ModalStyles.dialogCloseButton}\n            aria-label=\"Close media dialog\"\n          >\n            <CloseIcon />\n          </IconButton>\n        </DialogActions>\n      </Dialog>\n\n      <Dialog\n        open={openOptionsDialog}\n        onClose={handleCloseOptionsDialog}\n        maxWidth=\"xs\"\n        fullWidth\n        fullScreen={window.innerWidth < 600}\n        TransitionComponent={Fade}\n        transitionDuration={500}\n        aria-labelledby=\"options-dialog-title\"\n        aria-describedby=\"options-dialog-description\"\n        PaperProps={{\n          sx: {\n            ...ModalStyles.optionsDialogContainer,\n            zIndex: 1101,\n            maxHeight: { xs: '90vh', sm: 'auto' },\n            overflowY: { xs: 'auto', sm: 'visible' },\n          },\n          onClick: (e) => e.stopPropagation(),\n          onMouseDown: (e) => e.stopPropagation(),\n          onTouchStart: (e) => e.stopPropagation(),\n        }}\n      >\n        <DialogTitle id=\"options-dialog-title\" sx={ModalStyles.optionsDialogTitle}>\n          Tweet Options\n        </DialogTitle>\n        <DialogContent sx={ModalStyles.optionsDialogContent} dividers>\n          <Typography id=\"options-dialog-description\" sx={{ display: 'none' }}>\n            Select an option to edit, pin, or delete the tweet.\n          </Typography>\n          {optionsDialogContent}\n        </DialogContent>\n        <DialogActions sx={ModalStyles.dialogActions}>\n          <IconButton\n            onClick={handleCloseOptionsDialog}\n            onTouchStart={handleCloseOptionsDialog}\n            sx={ModalStyles.dialogCloseButton}\n            aria-label=\"Close options dialog\"\n          >\n            <CloseIcon />\n          </IconButton>\n        </DialogActions>\n      </Dialog>\n\n      {linkModalContent}\n    </motion.div>\n  );\n};\n\nconst arePropsEqual = (prevProps, nextProps) => {\n  return (\n    prevProps.tweet.tweet_id === nextProps.tweet.tweet_id &&\n    prevProps.tweet.content?.value === nextProps.tweet.content?.value &&\n    prevProps.tweet.stats?.like_count === nextProps.tweet.stats?.like_count &&\n    prevProps.tweet.is_pinned === nextProps.tweet.is_pinned &&\n    prevProps.tweet.status === nextProps.tweet.status &&\n    prevProps.tweet.liked_by?.length === nextProps.tweet.liked_by?.length &&\n    prevProps.tweet.content?.metadata?.files?.length === nextProps.tweet.content?.metadata?.files?.length &&\n    prevProps.tweet.created_at === nextProps.tweet.created_at &&\n    prevProps.currentUser.anonymous_id === nextProps.currentUser.anonymous_id &&\n    prevProps.currentUser.username === nextProps.currentUser.username &&\n    prevProps.userRole === nextProps.userRole &&\n    prevProps.isParentHighlighted === nextProps.isParentHighlighted &&\n    prevProps.replyCount === nextProps.replyCount &&\n    prevProps.parentTweetText === nextProps.parentTweetText &&\n    prevProps.bypassOwnership === nextProps.bypassOwnership &&\n    prevProps.relatedTweetIds.length === nextProps.relatedTweetIds.length &&\n    prevProps.relatedTweetIds.every((id, i) => id === nextProps.relatedTweetIds[i]) &&\n    prevProps.availableBoards.length === nextProps.availableBoards.length &&\n    prevProps.boardId === nextProps.boardId &&\n    prevProps.isListView === nextProps.isListView &&\n    prevProps.error === nextProps.error\n  );\n};\n\nTweetContent.propTypes = {\n  tweet: PropTypes.shape({\n    tweet_id: PropTypes.string.isRequired,\n    content: PropTypes.shape({\n      type: PropTypes.string,\n      value: PropTypes.string,\n      metadata: PropTypes.shape({\n        files: PropTypes.arrayOf(\n          PropTypes.shape({\n            fileKey: PropTypes.string,\n            url: PropTypes.string,\n            contentType: PropTypes.string,\n            duration: PropTypes.number,\n          })\n        ),\n        hashtags: PropTypes.arrayOf(PropTypes.string),\n        mentions: PropTypes.arrayOf(PropTypes.string),\n      }),\n    }).isRequired,\n    position: PropTypes.shape({ x: PropTypes.number, y: PropTypes.number }),\n    parent_tweet_id: PropTypes.string,\n    child_tweet_ids: PropTypes.arrayOf(PropTypes.string),\n    is_anonymous: PropTypes.bool,\n    anonymous_id: PropTypes.string,\n    user_id: PropTypes.string,\n    username: PropTypes.string,\n    user: PropTypes.shape({ username: PropTypes.string }),\n    created_at: PropTypes.string,\n    liked_by: PropTypes.arrayOf(\n      PropTypes.shape({\n        anonymous_id: PropTypes.string,\n        username: PropTypes.string,\n      })\n    ),\n    stats: PropTypes.shape({\n      like_count: PropTypes.number,\n      view_count: PropTypes.number,\n    }),\n    status: PropTypes.string,\n    scheduled_at: PropTypes.string,\n    reminder: PropTypes.shape({\n      schedule: PropTypes.string,\n      enabled: PropTypes.bool,\n    }),\n    is_pinned: PropTypes.bool,\n    board_id: PropTypes.string,\n  }).isRequired,\n  currentUser: PropTypes.shape({\n    anonymous_id: PropTypes.string,\n    username: PropTypes.string,\n  }).isRequired,\n  userRole: PropTypes.string.isRequired,\n  onLike: PropTypes.func.isRequired,\n  onDelete: PropTypes.func.isRequired,\n  onReply: PropTypes.func.isRequired,\n  onReplyHover: PropTypes.func,\n  onEdit: PropTypes.func.isRequired,\n  onPinToggle: PropTypes.func.isRequired,\n  isParentHighlighted: PropTypes.bool,\n  replyCount: PropTypes.number,\n  parentTweetText: PropTypes.string,\n  bypassOwnership: PropTypes.bool,\n  relatedTweetIds: PropTypes.arrayOf(PropTypes.string),\n  availableBoards: PropTypes.arrayOf(\n    PropTypes.shape({\n      board_id: PropTypes.string.isRequired,\n      name: PropTypes.string.isRequired,\n    })\n  ),\n  boardId: PropTypes.string,\n  isListView: PropTypes.bool,\n  error: PropTypes.string,\n  getParentTweetText: PropTypes.func,\n  onModalStateChange: PropTypes.func,\n};\n\nTweetContent.defaultProps = {\n  isParentHighlighted: false,\n  replyCount: 0,\n  parentTweetText: null,\n  bypassOwnership: false,\n  relatedTweetIds: [],\n  availableBoards: [],\n  boardId: '',\n  isListView: false,\n  error: null,\n  getParentTweetText: null,\n  onModalStateChange: null,\n};\n\nexport default memo(TweetContent, arePropsEqual);","import { alpha } from '@mui/material';\n\n// Constants for reuse\nconst MAX_TWEET_LENGTH = 1000;\nconst POPUP_WIDTH = 360;\nconst POPUP_HEIGHT = 440;\nconst BASE_Z_INDEX = 10;\nconst POPUP_Z_INDEX = 100;\nconst MODAL_SHADOW = '0 8px 28px rgba(0,0,0,0.22)';\nconst MEDIA_PREVIEW_SIZE = 250;\n\n// Reusable style objects\nconst baseModalStyles = {\n  bgcolor: 'background.paper',\n  boxShadow: MODAL_SHADOW,\n  borderRadius: 3,\n  outline: 'none',\n  animation: 'fadeIn 0.3s ease-in-out',\n  '@keyframes fadeIn': {\n    from: { opacity: 0, transform: 'translate(-50%, -48%) scale(0.98)' },\n    to: { opacity: 1, transform: 'translate(-50%, -50%) scale(1)' },\n  },\n};\n\nconst baseButtonStyles = {\n  borderRadius: '24px',\n  textTransform: 'none',\n  transition: 'all 0.2s ease',\n  '&:hover': { transform: 'scale(1.02)' },\n  '&:active': { transform: 'scale(0.98)' },\n};\n\nconst baseHoverEffect = {\n  '&:hover': {\n    transform: 'translateY(-2px)',\n    boxShadow: '0 8px 24px rgba(0,0,0,0.18)',\n  },\n  '&:focus': {\n    outline: (theme) => `2px solid ${alpha(theme.palette.primary.main, 0.4)}`,\n    outlineOffset: 2,\n  },\n};\n\n// Reusable utility functions for dynamic styles\nconst dynamicCharCountColor = (isError) => ({\n  color: isError ? 'error.main' : 'text.secondary',\n});\n\nconst dynamicMediaButtonColor = (isActive) => ({\n  color: isActive ? 'primary.main' : 'text.secondary',\n  bgcolor: isActive\n    ? (theme) => alpha(theme.palette.primary.main, 0.1)\n    : 'transparent',\n  '&:hover': {\n    bgcolor: (theme) => alpha(theme.palette.primary.main, 0.2),\n    transform: 'scale(1.1)',\n  },\n  '&:active': {\n    transform: 'scale(0.95)',\n  },\n});\n\nconst TweetPopupStyles = {\n  popupModal: {\n    '& .MuiDialog-paper': {\n      ...baseModalStyles,\n      position: 'absolute',\n      minWidth: '300px',\n      maxWidth: '95vw',\n      bgcolor: (theme) => alpha(theme.palette.background.paper, 0.98),\n      backdropFilter: 'blur(12px)',\n      p: 2,\n      zIndex: POPUP_Z_INDEX,\n      ...baseHoverEffect,\n    },\n    '&.MuiBackdropRoot': {\n      backgroundColor: (theme) => alpha(theme.palette.grey[900], 0.5),\n    },\n  },\n  popupTitle: {\n    display: 'none',\n  },\n  popupTextField: {\n    '& .MuiInputBase-root': {\n      borderRadius: '16px',\n      padding: '10px 14px',\n      bgcolor: (theme) => theme.palette.grey[50],\n      transition: 'all 0.2s ease',\n      minHeight: '48px',\n    },\n    '& .MuiOutlinedInput-notchedOutline': {\n      borderColor: (theme) => theme.palette.grey[200],\n    },\n    '&:hover .MuiOutlinedInputNotchedOutline': {\n      borderColor: 'primary.main',\n      boxShadow: (theme) => `0 0 0 2px ${alpha(theme.palette.primary.main, 0.1)}`,\n    },\n    '&.Mui-focused .MuiOutlinedInputNotchedOutline': {\n      borderColor: 'primary.main',\n      boxShadow: (theme) => `0 0 0 3px ${alpha(theme.palette.primary.main, 0.15)}`,\n    },\n  },\n  popupCharCount: (isError) => ({\n    alignSelf: 'flex-end',\n    fontSize: { xs: '0.75rem', sm: '0.8rem' },\n    ...dynamicCharCountColor(isError),\n  }),\n  popupFilePreviewContainer: {\n    mt: 1,\n    bgcolor: 'transparent',\n    borderRadius: 8,\n    p: 0.5,\n    transition: 'all 0.2s ease',\n  },\n  popupPreviewMedia: {\n    width: '100%',\n    height: MEDIA_PREVIEW_SIZE,\n    objectFit: 'cover',\n    borderRadius: 4,\n    border: '1px solid',\n    borderColor: (theme) => theme.palette.grey[200],\n    transition: 'transform 0.2s ease',\n    '&:hover': { transform: 'scale(1.01)' },\n  },\n  popupCirclePreviewMedia: {\n    width: MEDIA_PREVIEW_SIZE,\n    height: MEDIA_PREVIEW_SIZE,\n    objectFit: 'cover',\n    borderRadius: '50%',\n    border: '1px solid',\n    borderColor: (theme) => theme.palette.grey[200],\n    backgroundColor: 'black',\n    transition: 'transform 0.2s ease',\n    '&:hover': { transform: 'scale(1.01)' },\n  },\n  popupPreviewPlaceholder: {\n    width: '100%',\n    height: MEDIA_PREVIEW_SIZE,\n    bgcolor: (theme) => theme.palette.grey[100],\n    borderRadius: 4,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    fontSize: '0.8rem',\n    color: 'text.secondary',\n  },\n  popupDeleteFileButton: {\n    position: 'absolute',\n    top: 8,\n    right: 8,\n    bgcolor: (theme) => alpha(theme.palette.error.main, 0.8),\n    color: 'white',\n    p: 0.5,\n    transition: 'all 0.2s ease',\n    '&:hover': { bgcolor: (theme) => theme.palette.error.dark },\n  },\n  popupActionButton: {\n    ...baseButtonStyles,\n    px: 3,\n    py: 1,\n    fontWeight: 600,\n    borderRadius: '16px',\n    '&:hover': { bgcolor: 'primary.dark' },\n  },\n  popupCancelButton: {\n    ...baseButtonStyles,\n    px: 3,\n    py: 1,\n    bgcolor: (theme) => theme.palette.grey[200],\n    color: 'text.primary',\n    borderRadius: '16px',\n    '&:hover': { bgcolor: (theme) => theme.palette.grey[300] },\n  },\n  popupInputBar: {\n    display: 'flex',\n    alignItems: 'center',\n    bgcolor: (theme) => theme.palette.grey[50],\n    borderRadius: '16px',\n    p: 0.75,\n    mt: 1,\n    position: 'sticky',\n    bottom: 0,\n    zIndex: BASE_Z_INDEX + 1,\n    boxShadow: '0 1px 4px rgba(0,0,0,0.1)',\n    transition: 'all 0.2s ease',\n    '&:hover': { boxShadow: '0 2px 8px rgba(0,0,0,0.15)' },\n  },\n  popupMediaButton: (isActive) => ({\n    p: 1,\n    borderRadius: '50%',\n    ...dynamicMediaButtonColor(isActive),\n  }),\n  popupRecordingContainer: {\n    mt: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    gap: 1,\n  },\n  popupRecordingChip: {\n    bgcolor: (theme) => theme.palette.error.main,\n    color: 'white',\n    fontWeight: 500,\n    borderRadius: '12px',\n    px: 2,\n    py: 0.5,\n    animation: 'pulse 2s infinite',\n    '@keyframes pulse': {\n      '0%': { transform: 'scale(0.95)' },\n      '50%': { transform: 'scale(1.05)' },\n      '100%': { transform: 'scale(0.95)' },\n    },\n  },\n  popupRecordingControls: {\n    display: 'flex',\n    gap: 1,\n    mt: 0.5,\n    justifyContent: 'center',\n  },\n  popupVideoPreviewContainer: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    border: '50%',\n    mt: 1.5,\n    animation: 'fadeIn 0.3s ease-in',\n    '@keyframes fadeIn': {\n      from: { opacity: 0, transform: 'scale(0.9)' },\n      to: { opacity: 1, transform: 'scale(1)' },\n    },\n  },\n  popupLivePreview: {\n    width: MEDIA_PREVIEW_SIZE,\n    height: MEDIA_PREVIEW_SIZE,\n    borderRadius: '50%',\n    border: '2px solid',\n    borderColor: (theme) => theme.palette.grey[300],\n    bgcolor: 'black',\n    objectFit: 'cover',\n    boxShadow: '0 4px 12px rgba(0,0,0,0.2)',\n    transition: 'all 0.3s ease',\n  },\n  popupAudioVisualizer: (isLive = false) => ({\n    position: 'absolute',\n    width: '30%',\n    height: '30%',\n    display: 'flex',\n    alignItems: 'center',\n    gap: '2px',\n    opacity: isLive ? 1 : 0,\n    transition: 'opacity 0.2s ease',\n    pointerEvents: 'none',\n  }),\n  popupVisualizerBar: (index) => ({\n    width: '40px',\n    height: '30%',\n    bgcolor: 'primary.main',\n    borderRadius: '1px',\n    animation: `pulse${index} ${0.5 + (index % 5) * 0.15}s ease-in-out infinite alternate`,\n    animationDelay: `${index * 0.03}s`,\n    [`@keyframes pulse${index}`]: {\n      '0%': { transform: `scaleY(${0.2 + (index % 4) * 0.1})` },\n      '100%': { transform: `scaleY(${0.8 + (index % 4) * 0.1})` },\n    },\n  }),\n  popupAudioPlayer: {\n    width: '100%',\n    height: '40px',\n    bgcolor: (theme) => theme.palette.grey[50],\n    borderRadius: '16px',\n    p: 0.75,\n    position: 'relative',\n    overflow: 'hidden',\n    transition: 'all 0.2s ease',\n    boxShadow: '0 1px 4px rgba(0,0,0,0.1)',\n    '&:hover': {\n      boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n    },\n    '& audio': {\n      width: '100%',\n      height: '100%',\n      '&::-webkit-media-controls-panel': {\n        backgroundColor: 'transparent',\n      },\n      '&:hover + .audioVisualizer, &.playing + .audioVisualizer': {\n        opacity: 1,\n      },\n    },\n  },\n  popupProgressContainer: {\n    mt: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    gap: 0.5,\n  },\n  popupDialogPaper: {\n    position: 'absolute',\n    m: 1,\n    padding: '5px',\n    width: { xs: '95vw', sm: '600px' },\n    maxWidth: { sm: '90vw' },\n    bottom: '4rem',\n    maxHeight: '90vh',\n    overflowY: 'auto',\n    backgroundColor: (theme) => alpha(theme.palette.background.paper, 0.98),\n    backdropFilter: 'blur(12px)',\n    borderRadius: 3,\n    boxShadow: '0 4px 12px rgba(0,0,0,0.2)',\n    zIndex: POPUP_Z_INDEX,\n  },\n  popupDialogBackdrop: {\n    backgroundColor: (theme) => alpha(theme.palette.grey[900], 0.5),\n  },\n  popupContentBox: {\n    display: 'flex',\n    flexDirection: 'column',\n    gap: 1.5,\n    p: { xs: 2, sm: 2.5 },\n  },\n  popupErrorAlert: {\n    borderRadius: 3,\n  },\n  popupParentTweetCaption: {\n    color: 'text.secondary',\n    fontStyle: 'italic',\n    fontSize: { xs: '0.8rem', sm: '0.85rem' },\n  },\n  popupScheduleButton: {\n    alignSelf: 'flex-start',\n    textTransform: 'none',\n    color: 'primary.main',\n    fontSize: { xs: '0.8rem', sm: '0.85rem' },\n  },\n  popupButtonContainer: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    mt: 1.5,\n    gap: 1,\n  },\n};\n\nexport default TweetPopupStyles;","// src/utils/validations.js\nimport Joi from 'joi';\n\nexport const SUPPORTED_MIME_TYPES = [\n  'image/jpeg', 'image/png', 'image/gif', 'video/mp4', 'video/webm',\n  'audio/mpeg', 'audio/wav', 'application/pdf', 'image/svg+xml', 'audio/webm'\n];\nexport const MAX_FILE_SIZE = 50 * 1024 * 1024; // 50MB\nexport const MAX_FILES = 10;\n\n// Common error messages for message schemas\nconst messageErrorMessages = {\n  string: '{{#label}} must be a string',\n  required: '{{#label}} is required',\n  uuid: '{{#label}} must be a valid UUID v4',\n  max: '{{#label}} cannot exceed {{#limit}} characters',\n  pattern: '{{#label}} has an invalid format',\n  array: '{{#label}} must be an array',\n  min: '{{#label}} must have at least {{#limit}} items',\n  enum: '{{#label}} must be one of {{#enum}}',\n  uri: '{{#label}} must be a valid HTTP/HTTPS URL',\n  number: '{{#label}} must be a number',\n  integer: '{{#label}} must be an integer',\n  boolean: '{{#label}} must be a boolean',\n  date: '{{#label}} must be a valid ISO date',\n};\n\n// UUID schema for validating IDs\nexport const uuidSchema = Joi.string().uuid({ version: ['uuidv4'] }).required().messages({\n  'string.uuid': messageErrorMessages.uuid.replace('{{#label}}', 'ID'),\n  'any.required': messageErrorMessages.required.replace('{{#label}}', 'ID'),\n});\n\n// Schema for querying data (e.g., tweets)\nexport const querySchema = Joi.object({\n  status: Joi.string()\n    .valid('pending', 'approved', 'rejected', 'announcement', 'reminder', 'pinned', 'archived')\n    .optional(),\n  page: Joi.number().integer().min(1).default(1),\n  limit: Joi.number().integer().min(1).max(100).default(20),\n  sort: Joi.string()\n    .valid('created_at:asc', 'created_at:desc', 'like_count:desc', 'comment_count:desc')\n    .default('created_at:desc'),\n  pinned_only: Joi.boolean().default(false),\n  hashtag: Joi.string().pattern(/^#[a-zA-Z0-9_]{1,50}$/).optional(),\n  mention: Joi.string().pattern(/^@[a-zA-Z0-9_]{1,50}$/).optional(),\n}).label('QuerySchema');\n\n// Schema for querying comments\nexport const commentQuerySchema = Joi.object({\n  page: Joi.number().integer().min(1).default(1),\n  limit: Joi.number().integer().min(1).max(100).default(20),\n  sort: Joi.string()\n    .valid('created_at:asc', 'created_at:desc', 'like_count:desc')\n    .default('created_at:desc'),\n}).label('CommentQuerySchema');\n\n// Schema for content (e.g., tweet content)\nexport const contentSchema = Joi.object({\n  type: Joi.string()\n    .valid(\n      'text', 'image', 'video', 'audio', 'file', 'drawing', 'poll',\n      'event', 'link', 'quote', 'embed', 'voice', 'video_message'\n    )\n    .default('text')\n    .messages({\n      'any.only': 'Invalid content type',\n    }),\n  value: Joi.string()\n    .max(1000)\n    .when('type', {\n      is: 'text',\n      then: Joi.string().trim().min(1).required().messages({\n        'string.min': 'Text content must be at least 1 character',\n        'any.required': 'Text content is required for type \"text\"',\n      }),\n      otherwise: Joi.string().allow('').optional(),\n    }),\n  metadata: Joi.object({\n    files: Joi.array().items().max(10).default([]).optional(),\n    hashtags: Joi.array().items(Joi.string().pattern(/^#[a-zA-Z0-9_]{1,50}$/)).max(10).default([]).optional(),\n    mentions: Joi.array().items(Joi.string().pattern(/^@[a-zA-Z0-9_]{1,50}$/)).max(10).default([]).optional(),\n  }).default({}),\n}).label('Content');\n\n// Schema for position coordinates\nexport const positionSchema = Joi.object({\n  x: Joi.number().min(0).required().messages({\n    'number.min': 'X coordinate must be non-negative',\n    'any.required': 'X coordinate is required',\n  }),\n  y: Joi.number().min(0).required().messages({\n    'number.min': 'Y coordinate must be non-negative',\n    'any.required': 'Y coordinate is required',\n  }),\n}).label('Position');\n\n// Schema for reminders\nexport const reminderSchema = Joi.object({\n  schedule: Joi.date().iso().min('now').required().messages({\n    'date.min': 'Reminder schedule must be in the future',\n    'any.required': 'Reminder schedule is required',\n  }),\n  recurrence: Joi.string().valid('none', 'daily', 'weekly', 'monthly').default('none').messages({\n    'any.only': 'Recurrence must be one of: none, daily, weekly, monthly',\n  }),\n  enabled: Joi.boolean().default(true),\n}).label('Reminder');\n\n// Enhanced conversation validation schemas\nconst conversationErrorMessages = {\n  string: '{{#label}} must be a string',\n  required: '{{#label}} is required',\n  uuid: '{{#label}} must be a valid UUID v4',\n  max: '{{#label}} cannot exceed {{#limit}} characters',\n  pattern: '{{#label}} has an invalid format',\n  array: '{{#label}} must be an array',\n  min: '{{#label}} must have at least {{#limit}} items',\n  enum: '{{#label}} must be one of {{#enum}}',\n  uri: '{{#label}} must be a valid HTTP/HTTPS URL',\n  hexColor: '{{#label}} must be a valid hexadecimal color code (e.g., #FFFFFF)',\n  number: '{{#label}} must be a number',\n  integer: '{{#label}} must be an integer',\n  boolean: '{{#label}} must be a boolean',\n  date: '{{#label}} must be a valid ISO date',\n};\n\n// UUID pattern for conversation IDs\nconst uuidPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\n\n// Schema for conversation ID parameter\nexport const conversationIdParamSchema = Joi.object({\n  conversationId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Conversation ID'),\n      'string.pattern.base': conversationErrorMessages.uuid.replace('{{#label}}', 'Conversation ID'),\n      'any.required': conversationErrorMessages.required.replace('{{#label}}', 'Conversation ID'),\n    }),\n}).label('ConversationIdParam');\n\n// Schema for querying conversations\nexport const getConversationsQuerySchema = Joi.object({\n  page: Joi.number()\n    .integer()\n    .min(1)\n    .default(1)\n    .messages({\n      'number.base': conversationErrorMessages.number.replace('{{#label}}', 'Page'),\n      'number.integer': conversationErrorMessages.integer.replace('{{#label}}', 'Page'),\n      'number.min': 'Page must be at least 1',\n    }),\n  limit: Joi.number()\n    .integer()\n    .min(1)\n    .max(100)\n    .default(20)\n    .messages({\n      'number.base': conversationErrorMessages.number.replace('{{#label}}', 'Limit'),\n      'number.integer': conversationErrorMessages.integer.replace('{{#label}}', 'Limit'),\n      'number.min': 'Limit must be at least 1',\n      'number.max': 'Limit cannot exceed 100',\n    }),\n  cursor: Joi.date()\n    .iso()\n    .optional()\n    .messages({\n      'date.base': conversationErrorMessages.date.replace('{{#label}}', 'Cursor'),\n    }),\n  type: Joi.string()\n    .valid('direct', 'group', 'channel')\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Type'),\n      'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Type').replace('{{#enum}}', 'direct, group, channel'),\n    }),\n  visibility: Joi.string()\n    .valid('public', 'private', 'hidden')\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Visibility'),\n      'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Visibility').replace('{{#enum}}', 'public, private, hidden'),\n    }),\n  archived: Joi.boolean()\n    .optional()\n    .messages({\n      'boolean.base': conversationErrorMessages.boolean.replace('{{#label}}', 'Archived'),\n    }),\n  pinned: Joi.boolean()\n    .optional()\n    .messages({\n      'boolean.base': conversationErrorMessages.boolean.replace('{{#label}}', 'Pinned'),\n    }),\n  muted: Joi.boolean()\n    .optional()\n    .messages({\n      'boolean.base': conversationErrorMessages.boolean.replace('{{#label}}', 'Muted'),\n    }),\n  sort: Joi.string()\n    .valid('updatedAt:desc', 'updatedAt:asc', 'name:asc', 'name:desc')\n    .default('updatedAt:desc')\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Sort'),\n      'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Sort').replace('{{#enum}}', 'updatedAt:desc, updatedAt:asc, name:asc, name:desc'),\n    }),\n}).label('GetConversationsQuery');\n\n// Schema for creating a conversation\nexport const createConversationSchema = Joi.object({\n  friendId: Joi.string()\n    .pattern(uuidPattern)\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Friend ID'),\n      'string.pattern.base': conversationErrorMessages.uuid.replace('{{#label}}', 'Friend ID'),\n    }),\n  type: Joi.string()\n    .valid('direct', 'group', 'channel')\n    .default('direct')\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Type'),\n      'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Type').replace('{{#enum}}', 'direct, group, channel'),\n    }),\n  name: Joi.string()\n    .trim()\n    .max(100)\n    .min(3)\n    .optional()\n    .when('type', {\n      is: 'group',\n      then: Joi.string().required().messages({\n        'any.required': conversationErrorMessages.required.replace('{{#label}}', 'Name'),\n      }),\n    })\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Name'),\n      'string.max': conversationErrorMessages.max.replace('{{#label}}', 'Name').replace('{{#limit}}', '100'),\n      'string.min': 'Name must be at least 3 characters',\n    }),\n  members: Joi.array()\n    .items(Joi.string().pattern(uuidPattern).messages({\n      'string.pattern.base': conversationErrorMessages.uuid.replace('{{#label}}', 'Each member ID'),\n    }))\n    .optional()\n    .when('type', {\n      is: 'group',\n      then: Joi.array().min(1).max(1000).required().messages({\n        'array.min': conversationErrorMessages.min.replace('{{#label}}', 'Members').replace('{{#limit}}', '1'),\n        'array.max': 'Members cannot exceed 1000 users',\n        'any.required': conversationErrorMessages.required.replace('{{#label}}', 'Members'),\n      }),\n    })\n    .when('type', {\n      is: 'channel',\n      then: Joi.array().min(1).max(10000).required().messages({\n        'array.min': conversationErrorMessages.min.replace('{{#label}}', 'Members').replace('{{#limit}}', '1'),\n        'array.max': 'Members cannot exceed 10000 users',\n        'any.required': conversationErrorMessages.required.replace('{{#label}}', 'Members'),\n      }),\n    })\n    .messages({\n      'array.base': conversationErrorMessages.array.replace('{{#label}}', 'Members'),\n    }),\n  visibility: Joi.string()\n    .valid('public', 'private', 'hidden')\n    .default('public')\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Visibility'),\n      'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Visibility').replace('{{#enum}}', 'public, private, hidden'),\n    }),\n  tags: Joi.array()\n    .items(Joi.string().trim().max(50).pattern(/^[a-zA-Z0-9_]+$/).messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Each tag'),\n      'string.max': conversationErrorMessages.max.replace('{{#label}}', 'Each tag').replace('{{#limit}}', '50'),\n      'string.pattern.base': 'Each tag can only contain letters, numbers, and underscores',\n    }))\n    .max(10)\n    .optional()\n    .messages({\n      'array.base': conversationErrorMessages.array.replace('{{#label}}', 'Tags'),\n      'array.max': 'Tags cannot exceed 10 items',\n    }),\n  initialMessage: Joi.object({\n    type: Joi.string()\n      .valid('text', 'image', 'video', 'audio', 'file')\n      .default('text')\n      .messages({\n        'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Initial message type').replace('{{#enum}}', 'text, image, video, audio, file'),\n      }),\n    content: Joi.string()\n      .max(2000)\n      .when('type', {\n        is: 'text',\n        then: Joi.string().trim().min(1).required().messages({\n          'string.min': 'Initial message content must be at least 1 character',\n          'any.required': 'Initial message content is required for type \"text\"',\n        }),\n        otherwise: Joi.string().uri().optional().messages({\n          'string.uri': conversationErrorMessages.uri.replace('{{#label}}', 'Initial message content'),\n        }),\n      })\n      .messages({\n        'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Initial message content'),\n        'string.max': conversationErrorMessages.max.replace('{{#label}}', 'Initial message content').replace('{{#limit}}', '2000'),\n      }),\n    files: Joi.array()\n      .items(\n        Joi.object({\n          url: Joi.string().uri().required().messages({\n            'string.uri': conversationErrorMessages.uri.replace('{{#label}}', 'File URL'),\n            'any.required': conversationErrorMessages.required.replace('{{#label}}', 'File URL'),\n          }),\n          fileKey: Joi.string().required().messages({\n            'string.base': conversationErrorMessages.string.replace('{{#label}}', 'File key'),\n            'any.required': conversationErrorMessages.required.replace('{{#label}}', 'File key'),\n          }),\n          contentType: Joi.string()\n            .valid(...SUPPORTED_MIME_TYPES)\n            .required()\n            .messages({\n              'any.only': 'File content type must be one of supported MIME types',\n              'any.required': conversationErrorMessages.required.replace('{{#label}}', 'File content type'),\n            }),\n          size: Joi.number().max(MAX_FILE_SIZE).required().messages({\n            'number.max': `File size cannot exceed ${MAX_FILE_SIZE / (1024 * 1024)}MB`,\n            'any.required': conversationErrorMessages.required.replace('{{#label}}', 'File size'),\n          }),\n        })\n      )\n      .max(MAX_FILES)\n      .optional()\n      .messages({\n        'array.max': `Files cannot exceed ${MAX_FILES} items`,\n      }),\n  }).optional(),\n})\n  .or('friendId', 'members')\n  .messages({\n    'object.missing': 'Either friendId (for direct) or members (for group/channel) is required',\n  })\n  .label('CreateConversation');\n\n// Schema for updating a conversation\nexport const updateConversationSchema = Joi.object({\n  name: Joi.string()\n    .trim()\n    .max(100)\n    .min(3)\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Name'),\n      'string.max': conversationErrorMessages.max.replace('{{#label}}', 'Name').replace('{{#limit}}', '100'),\n      'string.min': 'Name must be at least 3 characters',\n    }),\n  description: Joi.string()\n    .trim()\n    .max(500)\n    .allow('')\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Description'),\n      'string.max': conversationErrorMessages.max.replace('{{#label}}', 'Description').replace('{{#limit}}', '500'),\n    }),\n  visibility: Joi.string()\n    .valid('public', 'private', 'hidden')\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Visibility'),\n      'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Visibility').replace('{{#enum}}', 'public, private, hidden'),\n    }),\n  permissions: Joi.object({\n    sendMessages: Joi.string()\n      .valid('all', 'admins', 'moderators')\n      .optional()\n      .messages({\n        'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Send messages permission'),\n        'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Send messages permission').replace('{{#enum}}', 'all, admins, moderators'),\n      }),\n    addMembers: Joi.string()\n      .valid('all', 'admins', 'moderators')\n      .optional()\n      .messages({\n        'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Add members permission'),\n        'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Add members permission').replace('{{#enum}}', 'all, admins, moderators'),\n      }),\n    pinMessages: Joi.string()\n      .valid('all', 'admins', 'moderators')\n      .optional()\n      .messages({\n        'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Pin messages permission'),\n        'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Pin messages permission').replace('{{#enum}}', 'all, admins, moderators'),\n      }),\n  }).optional(),\n  tags: Joi.array()\n    .items(Joi.string().trim().max(50).pattern(/^[a-zA-Z0-9_]+$/).messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Each tag'),\n      'string.max': conversationErrorMessages.max.replace('{{#label}}', 'Each tag').replace('{{#limit}}', '50'),\n      'string.pattern.base': 'Each tag can only contain letters, numbers, and underscores',\n    }))\n    .max(10)\n    .optional()\n    .messages({\n      'array.base': conversationErrorMessages.array.replace('{{#label}}', 'Tags'),\n      'array.max': 'Tags cannot exceed 10 items',\n    }),\n  admins: Joi.array()\n    .items(Joi.string().pattern(uuidPattern).messages({\n      'string.pattern.base': conversationErrorMessages.uuid.replace('{{#label}}', 'Each admin ID'),\n    }))\n    .optional()\n    .messages({\n      'array.base': conversationErrorMessages.array.replace('{{#label}}', 'Admins'),\n    }),\n  moderators: Joi.array()\n    .items(Joi.string().pattern(uuidPattern).messages({\n      'string.pattern.base': conversationErrorMessages.uuid.replace('{{#label}}', 'Each moderator ID'),\n    }))\n    .optional()\n    .messages({\n      'array.base': conversationErrorMessages.array.replace('{{#label}}', 'Moderators'),\n    }),\n})\n  .min(1)\n  .messages({\n    'object.min': 'At least one field must be provided for update',\n  })\n  .label('UpdateConversation');\n\n// Schema for adding members\nexport const addMembersSchema = Joi.object({\n  members: Joi.array()\n    .items(Joi.string().pattern(uuidPattern).messages({\n      'string.pattern.base': conversationErrorMessages.uuid.replace('{{#label}}', 'Each member ID'),\n    }))\n    .min(1)\n    .max(1000)\n    .required()\n    .messages({\n      'array.base': conversationErrorMessages.array.replace('{{#label}}', 'Members'),\n      'array.min': conversationErrorMessages.min.replace('{{#label}}', 'Members').replace('{{#limit}}', '1'),\n      'array.max': 'Cannot add more than 1000 members at once',\n      'any.required': conversationErrorMessages.required.replace('{{#label}}', 'Members'),\n    }),\n}).label('AddMembers');\n\n// Schema for removing members\nexport const removeMembersSchema = Joi.object({\n  members: Joi.array()\n    .items(Joi.string().pattern(uuidPattern).messages({\n      'string.pattern.base': conversationErrorMessages.uuid.replace('{{#label}}', 'Each member ID'),\n    }))\n    .min(1)\n    .max(1000)\n    .required()\n    .messages({\n      'array.base': conversationErrorMessages.array.replace('{{#label}}', 'Members'),\n      'array.min': conversationErrorMessages.min.replace('{{#label}}', 'Members').replace('{{#limit}}', '1'),\n      'array.max': 'Cannot remove more than 1000 members at once',\n      'any.required': conversationErrorMessages.required.replace('{{#label}}', 'Members'),\n    }),\n}).label('RemoveMembers');\n\n// Schema for updating chat settings\nexport const updateChatSettingsSchema = Joi.object({\n  theme: Joi.string()\n    .valid('light', 'dark', 'custom')\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Theme'),\n      'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Theme').replace('{{#enum}}', 'light, dark, custom'),\n    }),\n  background: Joi.string()\n    .uri({ scheme: ['http', 'https'] })\n    .allow(null)\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Background'),\n      'string.uri': conversationErrorMessages.uri.replace('{{#label}}', 'Background'),\n    }),\n  font: Joi.string()\n    .pattern(/^[a-zA-Z\\s-]+$/)\n    .max(50)\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Font'),\n      'string.pattern.base': conversationErrorMessages.pattern.replace('{{#label}}', 'Font'),\n      'string.max': conversationErrorMessages.max.replace('{{#label}}', 'Font').replace('{{#limit}}', '50'),\n    }),\n  bubbleStyle: Joi.object({\n    senderColor: Joi.string()\n      .pattern(/^#[0-9A-Fa-f]{6}$/)\n      .optional()\n      .messages({\n        'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Sender color'),\n        'string.pattern.base': conversationErrorMessages.hexColor.replace('{{#label}}', 'Sender color'),\n      }),\n    receiverColor: Joi.string()\n      .pattern(/^#[0-9A-Fa-f]{6}$/)\n      .optional()\n      .messages({\n        'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Receiver color'),\n        'string.pattern.base': conversationErrorMessages.hexColor.replace('{{#label}}', 'Receiver color'),\n      }),\n    textColor: Joi.string()\n      .pattern(/^#[0-9A-Fa-f]{6}$/)\n      .optional()\n      .messages({\n        'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Text color'),\n        'string.pattern.base': conversationErrorMessages.hexColor.replace('{{#label}}', 'Text color'),\n      }),\n  }).optional(),\n  accessibility: Joi.object({\n    highContrast: Joi.boolean().optional().messages({\n      'boolean.base': conversationErrorMessages.boolean.replace('{{#label}}', 'High contrast'),\n    }),\n    largeText: Joi.boolean().optional().messages({\n      'boolean.base': conversationErrorMessages.boolean.replace('{{#label}}', 'Large text'),\n    }),\n    screenReader: Joi.boolean().optional().messages({\n      'boolean.base': conversationErrorMessages.boolean.replace('{{#label}}', 'Screen reader'),\n    }),\n  }).optional(),\n  notificationSound: Joi.string()\n    .valid('default', 'silent', 'custom1', 'custom2')\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Notification sound'),\n      'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Notification sound').replace('{{#enum}}', 'default, silent, custom1, custom2'),\n    }),\n})\n  .min(1)\n  .messages({\n    'object.min': 'At least one field must be provided for settings update',\n  })\n  .label('UpdateChatSettings');\n\n// Schema for joining via invite link\nexport const joinViaInviteSchema = Joi.object({\n  inviteLink: Joi.string()\n    .uri({ scheme: ['http', 'https'] })\n    .required()\n    .pattern(/\\/conversations\\/join\\/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Invite link'),\n      'string.uri': conversationErrorMessages.uri.replace('{{#label}}', 'Invite link'),\n      'string.pattern.base': 'Invite link must contain a valid conversation ID',\n      'any.required': conversationErrorMessages.required.replace('{{#label}}', 'Invite link'),\n    }),\n}).label('JoinViaInvite');\n\n// Schema for updating ephemeral settings\nexport const updateEphemeralSettingsSchema = Joi.object({\n  ephemeral: Joi.boolean()\n    .optional()\n    .messages({\n      'boolean.base': conversationErrorMessages.boolean.replace('{{#label}}', 'Ephemeral'),\n    }),\n  ephemeralTTL: Joi.number()\n    .integer()\n    .min(60)\n    .max(604800) // 7 days in seconds\n    .optional()\n    .when('ephemeral', {\n      is: true,\n      then: Joi.required().messages({\n        'any.required': conversationErrorMessages.required.replace('{{#label}}', 'Ephemeral TTL'),\n      }),\n    })\n    .messages({\n      'number.base': conversationErrorMessages.number.replace('{{#label}}', 'Ephemeral TTL'),\n      'number.integer': conversationErrorMessages.integer.replace('{{#label}}', 'Ephemeral TTL'),\n      'number.min': 'Ephemeral TTL must be at least 60 seconds',\n      'number.max': 'Ephemeral TTL cannot exceed 604800 seconds (7 days)',\n    }),\n})\n  .min(1)\n  .messages({\n    'object.min': 'At least one field must be provided for ephemeral settings update',\n  })\n  .label('UpdateEphemeralSettings');\n\n// Schema for muting a conversation\nexport const muteConversationSchema = Joi.object({\n  muteUntil: Joi.date()\n    .iso()\n    .min('now')\n    .optional()\n    .messages({\n      'date.base': conversationErrorMessages.date.replace('{{#label}}', 'Mute until'),\n      'date.min': 'Mute until must be in the future',\n    }),\n  pushEnabled: Joi.boolean()\n    .optional()\n    .messages({\n      'boolean.base': conversationErrorMessages.boolean.replace('{{#label}}', 'Push enabled'),\n    }),\n  notificationSound: Joi.string()\n    .valid('default', 'silent', 'custom1', 'custom2')\n    .optional()\n    .messages({\n      'string.base': conversationErrorMessages.string.replace('{{#label}}', 'Notification sound'),\n      'any.only': conversationErrorMessages.enum.replace('{{#label}}', 'Notification sound').replace('{{#enum}}', 'default, silent, custom1, custom2'),\n    }),\n})\n  .min(1)\n  .messages({\n    'object.min': 'At least one field must be provided for mute settings',\n  })\n  .label('MuteConversation');\n\n// Message-related schemas\nexport const sendMessageBodySchema = Joi.object({\n  conversationId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': 'Conversation ID must be a string (e.g)',\n      'string.pattern.base': 'Conversation ID must be a valid UUID format',\n      'any.required': 'Conversation ID is required to send a message',\n    }),\n  content: Joi.string()\n    .allow('')\n    .max(10000)\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Content'),\n      'string.max': messageErrorMessages.max.replace('{{#label}}', 'Content').replace('{{#limit}}', '10000'),\n    }),\n  media: Joi.array()\n    .items(\n      Joi.object({\n        type: Joi.string()\n          .valid('file', 'image', 'video', 'voice', 'sticker', 'gif')\n          .required()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Media type'),\n            'any.only': messageErrorMessages.enum.replace('{{#label}}', 'Media type').replace('{{#enum}}', 'file, image, video, voice, sticker, gif'),\n          }),\n        content: Joi.string()\n          .required()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Media content'),\n            'any.required': messageErrorMessages.required.replace('{{#label}}', 'Media content'),\n          }),\n        contentType: Joi.string()\n          .valid(...SUPPORTED_MIME_TYPES)\n          .required()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Content type'),\n            'any.only': 'Content type must be one of supported MIME types',\n            'any.required': messageErrorMessages.required.replace('{{#label}}', 'Content type'),\n          }),\n        thumbnail: Joi.string()\n          .uri({ scheme: ['http', 'https'] })\n          .optional()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Thumbnail'),\n            'string.uri': messageErrorMessages.uri.replace('{{#label}}', 'Thumbnail'),\n          }),\n        shape: Joi.string()\n          .valid('square', 'circle', 'rectangle')\n          .default('square')\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Shape'),\n            'any.only': messageErrorMessages.enum.replace('{{#label}}', 'Shape').replace('{{#enum}}', 'square, circle, rectangle'),\n          }),\n        metadata: Joi.object({\n          size: Joi.number().integer().min(0).max(MAX_FILE_SIZE).optional().messages({\n            'number.max': `File size cannot exceed ${MAX_FILE_SIZE / (1024 * 1024)}MB`,\n          }),\n          duration: Joi.number().min(0).optional(),\n          width: Joi.number().integer().min(0).optional(),\n          height: Joi.number().integer().min(0).optional(),\n        }).optional(),\n      })\n    )\n    .max(MAX_FILES)\n    .optional()\n    .messages({\n      'array.base': messageErrorMessages.array.replace('{{#label}}', 'Media'),\n      'array.max': `Media cannot exceed ${MAX_FILES} items`,\n    }),\n  replyTo: Joi.string()\n    .pattern(uuidPattern)\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'ReplyTo'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'ReplyTo'),\n    }),\n  scheduledAt: Joi.date()\n    .iso()\n    .min('now')\n    .optional()\n    .messages({\n      'date.base': 'ScheduledAt must be a valid ISO date',\n      'date.min': 'ScheduledAt must be a future date',\n    }),\n  forwardedFrom: Joi.string()\n    .pattern(uuidPattern)\n    .optional()\n    .allow(null)\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'ForwardedFrom'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'ForwardedFrom'),\n    }),\n  threadId: Joi.string()\n    .pattern(uuidPattern)\n    .optional()\n    .allow(null)\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Thread ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Thread ID'),\n    }),\n  hashtags: Joi.array()\n    .items(Joi.string().pattern(/^#[a-zA-Z0-9_]{1,50}$/).messages({\n      'string.pattern.base': 'Each hashtag must start with # and contain only letters, numbers, or underscores',\n    }))\n    .max(10)\n    .optional()\n    .messages({\n      'array.base': messageErrorMessages.array.replace('{{#label}}', 'Hashtags'),\n      'array.max': 'Hashtags cannot exceed 10 items',\n    }),\n  mentions: Joi.array()\n    .items(Joi.string().pattern(/^@[a-zA-Z0-9_]{1,50}$/).messages({\n      'string.pattern.base': 'Each mention must start with @ and contain only letters, numbers, or underscores',\n    }))\n    .max(10)\n    .optional()\n    .messages({\n      'array.base': messageErrorMessages.array.replace('{{#label}}', 'Mentions'),\n      'array.max': 'Mentions cannot exceed 10 items',\n    }),\n})\n  .or('content', 'media')\n  .messages({\n    'object.missing': 'Either message content or media is required',\n  })\n  .label('SendMessageBody');\n\nexport const getMessagesQuerySchema = Joi.object({\n  page: Joi.number()\n    .integer()\n    .min(1)\n    .default(1)\n    .messages({\n      'number.base': messageErrorMessages.number.replace('{{#label}}', 'Page'),\n      'number.min': 'Page must be at least 1',\n    }),\n  limit: Joi.number()\n    .integer()\n    .min(1)\n    .max(100)\n    .default(20)\n    .messages({\n      'number.base': messageErrorMessages.number.replace('{{#label}}', 'Limit'),\n      'number.min': 'Limit must be at least 1',\n      'number.max': 'Limit cannot exceed 100',\n    }),\n  cursor: Joi.date()\n    .iso()\n    .optional()\n    .messages({\n      'date.base': messageErrorMessages.date.replace('{{#label}}', 'Cursor'),\n    }),\n  threadId: Joi.string()\n    .pattern(uuidPattern)\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Thread ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Thread ID'),\n    }),\n  sort: Joi.string()\n    .valid('createdAt:asc', 'createdAt:desc')\n    .default('createdAt:desc')\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Sort'),\n      'any.only': messageErrorMessages.enum.replace('{{#label}}', 'Sort').replace('{{#enum}}', 'createdAt:asc, createdAt:desc'),\n    }),\n}).label('GetMessagesQuery');\n\nexport const messageIdParamSchema = Joi.object({\n  messageId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Message ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Message ID'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Message ID'),\n    }),\n}).label('MessageIdParam');\n\nexport const editMessageSchema = Joi.object({\n  messageId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Message ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Message ID'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Message ID'),\n    }),\n  newContent: Joi.string()\n    .max(10000)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'New content'),\n      'string.max': messageErrorMessages.max.replace('{{#label}}', 'New content').replace('{{#limit}}', '10000'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'New content'),\n    }),\n}).label('EditMessage');\n\nexport const searchMessagesSchema = Joi.object({\n  query: Joi.string()\n    .trim()\n    .min(1)\n    .max(500)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Query'),\n      'string.min': 'Query must be at least 1 character',\n      'string.max': messageErrorMessages.max.replace('{{#label}}', 'Query').replace('{{#limit}}', '500'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Query'),\n    }),\n  limit: Joi.number()\n    .integer()\n    .min(1)\n    .max(100)\n    .default(50)\n    .messages({\n      'number.base': messageErrorMessages.number.replace('{{#label}}', 'Limit'),\n      'number.min': 'Limit must be at least 1',\n      'number.max': 'Limit cannot exceed 100',\n    }),\n  fromUserId: Joi.string()\n    .pattern(uuidPattern)\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'From user ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'From user ID'),\n    }),\n  mediaType: Joi.string()\n    .valid('image', 'video', 'audio', 'file', 'sticker', 'gif')\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Media type'),\n      'any.only': messageErrorMessages.enum.replace('{{#label}}', 'Media type').replace('{{#enum}}', 'image, video, audio, file, sticker, gif'),\n    }),\n}).label('SearchMessages');\n\nexport const createPollSchema = Joi.object({\n  conversationId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Conversation ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Conversation ID'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Conversation ID'),\n    }),\n  question: Joi.string()\n    .trim()\n    .max(500)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Question'),\n      'string.max': messageErrorMessages.max.replace('{{#label}}', 'Question').replace('{{#limit}}', '500'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Question'),\n    }),\n  options: Joi.array()\n    .items(Joi.string().trim().max(100))\n    .min(2)\n    .max(10)\n    .required()\n    .messages({\n      'array.base': messageErrorMessages.array.replace('{{#label}}', 'Options'),\n      'array.min': messageErrorMessages.min.replace('{{#label}}', 'Options').replace('{{#limit}}', '2'),\n      'array.max': 'Options cannot exceed 10 items',\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Each option'),\n      'string.max': messageErrorMessages.max.replace('{{#label}}', 'Each option').replace('{{#limit}}', '100'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Options'),\n    }),\n  allowMultipleVotes: Joi.boolean()\n    .optional()\n    .messages({\n      'boolean.base': messageErrorMessages.boolean.replace('{{#label}}', 'Allow multiple votes'),\n    }),\n  pollExpiresAt: Joi.date()\n    .iso()\n    .min('now')\n    .optional()\n    .messages({\n      'date.base': messageErrorMessages.date.replace('{{#label}}', 'Poll expiration'),\n      'date.min': 'Poll expiration must be in the future',\n    }),\n}).label('CreatePoll');\n\nexport const votePollSchema = Joi.object({\n  optionIndex: Joi.number()\n    .integer()\n    .min(0)\n    .required()\n    .messages({\n      'number.base': messageErrorMessages.number.replace('{{#label}}', 'Option index'),\n      'number.min': 'Option index must be at least 0',\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Option index'),\n    }),\n}).label('VotePoll');\n\nexport const addReactionSchema = Joi.object({\n  reaction: Joi.string()\n    .trim()\n    .max(10)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Reaction'),\n      'string.max': messageErrorMessages.max.replace('{{#label}}', 'Reaction').replace('{{#limit}}', '10'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Reaction'),\n    }),\n}).label('AddReaction');\n\nexport const generatePresignedUrlSchema = Joi.object({\n  fileType: Joi.string()\n    .valid(...SUPPORTED_MIME_TYPES)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'File type'),\n      'any.only': 'File type must be one of supported MIME types',\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'File type'),\n    }),\n  contentType: Joi.string()\n    .valid('file', 'image', 'video', 'voice', 'sticker', 'gif')\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Content type'),\n      'any.only': messageErrorMessages.enum.replace('{{#label}}', 'Content type').replace('{{#enum}}', 'file, image, video, voice, sticker, gif'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Content type'),\n    }),\n  fileSize: Joi.number()\n    .integer()\n    .min(1)\n    .max(MAX_FILE_SIZE)\n    .optional()\n    .messages({\n      'number.base': messageErrorMessages.number.replace('{{#label}}', 'File size'),\n      'number.min': 'File size must be at least 1 byte',\n      'number.max': `File size cannot exceed ${MAX_FILE_SIZE / (1024 * 1024)}MB`,\n    }),\n}).label('GeneratePresignedUrl');\n\n// Schema for forwarding a message\nexport const forwardMessageSchema = Joi.object({\n  messageId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Message ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Message ID'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Message ID'),\n    }),\n  targetConversationIds: Joi.array()\n    .items(Joi.string().pattern(uuidPattern).messages({\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Each target conversation ID'),\n    }))\n    .min(1)\n    .max(50)\n    .required()\n    .messages({\n      'array.base': messageErrorMessages.array.replace('{{#label}}', 'Target conversation IDs'),\n      'array.min': messageErrorMessages.min.replace('{{#label}}', 'Target conversation IDs').replace('{{#limit}}', '1'),\n      'array.max': 'Cannot forward to more than 50 conversations',\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Target conversation IDs'),\n    }),\n  comment: Joi.string()\n    .max(500)\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Comment'),\n      'string.max': messageErrorMessages.max.replace('{{#label}}', 'Comment').replace('{{#limit}}', '500'),\n    }),\n}).label('ForwardMessage');\n\n// Schema for creating a message draft\nexport const createMessageDraftSchema = Joi.object({\n  conversationId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Conversation ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Conversation ID'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Conversation ID'),\n    }),\n  content: Joi.string()\n    .allow('')\n    .max(10000)\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Content'),\n      'string.max': messageErrorMessages.max.replace('{{#label}}', 'Content').replace('{{#limit}}', '10000'),\n    }),\n  media: Joi.array()\n    .items(\n      Joi.object({\n        type: Joi.string()\n          .valid('file', 'image', 'video', 'voice', 'sticker', 'gif')\n          .required()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Media type'),\n            'any.only': messageErrorMessages.enum.replace('{{#label}}', 'Media type').replace('{{#enum}}', 'file, image, video, voice, sticker, gif'),\n          }),\n        content: Joi.string()\n          .required()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Media content'),\n            'any.required': messageErrorMessages.required.replace('{{#label}}', 'Media content'),\n          }),\n        contentType: Joi.string()\n          .valid(...SUPPORTED_MIME_TYPES)\n          .required()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Content type'),\n            'any.only': 'Content type must be one of supported MIME types',\n            'any.required': messageErrorMessages.required.replace('{{#label}}', 'Content type'),\n          }),\n        thumbnail: Joi.string()\n          .uri({ scheme: ['http', 'https'] })\n          .optional()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Thumbnail'),\n            'string.uri': messageErrorMessages.uri.replace('{{#label}}', 'Thumbnail'),\n          }),\n        metadata: Joi.object({\n          size: Joi.number().integer().min(0).max(MAX_FILE_SIZE).optional().messages({\n            'number.max': `File size cannot exceed ${MAX_FILE_SIZE / (1024 * 1024)}MB`,\n          }),\n          duration: Joi.number().min(0).optional(),\n          width: Joi.number().integer().min(0).optional(),\n          height: Joi.number().integer().min(0).optional(),\n        }).optional(),\n      })\n    )\n    .max(MAX_FILES)\n    .optional()\n    .messages({\n      'array.base': messageErrorMessages.array.replace('{{#label}}', 'Media'),\n      'array.max': `Media cannot exceed ${MAX_FILES} items`,\n    }),\n  replyTo: Joi.string()\n    .pattern(uuidPattern)\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'ReplyTo'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'ReplyTo'),\n    }),\n  threadId: Joi.string()\n    .pattern(uuidPattern)\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Thread ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Thread ID'),\n    }),\n}).label('CreateMessageDraft');\n\n// Schema for bulk message actions (e.g., bulk delete, mark as read)\nexport const bulkMessageActionSchema = Joi.object({\n  messageIds: Joi.array()\n    .items(Joi.string().pattern(uuidPattern).messages({\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Each message ID'),\n    }))\n    .min(1)\n    .max(100)\n    .required()\n    .messages({\n      'array.base': messageErrorMessages.array.replace('{{#label}}', 'Message IDs'),\n      'array.min': messageErrorMessages.min.replace('{{#label}}', 'Message IDs').replace('{{#limit}}', '1'),\n      'array.max': 'Cannot process more than 100 messages at once',\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Message IDs'),\n    }),\n}).label('BulkMessageAction');\n\n// Schema for creating a thread\nexport const createThreadSchema = Joi.object({\n  conversationId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Conversation ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Conversation ID'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Conversation ID'),\n    }),\n  parentMessageId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Parent message ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Parent message ID'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Parent message ID'),\n    }),\n  content: Joi.string()\n    .allow('')\n    .max(10000)\n    .optional()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Content'),\n      'string.max': messageErrorMessages.max.replace('{{#label}}', 'Content').replace('{{#limit}}', '10000'),\n    }),\n  media: Joi.array()\n    .items(\n      Joi.object({\n        type: Joi.string()\n          .valid('file', 'image', 'video', 'voice', 'sticker', 'gif')\n          .required()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Media type'),\n            'any.only': messageErrorMessages.enum.replace('{{#label}}', 'Media type').replace('{{#enum}}', 'file, image, video, voice, sticker, gif'),\n          }),\n        content: Joi.string()\n          .required()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Media content'),\n            'any.required': messageErrorMessages.required.replace('{{#label}}', 'Media content'),\n          }),\n        contentType: Joi.string()\n          .valid(...SUPPORTED_MIME_TYPES)\n          .required()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Content type'),\n            'any.only': 'Content type must be one of supported MIME types',\n            'any.required': messageErrorMessages.required.replace('{{#label}}', 'Content type'),\n          }),\n        thumbnail: Joi.string()\n          .uri({ scheme: ['http', 'https'] })\n          .optional()\n          .messages({\n            'string.base': messageErrorMessages.string.replace('{{#label}}', 'Thumbnail'),\n            'string.uri': messageErrorMessages.uri.replace('{{#label}}', 'Thumbnail'),\n          }),\n        metadata: Joi.object({\n          size: Joi.number().integer().min(0).max(MAX_FILE_SIZE).optional().messages({\n            'number.max': `File size cannot exceed ${MAX_FILE_SIZE / (1024 * 1024)}MB`,\n          }),\n          duration: Joi.number().min(0).optional(),\n          width: Joi.number().integer().min(0).optional(),\n          height: Joi.number().integer().min(0).optional(),\n        }).optional(),\n      })\n    )\n    .max(MAX_FILES)\n    .optional()\n    .messages({\n      'array.base': messageErrorMessages.array.replace('{{#label}}', 'Media'),\n      'array.max': `Media cannot exceed ${MAX_FILES} items`,\n    }),\n})\n  .or('content', 'media')\n  .messages({\n    'object.missing': 'Either content or media is required',\n  })\n  .label('CreateThread');\n\n// Schema for managing message notifications\nexport const messageNotificationSchema = Joi.object({\n  messageId: Joi.string()\n    .pattern(uuidPattern)\n    .required()\n    .messages({\n      'string.base': messageErrorMessages.string.replace('{{#label}}', 'Message ID'),\n      'string.pattern.base': messageErrorMessages.uuid.replace('{{#label}}', 'Message ID'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Message ID'),\n    }),\n  notify: Joi.boolean()\n    .required()\n    .messages({\n      'boolean.base': messageErrorMessages.boolean.replace('{{#label}}', 'Notify'),\n      'any.required': messageErrorMessages.required.replace('{{#label}}', 'Notify'),\n    }),\n}).label('MessageNotification');\n\n/**\n * Validates a payload against a schema and throws an error if invalid.\n * @param {Joi.Schema} schema - Joi schema to validate against\n * @param {any} payload - Data to validate\n * @param {string} [errorMessage] - Custom error message prefix\n * @throws {Error} - Throws error with validation details\n */\nexport const validatePayload = (schema, payload, errorMessage = 'Validation error') => {\n  const { error } = schema.validate(payload, { abortEarly: false, stripUnknown: true });\n  if (error) {\n    const details = error.details.map(d => d.message).join('; ');\n    throw new Error(`${errorMessage}: ${details}`);\n  }\n};","import React, { useRef, useState, useEffect, useCallback, useMemo, memo } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  Button,\n  Box,\n  IconButton,\n  Typography,\n  CircularProgress,\n  Grid,\n  Alert,\n  LinearProgress,\n  Chip,\n  Collapse,\n  Tooltip,\n  Menu,\n  MenuItem,\n  useMediaQuery,\n  Link,\n} from '@mui/material';\nimport { Mic, Videocam, Stop, Schedule, Pause, Delete, PlayArrow, Close, AttachFile } from '@mui/icons-material';\nimport { motion } from 'framer-motion';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport { isEqual } from 'lodash';\nimport { useDrag } from '@use-gesture/react';\nimport TweetPopupStyles from './TweetPopupStyles';\nimport { useFileUpload } from '../../../hooks/useFileUpload';\nimport { SUPPORTED_MIME_TYPES } from '../../../constants/validations';\nimport LinkPreview from './LinkPreview';\n\nconst MAX_TWEET_LENGTH = 1000;\nconst MAX_FILE_SIZE = 50 * 1024 * 1024; // 50MB\nconst RECORDING_TIMEOUT = 5 * 60 * 1000; // 5 minutes\nconst LONG_PRESS_DELAY = 500; // 500ms for long-press\n\nconst TweetPopup = ({ x, y, onSubmit, onClose, parentTweet, onBoardUpdate }) => {\n  const [form, setForm] = useState({ draft: '', scheduledAt: '' });\n  const [transformedText, setTransformedText] = useState('');\n  const [recording, setRecording] = useState(null);\n  const [recordingType, setRecordingType] = useState(null);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [recordingMode, setRecordingMode] = useState('voice');\n  const [isPaused, setIsPaused] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [showSchedule, setShowSchedule] = useState(false);\n  const [menuAnchorEl, setMenuAnchorEl] = useState(null);\n  const [submitSuccess, setSubmitSuccess] = useState(false);\n  const [linkModal, setLinkModal] = useState(null);\n  const fileInputRef = useRef(null);\n  const mediaRecorderRef = useRef(null);\n  const dialogRef = useRef(null);\n  const videoPreviewRef = useRef(null);\n  const recordingTimerRef = useRef(null);\n  const longPressTimerRef = useRef(null);\n  const { files, handleFileChange, removeFile, cleanup, fileUrlsRef } = useFileUpload();\n  const isMobile = useMediaQuery((theme) => theme.breakpoints.down('sm'));\n\n  const bindDrag = useDrag(({ movement: [mx], event }) => {\n    if (Math.abs(mx) > 50) {\n      setRecordingMode(recordingMode === 'voice' ? 'video_message' : 'voice');\n      event.preventDefault();\n    }\n  }, { enabled: isMobile && !recordingType });\n\n  useEffect(() => {\n    dialogRef.current?.focus();\n    setTransformedText(form.draft);\n    return () => {\n      cleanup();\n      stopRecording();\n    };\n  }, [cleanup]);\n\n  useEffect(() => {\n    if (recording && !isPaused) {\n      recordingTimerRef.current = setInterval(() => {\n        setRecordingTime((prev) => {\n          const next = prev + 1;\n          if (next * 1000 >= RECORDING_TIMEOUT) {\n            stopRecording();\n            setError('Recording stopped: Maximum duration reached (5 minutes).');\n          }\n          return next;\n        });\n      }, 1000);\n    }\n    return () => clearInterval(recordingTimerRef.current);\n  }, [recording, isPaused]);\n\n  useEffect(() => {\n    if (recording && recordingType === 'video_message' && videoPreviewRef.current) {\n      videoPreviewRef.current.srcObject = recording;\n      videoPreviewRef.current.play().catch((err) => {\n        console.error('Video preview error:', err);\n        setError('Failed to display video preview.');\n      });\n    }\n    return () => {\n      if (videoPreviewRef.current) {\n        videoPreviewRef.current.srcObject = null;\n      }\n    };\n  }, [recording, recordingType]);\n\n  const startRecording = useCallback(async (type) => {\n    try {\n      const constraints = type === 'voice' ? { audio: true } : { audio: true, video: { width: 1280, height: 720, facingMode: 'user' } };\n      const stream = await navigator.mediaDevices.getUserMedia(constraints);\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType: type === 'voice' ? 'audio/webm' : 'video/webm;codecs=vp8,opus',\n      });\n      const chunks = [];\n      mediaRecorder.ondataavailable = (e) => chunks.push(e.data);\n      mediaRecorder.onstop = () => {\n        const mimeType = type === 'voice' ? 'audio/webm' : 'video/webm';\n        const blob = new Blob(chunks, { type: mimeType });\n        const fileName = `${type}_${Date.now()}.webm`;\n        const file = new File([blob], fileName, { type: mimeType });\n        if (blob.size > MAX_FILE_SIZE) {\n          setError('Recorded file exceeds 50MB limit.');\n          return;\n        }\n        handleFileChange({ target: { files: [file] } });\n        stream.getTracks().forEach((track) => track.stop());\n      };\n      mediaRecorder.start(1000);\n      mediaRecorderRef.current = mediaRecorder;\n      setRecording(stream);\n      setRecordingType(type);\n      setRecordingTime(0);\n      setIsPaused(false);\n      setError(null);\n    } catch (err) {\n      setError('Failed to start recording. Please check microphone/camera permissions.');\n      console.error('Recording error:', err);\n    }\n  }, [handleFileChange]);\n\n  const pauseRecording = useCallback(() => {\n    if (mediaRecorderRef.current && recording && !isPaused) {\n      mediaRecorderRef.current.pause();\n      setIsPaused(true);\n    }\n  }, [recording, isPaused]);\n\n  const resumeRecording = useCallback(() => {\n    if (mediaRecorderRef.current && recording && isPaused) {\n      mediaRecorderRef.current.resume();\n      setIsPaused(false);\n    }\n  }, [recording, isPaused]);\n\n  const stopRecording = useCallback(() => {\n    if (mediaRecorderRef.current) {\n      mediaRecorderRef.current.stop();\n      mediaRecorderRef.current = null;\n    }\n    if (recording) {\n      recording.getTracks().forEach((track) => track.stop());\n    }\n    if (videoPreviewRef.current) {\n      videoPreviewRef.current.srcObject = null;\n    }\n    setRecording(null);\n    setRecordingType(null);\n    setRecordingTime(0);\n    setIsPaused(false);\n    clearInterval(recordingTimerRef.current);\n  }, [recording]);\n\n  const discardRecording = useCallback(() => {\n    stopRecording();\n    setError(null);\n  }, [stopRecording]);\n\n  const handleFileInputChange = useCallback((e) => {\n    const selectedFiles = Array.from(e.target.files);\n    const validFiles = selectedFiles.filter((file) => {\n      if (!SUPPORTED_MIME_TYPES.includes(file.type)) {\n        setError(`Unsupported file type: ${file.name}`);\n        return false;\n      }\n      if (file.size > MAX_FILE_SIZE) {\n        setError(`File too large: ${file.name} exceeds 50MB limit`);\n        return false;\n      }\n      return true;\n    });\n    if (validFiles.length) {\n      handleFileChange({ target: { files: validFiles } });\n      setError(null);\n    }\n    fileInputRef.current.value = null;\n  }, [handleFileChange]);\n\n  const handleSubmit = useCallback(async () => {\n    if (!form.draft.trim() && !files.length) {\n      setError('Please add text or media to submit.');\n      return;\n    }\n    if (form.draft.length > MAX_TWEET_LENGTH) {\n      setError(`Tweet exceeds ${MAX_TWEET_LENGTH} character limit.`);\n      return;\n    }\n    if (form.scheduledAt && new Date(form.scheduledAt) < new Date()) {\n      setError('Scheduled time must be in the future.');\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    try {\n      const contentType = files.length ? files[0].type.split('/')[0] : 'text';\n      const content = {\n        type: contentType,\n        value: form.draft.trim() || '',\n        metadata: {\n          files: files.map((file, index) => ({\n            fileKey: file.name,\n            url: fileUrlsRef.current.get(file) || URL.createObjectURL(file),\n            contentType: file.type,\n            duration: file.type.startsWith('video') ? 0 : undefined,\n          })),\n          style: {},\n          hashtags: [],\n          mentions: [],\n          poll_options: [],\n          event_details: {},\n          quote_ref: null,\n          embed_data: null,\n        },\n      };\n      const position = parentTweet\n        ? { x: parentTweet.position.x, y: parentTweet.position.y + 180 }\n        : { x, y: y + 180 };\n      const newTweet = await onSubmit(\n        content,\n        position.x,\n        position.y,\n        form.scheduledAt || null,\n        files,\n        (progress) => setUploadProgress(progress),\n        parentTweet?.tweet_id || null\n      );\n      if (onBoardUpdate && newTweet) {\n        onBoardUpdate(newTweet);\n      }\n      setSubmitSuccess(true);\n      setTimeout(() => {\n        setForm({ draft: '', scheduledAt: '' });\n        cleanup();\n        onClose();\n        setSubmitSuccess(false);\n      }, 500);\n    } catch (err) {\n      setError(err.message || 'Failed to submit tweet.');\n      console.error('Submit error:', err);\n    } finally {\n      setLoading(false);\n      setUploadProgress(0);\n    }\n  }, [form, files, onSubmit, cleanup, onClose, fileUrlsRef, parentTweet, x, y, onBoardUpdate]);\n\n  const handleKeyPress = useCallback((e) => {\n    if (e.key === 'Enter' && !e.shiftKey && !recording) {\n      e.preventDefault();\n      handleSubmit();\n    }\n  }, [handleSubmit, recording]);\n\n  const isSubmitDisabled = useMemo(() => {\n    return (\n      loading ||\n      (!form.draft.trim() && !files.length) ||\n      form.draft.length > MAX_TWEET_LENGTH ||\n      !!recording\n    );\n  }, [loading, form.draft, files, recording]);\n\n  const renderFilePreview = useCallback((file, index) => {\n    const fileUrl = fileUrlsRef.current.get(file) || URL.createObjectURL(file);\n    fileUrlsRef.current.set(file, fileUrl);\n\n    return (\n      <Grid item xs={12} key={`file-${index}`}>\n        <Box sx={TweetPopupStyles.popupFilePreviewContainer}>\n          {file.type.startsWith('image') ? (\n            <LazyLoadImage\n              src={fileUrl}\n              alt={`Preview ${index + 1}`}\n              style={TweetPopupStyles.popupPreviewMedia}\n              effect=\"blur\"\n              placeholder={<Box sx={TweetPopupStyles.popupPreviewPlaceholder}>Loading Image...</Box>}\n            />\n          ) : file.type.startsWith('video') ? (\n            <Box sx={{ position: 'relative' }}>\n              <video\n                src={fileUrl}\n                style={TweetPopupStyles.popupCirclePreviewMedia}\n                controls\n                preload=\"metadata\"\n                poster={fileUrl + '#t=0.1'}\n                aria-label={`Video preview ${index + 1}`}\n              />\n              <Box sx={TweetPopupStyles.popupPreviewOverlay}>\n                <IconButton\n                  size=\"small\"\n                  onClick={() => removeFile(index)}\n                  sx={TweetPopupStyles.popupDeleteFileButton}\n                  aria-label={`Remove file ${index + 1}`}\n                >\n                  <Delete fontSize=\"small\" />\n                </IconButton>\n              </Box>\n            </Box>\n          ) : file.type.startsWith('audio') ? (\n            <Box sx={TweetPopupStyles.popupAudioPlayer}>\n              <audio\n                src={fileUrl}\n                controls\n                style={{ width: '100%' }}\n                preload=\"metadata\"\n                aria-label={`Audio preview ${index + 1}`}\n              />\n              <Box sx={TweetPopupStyles.popupAudioVisualizer(false)}>\n                {[...Array(24)].map((_, i) => (\n                  <Box key={i} sx={TweetPopupStyles.popupVisualizerBar(i)} />\n                ))}\n              </Box>\n              <Box sx={TweetPopupStyles.popupPreviewOverlay}>\n                <IconButton\n                  size=\"small\"\n                  onClick={() => removeFile(index)}\n                  sx={TweetPopupStyles.popupDeleteFileButton}\n                  aria-label={`Remove file ${index + 1}`}\n                >\n                  <Delete fontSize=\"small\" />\n                </IconButton>\n              </Box>\n            </Box>\n          ) : (\n            <Box sx={TweetPopupStyles.popupPreviewPlaceholder}>\n              <Typography variant=\"caption\">File: {file.name}</Typography>\n            </Box>\n          )}\n        </Box>\n      </Grid>\n    );\n  }, [removeFile, fileUrlsRef]);\n\n  const recordingStatus = useMemo(() => {\n    if (!recording) return null;\n    const minutes = Math.floor(recordingTime / 60);\n    const seconds = recordingTime % 60;\n    const label = `Recording ${recordingType === 'voice' ? 'Audio' : 'Video'}: ${minutes}:${seconds.toString().padStart(2, '0')}`;\n\n    return (\n      <Box sx={TweetPopupStyles.popupRecordingContainer}>\n        <Chip\n          label={label}\n          sx={TweetPopupStyles.popupRecordingChip}\n          aria-label={`Recording ${recordingType} duration`}\n        />\n        {recordingType === 'video_message' ? (\n          <Box sx={{\n            ...TweetPopupStyles.popupVideoPreviewContainer,\n            overflow: 'hidden'\n          }}>\n            <video\n              ref={videoPreviewRef}\n              style={{\n                ...TweetPopupStyles.popupLivePreview,\n              }}\n              muted\n              autoPlay\n              playsInline\n              webkitPlaysinline\n              aria-label=\"Live video recording preview\"\n            />\n          </Box>\n        ) : (\n          <Box sx={TweetPopupStyles.popupAudioVisualizer(true)}>\n            {[...Array(24)].map((_, i) => (\n              <Box key={i} sx={TweetPopupStyles.popupVisualizerBar(i)} />\n            ))}\n          </Box>\n        )}\n        <Box sx={TweetPopupStyles.popupRecordingControls}>\n          <Tooltip title={isPaused ? 'Resume' : 'Pause'} placement=\"top\">\n            <IconButton\n              onClick={isPaused ? resumeRecording : pauseRecording}\n              sx={TweetPopupStyles.popupMediaButton(isPaused)}\n              aria-label={isPaused ? 'Resume recording' : 'Pause recording'}\n            >\n              {isPaused ? <PlayArrow fontSize=\"small\" /> : <Pause fontSize=\"small\" />}\n            </IconButton>\n          </Tooltip>\n          <Tooltip title=\"Stop\" placement=\"top\">\n            <IconButton\n              onClick={stopRecording}\n              sx={TweetPopupStyles.popupMediaButton(false)}\n              aria-label=\"Stop recording\"\n            >\n              <Stop fontSize=\"small\" />\n            </IconButton>\n          </Tooltip>\n        </Box>\n      </Box>\n    );\n  }, [recording, recordingType, recordingTime, isPaused, pauseRecording, resumeRecording, stopRecording]);\n\n  const toggleRecording = useCallback((type) => () => {\n    return recordingType === type ? stopRecording() : startRecording(type);\n  }, [recordingType, startRecording, stopRecording]);\n\n  const renderInputBar = useMemo(() => {\n    return (\n      <Box sx={{ ...TweetPopupStyles.popupInputBar, position: 'static', zIndex: 'auto', gap: 1, flexDirection: 'column' }}>\n        <Box sx={{ display: 'flex', gap: 1, width: '100%' }}>\n          <input\n            type=\"file\"\n            accept={SUPPORTED_MIME_TYPES.join(',')}\n            multiple\n            onChange={handleFileInputChange}\n            style={{ display: 'none' }}\n            ref={fileInputRef}\n            disabled={loading || recording}\n          />\n          <Tooltip title=\"Upload Media\" placement=\"top\">\n            <IconButton\n              onClick={() => fileInputRef.current.click()}\n              sx={TweetPopupStyles.popupMediaButton(false)}\n              aria-label=\"Upload media\"\n              disabled={loading || recording}\n            >\n              <AttachFile fontSize=\"small\" />\n            </IconButton>\n          </Tooltip>\n          <Box sx={{ position: 'relative', flex: 1 }}>\n            <TextField\n              placeholder={parentTweet ? 'Write your reply...' : \"What's on your mind?\"}\n              value={form.draft}\n              onChange={(e) => setForm((prev) => ({ ...prev, draft: e.target.value }))}\n              onKeyPress={handleKeyPress}\n              autoFocus\n              fullWidth\n              multiline\n              maxRows={4}\n              variant=\"outlined\"\n              sx={{\n                ...TweetPopupStyles.popupTextField,\n                '& .MuiOutlinedInput-root': {\n                  borderRadius: '12px',\n                  padding: '6px 12px',\n                  minHeight: '32px',\n                  fontSize: '0.875rem',\n                },\n              }}\n              inputProps={{ maxLength: MAX_TWEET_LENGTH }}\n              aria-label={parentTweet ? 'Reply content' : 'Tweet content'}\n              disabled={loading}\n            />\n            <Typography\n              variant=\"caption\"\n              sx={{\n                ...TweetPopupStyles.popupCharCount(form.draft.length > MAX_TWEET_LENGTH),\n                position: 'absolute',\n                right: '8px',\n                bottom: '4px',\n                fontSize: '0.75rem',\n              }}\n              aria-live=\"polite\"\n            >\n              {form.draft.length}/{MAX_TWEET_LENGTH}\n            </Typography>\n          </Box>\n          <motion.div key={recordingType || recordingMode} initial={{ opacity: 0, scale: 0.8 }} animate={{ opacity: 1, scale: 1 }} transition={{ duration: 0.2 }}>\n            {recordingType === 'voice' ? (\n              <Tooltip title=\"Stop Audio Recording (save to add another)\" placement=\"top\">\n                <IconButton\n                  onClick={toggleRecording('voice')}\n                  sx={TweetPopupStyles.popupMediaButton(true)}\n                  aria-label=\"Stop audio recording\"\n                  disabled={loading}\n                >\n                  <Stop fontSize=\"small\" />\n                </IconButton>\n              </Tooltip>\n            ) : recordingType === 'video_message' ? (\n              <Tooltip title=\"Stop Video Recording (save to add another)\" placement=\"top\">\n                <IconButton\n                  onClick={toggleRecording('video_message')}\n                  sx={TweetPopupStyles.popupMediaButton(true)}\n                  aria-label=\"Stop video recording\"\n                  disabled={loading}\n                >\n                  <Stop fontSize=\"small\" />\n                </IconButton>\n              </Tooltip>\n            ) : (\n              <Tooltip\n                title={isMobile ? `Start ${recordingMode === 'voice' ? 'Audio' : 'Video'} Recording (swipe or hold to switch)` : `Start ${recordingMode === 'voice' ? 'Audio' : 'Video'} Recording (right-click to switch)`}\n                placement=\"top\"\n              >\n                <IconButton\n                  {...bindDrag()}\n                  onClick={() => toggleRecording(recordingMode)()}\n                  onTouchStart={() => {\n                    if (isMobile) {\n                      longPressTimerRef.current = setTimeout(() => {\n                        setRecordingMode(recordingMode === 'voice' ? 'video_message' : 'voice');\n                      }, LONG_PRESS_DELAY);\n                    }\n                  }}\n                  onTouchEnd={() => {\n                    if (isMobile && longPressTimerRef.current) {\n                      clearTimeout(longPressTimerRef.current);\n                      longPressTimerRef.current = null;\n                    }\n                  }}\n                  onContextMenu={(e) => {\n                    if (!isMobile) {\n                      e.preventDefault();\n                      setRecordingMode(recordingMode === 'voice' ? 'video_message' : 'voice');\n                    }\n                  }}\n                  sx={TweetPopupStyles.popupMediaButton(false)}\n                  aria-label={isMobile ? `Start ${recordingMode === 'voice' ? 'audio' : 'video'} recording, hold to switch mode` : `Start ${recordingMode === 'voice' ? 'audio' : 'video'} recording, right-click to switch mode`}\n                  aria-haspopup=\"true\"\n                  disabled={loading}\n                >\n                  {recordingMode === 'voice' ? <Mic fontSize=\"small\" /> : <Videocam fontSize=\"small\" />}\n                </IconButton>\n              </Tooltip>\n            )}\n          </motion.div>\n          <Tooltip title={isMobile ? 'Submit tweet (long-press for schedule)' : 'Submit tweet (right-click for schedule)'} placement=\"top\">\n            <Button\n              onClick={(e) => {\n                if (!menuAnchorEl) {\n                  handleSubmit();\n                }\n                e.preventDefault();\n              }}\n              onContextMenu={(e) => {\n                if (!isMobile) {\n                  e.preventDefault();\n                  setMenuAnchorEl(e.currentTarget);\n                }\n              }}\n              onTouchStart={() => {\n                if (isMobile) {\n                  longPressTimerRef.current = setTimeout(() => {\n                    setMenuAnchorEl(fileInputRef.current);\n                  }, LONG_PRESS_DELAY);\n                }\n              }}\n              onTouchEnd={() => {\n                if (isMobile && longPressTimerRef.current) {\n                  clearTimeout(longPressTimerRef.current);\n                  longPressTimerRef.current = null;\n                }\n              }}\n              variant=\"contained\"\n              color=\"primary\"\n              sx={{ ...TweetPopupStyles.popupActionButton, minWidth: '90px' }}\n              disabled={isSubmitDisabled}\n              aria-label=\"Submit tweet or open schedule menu\"\n              aria-controls={menuAnchorEl ? 'schedule-menu' : undefined}\n              aria-haspopup=\"true\"\n            >\n              {loading ? <CircularProgress size={24} color=\"inherit\" /> : parentTweet ? 'Reply' : 'Add Post'}\n            </Button>\n          </Tooltip>\n        </Box>\n        <LinkPreview content={form.draft} onTextTransform={setTransformedText} onPlayClick={(url, type) => {\n          if (['spotify', 'soundcloud'].includes(type) && !url.embedUrl) {\n            setLinkModal({ url: url.url, type });\n          }\n        }} />\n      </Box>\n    );\n  }, [recordingType, recording, loading, handleFileInputChange, startRecording, stopRecording, form.draft, parentTweet, handleKeyPress, handleSubmit, isSubmitDisabled, files, recordingMode, isMobile, bindDrag, toggleRecording]);\n\n  const linkModalContent = useMemo(() => {\n    if (!linkModal) return null;\n    return (\n      <Dialog open={!!linkModal} onClose={() => setLinkModal(null)} maxWidth=\"sm\" fullWidth>\n        <DialogTitle>View Content</DialogTitle>\n        <DialogContent>\n          <Typography variant=\"body1\" gutterBottom>\n            This content cannot be embedded directly. Visit the link below to view it:\n          </Typography>\n          <Link href={linkModal.url} target=\"_blank\" rel=\"noopener\" sx={{ wordBreak: 'break-all' }}>\n            {linkModal.url}\n          </Link>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setLinkModal(null)} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }, [linkModal]);\n\n  return (\n    <motion.div initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: submitSuccess ? 1.05 : 1 }} transition={{ duration: 0.3 }}>\n      <Dialog\n        open={true}\n        onClose={onClose}\n        PaperProps={{ sx: { ...TweetPopupStyles.popupDialogPaper, position: 'relative' } }}\n        sx={{ '& .MuiBackdrop-root': TweetPopupStyles.popupDialogBackdrop }}\n        aria-labelledby=\"tweet-popup-title\"\n        ref={dialogRef}\n      >\n        <IconButton\n          onClick={onClose}\n          sx={{ position: 'absolute', top: 10, right: 25, zIndex: 1, color: 'grey.600', padding: '4px', '&:hover': { bgcolor: 'grey.200' } }}\n          aria-label=\"Close tweet popup\"\n          disabled={loading || uploadProgress > 0}\n        >\n          <Close fontSize=\"small\" />\n        </IconButton>\n        <Typography id=\"tweet-popup-title\" sx={{ ...TweetPopupStyles.popupTitle, pr: 5 }}>\n          {parentTweet ? 'Reply to Tweet' : 'Create a new tweet'}\n        </Typography>\n        <Box sx={TweetPopupStyles.popupContentBox}>\n          {error && (\n            <Alert severity=\"error\" onClose={() => setError(null)} sx={TweetPopupStyles.popupErrorAlert}>\n              {error}\n            </Alert>\n          )}\n          {parentTweet && (\n            <Box sx={{ mb: 2 }}>\n              <Typography variant=\"subtitle2\" sx={{ mb: 0.5, fontWeight: 'medium' }}>\n                Replying to:\n              </Typography>\n              <Box component=\"blockquote\" sx={{ borderLeft: '4px solid', borderColor: 'primary.main', pl: 2, color: 'text.secondary', fontStyle: 'italic', m: 0 }}>\n                <Typography variant=\"body2\">\n                  {parentTweet.content?.value.split(/\\s+/).slice(0, 10).join(' ')}...\n                </Typography>\n              </Box>\n            </Box>\n          )}\n          {files.length > 0 && (\n            <Box sx={TweetPopupStyles.popupFilePreviewContainer}>\n              <Grid container spacing={1}>\n                {files.slice(0, 4).map((file, index) => renderFilePreview(file, index))}\n              </Grid>\n              {files.length > 4 && (\n                <Typography variant=\"caption\" sx={{ mt: 1, color: 'text.secondary' }}>\n                  +{files.length - 4} more file(s)\n                </Typography>\n              )}\n            </Box>\n          )}\n          {recordingStatus}\n          {loading && uploadProgress > 0 && (\n            <Box sx={TweetPopupStyles.popupProgressContainer}>\n              <LinearProgress variant=\"determinate\" value={uploadProgress} />\n              <Typography variant=\"caption\" sx={{ color: 'text.secondary' }}>\n                Uploading: {uploadProgress}%\n              </Typography>\n            </Box>\n          )}\n          <Collapse in={showSchedule} timeout=\"auto\">\n            <TextField\n              label=\"Schedule (optional)\"\n              type=\"datetime-local\"\n              value={form.scheduledAt}\n              onChange={(e) => setForm((prev) => ({ ...prev, scheduledAt: e.target.value }))}\n              fullWidth\n              InputLabelProps={{ shrink: true }}\n              sx={{ ...TweetPopupStyles.popupTextField, mb: 1 }}\n              inputProps={{ min: new Date().toISOString().slice(0, 16) }}\n              aria-label=\"Schedule tweet\"\n              disabled={loading || recording}\n            />\n          </Collapse>\n          {renderInputBar}\n        </Box>\n      </Dialog>\n      {linkModalContent}\n    </motion.div>\n  );\n};\n\nTweetPopup.propTypes = {\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  parentTweet: PropTypes.shape({\n    tweet_id: PropTypes.string,\n    username: PropTypes.string,\n    position: PropTypes.shape({ x: PropTypes.number, y: PropTypes.number }),\n    content: PropTypes.shape({ value: PropTypes.string }),\n  }),\n  onBoardUpdate: PropTypes.func,\n};\n\nTweetPopup.defaultProps = {\n  parentTweet: null,\n  onBoardUpdate: null,\n};\n\nconst arePropsEqual = (prevProps, nextProps) => {\n  return (\n    prevProps.x === nextProps.x &&\n    prevProps.y === nextProps.y &&\n    prevProps.onSubmit === nextProps.onSubmit &&\n    prevProps.onClose === nextProps.onClose &&\n    isEqual(prevProps.parentTweet, nextProps.parentTweet) &&\n    prevProps.onBoardUpdate === nextProps.onBoardUpdate\n  );\n};\n\nexport default memo(TweetPopup, arePropsEqual);","// src/hooks/useFileUpload.js\nimport { useState, useCallback, useRef } from 'react';\nimport { SUPPORTED_MIME_TYPES, MAX_FILE_SIZE, MAX_FILES } from '../constants/validations';\n\nexport const useFileUpload = () => {\n  const [files, setFiles] = useState([]);\n  const [error, setError] = useState(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const fileUrlsRef = useRef(new Map());\n\n  // Validate a single file\n  const validateFile = useCallback((file) => {\n    if (!file) {\n      setError('No file selected');\n      return false;\n    }\n    if (!SUPPORTED_MIME_TYPES.includes(file.type)) {\n      setError(`Unsupported file type: ${file.type}. Supported types: images, videos, audio.`);\n      return false;\n    }\n    if (file.size > MAX_FILE_SIZE) {\n      setError('File size exceeds 50MB limit');\n      return false;\n    }\n    return true;\n  }, []);\n\n  // Handle file selection\n  const handleFileChange = useCallback((e) => {\n    const newFiles = Array.from(e.target.files).filter(validateFile);\n    if (newFiles.length + files.length > MAX_FILES) {\n      setError(`Maximum ${MAX_FILES} files allowed`);\n      return;\n    }\n    setFiles((prev) => [...prev, ...newFiles]);\n    setError(null);\n  }, [files, validateFile]);\n\n  // Remove a file\n  const removeFile = useCallback((index) => {\n    setFiles((prev) => {\n      const fileToRemove = prev[index];\n      const url = fileUrlsRef.current.get(fileToRemove);\n      if (url) {\n        URL.revokeObjectURL(url);\n        fileUrlsRef.current.delete(fileToRemove);\n      }\n      return prev.filter((_, i) => i !== index);\n    });\n  }, []);\n\n  // Simulate file upload (replace with actual API call)\n  const uploadFiles = useCallback(async (files, onProgress) => {\n    try {\n      // Simulate upload process\n      for (let i = 0; i <= 100; i += 10) {\n        await new Promise((resolve) => setTimeout(resolve, 200));\n        onProgress(i);\n      }\n      return files.map((file) => ({\n        fileKey: file.name,\n        url: URL.createObjectURL(file), // In a real app, this would be a server URL\n        contentType: file.type,\n      }));\n    } catch (err) {\n      setError('Failed to upload files');\n      throw err;\n    }\n  }, []);\n\n  // Clean up file URLs\n  const cleanup = useCallback(() => {\n    fileUrlsRef.current.forEach((url) => URL.revokeObjectURL(url));\n    fileUrlsRef.current.clear();\n    setFiles([]);\n    setUploadProgress(0);\n    setError(null);\n  }, []);\n\n  return {\n    files,\n    setFiles,\n    error,\n    setError,\n    uploadProgress,\n    setUploadProgress,\n    handleFileChange,\n    removeFile,\n    uploadFiles,\n    cleanup,\n    fileUrlsRef,\n  };\n};","import { get, post, put, del, handleApiError } from './apiClient';\nimport { uuidSchema, contentSchema, positionSchema, reminderSchema, validatePayload, querySchema, commentQuerySchema } from '../constants/validations';\nimport Joi from 'joi';\n\nconst BASE_TWEET_PATH = '/api/v1/tweets';\n\n/**\n * Fetch all tweets for a board\n * @param {string} boardId - Board ID\n * @param {string} token - Authorization token\n * @param {object} [options={}] - Query options\n * @param {AbortSignal} [signal] - Abort signal\n * @returns {Promise<object>} Tweets data\n */\nexport const fetchTweetsApi = async (boardId, token, options = {}, signal) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(querySchema, options, 'Invalid query options');\n  try {\n    const response = await get(`${BASE_TWEET_PATH}/${boardId}`, {\n      headers: { Authorization: `Bearer ${token}` },\n      params: options,\n      signal: signal instanceof AbortSignal ? signal : undefined,\n    });\n    return response.data.content || { tweets: [] };\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Fetch a single tweet by ID\n * @param {string} boardId - Board ID\n * @param {string} tweetId - Tweet ID\n * @param {string} token - Authorization token\n * @param {AbortSignal} [signal] - Abort signal\n * @returns {Promise<object>} Tweet data\n */\nexport const fetchTweetById = async (boardId, tweetId, token, signal) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  try {\n    const response = await get(`${BASE_TWEET_PATH}/${boardId}/${tweetId}`, {\n      headers: { Authorization: `Bearer ${token}` },\n      signal: signal instanceof AbortSignal ? signal : undefined,\n    });\n    return response.data.content || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Fetch comments for a tweet\n * @param {string} boardId - Board ID\n * @param {string} tweetId - Tweet ID\n * @param {string} token - Authorization token\n * @param {object} [options={}] - Query options\n * @param {AbortSignal} [signal] - Abort signal\n * @returns {Promise<object>} Comments data\n */\nexport const getTweetCommentsApi = async (boardId, tweetId, token, options = {}, signal) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  validatePayload(commentQuerySchema, options, 'Invalid comment query options');\n  try {\n    const response = await get(`${BASE_TWEET_PATH}/${boardId}/${tweetId}/comments`, {\n      headers: { Authorization: `Bearer ${token}` },\n      params: options,\n      signal: signal instanceof AbortSignal ? signal : undefined,\n    });\n    return response.data.content || { comments: [] };\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Generate presigned URL for file upload\n * @param {string} fileType - File type\n * @param {string} contentType - Content type\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Presigned URL data\n */\nexport const generatePresignedUrlApi = async (fileType, contentType, token) => {\n  validatePayload(Joi.string().required(), fileType, 'Invalid fileType');\n  validatePayload(Joi.string().required(), contentType, 'Invalid contentType');\n  try {\n    const response = await post(`${BASE_TWEET_PATH}/presigned-url`, { fileType, contentType }, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Create a new tweet\n * @param {string} boardId - Board ID\n * @param {object} content - Tweet content\n * @param {number} x - X position\n * @param {number} y - Y position\n * @param {string} [parentTweetId] - Parent tweet ID\n * @param {boolean} isAnonymous - Is anonymous\n * @param {string} anonymousId - Anonymous ID\n * @param {string} status - Tweet status\n * @param {string} [scheduledAt] - Scheduled date\n * @param {object} [reminder] - Reminder data\n * @param {array} [files] - Files array\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Created tweet data\n */\nexport const createTweetApi = async (\n  boardId,\n  content,\n  x,\n  y,\n  parentTweetId,\n  isAnonymous,\n  anonymousId,\n  status,\n  scheduledAt,\n  reminder,\n  files,\n  token\n) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(contentSchema, content, 'Invalid content');\n  validatePayload(positionSchema, { x, y }, 'Invalid position');\n  validatePayload(uuidSchema, anonymousId, 'Invalid anonymousId');\n  if (parentTweetId) validatePayload(uuidSchema, parentTweetId, 'Invalid parentTweetId');\n  if (reminder) validatePayload(reminderSchema, reminder, 'Invalid reminder');\n  if (files?.length) {\n    validatePayload(\n      Joi.array().items(\n        Joi.object({\n          url: Joi.string().uri().optional(),\n          fileKey: Joi.string().required(),\n          contentType: Joi.string().required(),\n          size: Joi.number().max(50 * 1024 * 1024).required(),\n        })\n      ).max(10),\n      files,\n      'Invalid files'\n    );\n  }\n  try {\n    const payload = {\n      content: {\n        ...content,\n        metadata: {\n          ...content.metadata,\n          files: files || [],\n        },\n      },\n      position: { x, y },\n      is_anonymous: isAnonymous,\n      anonymous_id: anonymousId,\n      status,\n      scheduled_at: scheduledAt || null,\n    };\n    if (parentTweetId) payload.parent_tweet_id = parentTweetId;\n    if (reminder) payload.reminder = reminder;\n\n    const response = await post(`${BASE_TWEET_PATH}/${boardId}`, payload, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    const tweet = response.data.content?.tweets?.[0];\n    if (!tweet || !tweet.tweet_id) throw new Error('Invalid tweet response from server');\n    return tweet;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Update an existing tweet\n * @param {string} boardId - Board ID\n * @param {string} tweetId - Tweet ID\n * @param {object} updates - Tweet updates\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Updated tweet data\n */\nexport const updateTweetApi = async (boardId, tweetId, updates, token) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  validatePayload(\n    Joi.object({\n      content: contentSchema.optional(),\n      position: positionSchema.optional(),\n      status: Joi.string().valid('pending', 'approved', 'rejected', 'announcement', 'reminder', 'pinned', 'archived').optional(),\n      scheduled_at: Joi.date().iso().allow(null).optional(),\n      reminder: reminderSchema.optional(),\n    }).min(1),\n    updates,\n    'Invalid updates'\n  );\n  try {\n    const response = await put(`${BASE_TWEET_PATH}/${boardId}/${tweetId}`, updates, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content?.tweets?.[0] || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Update tweet status\n * @param {string} boardId - Board ID\n * @param {string} tweetId - Tweet ID\n * @param {string} status - New status\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Updated tweet data\n */\nexport const updateTweetStatusApi = async (boardId, tweetId, status, token) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  validatePayload(\n    Joi.string().valid('pending', 'approved', 'rejected', 'announcement', 'reminder', 'pinned', 'archived').required(),\n    status,\n    'Invalid status'\n  );\n  try {\n    const response = await put(`${BASE_TWEET_PATH}/${boardId}/${tweetId}/status`, { status }, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content?.tweets?.[0] || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Toggle like/dislike for a tweet\n * @param {string} tweetId - Tweet ID\n * @param {boolean} isLiked - Current like state\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Updated tweet data\n */\nexport const toggleLikeApi = async (tweetId, isLiked, token) => {\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  try {\n    const endpoint = isLiked ? 'dislike' : 'like';\n    const response = await post(`${BASE_TWEET_PATH}/${tweetId}/${endpoint}`, {}, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content?.tweets?.[0] || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Delete a tweet\n * @param {string} boardId - Board ID\n * @param {string} tweetId - Tweet ID\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Deleted tweet data\n */\nexport const deleteTweetApi = async (boardId, tweetId, token) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  try {\n    const response = await del(`${BASE_TWEET_PATH}/${boardId}/${tweetId}`, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content?.tweets?.[0] || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Move a tweet to another board\n * @param {string} tweetId - Tweet ID\n * @param {string} targetBoardId - Target board ID\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Moved tweet data\n */\nexport const moveTweetApi = async (tweetId, targetBoardId, token) => {\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  validatePayload(uuidSchema, targetBoardId, 'Invalid targetBoardId');\n  try {\n    const response = await post(`${BASE_TWEET_PATH}/${tweetId}/move`, { targetBoardId }, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content?.tweets?.[0] || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Pin a tweet\n * @param {string} boardId - Board ID\n * @param {string} tweetId - Tweet ID\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Pinned tweet data\n */\nexport const pinTweetApi = async (boardId, tweetId, token) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  try {\n    const response = await post(`${BASE_TWEET_PATH}/${boardId}/${tweetId}/pin`, {}, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content?.tweets?.[0] || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Unpin a tweet\n * @param {string} boardId - Board ID\n * @param {string} tweetId - Tweet ID\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Unpinned tweet data\n */\nexport const unpinTweetApi = async (boardId, tweetId, token) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  try {\n    const response = await post(`${BASE_TWEET_PATH}/${boardId}/${tweetId}/unpin`, {}, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content?.tweets?.[0] || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Set a reminder for a tweet\n * @param {string} boardId - Board ID\n * @param {string} tweetId - Tweet ID\n * @param {object} reminder - Reminder data\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Updated tweet data\n */\nexport const setReminderApi = async (boardId, tweetId, reminder, token) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  validatePayload(reminderSchema, reminder, 'Invalid reminder');\n  try {\n    const response = await put(`${BASE_TWEET_PATH}/${boardId}/${tweetId}/reminder`, reminder, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content?.tweets?.[0] || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};\n\n/**\n * Share a tweet\n * @param {string} boardId - Board ID\n * @param {string} tweetId - Tweet ID\n * @param {string} sharedTo - Share destination\n * @param {string} token - Authorization token\n * @returns {Promise<object>} Shared tweet data\n */\nexport const shareTweetApi = async (boardId, tweetId, sharedTo, token) => {\n  validatePayload(uuidSchema, boardId, 'Invalid boardId');\n  validatePayload(uuidSchema, tweetId, 'Invalid tweetId');\n  validatePayload(Joi.string().required(), sharedTo, 'Invalid sharedTo');\n  try {\n    const response = await post(`${BASE_TWEET_PATH}/${boardId}/${tweetId}/share`, { shared_to: sharedTo }, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return response.data.content?.tweets?.[0] || null;\n  } catch (error) {\n    throw handleApiError(error);\n  }\n};","/**\n * @module normalizeTweet\n * @description Utility function to normalize tweet data for consistent frontend usage.\n */\n\n/**\n * Normalizes tweet data for frontend consistency.\n * @param {Object} tweet\n * @param {Object} currentUser\n * @returns {Object}\n */\nexport const normalizeTweet = (tweet, currentUser) => {\n  if (!tweet || typeof tweet !== 'object') {\n    console.warn('Invalid tweet input:', tweet);\n    return {\n      tweet_id: '',\n      content: { type: 'text', value: '', metadata: { files: [], hashtags: [], mentions: [] } },\n      anonymous_id: currentUser?.anonymous_id || '',\n      username: currentUser?.username || '',\n      position: { x: 0, y: 0 },\n      parent_tweet_id: null,\n      child_tweet_ids: [],\n      is_anonymous: false,\n      liked_by: [],\n      is_liked: false,\n      stats: { likes: 0, like_count: 0, view_count: 0 },\n      created_at: new Date().toISOString(),\n      status: 'approved',\n      scheduled_at: null,\n      reminder: null,\n      is_pinned: false,\n      analytics: { views: [], shares: [] },\n    };\n  }\n\n  const content = tweet.content || { type: 'text', value: '', metadata: {} };\n  const metadata = {\n    files: content.metadata?.files || [],\n    hashtags: content.metadata?.hashtags || [],\n    mentions: content.metadata?.mentions || [],\n    style: content.metadata?.style || {},\n    poll_options: content.metadata?.poll_options || [],\n    event_details: content.metadata?.event_details || {},\n    quote_ref: content.metadata?.quote_ref || null,\n    embed_data: content.metadata?.embed_data || null,\n  };\n\n  return {\n    tweet_id: tweet.tweet_id || '',\n    content: { type: content.type || 'text', value: content.value || '', metadata },\n    anonymous_id: tweet.anonymous_id || currentUser?.anonymous_id || '',\n    username: tweet.is_anonymous ? 'Anonymous' : tweet.username || currentUser?.username || '',\n    position: { x: Number(tweet.position?.x) || 0, y: Number(tweet.position?.y) || 0 },\n    parent_tweet_id: tweet.parent_tweet_id || null,\n    child_tweet_ids: tweet.child_tweet_ids || [],\n    children: tweet.children?.map(child => normalizeTweet(child, currentUser)) || [],\n    is_anonymous: !!tweet.is_anonymous,\n    liked_by: tweet.liked_by || [],\n    is_liked: tweet.is_liked || (tweet.liked_by || []).some(u => u.anonymous_id === currentUser?.anonymous_id) || false,\n    stats: {\n      likes: tweet.stats?.like_count ?? (tweet.liked_by || []).length,\n      like_count: tweet.stats?.like_count ?? (tweet.liked_by || []).length,\n      view_count: tweet.stats?.view_count ?? 0,\n    },\n    created_at: tweet.created_at || new Date().toISOString(),\n    updated_at: tweet.updated_at || tweet.created_at || new Date().toISOString(),\n    status: tweet.status || 'approved',\n    scheduled_at: tweet.scheduled_at || null,\n    reminder: tweet.reminder || null,\n    is_pinned: !!tweet.is_pinned,\n    analytics: {\n      views: tweet.analytics?.views || [],\n      shares: tweet.analytics?.shares || [],\n    },\n  };\n};","/**\n * @module useTweets\n * @description React hook for managing tweets with caching and debounced API calls.\n */\nimport { useState, useCallback, useMemo, useEffect, useRef } from 'react';\nimport debounce from 'lodash/debounce';\nimport {\n  fetchTweetsApi,\n  createTweetApi,\n  updateTweetApi,\n  toggleLikeApi,\n  deleteTweetApi,\n  moveTweetApi,\n  pinTweetApi,\n  unpinTweetApi,\n  setReminderApi,\n  shareTweetApi,\n  generatePresignedUrlApi,\n} from '../api/tweetsApi';\nimport { normalizeTweet } from '../utils/tweetUtils';\n\n// Constants\nconst ERROR_MESSAGES = {\n  AUTH_REQUIRED: 'Authentication required.',\n  BOARD_ID_MISSING: 'Board ID is missing.',\n  TWEET_ID_MISSING: 'Tweet ID is missing.',\n  CONTENT_MISSING: 'Tweet must have text or files.',\n  POSITION_INVALID: 'Valid position (x, y) is required.',\n  TARGET_BOARD_ID_MISSING: 'Target board ID is missing.',\n  REMINDER_INVALID: 'Invalid reminder data.',\n  SHARE_PLATFORM_MISSING: 'Share platform is missing.',\n  FILE_UPLOAD_FAILED: 'Failed to upload file.',\n  GENERIC: 'An error occurred.',\n};\n\nconst CONFIG = {\n  MAX_CACHE_SIZE: 10,\n  CACHE_EXPIRY_MS: 30 * 60 * 1000, // 30 minutes\n  DEBOUNCE_MS: 300,\n  DEFAULT_LIMIT: 20,\n  CACHE_VERSION: 'v1',\n};\n\n// LRU Cache implementation\nclass LRUCache {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.cache = new Map();\n  }\n\n  get(key) {\n    if (!this.cache.has(key)) return null;\n    const { value, timestamp } = this.cache.get(key);\n    if (Date.now() - timestamp > CONFIG.CACHE_EXPIRY_MS) {\n      this.cache.delete(key);\n      return null;\n    }\n    this.cache.delete(key);\n    this.cache.set(key, { value, timestamp });\n    return value;\n  }\n\n  set(key, value) {\n    if (this.cache.size >= this.capacity) {\n      const firstKey = this.cache.keys().next().value;\n      this.cache.delete(firstKey);\n    }\n    this.cache.set(key, { value, timestamp: Date.now() });\n  }\n\n  clear() {\n    this.cache.clear();\n  }\n}\n\nconst tweetCache = new LRUCache(CONFIG.MAX_CACHE_SIZE);\n\n/**\n * Hook for managing tweets.\n * @param {string|null} token - Authentication token.\n * @param {string|null} boardId - ID of the board.\n * @param {object} currentUser - Current user data.\n * @param {function} onLogout - Logout callback.\n * @param {function} navigate - Navigation callback.\n * @param {boolean} skipInitialFetch - Skip initial tweets fetch.\n * @returns {object} Tweet management functions and state.\n */\nexport const useTweets = (token, boardId, currentUser, onLogout, navigate, skipInitialFetch = false) => {\n  const [tweets, setTweets] = useState([]);\n  const [tweet, setTweet] = useState(null);\n  const [pagination, setPagination] = useState({ page: 1, limit: CONFIG.DEFAULT_LIMIT, total: 0, hasMore: true });\n  const [boardInfo, setBoardInfo] = useState(null);\n  const [error, setError] = useState(null);\n  const abortControllerRef = useRef(null);\n\n  const handleError = useCallback(\n    (err, message) => {\n      if (err.name === 'AbortError') return Promise.resolve(null);\n      const status = err.status || 500;\n      if (status === 401 || status === 403) {\n        onLogout('Session expired. Please log in again.');\n        navigate('/login');\n      }\n      const errorMessage = message || err.message || ERROR_MESSAGES.GENERIC;\n      setError(errorMessage);\n      return Promise.reject(new Error(errorMessage));\n    },\n    [onLogout, navigate]\n  );\n\n  const uploadFileToS3 = useCallback(\n    async (file, token, onProgress) => {\n      try {\n        const contentType = file.type.split('/')[0];\n        const { presignedUrl, fileKey, contentType: fileContentType } = await generatePresignedUrlApi(\n          file.type,\n          contentType,\n          token\n        );\n\n        const xhr = new XMLHttpRequest();\n        xhr.open('PUT', presignedUrl, true);\n        xhr.setRequestHeader('Content-Type', file.type);\n\n        xhr.upload.onprogress = (event) => {\n          if (event.lengthComputable) {\n            const percent = Math.round((event.loaded / event.total) * 100);\n            onProgress?.(percent);\n          }\n        };\n\n        return new Promise((resolve, reject) => {\n          xhr.onload = () => {\n            if (xhr.status === 200) {\n              resolve({\n                fileKey,\n                contentType: fileContentType,\n                size: file.size,\n                url: presignedUrl.split('?')[0],\n              });\n            } else {\n              reject(new Error(`Upload failed with status ${xhr.status}`));\n            }\n          };\n          xhr.onerror = () => reject(new Error('Upload failed'));\n          xhr.send(file);\n        });\n      } catch (err) {\n        return handleError(err, ERROR_MESSAGES.FILE_UPLOAD_FAILED);\n      }\n    },\n    [handleError]\n  );\n\n  const fetchTweetsList = useCallback(\n    async (filters = {}, signal, append = false) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!boardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.BOARD_ID_MISSING);\n\n      const { page = 1, limit = CONFIG.DEFAULT_LIMIT } = filters;\n      const cacheKey = `${CONFIG.CACHE_VERSION}:tweets:${boardId}:${JSON.stringify({ ...filters, page, limit })}`;\n      const cachedData = tweetCache.get(cacheKey);\n\n      if (cachedData && !append) {\n        setTweets(cachedData.tweets || []);\n        setPagination(cachedData.pagination || { page, limit, total: 0, hasMore: true });\n        setBoardInfo(cachedData.board || null);\n        return Promise.resolve(cachedData);\n      }\n\n      setError(null);\n\n      try {\n        abortControllerRef.current?.abort();\n        abortControllerRef.current = new AbortController();\n        const effectiveSignal = signal || abortControllerRef.current.signal;\n\n        const data = await fetchTweetsApi(boardId, token, { ...filters, page, limit }, effectiveSignal);\n        if (!data) throw new Error('No data received');\n\n        const normalizedTweets = data.tweets.map((tweet) => ({\n          ...normalizeTweet(tweet, currentUser),\n          children: tweet.children?.map((child) => normalizeTweet(child, currentUser)) || [],\n        }));\n\n        setTweets((prev) => (append ? [...prev, ...normalizedTweets] : normalizedTweets));\n        setPagination({\n          page: data.pagination?.page || page,\n          limit: data.pagination?.limit || limit,\n          total: data.pagination?.total || 0,\n          hasMore: normalizedTweets.length === limit,\n        });\n        setBoardInfo(data.board || null);\n\n        const cacheData = { tweets: normalizedTweets, pagination: data.pagination, board: data.board };\n        tweetCache.set(cacheKey, cacheData);\n        return Promise.resolve(cacheData);\n      } catch (err) {\n        if (err.name === 'AbortError') return Promise.resolve(null);\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, boardId, currentUser, handleError]\n  );\n\n  const debouncedFetchTweetsList = useMemo(() => {\n    return debounce((filters, signal, append, callback) => {\n      fetchTweetsList(filters, signal, append)\n        .then((result) => callback(null, result))\n        .catch((err) => callback(err, null));\n    }, CONFIG.DEBOUNCE_MS);\n  }, [fetchTweetsList]);\n\n  const createNewTweet = useCallback(\n    async (\n      content,\n      x,\n      y,\n      parentTweetId = null,\n      isAnonymous = false,\n      status = 'approved',\n      scheduledAt = null,\n      reminder = null,\n      files = [],\n      onProgress\n    ) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!boardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.BOARD_ID_MISSING);\n      if (isNaN(x) || isNaN(y)) return handleError(new Error(), ERROR_MESSAGES.POSITION_INVALID);\n      if (!content?.value?.trim() && !files.length) return handleError(new Error(), ERROR_MESSAGES.CONTENT_MISSING);\n\n      setError(null);\n\n      const contentObj = {\n        type: files.length ? files[0].type?.split('/')[0] || 'image' : content.type || 'text',\n        value: content.value || '',\n        metadata: {\n          files: [],\n          hashtags: content.metadata?.hashtags || [],\n          mentions: content.metadata?.mentions || [],\n          style: content.metadata?.style || {},\n          poll_options: content.metadata?.poll_options || [],\n          event_details: content.metadata?.event_details || {},\n          quote_ref: content.metadata?.quote_ref || null,\n          embed_data: content.metadata?.embed_data || null,\n        },\n      };\n\n      const optimisticTweet = {\n        tweet_id: `temp-${Date.now()}`,\n        content: contentObj,\n        position: { x, y },\n        parent_tweet_id: parentTweetId,\n        child_tweet_ids: [],\n        is_anonymous: isAnonymous,\n        anonymous_id: currentUser.anonymous_id,\n        username: isAnonymous ? 'Anonymous' : currentUser.username,\n        created_at: new Date().toISOString(),\n        liked_by: [],\n        stats: { like_count: 0, view_count: 0, comment_count: 0, share_count: 0 },\n        status,\n        scheduled_at: scheduledAt,\n        reminder: reminder?.schedule ? reminder : null,\n        is_pinned: false,\n        children: [],\n      };\n\n      setTweets((prev) => [...prev, optimisticTweet]);\n\n      try {\n        const uploadedFiles = await Promise.all(\n          files.map((file) => uploadFileToS3(file, token, (progress) => onProgress?.(progress / files.length)))\n        );\n\n        const finalContent = {\n          ...contentObj,\n          type: uploadedFiles.length ? uploadedFiles[0].contentType.split('/')[0] : contentObj.type,\n          metadata: {\n            ...contentObj.metadata,\n            files: uploadedFiles,\n          },\n        };\n\n        const createdTweet = await createTweetApi(\n          boardId,\n          finalContent,\n          x,\n          y,\n          parentTweetId,\n          isAnonymous,\n          currentUser.anonymous_id,\n          status,\n          scheduledAt,\n          reminder?.schedule ? reminder : null,\n          uploadedFiles,\n          token\n        );\n\n        const normalizedTweet = normalizeTweet(\n          { ...createdTweet, position: createdTweet.position || { x, y } },\n          currentUser\n        );\n\n        setTweets((prev) =>\n          prev.map((t) => (t.tweet_id === optimisticTweet.tweet_id ? normalizedTweet : t))\n        );\n        setPagination((prev) => ({ ...prev, total: prev.total + 1 }));\n\n        if (parentTweetId) {\n          setTweets((prev) =>\n            prev.map((t) =>\n              t.tweet_id === parentTweetId\n                ? {\n                    ...t,\n                    child_tweet_ids: [...(t.child_tweet_ids || []), normalizedTweet.tweet_id],\n                    children: [...(t.children || []), normalizedTweet],\n                    stats: { ...t.stats, comment_count: (t.stats.comment_count || 0) + 1 },\n                  }\n                : t\n            )\n          );\n        }\n\n        tweetCache.clear();\n        return Promise.resolve(normalizedTweet);\n      } catch (err) {\n        setTweets((prev) => prev.filter((t) => t.tweet_id !== optimisticTweet.tweet_id));\n        setPagination((prev) => ({ ...prev, total: prev.total - 1 }));\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, boardId, currentUser, handleError, uploadFileToS3]\n  );\n\n  const updateExistingTweet = useCallback(\n    async (tweetId, updates, files = [], onProgress) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!boardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.BOARD_ID_MISSING);\n      if (!tweetId?.trim()) return handleError(new Error(), ERROR_MESSAGES.TWEET_ID_MISSING);\n      if (!updates || !Object.keys(updates).length) return handleError(new Error(), 'At least one update field is required');\n\n      const currentTweet = tweets.find((t) => t.tweet_id === tweetId);\n      if (!currentTweet) return handleError(new Error(), 'Tweet not found');\n\n      if (updates.content && !updates.content.value?.trim() && !files.length && !currentTweet.content.metadata.files.length) {\n        return handleError(new Error(), ERROR_MESSAGES.CONTENT_MISSING);\n      }\n      if (updates.position && (isNaN(updates.position.x) || isNaN(updates.position.y))) {\n        return handleError(new Error(), ERROR_MESSAGES.POSITION_INVALID);\n      }\n      setError(null);\n\n      const contentObj = updates.content\n        ? {\n            type: files.length\n              ? files[0].type?.split('/')[0] || 'image'\n              : updates.content.type || currentTweet.content.type || 'text',\n            value: updates.content.value || '',\n            metadata: {\n              files: currentTweet.content.metadata.files || [],\n              hashtags: updates.content.metadata?.hashtags || currentTweet.content.metadata.hashtags || [],\n              mentions: updates.content.metadata?.mentions || currentTweet.content.metadata.mentions || [],\n              style: updates.content.metadata?.style || currentTweet.content.metadata.style || [],\n              poll_options: updates.content.metadata?.poll_options || currentTweet.content.metadata.poll_options || [],\n              event_details:\n                updates.content.metadata?.event_details || currentTweet.content.metadata.event_details || {},\n              quote_ref: updates.content.metadata?.quote_ref || currentTweet.content.metadata.quote_ref || null,\n              embed_data: updates.content.metadata?.embed_data || currentTweet.content.metadata.embed_data || null,\n            },\n          }\n        : currentTweet.content;\n\n      const optimisticTweet = {\n        ...currentTweet,\n        ...updates,\n        content: contentObj,\n        position: updates.position || currentTweet.position,\n        status: updates.status || currentTweet.status,\n        scheduled_at: updates.scheduled_at !== undefined ? updates.scheduled_at : currentTweet.scheduled_at,\n        reminder: updates.reminder || currentTweet.reminder,\n        updated_at: new Date().toISOString(),\n      };\n\n      setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? optimisticTweet : t)));\n\n      try {\n        const uploadedFiles = await Promise.all(\n          files.map((file) => uploadFileToS3(file, token, (progress) => onProgress?.(progress / files.length)))\n        );\n\n        const finalUpdates = {\n          ...updates,\n          content: updates.content\n            ? {\n                ...contentObj,\n                type: uploadedFiles.length ? uploadedFiles[0].contentType.split('/')[0] : contentObj.type,\n                metadata: {\n                  ...contentObj.metadata,\n                  files: [...contentObj.metadata.files, ...uploadedFiles],\n                },\n              }\n            : undefined,\n          position: updates.position ? { x: updates.position.x, y: updates.position.y } : undefined,\n          status: updates.status,\n          scheduled_at: updates.scheduled_at !== undefined ? updates.scheduled_at : undefined,\n          reminder: updates.reminder ? { ...updates.reminder, enabled: !!updates.reminder.schedule } : undefined,\n        };\n\n        Object.keys(finalUpdates).forEach((key) => finalUpdates[key] === undefined && delete finalUpdates[key]);\n\n        const updatedTweet = await updateTweetApi(boardId, tweetId, finalUpdates, token);\n        const normalizedTweet = normalizeTweet(\n          { ...updatedTweet, position: updatedTweet.position || currentTweet.position },\n          currentUser\n        );\n\n        setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? normalizedTweet : t)));\n        tweetCache.clear();\n        return Promise.resolve(normalizedTweet);\n      } catch (err) {\n        setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? currentTweet : t)));\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, boardId, currentUser, handleError, tweets, uploadFileToS3]\n  );\n\n  const toggleLikeTweet = useCallback(\n    async (tweetId, isLiked) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!tweetId?.trim()) return handleError(new Error(), ERROR_MESSAGES.TWEET_ID_MISSING);\n\n      const currentTweet = tweets.find((t) => t.tweet_id === tweetId);\n      if (!currentTweet) return handleError(new Error(), 'Tweet not found');\n\n      setError(null);\n\n      const optimisticTweet = {\n        ...currentTweet,\n        liked_by: isLiked\n          ? currentTweet.liked_by.filter((l) => l.anonymous_id !== currentUser.anonymous_id)\n          : [...currentTweet.liked_by, { anonymous_id: currentUser.anonymous_id, username: currentUser.username }],\n        stats: {\n          ...currentTweet.stats,\n          like_count: isLiked ? currentTweet.stats.like_count - 1 : currentTweet.stats.like_count + 1,\n        },\n        is_liked: !isLiked,\n      };\n\n      setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? optimisticTweet : t)));\n\n      try {\n        const updatedTweet = await toggleLikeApi(tweetId, isLiked, token);\n        const normalizedTweet = normalizeTweet(updatedTweet, currentUser);\n\n        setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? normalizedTweet : t)));\n        tweetCache.clear();\n        return Promise.resolve(normalizedTweet);\n      } catch (err) {\n        setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? currentTweet : t)));\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, currentUser, handleError, tweets]\n  );\n\n  const deleteExistingTweet = useCallback(\n    async (tweetId) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!boardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.BOARD_ID_MISSING);\n      if (!tweetId?.trim()) return handleError(new Error(), ERROR_MESSAGES.TWEET_ID_MISSING);\n\n      const currentTweet = tweets.find((t) => t.tweet_id === tweetId);\n      if (!currentTweet) return handleError(new Error(), 'Tweet not found');\n\n      setError(null);\n\n      const childTweetIds = currentTweet.child_tweet_ids || [];\n      const parentTweetId = currentTweet.parent_tweet_id;\n\n      setTweets((prev) =>\n        prev\n          .filter((t) => t.tweet_id !== tweetId && !childTweetIds.includes(t.tweet_id))\n          .map((t) =>\n            t.tweet_id === parentTweetId\n              ? {\n                  ...t,\n                  child_tweet_ids: t.child_tweet_ids.filter((id) => id !== tweetId),\n                  children: t.children.filter((c) => c.tweet_id !== tweetId),\n                  stats: { ...t.stats, comment_count: (t.stats.comment_count || 0) - 1 },\n                }\n              : t\n          )\n      );\n      setPagination((prev) => ({ ...prev, total: prev.total - (1 + childTweetIds.length) }));\n      setTweet((prev) => (prev?.tweet_id === tweetId ? null : prev));\n\n      try {\n        await deleteTweetApi(boardId, tweetId, token);\n        tweetCache.clear();\n        return Promise.resolve(true);\n      } catch (err) {\n        setTweets((prev) => [\n          ...prev,\n          currentTweet,\n          ...childTweetIds.map((id) => tweets.find((t) => t.tweet_id === id)).filter(Boolean),\n        ].map((t) =>\n          t.tweet_id === parentTweetId\n            ? {\n                ...t,\n                child_tweet_ids: [...t.child_tweet_ids, tweetId],\n                children: [...t.children, currentTweet],\n                stats: { ...t.stats, comment_count: (t.stats.comment_count || 0) + 1 },\n              }\n            : t\n        ));\n        setPagination((prev) => ({ ...prev, total: prev.total + (1 + childTweetIds.length) }));\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, boardId, handleError, tweets]\n  );\n\n  const moveTweet = useCallback(\n    async (tweetId, targetBoardId) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!boardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.BOARD_ID_MISSING);\n      if (!tweetId?.trim()) return handleError(new Error(), ERROR_MESSAGES.TWEET_ID_MISSING);\n      if (!targetBoardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.TARGET_BOARD_ID_MISSING);\n\n      const currentTweet = tweets.find((t) => t.tweet_id === tweetId);\n      if (!currentTweet) return handleError(new Error(), 'Tweet not found');\n\n      setError(null);\n\n      const parentTweetId = currentTweet.parent_tweet_id;\n\n      setTweets((prev) =>\n        prev\n          .filter((t) => t.tweet_id !== tweetId)\n          .map((t) =>\n            t.tweet_id === parentTweetId\n              ? {\n                  ...t,\n                  child_tweet_ids: t.child_tweet_ids.filter((id) => id !== tweetId),\n                  children: t.children.filter((c) => c.tweet_id !== tweetId),\n                  stats: { ...t.stats, comment_count: (t.stats.comment_count || 0) - 1 },\n                }\n              : t\n          )\n      );\n      setPagination((prev) => ({ ...prev, total: prev.total - 1 }));\n\n      try {\n        const updatedTweet = await moveTweetApi(tweetId, targetBoardId, token);\n        const normalizedTweet = normalizeTweet(updatedTweet, currentUser);\n\n        setTweet(normalizedTweet);\n        tweetCache.clear();\n        return Promise.resolve(normalizedTweet);\n      } catch (err) {\n        setTweets((prev) => [\n          ...prev,\n          currentTweet,\n        ].map((t) =>\n          t.tweet_id === parentTweetId\n            ? {\n                ...t,\n                child_tweet_ids: [...t.child_tweet_ids, tweetId],\n                children: [...t.children, currentTweet],\n                stats: { ...t.stats, comment_count: (t.stats.comment_count || 0) + 1 },\n              }\n            : t\n        ));\n        setPagination((prev) => ({ ...prev, total: prev.total + 1 }));\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, boardId, currentUser, handleError, tweets]\n  );\n\n  const pinTweet = useCallback(\n    async (tweetId) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!boardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.BOARD_ID_MISSING);\n      if (!tweetId?.trim()) return handleError(new Error(), ERROR_MESSAGES.TWEET_ID_MISSING);\n\n      const currentTweet = tweets.find((t) => t.tweet_id === tweetId);\n      if (!currentTweet) return handleError(new Error(), 'Tweet not found');\n\n      setError(null);\n\n      setTweets((prev) =>\n        prev.map((t) => (t.tweet_id === tweetId ? { ...t, is_pinned: true } : t))\n      );\n\n      try {\n        const updatedTweet = await pinTweetApi(boardId, tweetId, token);\n        const normalizedTweet = normalizeTweet(updatedTweet, currentUser);\n\n        setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? normalizedTweet : t)));\n        tweetCache.clear();\n        return Promise.resolve(normalizedTweet);\n      } catch (err) {\n        setTweets((prev) =>\n          prev.map((t) => (t.tweet_id === tweetId ? { ...t, is_pinned: false } : t))\n        );\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, boardId, currentUser, handleError, tweets]\n  );\n\n  const unpinTweet = useCallback(\n    async (tweetId) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!boardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.BOARD_ID_MISSING);\n      if (!tweetId?.trim()) return handleError(new Error(), ERROR_MESSAGES.TWEET_ID_MISSING);\n\n      const currentTweet = tweets.find((t) => t.tweet_id === tweetId);\n      if (!currentTweet) return handleError(new Error(), 'Tweet not found');\n\n      setError(null);\n\n      setTweets((prev) =>\n        prev.map((t) => (t.tweet_id === tweetId ? { ...t, is_pinned: false } : t))\n      );\n\n      try {\n        const updatedTweet = await unpinTweetApi(boardId, tweetId, token);\n        const normalizedTweet = normalizeTweet(updatedTweet, currentUser);\n\n        setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? normalizedTweet : t)));\n        tweetCache.clear();\n        return Promise.resolve(normalizedTweet);\n      } catch (err) {\n        setTweets((prev) =>\n          prev.map((t) => (t.tweet_id === tweetId ? { ...t, is_pinned: true } : t))\n        );\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, boardId, currentUser, handleError, tweets]\n  );\n\n  const setReminder = useCallback(\n    async (tweetId, reminder) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!boardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.BOARD_ID_MISSING);\n      if (!tweetId?.trim()) return handleError(new Error(), ERROR_MESSAGES.TWEET_ID_MISSING);\n      if (!reminder?.schedule) return handleError(new Error(), ERROR_MESSAGES.REMINDER_INVALID);\n\n      const currentTweet = tweets.find((t) => t.tweet_id === tweetId);\n      if (!currentTweet) return handleError(new Error(), 'Tweet not found');\n\n      setError(null);\n\n      setTweets((prev) =>\n        prev.map((t) => (t.tweet_id === tweetId ? { ...t, reminder: { ...reminder, enabled: true } } : t))\n      );\n\n      try {\n        const updatedTweet = await setReminderApi(boardId, tweetId, reminder, token);\n        const normalizedTweet = normalizeTweet(updatedTweet, currentUser);\n\n        setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? normalizedTweet : t)));\n        tweetCache.clear();\n        return Promise.resolve(normalizedTweet);\n      } catch (err) {\n        setTweets((prev) =>\n          prev.map((t) => (t.tweet_id === tweetId ? { ...t, reminder: currentTweet.reminder } : t))\n        );\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, boardId, currentUser, handleError, tweets]\n  );\n\n  const shareTweet = useCallback(\n    async (tweetId, sharedTo) => {\n      if (!token) return handleError(new Error(), ERROR_MESSAGES.AUTH_REQUIRED);\n      if (!boardId?.trim()) return handleError(new Error(), ERROR_MESSAGES.BOARD_ID_MISSING);\n      if (!tweetId?.trim()) return handleError(new Error(), ERROR_MESSAGES.TWEET_ID_MISSING);\n      if (!sharedTo?.trim()) return handleError(new Error(), ERROR_MESSAGES.SHARE_PLATFORM_MISSING);\n\n      const currentTweet = tweets.find((t) => t.tweet_id === tweetId);\n      if (!currentTweet) return handleError(new Error(), 'Tweet not found');\n\n      setError(null);\n\n      const optimisticTweet = {\n        ...currentTweet,\n        analytics: {\n          ...currentTweet.analytics,\n          shares: [\n            ...(currentTweet.analytics?.shares || []),\n            { platform: sharedTo, timestamp: new Date().toISOString(), user_id: currentUser.anonymous_id },\n          ],\n        },\n        stats: {\n          ...currentTweet.stats,\n          share_count: (currentTweet.stats.share_count || 0) + 1,\n        },\n      };\n\n      setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? optimisticTweet : t)));\n\n      try {\n        const sharedTweet = await shareTweetApi(boardId, tweetId, sharedTo, token);\n        const normalizedTweet = normalizeTweet(sharedTweet, currentUser);\n\n        setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? normalizedTweet : t)));\n        tweetCache.clear();\n        return Promise.resolve(normalizedTweet);\n      } catch (err) {\n        setTweets((prev) => prev.map((t) => (t.tweet_id === tweetId ? currentTweet : t)));\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      }\n    },\n    [token, boardId, currentUser, handleError, tweets]\n  );\n\n  const resetState = useCallback(() => {\n    setTweets([]);\n    setTweet(null);\n    setPagination({ page: 1, limit: CONFIG.DEFAULT_LIMIT, total: 0, hasMore: true });\n    setBoardInfo(null);\n    setError(null);\n    tweetCache.clear();\n  }, []);\n\n  useEffect(() => {\n    if (!token || !boardId || skipInitialFetch) {\n      resetState();\n      return;\n    }\n\n    const controller = new AbortController();\n    debouncedFetchTweetsList({}, controller.signal, false, (err, result) => {\n      if (err && err.name !== 'AbortError') {\n        setError(err.message || ERROR_MESSAGES.GENERIC);\n      }\n    });\n\n    return () => {\n      controller.abort();\n      debouncedFetchTweetsList.cancel();\n    };\n  }, [token, boardId, skipInitialFetch, resetState, debouncedFetchTweetsList]);\n\n  return useMemo(\n    () => ({\n      tweets,\n      tweet,\n      setTweet,\n      setTweets,\n      pagination,\n      boardInfo,\n      error,\n      fetchTweetsList: debouncedFetchTweetsList,\n      createNewTweet,\n      updateExistingTweet,\n      toggleLikeTweet,\n      deleteExistingTweet,\n      moveTweet,\n      pinTweet,\n      unpinTweet,\n      setReminder,\n      shareTweet,\n      resetState,\n    }),\n    [\n      tweets,\n      tweet,\n      pagination,\n      boardInfo,\n      error,\n      debouncedFetchTweetsList,\n      createNewTweet,\n      updateExistingTweet,\n      toggleLikeTweet,\n      deleteExistingTweet,\n      moveTweet,\n      pinTweet,\n      unpinTweet,\n      setReminder,\n      shareTweet,\n      resetState,\n    ]\n  );\n};\n\nexport default useTweets;","/**\n * @module Board\n * @description Component for displaying and interacting with a board of tweets.\n */\nimport React, { useRef, useState, useEffect, useCallback, useMemo, memo, useReducer } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  Box,\n  IconButton,\n  Tooltip,\n  Typography,\n  Button,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  CircularProgress,\n} from \"@mui/material\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport PropTypes from \"prop-types\";\nimport {\n  RestartAlt,\n  Add,\n  ArrowBack,\n  Remove,\n  ViewList,\n  ViewModule,\n  Refresh,\n  ArrowCircleRight,\n  ArrowCircleLeft,\n} from \"@mui/icons-material\";\nimport BoardStyles from \"./BoardStyles\";\nimport { BOARD_SIZE, useBoardInteraction } from \"../../../hooks/useBoard\";\nimport { useWebSocket } from \"../../../hooks/useWebSocket\";\nimport LoadingSpinner from \"../../Layout/LoadingSpinner\";\nimport DraggableTweet from \"../Tweet/Tweet\";\nimport TweetContent from \"../Tweet/TweetContent\";\nimport TweetPopup from \"../Tweet/TweetPopup\";\nimport { useTweets } from \"../../../hooks/useTweets\";\nimport { useBoards } from \"../../../hooks/useBoards\";\nimport { useNotification } from \"../../../context/NotificationContext\";\nimport throttle from \"lodash/throttle\";\nimport debounce from \"lodash/debounce\";\n\n// Constants\nconst MAX_TWEET_LENGTH = 1000;\nconst Z_INDEX = {\n  BOARD: 10,\n  TWEET: 99,\n  POPUP: 100,\n  MODAL: 110,\n  OVERLAY: 109,\n};\n\n// Reducer for tweet popup state\nconst popupReducer = (state, action) => {\n  switch (action.type) {\n    case \"OPEN_POPUP\":\n      return {\n        visible: true,\n        x: action.x,\n        y: action.y,\n        clientX: action.clientX,\n        clientY: action.clientY,\n        replyTweet: action.replyTweet || null,\n      };\n    case \"CLOSE_POPUP\":\n      return { visible: false, x: 0, y: 0, clientX: 0, clientY: 0, replyTweet: null };\n    default:\n      return state;\n  }\n};\n\n// Reducer for edit modal state\nconst editModalReducer = (state, action) => {\n  switch (action.type) {\n    case \"SET_EDIT_MODAL\":\n      return {\n        tweet: action.payload,\n        newStatus: action.payload?.status || \"approved\",\n        selectedBoardId: action.payload?.board_id || \"\",\n      };\n    case \"CLEAR_EDIT_MODAL\":\n      return { tweet: null, newStatus: \"\", selectedBoardId: \"\" };\n    case \"UPDATE_EDIT_CONTENT\":\n      return {\n        ...state,\n        tweet: { ...state.tweet, content: { ...state.tweet.content, value: action.value } },\n      };\n    case \"SET_NEW_STATUS\":\n      return { ...state, newStatus: action.status };\n    case \"SET_SELECTED_BOARD\":\n      return { ...state, selectedBoardId: action.boardId };\n    default:\n      return state;\n  }\n};\n\n// Custom hook for permission management\nconst usePermissions = (userRole, currentUser, tweet = null, tweets = null, bypassOwnership = false) => {\n  return useMemo(() => {\n    const isOwnerOrAdmin = [\"owner\", \"admin\"].includes(userRole);\n    const isModerator = userRole === \"moderator\";\n    const isViewer = userRole === \"viewer\";\n\n    const computePermissions = (t) => {\n      const isTweetOwner =\n        t &&\n        (t.anonymous_id === currentUser?.anonymous_id ||\n          t.user_id === currentUser?.anonymous_id ||\n          (t.username &&\n            currentUser?.username &&\n            t.username.toLowerCase() === currentUser.username.toLowerCase()));\n\n      return {\n        canEdit: bypassOwnership || isOwnerOrAdmin || isModerator || (isViewer && isTweetOwner),\n        canPin: isOwnerOrAdmin,\n        canChangeStatus: isOwnerOrAdmin,\n        canMoveBoard: isOwnerOrAdmin,\n        canCreate: isOwnerOrAdmin || isModerator || isViewer,\n        canLike: isOwnerOrAdmin || isModerator || isViewer,\n        canReply: isOwnerOrAdmin || isModerator || isViewer,\n        canDrag: t && !t.is_pinned && (bypassOwnership || isOwnerOrAdmin || isModerator || isTweetOwner),\n      };\n    };\n\n    if (tweets && Array.isArray(tweets)) {\n      const permissionsMap = new Map();\n      tweets.forEach((t) => {\n        if (t.tweet_id) {\n          permissionsMap.set(t.tweet_id, computePermissions(t));\n        }\n      });\n      return permissionsMap;\n    }\n\n    return computePermissions(tweet);\n  }, [userRole, currentUser?.anonymous_id, currentUser?.username, tweet?.tweet_id, tweets?.length, bypassOwnership]);\n};\n\nconst Board = ({\n  boardId,\n  boardTitle,\n  token,\n  currentUser,\n  userRole,\n  onLogout,\n  availableBoards = [],\n}) => {\n  const navigate = useNavigate();\n  const { showNotification } = useNotification();\n  const boardMainRef = useRef(null);\n  const isFetching = useRef(false);\n  const [isListView, setIsListView] = useState(false);\n  const [page, setPage] = useState(1);\n  const [boards, setBoards] = useState(availableBoards);\n  const [isSaving, setIsSaving] = useState(false);\n  const [highlightedTweetId, setHighlightedTweetId] = useState(null);\n  const [onlineUsers, setOnlineUsers] = useState(0);\n  const openModals = useRef(new Set());\n\n  const [popupState, dispatchPopup] = useReducer(popupReducer, {\n    visible: false,\n    x: 0,\n    y: 0,\n    clientX: 0,\n    clientY: 0,\n    replyTweet: null,\n  });\n\n  const [editModalState, dispatchEditModal] = useReducer(editModalReducer, {\n    tweet: null,\n    newStatus: \"\",\n    selectedBoardId: \"\",\n  });\n\n  const isOverlayOpen = useMemo(() => {\n    return popupState.visible || !!editModalState.tweet || openModals.current.size > 0;\n  }, [popupState.visible, editModalState.tweet]);\n\n  const handleModalStateChange = useCallback((tweetId, isOpen) => {\n    if (isOpen) {\n      openModals.current.add(tweetId);\n    } else {\n      openModals.current.delete(tweetId);\n    }\n  }, []);\n\n  const {\n    tweets,\n    tweet,\n    setTweet,\n    setTweets,\n    pagination,\n    boardInfo,\n    loading: isLoading,\n    error,\n    fetchTweetsList,\n    createNewTweet,\n    updateExistingTweet,\n    toggleLikeTweet,\n    deleteExistingTweet,\n    moveTweet,\n    pinTweet,\n    unpinTweet,\n    setReminder,\n    shareTweet,\n    resetState,\n  } = useTweets(token, boardId, currentUser, onLogout, navigate);\n\n  const { fetchBoardsList } = useBoards(token, onLogout, navigate);\n  const {\n    scale,\n    offset,\n    dragging,\n    centerBoard,\n    handleZoomButton,\n    handleMouseDown: originalHandleMouseDown,\n    handleMouseMove: originalHandleMouseMove,\n    handleMouseUp: originalHandleMouseUp,\n    handleTouchStart: originalHandleTouchStart,\n    handleTouchMove: originalHandleTouchMove,\n    handleTouchEnd: originalHandleTouchEnd,\n  } = useBoardInteraction(boardMainRef);\n\n  const permissions = usePermissions(userRole, currentUser);\n  const tweetPermissionsMap = usePermissions(userRole, currentUser, null, tweets);\n\n  const socketRef = useWebSocket(token, boardId, currentUser, setTweets, setOnlineUsers, onLogout, navigate, showNotification);\n\n  // WebSocket event listeners\n  useEffect(() => {\n    if (!socketRef.current || !boardId || !currentUser?.anonymous_id) return;\n\n    const socket = socketRef.current;\n\n    // Join the board room\n    socket.on(\"connect\", () => {\n      socket.emit(\"joinBoard\", { board_id: boardId, user_id: currentUser.anonymous_id });\n    });\n\n    // Handle online users update\n    socket.on(\"onlineUsersUpdate\", (count) => {\n      setOnlineUsers(count);\n    });\n\n    // Handle new tweet\n    socket.on(\"newTweet\", (newTweet) => {\n      newTweet.timestamp = newTweet.timestamp || new Date().toISOString();\n      setTweets((prev) => {\n        if (prev.some((t) => t.tweet_id === newTweet.tweet_id)) {\n          return prev; // Avoid duplicates\n        }\n        return [...prev, newTweet];\n      });\n    });\n\n    // Handle tweet update\n    socket.on(\"tweetUpdated\", (updatedTweet) => {\n      updatedTweet.timestamp = updatedTweet.timestamp || new Date().toISOString();\n      setTweets((prev) =>\n        prev.map((tweet) =>\n          tweet.tweet_id === updatedTweet.tweet_id ? { ...tweet, ...updatedTweet } : tweet\n        )\n      );\n    });\n\n    // Handle tweet deletion\n    socket.on(\"tweetDeleted\", ({ tweet_id }) => {\n      setTweets((prev) => prev.filter((t) => t.tweet_id !== tweet_id));\n    });\n\n    // Handle tweet like\n    socket.on(\"likeTweet\", ({ tweet_id, like_data }) => {\n      setTweets((prev) =>\n        prev.map((tweet) =>\n          tweet.tweet_id === tweet_id\n            ? {\n                ...tweet,\n                stats: { ...tweet.stats, like_count: (tweet.stats.like_count || 0) + 1 },\n                liked_by: [...(tweet.liked_by || []), like_data],\n                timestamp: new Date().toISOString(),\n              }\n            : tweet\n        )\n      );\n    });\n\n    // Handle tweet dislike\n    socket.on(\"dislikeTweet\", ({ tweet_id, user_id }) => {\n      setTweets((prev) =>\n        prev.map((tweet) =>\n          tweet.tweet_id === tweet_id\n            ? {\n                ...tweet,\n                stats: { ...tweet.stats, like_count: Math.max(0, (tweet.stats.like_count || 0) - 1) },\n                liked_by: (tweet.liked_by || []).filter((like) => like.anonymous_id !== user_id),\n                timestamp: new Date().toISOString(),\n              }\n            : tweet\n        )\n      );\n    });\n\n    // Handle tweet status update\n    socket.on(\"tweetStatusUpdated\", ({ tweet_id, status }) => {\n      setTweets((prev) =>\n        prev.map((tweet) =>\n          tweet.tweet_id === tweet_id\n            ? { ...tweet, status, timestamp: new Date().toISOString() }\n            : tweet\n        )\n      );\n    });\n\n    // Handle tweet move\n    socket.on(\"moveTweet\", ({ tweet_id, new_board_id }) => {\n      if (new_board_id !== boardId) {\n        setTweets((prev) => prev.filter((t) => t.tweet_id !== tweet_id));\n      } else {\n        setTweets((prev) => {\n          const movedTweet = prev.find((t) => t.tweet_id === tweet_id);\n          if (movedTweet) {\n            return prev; // Tweet already in this board\n          }\n          // Fetch the moved tweet if needed\n          fetchTweetsList({ page: 1, limit: 20 });\n          return prev;\n        });\n      }\n    });\n\n    // Handle tweet pin\n    socket.on(\"pinTweet\", ({ tweet_id }) => {\n      setTweets((prev) =>\n        prev.map((tweet) =>\n          tweet.tweet_id === tweet_id\n            ? { ...tweet, is_pinned: true, timestamp: new Date().toISOString() }\n            : tweet\n        )\n      );\n    });\n\n    // Handle tweet unpin\n    socket.on(\"unpinTweet\", ({ tweet_id }) => {\n      setTweets((prev) =>\n        prev.map((tweet) =>\n          tweet.tweet_id === tweet_id\n            ? { ...tweet, is_pinned: false, timestamp: new Date().toISOString() }\n            : tweet\n        )\n      );\n    });\n\n    // Handle tweet reminder set\n    socket.on(\"setReminder\", ({ tweet_id, reminder }) => {\n      setTweets((prev) =>\n        prev.map((tweet) =>\n          tweet.tweet_id === tweet_id\n            ? { ...tweet, reminder, timestamp: new Date().toISOString() }\n            : tweet\n        )\n      );\n    });\n\n    // Handle tweet share\n    socket.on(\"tweetShared\", ({ tweet_id, share_data }) => {\n      setTweets((prev) =>\n        prev.map((tweet) =>\n          tweet.tweet_id === tweet_id\n            ? {\n                ...tweet,\n                stats: { ...tweet.stats, share_count: (tweet.stats.share_count || 0) + 1 },\n                analytics: {\n                  ...tweet.analytics,\n                  shares: [...(tweet.analytics?.shares || []), share_data],\n                },\n                timestamp: new Date().toISOString(),\n              }\n            : tweet\n        )\n      );\n    });\n\n    // Handle board updates\n    socket.on(\"shareTweet\", (updatedBoard) => {\n      if (updatedBoard.board_id === boardId) {\n        showNotification(\"Board updated\", \"success\");\n      }\n    });\n\n    // Handle board deletion\n    socket.on(\"boardDeleted\", ({ board_id }) => {\n      if (board_id === boardId) {\n        showNotification(\"This board has been deleted\", \"error\");\n        navigate(\"/boards\");\n      }\n    });\n\n    // Cleanup listeners on unmount\n    return () => {\n      // The useWebSocket hook handles socket disconnection\n    };\n  }, [socketRef, boardId, currentUser?.anonymous_id, setTweets, showNotification, navigate, fetchTweetsList]);\n\n  const debouncedRefresh = useMemo(\n    () =>\n      debounce(async () => {\n        if (isFetching.current) return;\n        isFetching.current = true;\n        try {\n          setTweets([]); // Clear tweets before refresh\n          await new Promise((resolve, reject) => {\n            fetchTweetsList({ page: 1, limit: 20 }, null, false, (err, result) => {\n              if (err) reject(err);\n              else resolve(result);\n            });\n          });\n          setPage(1);\n          centerBoard();\n          showNotification(\"Board refreshed successfully!\", \"success\");\n        } catch (err) {\n          if (err.name !== \"AbortError\") {\n            showNotification(err.message || \"Failed to refresh board\", \"error\");\n          }\n        } finally {\n          isFetching.current = false;\n        }\n      }, 1000),\n    [fetchTweetsList, showNotification, centerBoard, setTweets]\n  );\n\n  useEffect(() => {\n    if (!token || !boardId) return;\n\n    const controller = new AbortController();\n    const fetchData = async () => {\n      if (isFetching.current) return;\n      isFetching.current = true;\n      try {\n        await new Promise((resolve, reject) => {\n          fetchTweetsList({ page: 1, limit: 20 }, controller.signal, false, (err, result) => {\n            if (err) reject(err);\n            else resolve(result);\n          });\n        });\n        setPage(1);\n        centerBoard();\n      } catch (err) {\n        if (err.name !== \"AbortError\") {\n          showNotification(err.message || \"Failed to load tweets\", \"error\");\n        }\n      } finally {\n        isFetching.current = false;\n      }\n    };\n\n    fetchData();\n    return () => {\n      controller.abort();\n      debouncedRefresh.cancel();\n    };\n  }, [token, boardId, fetchTweetsList, showNotification, centerBoard, debouncedRefresh]);\n\n  useEffect(() => {\n    if (!editModalState.tweet || boards.length > 0 || !permissions.canMoveBoard) return;\n\n    const controller = new AbortController();\n    const fetchBoards = async () => {\n      try {\n        const boardsData = await fetchBoardsList({}, controller.signal);\n        const validBoards = boardsData?.boards.filter((b) => b.board_id) || [];\n        setBoards(validBoards);\n      } catch (err) {\n        if (err.name !== \"AbortError\") {\n          showNotification(\"Failed to load boards\", \"error\");\n        }\n      }\n    };\n\n    fetchBoards();\n    return () => controller.abort();\n  }, [editModalState.tweet, boards, fetchBoardsList, showNotification, permissions.canMoveBoard]);\n\n  useEffect(() => {\n    const handleWheel = (e) => {\n      if (isOverlayOpen) {\n        e.preventDefault();\n      }\n    };\n    window.addEventListener(\"wheel\", handleWheel, { passive: false });\n    return () => window.removeEventListener(\"wheel\", handleWheel);\n  }, [isOverlayOpen]);\n\n  const handleOptimisticUpdate = useCallback(\n    async (tweet, optimisticUpdateFn, serverUpdateFn, rollbackFn, isNewTweet = false) => {\n      const tweetId = tweet.tweet_id;\n      try {\n        setTweets((prev) => optimisticUpdateFn(tweetId, prev));\n        await serverUpdateFn();\n      } catch (err) {\n        setTweets((prev) => rollbackFn(tweetId, prev));\n        showNotification(err.message || (isNewTweet ? \"Failed to create tweet\" : \"Failed to update tweet\"), \"error\");\n      }\n    },\n    [showNotification, setTweets]\n  );\n\n  const handleTweetCreation = useCallback(\n    async (content, x, y, scheduledAt, files, onProgress) => {\n      if (!permissions.canCreate) {\n        showNotification(\"You do not have permission to create tweets\", \"error\");\n        return;\n      }\n      if (!content?.value?.trim() && (!files || files.length === 0)) {\n        showNotification(\"Tweet must have either content or files\", \"error\");\n        return;\n      }\n      if (content?.value?.length > MAX_TWEET_LENGTH) {\n        showNotification(`Tweet exceeds ${MAX_TWEET_LENGTH} character limit`, \"error\");\n        return;\n      }\n\n      const tempTweetId = `temp-${Date.now()}`;\n      const optimisticTweet = {\n        tweet_id: tempTweetId,\n        content: {\n          type: \"text\",\n          value: content?.value || \"\",\n          metadata: { files: files ? files.map((f) => ({ fileKey: f.name, url: URL.createObjectURL(f), contentType: f.type })) : [] },\n        },\n        position: { x, y },\n        parent_tweet_id: popupState.replyTweet?.tweet_id || null,\n        status: \"approved\",\n        created_at: new Date().toISOString(),\n        anonymous_id: currentUser.anonymous_id,\n        username: currentUser.username,\n        stats: { like_count: 0, view_count: 0, comment_count: 0, share_count: 0 },\n        is_pinned: false,\n        board_id: boardId,\n        children: [],\n      };\n\n      await handleOptimisticUpdate(\n        optimisticTweet,\n        (tweetId, tweets) => [...tweets, optimisticTweet],\n        async () => {\n          const newTweet = await createNewTweet(\n            content,\n            x,\n            y,\n            popupState.replyTweet?.tweet_id || null,\n            false,\n            \"approved\",\n            scheduledAt || null,\n            null,\n            files || [],\n            onProgress\n          );\n          setTweets((prev) =>\n            prev.map((t) => (t.tweet_id === tempTweetId ? newTweet : t))\n          );\n          // Emit the new tweet via WebSocket\n          socketRef.current?.emit(\"newTweet\", newTweet);\n        },\n        (tweetId, tweets) => tweets.filter((t) => t.tweet_id !== tweetId),\n        true\n      );\n\n      dispatchPopup({ type: \"CLOSE_POPUP\" });\n    },\n    [permissions.canCreate, createNewTweet, popupState.replyTweet, showNotification, currentUser, boardId, handleOptimisticUpdate, setTweets, socketRef]\n  );\n\n  const handleReply = useCallback(\n    (tweet) => {\n      if (!permissions.canReply) {\n        showNotification(\"You do not have permission to reply to tweets\", \"error\");\n        return;\n      }\n      const clientX = tweet.position.x * scale + offset.x;\n      const clientY = tweet.position.y * scale + offset.y;\n      dispatchPopup({ type: \"OPEN_POPUP\", x: tweet.position.x, y: tweet.position.y, clientX, clientY, replyTweet: tweet });\n    },\n    [permissions.canReply, scale, offset, showNotification]\n  );\n\n  const throttlePopup = useMemo(\n    () =>\n      throttle((x, y, clientX, clientY) => {\n        if (!permissions.canCreate) {\n          showNotification(\"You do not have permission to create tweets\", \"error\");\n          return;\n        }\n        dispatchPopup({ type: \"OPEN_POPUP\", x, y, clientX, clientY });\n      }, 300),\n    [permissions.canCreate, showNotification]\n  );\n\n  const handleMouseDown = useCallback(\n    (e) => {\n      if (isOverlayOpen) {\n        e.preventDefault();\n        return;\n      }\n      originalHandleMouseDown(e);\n    },\n    [isOverlayOpen, originalHandleMouseDown]\n  );\n\n  const handleMouseMove = useCallback(\n    (e) => {\n      if (isOverlayOpen) return;\n      originalHandleMouseMove(e);\n    },\n    [isOverlayOpen, originalHandleMouseMove]\n  );\n\n  const handleMouseUpWithPopup = useCallback(\n    (e) => {\n      if (isOverlayOpen) return;\n      if (e.target.closest(\".tweet-card, .tweet-popup, .MuiIconButton-root, .MuiButton-root\")) {\n        originalHandleMouseUp(e);\n        return;\n      }\n      originalHandleMouseUp(e, throttlePopup);\n    },\n    [isOverlayOpen, originalHandleMouseUp, throttlePopup]\n  );\n\n  const handleTouchStart = useCallback(\n    (e) => {\n      if (isOverlayOpen) {\n        return;\n      }\n      originalHandleTouchStart(e);\n    },\n    [isOverlayOpen, originalHandleTouchStart]\n  );\n\n  const handleTouchMove = useCallback(\n    (e) => {\n      if (isOverlayOpen) {\n        e.preventDefault();\n        return;\n      }\n      originalHandleTouchMove(e);\n    },\n    [isOverlayOpen, originalHandleTouchMove]\n  );\n\n  const handleTouchEndWithPopup = useCallback(\n    (e) => {\n      if (isOverlayOpen) return;\n      if (e.target.closest(\".tweet-card, .tweet-popup, .MuiIconButton-root, .MuiButton-root\")) {\n        originalHandleTouchEnd(e);\n        return;\n      }\n      originalHandleTouchEnd(e, throttlePopup);\n    },\n    [isOverlayOpen, originalHandleTouchEnd, throttlePopup]\n  );\n\n  const handleEditTweet = useCallback(\n    (tweet) => {\n      const tweetPermissions = tweetPermissionsMap.get(tweet.tweet_id);\n      if (!tweetPermissions?.canEdit) {\n        showNotification(\"You do not have permission to edit this tweet\", \"error\");\n        return;\n      }\n      dispatchEditModal({ type: \"SET_EDIT_MODAL\", payload: { ...tweet, availableBoards: boards } });\n    },\n    [tweetPermissionsMap, boards, showNotification]\n  );\n\n  const handlePinToggle = useCallback(\n    async (tweet) => {\n      if (!permissions.canPin) {\n        showNotification(\"You do not have permission to pin tweets\", \"error\");\n        return;\n      }\n      const isPinning = !tweet.is_pinned;\n      await handleOptimisticUpdate(\n        tweet,\n        (tweetId, tweets) =>\n          tweets.map((t) =>\n            t.tweet_id === tweetId ? { ...t, is_pinned: isPinning } : t\n          ),\n        async () => {\n          const action = isPinning ? pinTweet : unpinTweet;\n          await action(tweet.tweet_id);\n          // Emit the pin/unpin event via WebSocket\n          socketRef.current?.emit(isPinning ? \"pinTweet\" : \"unpinTweet\", { tweet_id: tweet.tweet_id });\n        },\n        (tweetId, tweets) =>\n          tweets.map((t) =>\n            t.tweet_id === tweetId ? { ...t, is_pinned: tweet.is_pinned } : t\n          ),\n        false\n      );\n      showNotification(`Tweet ${isPinning ? \"pinned\" : \"unpinned\"} successfully!`, \"success\");\n    },\n    [permissions.canPin, pinTweet, unpinTweet, showNotification, handleOptimisticUpdate, socketRef]\n  );\n\n  const handleSaveEditedTweet = useCallback(\n    async () => {\n      if (!editModalState.tweet) return;\n      const tweetPermissions = tweetPermissionsMap.get(editModalState.tweet.tweet_id);\n      if (!tweetPermissions?.canEdit) {\n        showNotification(\"You do not have permission to edit this tweet\", \"error\");\n        return;\n      }\n      if (!editModalState.tweet.content?.value?.trim()) {\n        showNotification(\"Tweet content cannot be empty\", \"error\");\n        return;\n      }\n      if (editModalState.tweet.content?.value?.length > MAX_TWEET_LENGTH) {\n        showNotification(`Tweet exceeds ${MAX_TWEET_LENGTH} character limit`, \"error\");\n        return;\n      }\n\n      setIsSaving(true);\n      const updatedTweet = {\n        ...editModalState.tweet,\n        content: {\n          type: editModalState.tweet.content?.type || \"text\",\n          value: editModalState.tweet.content?.value || \"\",\n          metadata: editModalState.tweet.content?.metadata || {},\n        },\n        status: tweetPermissions.canChangeStatus ? editModalState.newStatus : editModalState.tweet.status,\n        board_id: tweetPermissions.canMoveBoard ? editModalState.selectedBoardId : editModalState.tweet.board_id,\n      };\n\n      await handleOptimisticUpdate(\n        updatedTweet,\n        (tweetId, tweets) =>\n          tweets.map((t) => (t.tweet_id === tweetId ? updatedTweet : t)),\n        async () => {\n          await updateExistingTweet(editModalState.tweet.tweet_id, {\n            content: updatedTweet.content,\n            status: tweetPermissions.canChangeStatus ? editModalState.newStatus : editModalState.tweet.status,\n            position: editModalState.tweet.position,\n          });\n          if (tweetPermissions.canMoveBoard && editModalState.tweet.board_id !== editModalState.selectedBoardId) {\n            await moveTweet(editModalState.tweet.tweet_id, editModalState.selectedBoardId);\n            socketRef.current?.emit(\"moveTweet\", {\n              tweet_id: editModalState.tweet.tweet_id,\n              new_board_id: editModalState.selectedBoardId,\n            });\n          }\n          // Emit update event via WebSocket\n          socketRef.current?.emit(\"tweetUpdated\", updatedTweet);\n          if (tweetPermissions.canChangeStatus && editModalState.newStatus !== editModalState.tweet.status) {\n            socketRef.current?.emit(\"tweetStatusUpdated\", {\n              tweet_id: editModalState.tweet.tweet_id,\n              status: editModalState.newStatus,\n            });\n          }\n        },\n        (tweetId, tweets) => tweets,\n        false\n      );\n\n      setIsSaving(false);\n      dispatchEditModal({ type: \"CLEAR_EDIT_MODAL\" });\n    },\n    [editModalState, updateExistingTweet, moveTweet, showNotification, tweetPermissionsMap, handleOptimisticUpdate, socketRef]\n  );\n\n  const handleLikeTweet = useCallback(\n    async (tweetId, isLiked) => {\n      if (!permissions.canLike) {\n        showNotification(\"You do not have permission to like tweets\", \"error\");\n        return;\n      }\n      const likeData = { anonymous_id: currentUser.anonymous_id, username: currentUser.username, liked_at: new Date() };\n      await handleOptimisticUpdate(\n        { tweet_id: tweetId },\n        (tweetId, tweets) =>\n          tweets.map((t) =>\n            t.tweet_id === tweetId\n              ? {\n                  ...t,\n                  stats: {\n                    ...t.stats,\n                    like_count: isLiked\n                      ? Math.max(0, (t.stats.like_count || 0) - 1)\n                      : (t.stats.like_count || 0) + 1,\n                  },\n                  liked_by: isLiked\n                    ? (t.liked_by || []).filter((l) => l.anonymous_id !== currentUser.anonymous_id)\n                    : [...(t.liked_by || []), likeData],\n                }\n              : t\n          ),\n        async () => {\n          const updatedTweet = await toggleLikeTweet(tweetId, isLiked);\n          // Emit like/dislike event via WebSocket\n          socketRef.current?.emit(isLiked ? \"dislikeTweet\" : \"likeTweet\", {\n            tweet_id: tweetId,\n            like_data: isLiked ? null : likeData,\n            user_id: isLiked ? currentUser.anonymous_id : null,\n          });\n        },\n        (tweetId, tweets) => tweets,\n        false\n      );\n    },\n    [permissions.canLike, toggleLikeTweet, showNotification, currentUser, handleOptimisticUpdate, socketRef]\n  );\n\n  const handleDeleteTweet = useCallback(\n    async (tweetId) => {\n      const tweetPermissions = tweetPermissionsMap.get(tweetId);\n      if (!tweetPermissions?.canEdit) {\n        showNotification(\"You do not have permission to delete this tweet\", \"error\");\n        return;\n      }\n      await handleOptimisticUpdate(\n        { tweet_id: tweetId },\n        (tweetId, tweets) => tweets.filter((t) => t.tweet_id !== tweetId),\n        async () => {\n          await deleteExistingTweet(tweetId);\n          // Emit delete event via WebSocket\n          socketRef.current?.emit(\"tweetDeleted\", { tweet_id: tweetId });\n        },\n        (tweetId, tweets) => tweets,\n        false\n      );\n    },\n    [deleteExistingTweet, showNotification, tweetPermissionsMap, handleOptimisticUpdate, socketRef]\n  );\n\n  const handleSetReminder = useCallback(\n    async (tweetId, reminder) => {\n      const tweetPermissions = tweetPermissionsMap.get(tweetId);\n      if (!tweetPermissions?.canEdit) {\n        showNotification(\"You do not have permission to set reminders\", \"error\");\n        return;\n      }\n      await handleOptimisticUpdate(\n        { tweet_id: tweetId },\n        (tweetId, tweets) =>\n          tweets.map((t) => (t.tweet_id === tweetId ? { ...t, reminder } : t)),\n        async () => {\n          await setReminder(tweetId, reminder);\n          // Emit reminder event via WebSocket\n          socketRef.current?.emit(\"setReminder\", { tweet_id: tweetId, reminder });\n        },\n        (tweetId, tweets) => tweets,\n        false\n      );\n    },\n    [setReminder, showNotification, tweetPermissionsMap, handleOptimisticUpdate, socketRef]\n  );\n\n  const handleShareTweet = useCallback(\n    async (tweetId, sharedTo) => {\n      if (!permissions.canReply) {\n        showNotification(\"You do not have permission to share tweets\", \"error\");\n        return;\n      }\n      const shareData = { user_id: currentUser.anonymous_id, shared_to: sharedTo, shared_at: new Date() };\n      await handleOptimisticUpdate(\n        { tweet_id: tweetId },\n        (tweetId, tweets) =>\n          tweets.map((t) =>\n            t.tweet_id === tweetId\n              ? {\n                  ...t,\n                  stats: { ...t.stats, share_count: (t.stats.share_count || 0) + 1 },\n                  analytics: {\n                    ...t.analytics,\n                    shares: [...(t.analytics?.shares || []), shareData],\n                  },\n                }\n              : t\n          ),\n        async () => {\n          await shareTweet(tweetId, sharedTo);\n          // Emit share event via WebSocket\n          socketRef.current?.emit(\"shareTweet\", { tweet_id: tweetId, share_data: shareData });\n        },\n        (tweetId, tweets) => tweets,\n        false\n      );\n    },\n    [permissions.canReply, shareTweet, showNotification, currentUser, handleOptimisticUpdate, socketRef]\n  );\n\n  const handleLoadMore = useCallback(async () => {\n    if (isFetching.current || !pagination.hasMore) return;\n    isFetching.current = true;\n    try {\n      await new Promise((resolve, reject) => {\n        fetchTweetsList({ page: page + 1, limit: 20 }, null, true, (err, result) => {\n          if (err) reject(err);\n          else resolve(result);\n        });\n      });\n      setPage((prev) => prev + 1);\n    } catch (err) {\n      if (err.name !== \"AbortError\") {\n        showNotification(err.message || \"Failed to load more tweets\", \"error\");\n      }\n    } finally {\n      isFetching.current = false;\n    }\n  }, [fetchTweetsList, page, pagination.hasMore, showNotification]);\n\n  const handlePrevPage = useCallback(async () => {\n    if (isFetching.current || page <= 1) return;\n    isFetching.current = true;\n    try {\n      setTweets([]);\n      await new Promise((resolve, reject) => {\n        fetchTweetsList({ page: page - 1, limit: 20 }, null, false, (err, result) => {\n          if (err) reject(err);\n          else resolve(result);\n        });\n      });\n      setPage((prev) => prev - 1);\n      centerBoard();\n    } catch (err) {\n      if (err.name !== \"AbortError\") {\n        showNotification(err.message || \"Failed to load previous page\", \"error\");\n      }\n    } finally {\n      isFetching.current = false;\n    }\n  }, [fetchTweetsList, page, showNotification, centerBoard, setTweets]);\n\n  const handleNextPage = useCallback(async () => {\n    if (isFetching.current || !pagination.hasMore) return;\n    isFetching.current = true;\n    try {\n      setTweets([]); // Clear tweets before fetching\n      await new Promise((resolve, reject) => {\n        fetchTweetsList({ page: page + 1, limit: 20 }, null, false, (err, result) => {\n          if (err) reject(err);\n          else resolve(result);\n        });\n      });\n      setPage((prev) => prev + 1);\n      centerBoard();\n    } catch (err) {\n      if (err.name !== \"AbortError\") {\n        showNotification(err.message || \"Failed to load next page\", \"error\");\n      }\n    } finally {\n      isFetching.current = false;\n    }\n  }, [fetchTweetsList, page, pagination.hasMore, showNotification, centerBoard, setTweets]);\n\n  const getRelatedTweetIds = useCallback(\n    (tweetId) => {\n      const tweetIds = new Set([tweetId]);\n      const tweet = tweets.find((t) => t.tweet_id === tweetId);\n      if (tweet) {\n        if (tweet.parent_tweet_id) tweetIds.add(tweet.parent_tweet_id);\n        tweet.child_tweet_ids?.forEach((id) => tweetIds.add(id));\n      }\n      return Array.from(tweetIds);\n    },\n    [tweets]\n  );\n\n  const handleViewToggle = useCallback(() => {\n    setIsListView((prev) => {\n      if (prev) centerBoard();\n      return !prev;\n    });\n  }, [centerBoard]);\n\n  const validTweets = useMemo(() => {\n    const seenIds = new Set();\n    return tweets\n      .filter((tweet) => {\n        const isValid =\n          tweet &&\n          tweet.tweet_id &&\n          typeof tweet.tweet_id === \"string\" &&\n          tweet.tweet_id.trim() &&\n          !seenIds.has(tweet.tweet_id) &&\n          tweet.position &&\n          typeof tweet.position.x === \"number\" &&\n          typeof tweet.position.y === \"number\" &&\n          !isNaN(tweet.position.x) &&\n          !isNaN(tweet.position.y) &&\n          tweet.content &&\n          typeof tweet.content === \"object\" &&\n          tweet.content.type &&\n          tweet.content.value !== undefined &&\n          tweet.content.metadata;\n        seenIds.add(tweet.tweet_id);\n        return isValid;\n      })\n      .sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\n  }, [tweets]);\n\n  const tweetProps = useMemo(\n    () => ({\n      currentUser,\n      userRole,\n      onLike: handleLikeTweet,\n      onDelete: handleDeleteTweet,\n      onReply: handleReply,\n      onReplyHover: setHighlightedTweetId,\n      onEdit: handleEditTweet,\n      onPinToggle: handlePinToggle,\n      onSetReminder: handleSetReminder,\n      onShare: handleShareTweet,\n      availableBoards: editModalState.tweet?.availableBoards || boards,\n      boardId,\n      isListView,\n      onModalStateChange: handleModalStateChange,\n    }),\n    [\n      currentUser,\n      userRole,\n      handleLikeTweet,\n      handleDeleteTweet,\n      handleReply,\n      handleEditTweet,\n      handlePinToggle,\n      handleSetReminder,\n      handleShareTweet,\n      editModalState.tweet,\n      boards,\n      boardId,\n      isListView,\n      handleModalStateChange,\n    ]\n  );\n\n  const renderTweet = useCallback(\n    (tweet) => {\n      const replyCount = tweet.child_tweet_ids?.length || 0;\n      const relatedTweetIds = highlightedTweetId ? getRelatedTweetIds(highlightedTweetId) : [];\n      const tweetContent = (\n        <TweetContent\n          key={`content-${tweet.tweet_id}`}\n          tweet={tweet}\n          {...tweetProps}\n          isParentHighlighted={relatedTweetIds.includes(tweet.tweet_id)}\n          replyCount={replyCount}\n          parentTweet={\n            tweet.parent_tweet_id\n              ? tweets.find((t) => t.tweet_id === tweet.parent_tweet_id)?.content?.value || null\n              : null\n          }\n          relatedTweetIds={relatedTweetIds}\n        />\n      );\n\n      // Animation variants for tweets\n      const tweetVariants = {\n        initial: {\n          opacity: 0,\n          x: Math.random() * 50 - 25, // Random slide-in from left/right\n          y: Math.random() * 50 - 25, // Random slide-in from top/bottom\n        },\n        animate: {\n          opacity: 1,\n          x: 0,\n          y: 0,\n          transition: { duration: 0.3, ease: \"easeOut\" },\n        },\n        exit: {\n          opacity: 0,\n          x: Math.random() * 100 - 50, // Random scatter on exit\n          y: Math.random() * 100 - 50, // Random scatter on exit\n          transition: { duration: 0.3, ease: \"easeIn\" },\n        },\n      };\n\n      if (isListView) {\n        return (\n          <motion.div\n            key={`tweet-${tweet.tweet_id}`}\n            variants={tweetVariants}\n            initial=\"initial\"\n            animate=\"animate\"\n            transition={{ duration: 0.3 }}\n            exit=\"exit\"\n            sx={BoardStyles.boardListViewTweet(tweet.parent_tweet_id)}\n          >\n            {tweetContent}\n          </motion.div>\n        );\n      }\n\n      return (\n        <DraggableTweet\n          key={`tweet-${tweet.tweet_id}`}\n          tweet={tweet}\n          onStop={(e, data) => {\n            if (e.target.closest(\".MuiIconButton-root, .MuiTypography-root, .MuiChip-root\")) return;\n            updateExistingTweet(tweet.tweet_id, { position: { x: data.x, y: data.y } }).then(() => {\n              socketRef.current?.emit(\"tweetUpdated\", {\n                tweet_id: tweet.tweet_id,\n                position: { x: data.x, y: data.y },\n                timestamp: new Date().toISOString(),\n              });\n            });\n          }}\n          currentUser={currentUser}\n          userRole={userRole}\n          scale={scale}\n        >\n          <motion.div variants={tweetVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n            {tweetContent}\n          </motion.div>\n        </DraggableTweet>\n      );\n    },\n    [highlightedTweetId, getRelatedTweetIds, tweets, tweetProps, updateExistingTweet, currentUser, userRole, isListView, scale, socketRef]\n  );\n\n  const renderedTweets = useMemo(() => {\n    if (!validTweets.length) return null;\n    return <AnimatePresence>{validTweets.map((tweet) => renderTweet(tweet))}</AnimatePresence>;\n  }, [validTweets, renderTweet]);\n\n  const renderError = useCallback(\n    () => (\n      <Box sx={BoardStyles.boardErrorContainer}>\n        <Typography sx={BoardStyles.boardErrorText}>{error || \"An error occurred\"}</Typography>\n        <Button\n          variant=\"contained\"\n          onClick={debouncedRefresh}\n          sx={BoardStyles.boardErrorButton}\n          aria-label=\"Retry fetching tweets\"\n        >\n          Retry\n        </Button>\n      </Box>\n    ),\n    [error, debouncedRefresh]\n  );\n\n  if (isLoading && page === 1) return <LoadingSpinner />;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      transition={{ duration: 0.4 }}\n      style={{\n        ...BoardStyles.boardContainer,\n        overflow: \"hidden\",\n        height: \"100vh\",\n        width: \"100vw\",\n        position: \"relative\",\n        zIndex: Z_INDEX.BOARD,\n      }}\n    >\n      <Box sx={{ flex: 1, display: \"flex\", flexDirection: \"column\", position: \"relative\" }}>\n        {isOverlayOpen && (\n          <Box\n            sx={{\n              position: \"fixed\",\n              top: 0,\n              left: 0,\n              right: 0,\n              bottom: 0,\n              backgroundColor: \"rgba(0, 0, 0, 0.1)\",\n              zIndex: Z_INDEX.OVERLAY,\n              pointerEvents: \"auto\",\n            }}\n            onClick={(e) => e.stopPropagation()}\n            onMouseDown={(e) => e.preventDefault()}\n            onTouchStart={(e) => e.preventDefault()}\n            aria-hidden=\"true\"\n          />\n        )}\n\n        <Box sx={BoardStyles.boardBackButtonContainer}>\n          <Tooltip title=\"Go back\">\n            <IconButton\n              onClick={() => navigate(-1)}\n              aria-label=\"Previous page\"\n              sx={BoardStyles.boardBackButton}\n            >\n              <ArrowBack />\n            </IconButton>\n          </Tooltip>\n        </Box>\n        <Box\n          sx={{\n            position: \"absolute\",\n            top: 4,\n            right: 12,\n            zIndex: 100,\n            display: \"flex\",\n            alignItems: \"center\",\n            gap: 1,\n          }}\n        >\n          <Tooltip title=\"Online users\">\n            <Typography variant=\"caption\" sx={{ color: \"text.secondary\" }}>\n              Online: {onlineUsers}\n            </Typography>\n          </Tooltip>\n        </Box>\n\n        <Box\n          ref={boardMainRef}\n          sx={{\n            ...BoardStyles.boardMain(isListView, dragging),\n            touchAction: isOverlayOpen ? \"none\" : \"auto\",\n            userSelect: \"none\",\n            height: \"100%\",\n            width: \"100%\",\n            overflowY: isListView && !isOverlayOpen ? \"auto\" : \"hidden\",\n          }}\n          onMouseDown={isListView ? undefined : handleMouseDown}\n          onMouseMove={isListView ? undefined : handleMouseMove}\n          onMouseUp={isListView ? undefined : handleMouseUpWithPopup}\n          onTouchStart={isListView ? undefined : handleTouchStart}\n          onTouchMove={isListView ? undefined : handleTouchMove}\n          onTouchEnd={isListView ? undefined : handleTouchEndWithPopup}\n          role=\"region\"\n          aria-label={isListView ? \"Tweet list view\" : \"Interactive board canvas\"}\n          aria-live=\"polite\"\n          tabIndex={0}\n        >\n          {error && renderError()}\n\n          <motion.div\n            initial={{ opacity: 0, scale: isListView ? 0.95 : 1 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: isListView ? 0.95 : 1 }}\n            transition={{ duration: 0.3, ease: \"easeInOut\" }}\n          >\n            {isListView ? (\n              <Box sx={BoardStyles.boardListViewContainer}>\n                {validTweets.length === 0 ? (\n                  <Typography sx={BoardStyles.boardEmptyMessage}>\n                    No tweets yet. Create one to get started!\n                  </Typography>\n                ) : (\n                  <motion.div\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    exit={{ opacity: 0, y: -20 }}\n                    transition={{ duration: 0.3 }}\n                  >\n                    {renderedTweets}\n                    {isLoading && <LoadingSpinner />}\n                    {tweets.length < pagination.total && (\n                      <Button\n                        variant=\"outlined\"\n                        onClick={handleLoadMore}\n                        sx={{ mt: 2, alignSelf: \"center\" }}\n                        aria-label=\"Load more tweets\"\n                        disabled={isLoading || isOverlayOpen}\n                      >\n                        Load More\n                      </Button>\n                    )}\n                  </motion.div>\n                )}\n              </Box>\n            ) : (\n              <Box sx={BoardStyles.boardCanvas(scale, offset)}>\n                <Box sx={BoardStyles.boardTitleContainer(scale)}>\n                  <Typography sx={BoardStyles.boardTitle(boardTitle.length)}>\n                    {boardTitle}\n                  </Typography>\n                </Box>\n                {validTweets.length === 0 ? (\n                  <Box sx={BoardStyles.boardEmptyMessage}>\n                    <Typography variant=\"body1\" color=\"text.secondary\">\n                      No tweets yet. Tap or click anywhere to create one!\n                    </Typography>\n                  </Box>\n                ) : (\n                  renderedTweets\n                )}\n                {popupState.visible && (\n                  <TweetPopup\n                    x={popupState.x}\n                    y={popupState.y}\n                    clientX={popupState.clientX}\n                    clientY={popupState.clientY}\n                    onSubmit={handleTweetCreation}\n                    onClose={() => dispatchPopup({ type: \"CLOSE_POPUP\" })}\n                    scale={scale}\n                    offset={offset}\n                    zIndex={Z_INDEX.POPUP}\n                    parentTweet={popupState.replyTweet}\n                  />\n                )}\n              </Box>\n            )}\n          </motion.div>\n\n          <Box\n            sx={{\n              ...BoardStyles.boardControlsContainer,\n              position: \"fixed\",\n              bottom: { xs: 8, sm: 16 },\n              right: { xs: 8, sm: 16 },\n              display: \"flex\",\n              flexDirection: \"column\",\n              gap: { xs: 0.5, sm: 1 },\n              pointerEvents: isOverlayOpen ? \"none\" : \"auto\",\n            }}\n          >\n            <Tooltip title={isListView ? \"Switch to board view\" : \"Switch to list view\"}>\n              <Button\n                variant=\"contained\"\n                onClick={handleViewToggle}\n                aria-label={isListView ? \"Show as board\" : \"Show as list\"}\n                sx={{\n                  ...BoardStyles.boardViewToggleButton,\n                  fontSize: { xs: \"0.75rem\", sm: \"0.875rem\" },\n                  padding: { xs: \"4px 8px\", sm: \"6px 16px\" },\n                  pointerEvents: \"auto\",\n                }}\n                disabled={isOverlayOpen}\n              >\n                {isListView ? \"Board\" : \"List\"}\n              </Button>\n            </Tooltip>\n            <Tooltip title=\"Refresh board\">\n              <IconButton\n                onClick={debouncedRefresh}\n                size=\"small\"\n                aria-label=\"Refresh board\"\n                sx={{ ...BoardStyles.boardZoomButton, pointerEvents: \"auto\" }}\n                disabled={isLoading || isOverlayOpen}\n              >\n                <Refresh fontSize=\"small\" />\n              </IconButton>\n            </Tooltip>\n            <Tooltip title=\"Previous page\">\n              <IconButton\n                onClick={handlePrevPage}\n                size=\"small\"\n                aria-label=\"Previous page of tweets\"\n                sx={{\n                  ...BoardStyles.boardViewToggleButton,\n                  fontSize: { xs: \"0.75rem\", sm: \"0.875rem\" },\n                  padding: { xs: \"4px 8px\", sm: \"6px 16px\" },\n                  pointerEvents: \"auto\",\n                }}\n                disabled={isLoading || isOverlayOpen || page <= 1}\n              >\n                <ArrowCircleLeft fontSize=\"small\" />\n              </IconButton>\n            </Tooltip>\n            <Tooltip title=\"Next page\">\n              <IconButton\n                onClick={handleNextPage}\n                size=\"small\"\n                aria-label=\"Next page of tweets\"\n                sx={{\n                  ...BoardStyles.boardViewToggleButton,\n                  fontSize: { xs: \"0.75rem\", sm: \"0.875rem\" },\n                  padding: { xs: \"4px 8px\", sm: \"6px 16px\" },\n                  pointerEvents: \"auto\",\n                }}\n                disabled={isLoading || isOverlayOpen || !pagination.hasMore}\n              >\n                <ArrowCircleRight fontSize=\"small\" />\n              </IconButton>\n            </Tooltip>\n            {!isListView && (\n              <>\n                <AnimatePresence>\n                  {Math.abs(scale - 1) > 0.01 && (\n                    <motion.div\n                      initial={{ opacity: 0, scale: 0.9 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      exit={{ opacity: 0, scale: 0.9 }}\n                      transition={{ duration: 0.2 }}\n                    >\n                      <Tooltip title=\"Reset zoom\">\n                        <IconButton\n                          onClick={() => handleZoomButton(\"reset\")}\n                          size=\"small\"\n                          aria-label=\"Reset board zoom to 100%\"\n                          sx={{ ...BoardStyles.boardZoomButton, pointerEvents: \"auto\" }}\n                          disabled={isOverlayOpen}\n                        >\n                          <RestartAlt fontSize=\"small\" />\n                        </IconButton>\n                      </Tooltip>\n                    </motion.div>\n                  )}\n                </AnimatePresence>\n                <Tooltip title=\"Zoom out\">\n                  <IconButton\n                    onClick={() => handleZoomButton(\"out\")}\n                    size=\"small\"\n                    aria-label=\"Zoom out board\"\n                    sx={{ ...BoardStyles.boardZoomButton, pointerEvents: \"auto\" }}\n                    disabled={isOverlayOpen}\n                  >\n                    <Remove fontSize=\"small\" />\n                  </IconButton>\n                </Tooltip>\n                <Typography\n                  sx={{\n                    ...BoardStyles.boardZoomText,\n                    fontSize: { xs: \"0.75rem\", sm: \"0.875rem\" },\n                  }}\n                >\n                  {Math.round(scale * 100)}%\n                </Typography>\n                <Tooltip title=\"Zoom in\">\n                  <IconButton\n                    onClick={() => handleZoomButton(\"in\")}\n                    size=\"small\"\n                    aria-label=\"Zoom in board\"\n                    sx={{ ...BoardStyles.boardZoomButton, pointerEvents: \"auto\" }}\n                    disabled={isOverlayOpen}\n                  >\n                    <Add fontSize=\"small\" />\n                  </IconButton>\n                </Tooltip>\n              </>\n            )}\n          </Box>\n        </Box>\n\n        {editModalState.tweet && (\n          <Dialog\n            open\n            onClose={() => dispatchEditModal({ type: \"CLEAR_EDIT_MODAL\" })}\n            maxWidth=\"sm\"\n            fullWidth\n            sx={{ ...BoardStyles.boardEditDialog, zIndex: Z_INDEX.MODAL }}\n            onKeyDown={(e) => e.key === \"Escape\" && !isSaving && dispatchEditModal({ type: \"CLEAR_EDIT_MODAL\" })}\n            aria-describedby=\"edit-tweet-description\"\n            disableEscapeKeyDown={isSaving}\n          >\n            <DialogTitle sx={BoardStyles.boardEditDialogTitle}>Edit Tweet</DialogTitle>\n            <DialogContent sx={BoardStyles.boardEditDialogContent}>\n              <Typography id=\"edit-tweet-description\" sx={{ display: \"none\" }}>\n                Edit the content, status, or board of the tweet.\n              </Typography>\n              <TextField\n                multiline\n                fullWidth\n                label=\"Tweet Content\"\n                value={editModalState.tweet.content?.value || \"\"}\n                onChange={(e) => dispatchEditModal({ type: \"UPDATE_EDIT_CONTENT\", value: e.target.value })}\n                minRows={3}\n                inputProps={{ maxLength: MAX_TWEET_LENGTH }}\n                error={(editModalState.tweet.content?.value?.length || 0) > MAX_TWEET_LENGTH}\n                helperText={\n                  (editModalState.tweet.content?.value?.length || 0) > MAX_TWEET_LENGTH\n                    ? `Tweet exceeds ${MAX_TWEET_LENGTH} characters`\n                    : `${editModalState.tweet.content?.value?.length || 0}/${MAX_TWEET_LENGTH}`\n                }\n                sx={BoardStyles.boardEditTextField}\n                aria-label=\"Tweet content\"\n                autoFocus\n              />\n              {permissions.canChangeStatus && (\n                <FormControl fullWidth sx={BoardStyles.boardEditFormControl}>\n                  <InputLabel id=\"status-label\">Tweet Status</InputLabel>\n                  <Select\n                    labelId=\"status-label\"\n                    value={editModalState.newStatus}\n                    label=\"Tweet Status\"\n                    onChange={(e) => dispatchEditModal({ type: \"SET_NEW_STATUS\", status: e.target.value })}\n                    aria-label=\"Tweet status\"\n                  >\n                    {[\"pending\", \"approved\", \"rejected\", \"announcement\", \"reminder\", \"pinned\", \"archived\"].map(\n                      (status) => (\n                        <MenuItem key={status} value={status}>\n                          {status.charAt(0).toUpperCase() + status.slice(1)}\n                        </MenuItem>\n                      )\n                    )}\n                  </Select>\n                </FormControl>\n              )}\n              {permissions.canMoveBoard && boards.length > 0 && (\n                <FormControl fullWidth sx={BoardStyles.boardEditFormControl}>\n                  <InputLabel id=\"board-label\">Move to Board</InputLabel>\n                  <Select\n                    labelId=\"board-label\"\n                    value={editModalState.selectedBoardId}\n                    label=\"Move to Board\"\n                    onChange={(e) => dispatchEditModal({ type: \"SET_SELECTED_BOARD\", boardId: e.target.value })}\n                    aria-label=\"Move to board\"\n                  >\n                    {boards.map((board) => (\n                      <MenuItem key={board.board_id} value={board.board_id}>\n                        {board.title || board.name || \"Untitled Board\"}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              )}\n            </DialogContent>\n            <DialogActions sx={{ p: 2, gap: 1 }}>\n              <Button\n                onClick={() => dispatchEditModal({ type: \"CLEAR_EDIT_MODAL\" })}\n                sx={BoardStyles.boardEditCancelButton}\n                aria-label=\"Cancel edit tweet\"\n                disabled={isSaving}\n              >\n                Cancel\n              </Button>\n              <Button\n                onClick={handleSaveEditedTweet}\n                variant=\"contained\"\n                disabled={\n                  isSaving ||\n                  !editModalState.tweet.content?.value?.trim() ||\n                  (editModalState.tweet.content?.value?.length || 0) > MAX_TWEET_LENGTH\n                }\n                sx={BoardStyles.boardEditSaveButton}\n                aria-label=\"Save edited tweet\"\n                startIcon={isSaving ? <CircularProgress size={20} /> : null}\n              >\n                {isSaving ? \"Saving...\" : \"Save\"}\n              </Button>\n            </DialogActions>\n          </Dialog>\n        )}\n      </Box>\n    </motion.div>\n  );\n};\n\nBoard.propTypes = {\n  boardId: PropTypes.string.isRequired,\n  boardTitle: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  currentUser: PropTypes.shape({\n    anonymous_id: PropTypes.string,\n    username: PropTypes.string,\n  }).isRequired,\n  userRole: PropTypes.string.isRequired,\n  onLogout: PropTypes.func.isRequired,\n  availableBoards: PropTypes.arrayOf(\n    PropTypes.shape({\n      board_id: PropTypes.string.isRequired,\n      title: PropTypes.string,\n      name: PropTypes.string,\n    })\n  ),\n};\n\nBoard.defaultProps = {\n  availableBoards: [],\n};\n\nconst areEqual = (prevProps, nextProps) => {\n  return (\n    prevProps.boardId === nextProps.boardId &&\n    prevProps.boardTitle === nextProps.boardTitle &&\n    prevProps.token === nextProps.token &&\n    prevProps.currentUser.anonymous_id === nextProps.currentUser.anonymous_id &&\n    prevProps.currentUser.username === nextProps.currentUser.username &&\n    prevProps.userRole === nextProps.userRole &&\n    prevProps.onLogout === nextProps.onLogout &&\n    prevProps.availableBoards.length === nextProps.availableBoards.length &&\n    prevProps.availableBoards.every(\n      (board, i) =>\n        board.board_id === nextProps.availableBoards[i]?.board_id &&\n        board.title === nextProps.availableBoards[i]?.title &&\n        board.name === nextProps.availableBoards[i]?.name\n    )\n  );\n};\n\nexport default memo(Board, areEqual);","/**\n * @module useWebSocket\n * @description Custom hook to manage WebSocket connection for real-time updates on a board.\n */\nimport { useEffect, useRef } from \"react\";\nimport io from \"socket.io-client\";\nimport config from \"../config\";\n\nexport const useWebSocket = (\n  token,\n  boardId,\n  currentUser,\n  setTweets,\n  setOnlineUsers,\n  onLogout,\n  navigate,\n  showNotification\n) => {\n  const socketRef = useRef(null);\n\n  useEffect(() => {\n    if (!token || !boardId || !currentUser?.anonymous_id) return;\n\n    // Initialize WebSocket connection to the 'tweets' namespace\n    const socket = io(`${config.REACT_APP_WS_URL}/tweets`, {\n      query: { token, boardId },\n      reconnection: true,\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000,\n    });\n    socketRef.current = socket;\n\n    // Handle connection errors\n    socket.on(\"connect_error\", (err) => {\n      if (err.message.includes(\"Authentication\")) {\n        showNotification(\"Session expired. Please log in again.\", \"error\");\n        onLogout();\n        navigate(\"/login\");\n      } else {\n        showNotification(\"Failed to connect to real-time updates.\", \"error\");\n      }\n    });\n\n    // Cleanup on unmount\n    return () => {\n      socket.disconnect();\n    };\n  }, [token, boardId, currentUser?.anonymous_id, onLogout, navigate, showNotification]);\n\n  return socketRef;\n};","import React, { useEffect, useState } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { Typography } from \"@mui/material\";\nimport { formatPoints } from \"../../utils/formatPoints\";\n\nconst AnimatedPoints = ({ points }) => {\n  const [prevPoints, setPrevPoints] = useState(points);\n  const [animate, setAnimate] = useState(false);\n\n  useEffect(() => {\n    if (points !== prevPoints) {\n      setAnimate(true);\n      setPrevPoints(points);\n      // Прибрати анімацію через 500 мс\n      const timer = setTimeout(() => setAnimate(false), 500);\n      return () => clearTimeout(timer);\n    }\n  }, [points, prevPoints]);\n\n  return (\n    <motion.div\n      animate={animate ? { scale: [1, 1.2, 1] } : {}}\n      transition={{ duration: 0.5 }}\n    >\n      <Typography variant=\"body2\">\n        {formatPoints(points)}\n      </Typography>\n    </motion.div>\n  );\n};\n\nexport default AnimatedPoints;\n","import React from \"react\";\nimport { motion } from \"framer-motion\";\nimport { IconButton } from \"@mui/material\";\nimport { Toll } from \"@mui/icons-material\";\n\nconst PointsDeductionAnimation = ({}) => {\n  return (\n    <motion.div\n      initial={{ opacity: 1, y: 0, scale: 1 }}\n      animate={{ opacity: 0, y: -30, scale: 1.5 }}\n      transition={{ duration: 0.7 }}\n      style={{\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n      }}\n    >\n      <IconButton size=\"small\" aria-label=\"Points Deduction\">\n        <Toll sx={{ color: \"text.primary\" }} />\n      </IconButton>\n    </motion.div>\n  );\n};\n\nexport default PointsDeductionAnimation;\n","import { useState, useCallback, useEffect, useMemo, useRef } from 'react';\nimport {\n  fetchPoints,\n  transferPoints,\n  fetchTopContributors,\n  updatePoints,\n} from '../api/pointsApi';\n\n// Constants for error messages\nconst ERROR_MESSAGES = {\n  AUTH_REQUIRED: 'Authentication required.',\n  USER_ID_MISSING: 'User ID is missing.',\n  AMOUNT_MISSING: 'Points amount is missing.',\n  REASON_MISSING: 'Reason for points update is missing.',\n  DATA_MISSING: 'Required data is missing.',\n  GENERIC: 'An error occurred.',\n};\n\n// Constants for configuration\nconst MAX_CACHE_SIZE = 10;\nconst DEBOUNCE_MS = 300;\nconst CACHE_VERSION = 'v1';\n\n// LRU Cache implementation\nclass LRUCache {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.cache = new Map();\n  }\n\n  get(key) {\n    if (!this.cache.has(key)) return undefined;\n    const value = this.cache.get(key);\n    this.cache.delete(key);\n    this.cache.set(key, value);\n    return value;\n  }\n\n  set(key, value) {\n    if (this.cache.size >= this.capacity) {\n      const firstKey = this.cache.keys().next().value;\n      this.cache.delete(firstKey);\n    }\n    this.cache.set(key, value);\n  }\n\n  has(key) {\n    return this.cache.has(key);\n  }\n\n  clear() {\n    this.cache.clear();\n  }\n}\n\nconst pointsCache = new LRUCache(MAX_CACHE_SIZE);\n\n/**\n * Hook for managing points and top contributors\n * @param {string|null} token - Authorization token\n * @param {function} onLogout - Function to handle logout\n * @param {function} navigate - Function for navigation\n * @returns {object} Object with states and methods for points operations\n */\nexport const usePoints = (token, onLogout, navigate) => {\n  const [pointsData, setPointsData] = useState(null);\n  const [topContributors, setTopContributors] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const debounceTimer = useRef(null);\n  const abortControllers = useRef(new Set());\n\n  // Centralized error handling\n  const handleError = useCallback(\n    (err, customMessage) => {\n      if (err.name === 'AbortError') return null;\n      const status = err.status || 500;\n      if (status === 401 || status === 403) {\n        onLogout('Your session has expired. Please log in again.');\n        navigate('/login');\n      }\n      setError(customMessage || err.message || ERROR_MESSAGES.GENERIC);\n      return null;\n    },\n    [onLogout, navigate]\n  );\n\n  // Debounce utility\n  const debounce = useCallback((fn, ms) => {\n    return (...args) => {\n      if (debounceTimer.current) {\n        clearTimeout(debounceTimer.current);\n      }\n      return new Promise((resolve) => {\n        debounceTimer.current = setTimeout(async () => {\n          const result = await fn(...args);\n          resolve(result);\n        }, ms);\n      });\n    };\n  }, []);\n\n  // Normalize top contributors data\n  const normalizeContributors = useCallback((contributors = []) => {\n    return contributors.map((contributor) => ({\n      member_id: contributor.member_id || contributor.anonymous_id || '',\n      username: contributor.username || 'Unknown',\n      total_points: contributor.total_points || 0,\n      avatar: contributor.avatar || null,\n      anonymous_id: contributor.anonymous_id || contributor.member_id || '',\n    }));\n  }, []);\n\n  // Reset hook state\n  const resetState = useCallback(() => {\n    setPointsData(null);\n    setTopContributors([]);\n    setError(null);\n    pointsCache.clear();\n  }, []);\n\n  // Create AbortController with cleanup\n  const createAbortController = useCallback(() => {\n    const controller = new AbortController();\n    abortControllers.current.add(controller);\n    return controller;\n  }, []);\n\n  // Cleanup AbortControllers\n  const cleanupAbortControllers = useCallback(() => {\n    abortControllers.current.forEach((controller) => controller.abort());\n    abortControllers.current.clear();\n  }, []);\n\n  // Fetch points data with caching\n  const fetchPointsData = useCallback(\n    async (signal) => {\n      if (!token) {\n        setError(ERROR_MESSAGES.AUTH_REQUIRED);\n        return null;\n      }\n\n      const cacheKey = `${CACHE_VERSION}:points`;\n      const cachedData = pointsCache.get(cacheKey);\n      if (cachedData) {\n        setPointsData(cachedData);\n        return cachedData;\n      }\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        const data = await fetchPoints(token, signal);\n        if (!data) throw new Error('No points data received');\n        setPointsData(data);\n        pointsCache.set(cacheKey, data);\n        return data;\n      } catch (err) {\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [token, handleError]\n  );\n\n  const debouncedFetchPointsData = useMemo(\n    () => debounce(fetchPointsData, DEBOUNCE_MS),\n    [fetchPointsData]\n  );\n\n  // Fetch top contributors with caching\n  const fetchTopContributorsList = useCallback(\n    async (limit = 10, signal) => {\n      if (!token) {\n        setError(ERROR_MESSAGES.AUTH_REQUIRED);\n        return null;\n      }\n\n      const cacheKey = `${CACHE_VERSION}:topContributors:${limit}`;\n      const cachedData = pointsCache.get(cacheKey);\n      if (cachedData) {\n        setTopContributors(normalizeContributors(cachedData));\n        return cachedData;\n      }\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        const data = await fetchTopContributors(token, limit, signal);\n        if (!data) throw new Error('No contributors data received');\n        setTopContributors(normalizeContributors(data));\n        pointsCache.set(cacheKey, data);\n        return data;\n      } catch (err) {\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [token, handleError, normalizeContributors]\n  );\n\n  const debouncedFetchTopContributorsList = useMemo(\n    () => debounce(fetchTopContributorsList, DEBOUNCE_MS),\n    [fetchTopContributorsList]\n  );\n\n  // Transfer points to another user\n  const transferUserPoints = useCallback(\n    async (recipientId, amount) => {\n      if (!token || !recipientId?.trim() || !amount) {\n        setError(\n          !token\n            ? ERROR_MESSAGES.AUTH_REQUIRED\n            : !recipientId\n            ? ERROR_MESSAGES.USER_ID_MISSING\n            : ERROR_MESSAGES.AMOUNT_MISSING\n        );\n        return null;\n      }\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        const data = await transferPoints(recipientId, amount, token);\n        if (!data) throw new Error('Failed to transfer points');\n        setPointsData((prev) => ({\n          ...prev,\n          total_points: data.sender_points,\n          donated_points: (prev?.donated_points || 0) + amount,\n        }));\n        pointsCache.clear();\n        return data;\n      } catch (err) {\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [token, handleError]\n  );\n\n  // Update points for a user\n  const updatePointsData = useCallback(\n    async (targetUserId, amount, reason) => {\n      if (!token || !targetUserId?.trim() || !amount || !reason?.trim()) {\n        setError(\n          !token\n            ? ERROR_MESSAGES.AUTH_REQUIRED\n            : !targetUserId\n            ? ERROR_MESSAGES.USER_ID_MISSING\n            : !amount\n            ? ERROR_MESSAGES.AMOUNT_MISSING\n            : ERROR_MESSAGES.REASON_MISSING\n        );\n        return null;\n      }\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        const data = await updatePoints(targetUserId, amount, reason, token);\n        if (!data) throw new Error('Failed to update points');\n        pointsCache.clear();\n        return data;\n      } catch (err) {\n        return handleError(err, ERROR_MESSAGES.GENERIC);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [token, handleError]\n  );\n\n  // Handle token change and initial fetch\n  useEffect(() => {\n    if (!token) {\n      cleanupAbortControllers();\n      resetState();\n      return;\n    }\n\n    const controller = createAbortController();\n    debouncedFetchPointsData(controller.signal).catch((err) => {\n      if (err.name !== 'AbortError') {\n        console.error('Initial fetch points error:', err);\n      }\n    });\n\n    return () => {\n      cleanupAbortControllers();\n      if (debounceTimer.current) {\n        clearTimeout(debounceTimer.current);\n      }\n    };\n  }, [token, debouncedFetchPointsData, resetState, createAbortController, cleanupAbortControllers]);\n\n  // Memoized return object\n  return useMemo(\n    () => ({\n      pointsData,\n      topContributors,\n      loading,\n      error,\n      fetchPointsData: debouncedFetchPointsData,\n      fetchTopContributorsList: debouncedFetchTopContributorsList,\n      transferUserPoints,\n      updatePointsData,\n      resetState,\n    }),\n    [\n      pointsData,\n      topContributors,\n      loading,\n      error,\n      debouncedFetchPointsData,\n      debouncedFetchTopContributorsList,\n      transferUserPoints,\n      updatePointsData,\n      resetState,\n    ]\n  );\n};\n\nexport default usePoints;","import api from \"./apiClient\";\nimport { handleApiError } from \"./apiClient\";\n\n// Fetch user's points data\nexport const fetchPoints = async (token, signal) => {\n  try {\n    const response = await api.get(`/api/v1/points`, {\n      headers: { Authorization: `Bearer ${token}` },\n      signal,\n    });\n    return response.data.content || {};\n  } catch (err) {\n    return handleApiError(err);\n  }\n};\n\n// Transfer points to another user\nexport const transferPoints = async (recipientId, amount, token) => {\n  if (!recipientId || !amount) throw new Error(\"Recipient ID and amount are required\");\n  try {\n    const response = await api.post(\n      `/api/v1/points/transfer`,\n      { recipientId, amount },\n      {\n        headers: { Authorization: `Bearer ${token}` },\n      }\n    );\n    return response.data.content || {};\n  } catch (err) {\n    return handleApiError(err);\n  }\n};\n\n// Fetch top contributors\nexport const fetchTopContributors = async (token, limit = 10, signal) => {\n  try {\n    const response = await api.get(`/api/v1/points/top`, {\n      headers: { Authorization: `Bearer ${token}` },\n      params: { limit },\n      signal,\n    });\n    return response.data.content || [];\n  } catch (err) {\n    return handleApiError(err);\n  }\n};\n\n// Update points (admin only)\nexport const updatePoints = async (targetUserId, amount, reason, token) => {\n  if (!targetUserId || !amount || !reason) throw new Error(\"Target user ID, amount, and reason are required\");\n  try {\n    const response = await api.put(\n      `/api/v1/points/update`,\n      { targetUserId, amount, reason },\n      {\n        headers: { Authorization: `Bearer ${token}` },\n      }\n    );\n    return response.data.content || {};\n  } catch (err) {\n    return handleApiError(err);\n  }\n};","import React, { useRef, useState, useEffect, useCallback, useMemo, memo } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport {\n  Box,\n  IconButton,\n  Menu,\n  MenuItem,\n  Tooltip,\n  Typography,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  useTheme,\n  Button,\n  Badge,\n  Skeleton,\n} from '@mui/material';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  MoreVert,\n  Edit,\n  Share,\n  Favorite,\n  FavoriteBorder,\n  Link,\n  People,\n  Public,\n  Lock,\n  Delete,\n  Toll,\n} from '@mui/icons-material';\nimport PropTypes from 'prop-types';\nimport LoadingSpinner from '../components/Layout/LoadingSpinner';\nimport Board from '../components/social-features/Board/Board';\nimport useAuth from '../hooks/useAuth';\nimport BoardFormDialog from '../components/Dialogs/BoardFormDialog';\nimport MemberFormDialog from '../components/Dialogs/MemberFormDialog';\nimport DeleteConfirmationDialog from '../components/Dialogs/DeleteConfirmationDialog';\nimport { actionButtonStyles, cancelButtonStyle } from '../styles/BaseStyles';\nimport AnimatedPoints from '../components/AnimatedPoints/AnimatedPoints';\nimport PointsDeductionAnimation from '../components/PointsDeductionAnimation/PointsDeductionAnimation';\nimport { useBoards } from '../hooks/useBoards';\nimport { usePoints } from '../hooks/usePoints';\nimport { useGates } from '../hooks/useGates';\nimport { useClasses } from '../hooks/useClasses';\nimport { useNotification } from '../context/NotificationContext';\nimport { debounce } from 'lodash';\n\n// Animation variants for buttons\nconst buttonVariants = {\n  initial: { opacity: 0, scale: 0.8 },\n  animate: { opacity: 1, scale: 1, transition: { duration: 0.2 } },\n  exit: { opacity: 0, scale: 0.8, transition: { duration: 0.2 } },\n};\n\nconst BoardPage = memo(() => {\n  const navigate = useNavigate();\n  const { showNotification } = useNotification();\n  const theme = useTheme();\n  const { board_id } = useParams();\n  const { token, authData, handleLogout, isAuthenticated, loading: authLoading } = useAuth(navigate);\n  const pointsRef = useRef(null);\n  const [pointsVisible, setPointsVisible] = useState(false);\n  const [editingBoard, setEditingBoard] = useState(null);\n  const [membersDialogOpen, setMembersDialogOpen] = useState(false);\n  const [shareDialogOpen, setShareDialogOpen] = useState(false);\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [inviteLink, setInviteLink] = useState('');\n  const [pointsSpent, setPointsSpent] = useState(0);\n  const isMounted = useRef(true);\n\n  // Prevent scrolling and pull-to-refresh\n  useEffect(() => {\n    // Apply styles to html and body\n    document.documentElement.style.overflow = 'hidden';\n    document.body.style.overflow = 'hidden';\n    document.body.style.touchAction = 'none';\n    document.body.style.overscrollBehavior = 'none';\n\n    // Prevent scrolling events\n    const preventScroll = (e) => {\n      e.preventDefault();\n    };\n\n    // Add event listeners\n    window.addEventListener('wheel', preventScroll, { passive: false });\n    window.addEventListener('touchmove', preventScroll, { passive: false });\n    window.addEventListener('keydown', (e) => {\n      if (['ArrowUp', 'ArrowDown', 'Space'].includes(e.key)) {\n        e.preventDefault();\n      }\n    });\n\n    return () => {\n      // Cleanup styles\n      document.documentElement.style.overflow = '';\n      document.body.style.overflow = '';\n      document.body.style.touchAction = '';\n      document.body.style.overscrollBehavior = '';\n\n      // Remove event listeners\n      window.removeEventListener('wheel', preventScroll);\n      window.removeEventListener('touchmove', preventScroll);\n      window.removeEventListener('keydown', preventScroll);\n    };\n  }, []);\n\n  // Hooks\n  const {\n    boardItem: boardData,\n    members,\n    loading: boardLoading,\n    error: boardError,\n    fetchBoard,\n    updateExistingBoard,\n    toggleFavoriteBoard,\n    deleteExistingBoard,\n    addMemberToBoard,\n    removeMemberFromBoard,\n    updateMemberRole,\n    clearBoardTweets,\n  } = useBoards(token, handleLogout, navigate);\n\n  const {\n    pointsData,\n    loading: pointsLoading,\n    fetchPointsData,\n  } = usePoints(token, handleLogout, navigate);\n\n  const {\n    gates,\n    loading: gatesLoading,\n    fetchGatesList,\n  } = useGates(token, handleLogout, navigate);\n\n  const {\n    classes,\n    loading: classesLoading,\n    fetchClassesList,\n  } = useClasses(token, handleLogout, navigate);\n\n  // Memoized derived state\n  const userRole = useMemo(\n    () =>\n      boardData && authData\n        ? boardData.creator_id === authData?.anonymous_id\n          ? 'owner'\n          : boardData.is_public\n          ? 'viewer'\n          : members.find((m) => m.anonymous_id === authData?.anonymous_id)?.role || 'viewer'\n        : 'viewer',\n    [boardData, authData, members]\n  );\n\n  const isFavorited = useMemo(\n    () => boardData?.favorited_by?.some((user) => user.anonymous_id === authData?.anonymous_id) ?? false,\n    [boardData?.favorited_by, authData?.anonymous_id]\n  );\n\n  const boardVisibility = useMemo(\n    () => boardData?.visibility ?? (boardData?.is_public ? 'public' : 'private'),\n    [boardData?.visibility, boardData?.is_public]\n  );\n\n  // Debounced API calls\n  const debouncedFetchBoard = useMemo(\n    () =>\n      debounce(async (id, signal) => {\n        if (!isMounted.current) return;\n        try {\n          await fetchBoard(id, signal);\n        } catch (err) {\n          if (err.name !== 'AbortError') {\n            showNotification(err.message || 'Failed to fetch board', 'error');\n          }\n        }\n      }, 300),\n    [fetchBoard, showNotification]\n  );\n\n  const debouncedFetchPoints = useMemo(\n    () =>\n      debounce(async (signal) => {\n        if (!isMounted.current) return;\n        try {\n          await fetchPointsData(signal);\n        } catch (err) {\n          if (err.name !== 'AbortError') {\n            showNotification(err.message || 'Failed to fetch points', 'error');\n          }\n        }\n      }, 300),\n    [fetchPointsData, showNotification]\n  );\n\n  // Fetch board data\n  useEffect(() => {\n    if (!token || !board_id || !isAuthenticated) return;\n\n    const controller = new AbortController();\n    debouncedFetchBoard(board_id, controller.signal);\n\n    return () => {\n      controller.abort();\n      debouncedFetchBoard.cancel();\n      isMounted.current = false;\n    };\n  }, [token, board_id, isAuthenticated, debouncedFetchBoard]);\n\n  useEffect(() => {\n    if (!token || !isAuthenticated || !pointsVisible) return;\n\n    const controller = new AbortController();\n    debouncedFetchPoints(controller.signal);\n\n    return () => {\n      controller.abort();\n      debouncedFetchPoints.cancel();\n    };\n  }, [token, isAuthenticated, pointsVisible, debouncedFetchPoints]);\n\n  // Points visibility observer\n  useEffect(() => {\n    if (!pointsRef.current) return;\n\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting && !pointsVisible) {\n          setPointsVisible(true);\n        }\n      },\n      { threshold: 0.1 }\n    );\n\n    observer.observe(pointsRef.current);\n    return () => observer.disconnect();\n  }, []);\n\n  // Fetch gates and classes only when editing\n  useEffect(() => {\n    if (!editingBoard || !token || !isAuthenticated || (userRole !== 'owner' && userRole !== 'admin')) return;\n\n    const controller = new AbortController();\n    Promise.all([\n      fetchGatesList({ visibility: 'public' }, controller.signal),\n      fetchClassesList({}, controller.signal),\n    ]).catch((err) => {\n      if (err.name !== 'AbortError') {\n        showNotification(err.message || 'Failed to load gates or classes', 'error');\n      }\n    });\n\n    return () => controller.abort();\n  }, [editingBoard, token, isAuthenticated, userRole, fetchGatesList, fetchClassesList, showNotification]);\n\n  // Handle board errors\n  useEffect(() => {\n    if (boardError) {\n      showNotification(boardError || 'An error occurred', 'error');\n      if (boardError?.includes('Board not found')) {\n        setTimeout(() => navigate('/boards'), 2000);\n      }\n    }\n  }, [boardError, showNotification, navigate]);\n\n  // Track points changes\n  useEffect(() => {\n    if (!pointsData?.total_points) return;\n\n    const prevPoints = pointsData.prev_points || pointsData.total_points;\n    if (pointsData.total_points < prevPoints) {\n      setPointsSpent(prevPoints - pointsData.total_points);\n      const timeout = setTimeout(() => setPointsSpent(0), 700);\n      return () => clearTimeout(timeout);\n    }\n  }, [pointsData?.total_points]);\n\n  // Handlers\n  const handleUpdateBoard = useCallback(async () => {\n    if (!editingBoard || (userRole !== 'owner' && userRole !== 'admin')) return;\n\n    const validationError = validateBoardData(editingBoard);\n    if (validationError) {\n      showNotification(validationError, 'error');\n      return;\n    }\n\n    try {\n      await updateExistingBoard(editingBoard.board_id, {\n        name: editingBoard.name,\n        description: editingBoard.description,\n        is_public: editingBoard.visibility === 'public',\n        visibility: editingBoard.visibility,\n        type: editingBoard.type,\n        gate_id: editingBoard.gate_id || null,\n        class_id: editingBoard.class_id || null,\n        settings: editingBoard.settings,\n        tags: editingBoard.tags,\n      });\n      showNotification('Board updated', 'success');\n      setEditingBoard(null);\n    } catch (err) {\n      showNotification(err.message || 'Failed to update board', 'error');\n    }\n  }, [editingBoard, userRole, updateExistingBoard, showNotification]);\n\n  const handleFavorite = useCallback(async () => {\n    if (!boardData) return;\n\n    try {\n      await toggleFavoriteBoard(board_id, isFavorited);\n      showNotification(`Board ${isFavorited ? 'unfavorited' : 'favorited'}`, 'success');\n    } catch (err) {\n      showNotification('Failed to toggle favorite', 'error');\n    }\n  }, [boardData, board_id, isFavorited, toggleFavoriteBoard, showNotification]);\n\n  const handleEdit = useCallback(() => {\n    if (userRole !== 'owner' && userRole !== 'admin' || !boardData) return;\n    setEditingBoard({\n      board_id: boardData.board_id,\n      name: boardData.name || '',\n      description: boardData.description || '',\n      is_public: boardData.is_public || false,\n      visibility: boardData.visibility || (boardData.is_public ? 'public' : 'private'),\n      type: boardData.type || 'personal',\n      gate_id: boardData.gate_id || '',\n      class_id: boardData.class_id || '',\n      settings: {\n        max_tweets: boardData.settings?.max_tweets || 100,\n        tweet_cost: boardData.settings?.tweet_cost || 1,\n        max_members: boardData.settings?.max_members || 50,\n        favorite_cost: boardData.settings?.favorite_cost || 1,\n        points_to_creator: boardData.settings?.points_to_creator || 1,\n        allow_invites: boardData.settings?.allow_invites !== false,\n        require_approval: boardData.settings?.require_approval || false,\n        ai_moderation_enabled: boardData.settings?.ai_moderation_enabled !== false,\n        auto_archive_after: boardData.settings?.auto_archive_after || 30,\n      },\n      tags: boardData.tags || [],\n      current_user: { anonymous_id: authData?.anonymous_id, role: userRole },\n    });\n  }, [boardData, authData?.anonymous_id, userRole]);\n\n  const handleManageMembers = useCallback(() => {\n    if (userRole !== 'owner' && userRole !== 'admin') return;\n    setMembersDialogOpen(true);\n  }, [userRole]);\n\n  const handleShare = useCallback(() => {\n    setInviteLink(`${window.location.origin}/board/${board_id}`);\n    setShareDialogOpen(true);\n  }, [board_id]);\n\n  const handleOpenDeleteDialog = useCallback(() => {\n    if (userRole !== 'owner') return;\n    setDeleteDialogOpen(true);\n  }, [userRole]);\n\n  const handleDelete = useCallback(async () => {\n    try {\n      await deleteExistingBoard(board_id);\n      showNotification('Board deleted successfully', 'success');\n      navigate('/boards');\n    } catch (err) {\n      showNotification(err.message || 'Failed to delete board', 'error');\n    } finally {\n      setDeleteDialogOpen(false);\n    }\n  }, [board_id, deleteExistingBoard, navigate, showNotification]);\n\n  const handleCopyLink = useCallback(async () => {\n    if (!inviteLink) {\n      showNotification('Invalid share link', 'error');\n      return;\n    }\n    try {\n      await navigator.clipboard.writeText(inviteLink);\n      showNotification('Link copied successfully', 'success');\n    } catch (err) {\n      showNotification(err.message || 'Failed to copy link', 'error');\n    } finally {\n      setShareDialogOpen(false);\n    }\n  }, [inviteLink, showNotification]);\n\n  const handleMenuOpen = useCallback((event) => setAnchorEl(event.currentTarget), []);\n  const handleMenuClose = useCallback(() => setAnchorEl(null), []);\n\n  const validateBoardData = useCallback(\n    (data) => {\n      if (!data?.name?.trim()) return 'Board name is required';\n      const settings = data.settings || {};\n      if (settings.max_tweets < 1 || settings.max_tweets > 10000) return 'Max tweets must be 1-10000';\n      if (settings.tweet_cost < 0) return 'Tweet cost must be non-negative';\n      if (settings.favorite_cost < 0) return 'Favorite cost must be non-negative';\n      if (settings.points_to_creator < 0 || settings.points_to_creator > 100)\n        return 'Points to creator must be 0-100';\n      if (settings.max_members < 1 || settings.max_members > 10000) return 'Max members must be 1-10000';\n      if (data.visibility === 'public' && !data.gate_id && !data.class_id && gates?.length > 0) {\n        return 'Public boards require a gate or class';\n      }\n      return null;\n    },\n    [gates]\n  );\n\n  const childBoardMenuItems = useMemo(() => {\n    const uniqueChildIds = [...new Set(boardData?.child_board_ids?.filter((id) => id) || [])];\n    return uniqueChildIds.map((childId) => (\n      <MenuItem\n        key={childId}\n        onClick={() => {\n          navigate(`/board/${childId}`);\n          handleMenuClose();\n        }}\n        aria-label={`Go to child board ${childId.slice(0, 8)}`}\n      >\n        Child Board {childId.slice(0, 8)}\n      </MenuItem>\n    ));\n  }, [boardData?.child_board_ids, navigate, handleMenuClose]);\n\n  if (authLoading) {\n    return <LoadingSpinner />;\n  }\n\n  return (\n    <Box\n      sx={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        overflow: 'hidden',\n        touchAction: 'none',\n        overscrollBehavior: 'none',\n        display: 'flex',\n        flexDirection: 'column',\n      }}\n      aria-label=\"Board page\"\n    >\n      <Box\n        sx={{\n          position: 'absolute',\n          top: 16,\n          right: 0,\n          display: 'flex',\n          gap: 0.3,\n          flexWrap: 'wrap',\n          justifyContent: 'flex-end',\n          zIndex: 100,\n          '@media (max-width: 600px)': { transform: 'scale(0.8)' },\n        }}\n      >\n        <AnimatePresence>\n          {boardLoading ? (\n            <Skeleton variant=\"circular\" width={40} height={40} />\n          ) : (\n            <>\n              <motion.div variants={buttonVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n                <Tooltip title={`Board visibility: ${boardVisibility}`}>\n                  <IconButton aria-label={`Board visibility: ${boardVisibility}`}>\n                    {boardVisibility === 'public' ? <Public /> : <Lock />}\n                  </IconButton>\n                </Tooltip>\n              </motion.div>\n              <motion.div variants={buttonVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n                <Tooltip title={isFavorited ? 'Unfavorite Board' : 'Favorite Board'}>\n                  <IconButton\n                    onClick={handleFavorite}\n                    aria-label={isFavorited ? 'Unfavorite board' : 'Favorite board'}\n                  >\n                    {isFavorited ? <Favorite color=\"error\" /> : <FavoriteBorder />}\n                  </IconButton>\n                </Tooltip>\n              </motion.div>\n              <motion.div variants={buttonVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n                <Tooltip title=\"Share Board\">\n                  <IconButton onClick={handleShare} aria-label=\"Share board\">\n                    <Share />\n                  </IconButton>\n                </Tooltip>\n              </motion.div>\n              {(userRole === 'owner' || userRole === 'admin') && (\n                <>\n                  <motion.div variants={buttonVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n                    <Tooltip title=\"Manage Members\">\n                      <IconButton\n                        onClick={handleManageMembers}\n                        aria-label={`Manage members (current count: ${members?.length || 0})`}\n                      >\n                        <Badge badgeContent={members?.length || 0} color=\"default\">\n                          <People />\n                        </Badge>\n                      </IconButton>\n                    </Tooltip>\n                  </motion.div>\n                  <motion.div variants={buttonVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n                    <Tooltip title=\"Edit Board\">\n                      <IconButton onClick={handleEdit} aria-label=\"Edit board\">\n                        <Edit />\n                      </IconButton>\n                    </Tooltip>\n                  </motion.div>\n                </>\n              )}\n              {userRole === 'owner' && (\n                <motion.div variants={buttonVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n                  <Tooltip title=\"Delete Board\">\n                    <IconButton onClick={handleOpenDeleteDialog} aria-label=\"Delete board\">\n                      <Delete color=\"error\" />\n                    </IconButton>\n                  </Tooltip>\n                </motion.div>\n              )}\n              {boardData?.child_board_ids?.length > 0 && (\n                <motion.div variants={buttonVariants} initial=\"initial\" animate=\"animate\" exit=\"exit\">\n                  <Tooltip title=\"Child Boards\">\n                    <IconButton\n                      aria-controls=\"board-menu\"\n                      aria-haspopup=\"true\"\n                      onClick={handleMenuOpen}\n                      sx={{ bgcolor: 'background.paper', '&:hover': { bgcolor: 'action.hover' } }}\n                      aria-label=\"Open child boards menu\"\n                    >\n                      <MoreVert />\n                    </IconButton>\n                  </Tooltip>\n                </motion.div>\n              )}\n            </>\n          )}\n        </AnimatePresence>\n        <Menu\n          id=\"board-menu\"\n          anchorEl={anchorEl}\n          open={Boolean(anchorEl)}\n          onClose={handleMenuClose}\n          slotProps={{\n            paper: {\n              sx: { borderRadius: theme.shape.borderRadiusMedium },\n            },\n          }}\n        >\n          {childBoardMenuItems}\n        </Menu>\n      </Box>\n\n      <Box\n        ref={pointsRef}\n        sx={{\n          position: 'absolute',\n          bottom: 16,\n          left: 16,\n          zIndex: 100,\n          display: 'flex',\n          alignItems: 'center',\n          gap: 1,\n          '@media (max-width: 600px)': { transform: 'scale(0.8)' },\n        }}\n      >\n        <AnimatePresence>\n          <motion.div\n            key=\"points\"\n            initial={{ opacity: 0, scale: 0.8 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.8 }}\n            transition={{ duration: 0.2 }}\n          >\n            <Tooltip title=\"Available points\">\n              <IconButton\n                size=\"small\"\n                aria-label={`Available points: ${pointsData?.total_points || 0}`}\n              >\n                <Toll />\n              </IconButton>\n            </Tooltip>\n            <AnimatedPoints points={pointsData?.total_points || 0} />\n            {pointsSpent > 0 && <PointsDeductionAnimation pointsSpent={pointsSpent} />}\n          </motion.div>\n        </AnimatePresence>\n      </Box>\n\n      <Box sx={{ height: '100%', overflow: 'hidden' }}>\n        <Board\n          boardId={board_id}\n          boardTitle={boardData?.name || ''}\n          token={token}\n          currentUser={authData}\n          userRole={userRole}\n          onLogout={handleLogout}\n          availableBoards={[]}\n        />\n      </Box>\n\n      {editingBoard && (\n        <BoardFormDialog\n          open={true}\n          title=\"Edit Board\"\n          board={editingBoard}\n          setBoard={setEditingBoard}\n          onSave={handleUpdateBoard}\n          onCancel={() => setEditingBoard(null)}\n          disabled={boardLoading || gatesLoading || classesLoading}\n          gates={gates || []}\n          classes={classes || []}\n          token={token}\n          userRole={userRole}\n        />\n      )}\n\n      {membersDialogOpen && (\n        <MemberFormDialog\n          open={membersDialogOpen}\n          title=\"Manage Board Members\"\n          boardId={board_id}\n          token={token}\n          onSave={() => {\n            debouncedFetchBoard(board_id);\n            setMembersDialogOpen(false);\n          }}\n          onCancel={() => setMembersDialogOpen(false)}\n          disabled={userRole !== 'owner' && userRole !== 'admin'}\n          members={members || []}\n          addMember={addMemberToBoard}\n          removeMember={removeMemberFromBoard}\n          updateMemberRole={updateMemberRole}\n        />\n      )}\n\n      <Dialog\n        open={shareDialogOpen}\n        onClose={() => setShareDialogOpen(false)}\n        maxWidth=\"sm\"\n        fullWidth\n        sx={{\n          '& .MuiDialog-paper': {\n            borderRadius: theme.shape.borderRadiusMedium,\n            overflow: 'auto',\n          },\n        }}\n        aria-labelledby=\"share-dialog-title\"\n      >\n        <DialogTitle id=\"share-dialog-title\">Share Board</DialogTitle>\n        <DialogContent>\n          <Typography variant=\"body2\" sx={{ mb: 2 }}>\n            Copy the link below to share this board:\n          </Typography>\n          <TextField\n            fullWidth\n            value={inviteLink}\n            InputProps={{ readOnly: true }}\n            aria-label=\"Board share link\"\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={() => setShareDialogOpen(false)}\n            sx={cancelButtonStyle}\n            aria-label=\"Close share dialog\"\n          >\n            Close\n          </Button>\n          <Button\n            onClick={handleCopyLink}\n            sx={actionButtonStyles}\n            startIcon={<Link />}\n            aria-label=\"Copy share link\"\n          >\n            Copy Link\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      <DeleteConfirmationDialog\n        open={deleteDialogOpen}\n        onClose={() => setDeleteDialogOpen(false)}\n        onConfirm={handleDelete}\n        message=\"Are you sure you want to delete this board? This action cannot be undone.\"\n        disabled={boardLoading}\n      />\n    </Box>\n  );\n});\n\nBoardPage.propTypes = {};\n\nexport default BoardPage;"],"names":["formatPoints","points","options","arguments","length","undefined","decimals","allowNegative","Number","isNaN","isNegative","absPoints","Math","abs","formats","threshold","suffix","find","_ref","toString","value","round","toFixed","replace","customTheme","theme","breakpoints","values","xs","sm","md","lg","xl","BASE_SHADOW","HOVER_SHADOW","baseTypographyStyles","color","fontWeight","lineHeight","baseHoverEffect","transform","boxShadow","outline","alpha","palette","primary","main","outlineOffset","actionButtonStyles","shape","borderRadiusMedium","borderRadiusLarge","height","minWidth","borderRadius","padding","backgroundColor","fontSize","transition","cancelButtonStyle","inputStyles","mt","spacing","borderRadiusSmall","border","opacity","inputStylesWhite","selectStyles","headerStyles","card","mb","width","boxSizing","content","display","flexDirection","alignItems","justifyContent","mx","gap","textAlign","leftSection","rightSection","title","level","buttonGroup","flexWrap","splitButtonGroup","chipContainer","overflowX","msOverflowStyle","scrollbarWidth","chip","transitions","create","duration","short","easing","easeInOut","cursor","margin","chipExpanded","chipCollapsed","fieldStyles","container","label","input","sectionStyles","my","toggleStyles","formControl","switch","containerStyles","maxWidth","gridStyles","gridTemplateColumns","skeletonStyles","bgcolor","header","filter","baseModalStyles","animation","from","to","baseButtonStyles","textTransform","boardContainer","overflow","zIndex","boardMain","isListView","dragging","flex","position","touchAction","grey","boardCanvas","scale","offset","top","left","backgroundImage","backgroundSize","x","y","transformOrigin","boardTitleContainer","pointerEvents","boardTitle","titleLength","min","whiteSpace","textOverflow","boardEmptyMessage","boardBackButtonContainer","boardBackButton","boardControlsContainer","bottom","right","p","boardViewToggleButton","px","py","boardZoomButton","boardZoomText","boardListViewContainer","minHeight","boardListViewTweet","isReply","pl","borderLeft","boardErrorContainer","boardErrorText","boardErrorButton","boardEditDialog","boardEditDialogTitle","pb","boardEditDialogContent","pt","boardEditTextField","borderColor","boardEditFormControl","boardEditCancelButton","boardEditSaveButton","BOARD_SIZE","ZOOM_STEP","TWEET_Z_INDEX","fontFamily","letterSpacing","TweetContentStyles","tweetCard","isPinned","warning","light","background","paper","maxHeight","overflowY","tweetPaper","tweetTitle","tweetAuthorTypography","pinnedIconContainer","pinnedIcon","replyToContainer","fontStyle","replyToCaption","replyToText","contentText","hasMedia","wordBreak","imageContainer","hasText","image","isSingle","aspectRatio","objectFit","objectPosition","imagePlaceholder","imageViewAll","textDecoration","videoContainer","hasTextOrImages","videoInner","video","circleVideoContainer","circleVideo","videoViewAll","audioContainer","hasTextOrMedia","audioPlayer","audioViewAll","otherFilesContainer","otherFileItem","index","otherFileIcon","otherFileLink","otherFilesViewAll","readMoreButton","actionsContainer","actionButtons","likeButton","likeIcon","isLiked","likeCount","animate","ml","replyButton","replyIcon","replyCount","statusContainer","menuButton","menuIcon","tweetHighlight","isHighlighted","draggableContainer","isDraggable","hovered","DraggableTweet","_tweet$position$x","_tweet$position","_tweet$position$y","_tweet$position2","_tweet$position$x2","_tweet$position3","_tweet$position$y2","_tweet$position4","_tweet$position7","_tweet$position8","tweet","onStop","children","currentUser","userRole","bypassOwnership","nodeRef","useRef","justDroppedRef","previousPosition","localPosition","setLocalPosition","useState","setDragging","setHovered","clampPosition","useCallback","max","useEffect","current","_tweet$position$x3","_tweet$position5","_tweet$position$y3","_tweet$position6","newPos","useMemo","is_pinned","includes","anonymous_id","user_id","username","debouncedOnStop","debounce","e","data","clampedPos","console","error","tweetId","tweet_id","cancel","handleStart","handleDrag","handleStop","setTimeout","_jsx","Draggable","positionOffset","disabled","onStart","onDrag","ref","onMouseEnter","onMouseLeave","style","role","tabIndex","warn","defaultProps","memo","baseDialogStyles","mediaDialogContainer","mediaDialogTitle","borderBottom","mediaDialogContent","optionsDialogContainer","optionsDialogTitle","optionsDialogContent","dialogActions","dialogCloseButton","optionsDialogItem","modalImage","modalImagePlaceholder","modalOtherFile","modalOtherFileIcon","modalOtherFileLink","errorPaper","errorTypography","LinkPreviewStyles","previewCard","previewImage","flexShrink","previewContent","previewTitle","previewDescription","WebkitLineClamp","WebkitBoxOrient","previewPlayButton","previewPlayer","loadingContainer","LinkPreview","onTextTransform","onPlayClick","previews","setPreviews","playingMedia","setPlayingMedia","loading","setLoading","deferredContent","useDeferredValue","previewCache","Map","extractYouTubeId","url","_parsed$query$split$","parsed","URLParse","hostname","pathname","slice","query","split","extractTwitchId","type","id","isYouTubeMusic","async","urls","match","uniqueUrls","Set","newPreviews","transformedText","forEach","truncated","has","push","get","previewData","videoId","isMusic","response","axios","encodeURIComponent","timeout","description","author_name","thumbnail","embedUrl","_response$data$html$m","provider_name","thumbnail_url","html","_response$data$html$m2","_response$data$data$i","twitchInfo","window","location","twitchType","_response$data$data$i2","set","clearTimeout","handleTogglePlay","preview","renderPreview","isPlayable","isAudio","playerHeight","_jsxs","motion","div","initial","ease","Card","sx","CardMedia","component","alt","CardContent","Typography","variant","Link","href","target","rel","IconButton","onClick","onTouchStart","PauseIcon","PlayArrowIcon","Box","LazyLoadComponent","ReactPlayer","controls","playing","playsinline","config","youtube","playerVars","modestbranding","soundcloud","visual","twitch","autoplay","onError","CircularProgress","size","map","statusColorMap","pending","approved","rejected","announcement","reminder","pinned","archived","mediaVariants","exit","ViewAllButton","whileHover","whileTap","onKeyPress","key","CircularVideoPlayer","_ref2","src","ariaLabel","variants","mediaWrapper","playsInline","preload","propTypes","PropTypes","isRequired","StandardVideoPlayer","_ref3","AudioPlayer","_ref4","FileItem","_ref5","file","InsertDriveFileIcon","fileKey","TweetContent","_ref6","_tweet$content","_tweet$content2","_tweet$user","_tweet$liked_by$some","_tweet$liked_by","_tweet$child_tweet_id","_tweet$child_tweet_id2","_tweet$stats2","_tweet$content4","_tweet$content4$metad","_tweet$content6","_tweet$content6$metad","_tweet$content8","_tweet$content8$metad","_tweet$content10","_tweet$content10$meta","_tweet$content12","_tweet$content12$meta","_tweet$stats3","onLike","onDelete","onReply","onReplyHover","onEdit","onPinToggle","isParentHighlighted","parentTweetText","relatedTweetIds","availableBoards","boardId","getParentTweetText","onModalStateChange","setAnimate","openOptionsDialog","setOpenOptionsDialog","openMediaDialog","setOpenMediaDialog","openLinkModal","setOpenLinkModal","isExpanded","setIsExpanded","timestamp","setTimestamp","setTransformedText","created_at","createdAt","parseISO","isValid","updateTimestamp","now","Date","formatDistanceToNow","addSuffix","format","interval","setInterval","clearInterval","tweetAuthor","user","liked_by","some","u","canEdit","toLowerCase","isRelated","hasReplies","child_tweet_ids","replyLabel","rawStatus","status","chipColor","chipLabel","charAt","toUpperCase","resolvedParentTweetText","parent_tweet_id","parentExcerpt","join","_tweet$stats","stats","like_count","timer","handleMouseEnter","_tweet$child_tweet_id3","handleMouseLeave","_tweet$child_tweet_id4","handleOpenOptionsDialog","handleCloseOptionsDialog","handleOpenMediaDialog","handleCloseMediaDialog","handleOpenLinkModal","handleCloseLinkModal","handleEdit","handlePin","handleDelete","handleToggleExpand","prev","previewText","remainderText","text","cutoff","lastSpace","lastIndexOf","fullDate","isModalOpen","renderImages","_tweet$content3","_tweet$content3$metad","_tweet$content3$metad2","imageFiles","metadata","files","f","_f$contentType","contentType","startsWith","Grid","item","LazyLoadImage","effect","placeholder","renderVideos","_tweet$content5","_tweet$content5$metad","_tweet$content5$metad2","videoFiles","_f$contentType2","renderAudio","_tweet$content7","_tweet$content7$metad","_tweet$content7$metad2","audioFiles","_f$contentType3","renderOtherFiles","_tweet$content9","_tweet$content9$metad","_tweet$content9$metad2","otherFiles","_f$contentType4","_f$contentType5","_f$contentType6","idx","renderContent","Emoji","Collapse","in","unmountOnExit","_tweet$content11","_tweet$content11$meta","DialogContent","ModalStyles","m","_file$contentType","_file$contentType2","_file$contentType3","List","ListItemButton","ListItemText","linkModalContent","Dialog","open","onClose","fullWidth","fullScreen","innerWidth","TransitionComponent","Fade","transitionDuration","PaperProps","stopPropagation","onMouseDown","DialogTitle","gutterBottom","DialogActions","CloseIcon","Paper","className","elevation","onTouchEnd","PushPinIcon","Chip","dateTime","ThumbUpIcon","ChatBubbleOutlineIcon","MoreVertIcon","dividers","arePropsEqual","prevProps","nextProps","_prevProps$tweet$cont","_nextProps$tweet$cont","_prevProps$tweet$stat","_nextProps$tweet$stat","_prevProps$tweet$like","_nextProps$tweet$like","_prevProps$tweet$cont2","_prevProps$tweet$cont3","_prevProps$tweet$cont4","_nextProps$tweet$cont2","_nextProps$tweet$cont3","_nextProps$tweet$cont4","every","i","MEDIA_PREVIEW_SIZE","dynamicCharCountColor","isError","dynamicMediaButtonColor","isActive","popupModal","backdropFilter","popupTitle","popupTextField","popupCharCount","alignSelf","popupFilePreviewContainer","popupPreviewMedia","popupCirclePreviewMedia","popupPreviewPlaceholder","popupDeleteFileButton","dark","popupActionButton","popupCancelButton","popupInputBar","BASE_Z_INDEX","popupMediaButton","popupRecordingContainer","popupRecordingChip","popupRecordingControls","popupVideoPreviewContainer","popupLivePreview","popupAudioVisualizer","popupVisualizerBar","animationDelay","popupAudioPlayer","popupProgressContainer","popupDialogPaper","popupDialogBackdrop","popupContentBox","popupErrorAlert","popupParentTweetCaption","popupScheduleButton","popupButtonContainer","SUPPORTED_MIME_TYPES","MAX_FILE_SIZE","MAX_FILES","messageErrorMessages","string","required","uuid","pattern","array","enum","uri","number","integer","boolean","date","uuidSchema","Joi","version","messages","querySchema","valid","optional","page","default","limit","sort","pinned_only","hashtag","mention","contentSchema","when","is","then","trim","otherwise","allow","items","hashtags","mentions","positionSchema","reminderSchema","schedule","iso","recurrence","enabled","conversationErrorMessages","hexColor","uuidPattern","validatePayload","conversationId","visibility","muted","friendId","name","members","tags","initialMessage","or","permissions","sendMessages","addMembers","pinMessages","admins","moderators","scheme","font","bubbleStyle","senderColor","receiverColor","textColor","accessibility","highContrast","largeText","screenReader","notificationSound","inviteLink","ephemeral","ephemeralTTL","muteUntil","pushEnabled","media","replyTo","scheduledAt","forwardedFrom","threadId","messageId","newContent","fromUserId","mediaType","question","allowMultipleVotes","pollExpiresAt","optionIndex","reaction","fileType","fileSize","targetConversationIds","comment","messageIds","parentMessageId","notify","schema","payload","errorMessage","validate","abortEarly","stripUnknown","details","d","message","Error","MAX_TWEET_LENGTH","TweetPopup","_parentTweet$content","onSubmit","parentTweet","onBoardUpdate","form","setForm","draft","recording","setRecording","recordingType","setRecordingType","recordingTime","setRecordingTime","recordingMode","setRecordingMode","isPaused","setIsPaused","setError","uploadProgress","setUploadProgress","showSchedule","setShowSchedule","menuAnchorEl","setMenuAnchorEl","submitSuccess","setSubmitSuccess","linkModal","setLinkModal","fileInputRef","mediaRecorderRef","dialogRef","videoPreviewRef","recordingTimerRef","longPressTimerRef","handleFileChange","removeFile","cleanup","fileUrlsRef","useFileUpload","setFiles","validateFile","newFiles","Array","fileToRemove","URL","revokeObjectURL","delete","_","uploadFiles","onProgress","Promise","resolve","createObjectURL","err","clear","isMobile","useMediaQuery","down","bindDrag","useDrag","movement","event","preventDefault","_dialogRef$current","focus","stopRecording","next","srcObject","play","catch","startRecording","constraints","audio","facingMode","stream","navigator","mediaDevices","getUserMedia","mediaRecorder","MediaRecorder","mimeType","chunks","ondataavailable","onstop","blob","Blob","fileName","File","getTracks","track","stop","start","pauseRecording","pause","resumeRecording","resume","handleFileInputChange","validFiles","handleSubmit","poll_options","event_details","quote_ref","embed_data","newTweet","progress","handleKeyPress","shiftKey","isSubmitDisabled","renderFilePreview","fileUrl","TweetPopupStyles","poster","popupPreviewOverlay","Delete","recordingStatus","minutes","floor","padStart","autoPlay","webkitPlaysinline","Tooltip","placement","PlayArrow","Pause","Stop","toggleRecording","renderInputBar","accept","multiple","onChange","click","AttachFile","TextField","autoFocus","multiline","maxRows","inputProps","maxLength","onContextMenu","Mic","Videocam","Button","currentTarget","Close","pr","Alert","severity","LinearProgress","InputLabelProps","shrink","toISOString","isEqual","BASE_TWEET_PATH","normalizeTweet","_content$metadata","_content$metadata2","_content$metadata3","_content$metadata4","_content$metadata5","_content$metadata6","_content$metadata7","_content$metadata8","_tweet$children","_tweet$stats$like_cou","_tweet$stats$like_cou2","_tweet$stats$view_cou","_tweet$analytics","_tweet$analytics2","is_anonymous","is_liked","likes","view_count","scheduled_at","analytics","views","shares","child","updated_at","ERROR_MESSAGES","CONFIG","MAX_CACHE_SIZE","CACHE_EXPIRY_MS","DEBOUNCE_MS","DEFAULT_LIMIT","CACHE_VERSION","tweetCache","constructor","capacity","this","cache","firstKey","keys","useTweets","token","onLogout","navigate","skipInitialFetch","tweets","setTweets","setTweet","pagination","setPagination","total","hasMore","boardInfo","setBoardInfo","abortControllerRef","handleError","reject","uploadFileToS3","presignedUrl","fileContentType","post","headers","Authorization","handleApiError","generatePresignedUrlApi","xhr","XMLHttpRequest","setRequestHeader","upload","onprogress","lengthComputable","percent","loaded","onload","onerror","send","fetchTweetsList","filters","signal","append","cacheKey","JSON","stringify","cachedData","board","_abortControllerRef$c","_data$pagination","_data$pagination2","_data$pagination3","abort","AbortController","effectiveSignal","params","AbortSignal","fetchTweetsApi","normalizedTweets","cacheData","debouncedFetchTweetsList","callback","result","createNewTweet","_content$value","_files$0$type","parentTweetId","isAnonymous","contentObj","optimisticTweet","comment_count","share_count","uploadedFiles","all","finalContent","createdTweet","anonymousId","_response$data$conten","_response$data$conten2","createTweetApi","normalizedTweet","t","updateExistingTweet","updates","_updates$content$valu","_files$0$type2","_updates$content$meta","_updates$content$meta2","_updates$content$meta3","_updates$content$meta4","_updates$content$meta5","_updates$content$meta6","_updates$content$meta7","Object","currentTweet","finalUpdates","updatedTweet","_response$data$conten3","_response$data$conten4","put","updateTweetApi","toggleLikeTweet","l","_response$data$conten7","_response$data$conten8","endpoint","toggleLikeApi","deleteExistingTweet","childTweetIds","c","_response$data$conten9","_response$data$conten10","del","deleteTweetApi","Boolean","moveTweet","targetBoardId","_response$data$conten11","_response$data$conten12","moveTweetApi","pinTweet","_response$data$conten13","_response$data$conten14","pinTweetApi","unpinTweet","_response$data$conten15","_response$data$conten16","unpinTweetApi","setReminder","_response$data$conten17","_response$data$conten18","setReminderApi","shareTweet","sharedTo","_currentTweet$analyti","platform","sharedTweet","_response$data$conten19","_response$data$conten20","shared_to","shareTweetApi","resetState","controller","Z_INDEX","popupReducer","state","action","visible","clientX","clientY","replyTweet","editModalReducer","_action$payload","_action$payload2","newStatus","selectedBoardId","board_id","usePermissions","isOwnerOrAdmin","isModerator","isViewer","computePermissions","isTweetOwner","canPin","canChangeStatus","canMoveBoard","canCreate","canLike","canReply","canDrag","isArray","permissionsMap","Board","_editModalState$tweet9","_editModalState$tweet10","_editModalState$tweet11","_editModalState$tweet12","_editModalState$tweet13","_editModalState$tweet14","_editModalState$tweet15","_editModalState$tweet16","_editModalState$tweet17","_editModalState$tweet18","_editModalState$tweet19","useNavigate","showNotification","useNotification","boardMainRef","isFetching","setIsListView","setPage","boards","setBoards","isSaving","setIsSaving","highlightedTweetId","setHighlightedTweetId","onlineUsers","setOnlineUsers","openModals","popupState","dispatchPopup","useReducer","editModalState","dispatchEditModal","isOverlayOpen","handleModalStateChange","isOpen","add","isLoading","fetchBoardsList","useBoards","centerBoard","handleZoomButton","handleMouseDown","originalHandleMouseDown","handleMouseMove","originalHandleMouseMove","handleMouseUp","originalHandleMouseUp","handleTouchStart","originalHandleTouchStart","handleTouchMove","originalHandleTouchMove","handleTouchEnd","originalHandleTouchEnd","boardRef","setScale","setOffset","isDragging","dragStart","touchStart","pinchStart","scaleRef","offsetRef","viewportSize","innerHeight","history","historyIndex","updateViewport","addEventListener","removeEventListener","clampOffset","newOffset","scaledSize","minX","minY","restoreBoardState","exportBoardState","animateReset","startScale","startOffset","targetOffset","ANIMATION_DURATION","onUpdate","easedProgress","pow","handleZoom","delta","mouseX","mouseY","prevScale","newScale","currentOffset","boardX","boardY","direction","handleWheel","throttle","deltaY","closest","offsetX","offsetY","dx","dy","boardRect","getBoundingClientRect","clickX","clickY","tweetX","tweetY","touches","touch1","touch2","distance","sqrt","centerX","centerY","touch","scaleChange","changedTouches","handleKeyDown","tagName","ctrlKey","handleContextMenu","boardElement","passive","useBoardInteraction","tweetPermissionsMap","socketRef","useWebSocket","socket","io","REACT_APP_WS_URL","reconnection","reconnectionAttempts","reconnectionDelay","on","disconnect","emit","count","like_data","like","new_board_id","_ref7","_ref8","_ref9","_ref10","share_data","updatedBoard","_ref11","debouncedRefresh","fetchData","boardsData","validBoards","b","fetchBoards","handleOptimisticUpdate","optimisticUpdateFn","serverUpdateFn","rollbackFn","isNewTweet","handleTweetCreation","_content$value2","_popupState$replyTwee","tempTweetId","_popupState$replyTwee2","_socketRef$current","handleReply","throttlePopup","handleMouseUpWithPopup","handleTouchEndWithPopup","handleEditTweet","tweetPermissions","handlePinToggle","isPinning","_socketRef$current2","handleSaveEditedTweet","_editModalState$tweet","_editModalState$tweet2","_editModalState$tweet3","_editModalState$tweet4","_editModalState$tweet5","_editModalState$tweet6","_editModalState$tweet7","_socketRef$current4","_socketRef$current3","_socketRef$current5","handleLikeTweet","likeData","liked_at","_socketRef$current6","handleDeleteTweet","_socketRef$current7","handleSetReminder","_socketRef$current8","handleShareTweet","shareData","shared_at","_t$analytics","_socketRef$current9","handleLoadMore","handlePrevPage","handleNextPage","getRelatedTweetIds","tweetIds","handleViewToggle","validTweets","seenIds","a","tweetProps","_editModalState$tweet8","onSetReminder","onShare","renderTweet","_tweets$find","_tweets$find$content","tweetContent","tweetVariants","random","BoardStyles","_socketRef$current10","renderedTweets","AnimatePresence","renderError","LoadingSpinner","ArrowBack","userSelect","onMouseMove","onMouseUp","onTouchMove","Refresh","ArrowCircleLeft","ArrowCircleRight","_Fragment","RestartAlt","Remove","Add","onKeyDown","disableEscapeKeyDown","minRows","helperText","FormControl","InputLabel","Select","labelId","MenuItem","startIcon","areEqual","_nextProps$availableB","_nextProps$availableB2","_nextProps$availableB3","prevPoints","setPrevPoints","Toll","pointsCache","usePoints","pointsData","setPointsData","topContributors","setTopContributors","debounceTimer","abortControllers","customMessage","fn","ms","_len","args","_key","normalizeContributors","contributor","member_id","total_points","avatar","createAbortController","cleanupAbortControllers","fetchPointsData","api","fetchPoints","debouncedFetchPointsData","fetchTopContributorsList","fetchTopContributors","debouncedFetchTopContributorsList","transferUserPoints","recipientId","amount","transferPoints","sender_points","donated_points","updatePointsData","targetUserId","reason","updatePoints","buttonVariants","_boardData$child_boar2","useTheme","useParams","authData","handleLogout","isAuthenticated","authLoading","useAuth","pointsRef","pointsVisible","setPointsVisible","editingBoard","setEditingBoard","membersDialogOpen","setMembersDialogOpen","shareDialogOpen","setShareDialogOpen","deleteDialogOpen","setDeleteDialogOpen","anchorEl","setAnchorEl","setInviteLink","pointsSpent","setPointsSpent","isMounted","document","documentElement","body","overscrollBehavior","preventScroll","boardItem","boardData","boardLoading","boardError","fetchBoard","updateExistingBoard","toggleFavoriteBoard","deleteExistingBoard","addMemberToBoard","removeMemberFromBoard","updateMemberRole","clearBoardTweets","pointsLoading","gates","gatesLoading","fetchGatesList","useGates","classes","classesLoading","fetchClassesList","useClasses","_members$find","creator_id","is_public","isFavorited","_boardData$favorited_","_boardData$favorited_2","favorited_by","boardVisibility","_boardData$visibility","debouncedFetchBoard","debouncedFetchPoints","observer","IntersectionObserver","entry","isIntersecting","observe","prev_points","handleUpdateBoard","validationError","validateBoardData","gate_id","class_id","settings","handleFavorite","_boardData$settings","_boardData$settings2","_boardData$settings3","_boardData$settings4","_boardData$settings5","_boardData$settings6","_boardData$settings7","_boardData$settings8","_boardData$settings9","max_tweets","tweet_cost","max_members","favorite_cost","points_to_creator","allow_invites","require_approval","ai_moderation_enabled","auto_archive_after","current_user","handleManageMembers","handleShare","origin","handleOpenDeleteDialog","handleCopyLink","clipboard","writeText","handleMenuOpen","handleMenuClose","_data$name","childBoardMenuItems","_boardData$child_boar","child_board_ids","childId","Skeleton","Public","Lock","Favorite","FavoriteBorder","Share","Badge","badgeContent","People","Edit","MoreVert","Menu","slotProps","AnimatedPoints","PointsDeductionAnimation","BoardFormDialog","setBoard","onSave","onCancel","MemberFormDialog","addMember","removeMember","InputProps","readOnly","DeleteConfirmationDialog","onConfirm"],"sourceRoot":""}