"use strict";(self.webpackChunkgate_from_nothingproject_front_end=self.webpackChunkgate_from_nothingproject_front_end||[]).push([[577],{7958:(e,n,r)=>{r.r(n),r.d(n,{default:()=>C});var t=r(5043),o=r(9412),a=r(4490),i=r(7353),s=r(1637),l=r(4496),d=r(6258),c=r(1596),u=r(7784),p=r(1787),x=r(7392),h=r(1906),m=r(8446),g=r(1149),v=r(3632),y=r(3559),b=r(6213),A=r(1675),f=r(3488),w=r(6552),j=r(1654),k=r(579);const C=e=>{let{theme:n,onLogin:r}=e;const[C,S]=(0,t.useState)(""),[P,D]=(0,t.useState)(""),[L,$]=(0,t.useState)(""),[_,I]=(0,t.useState)(!1),[R,W]=(0,t.useState)(!1),[E,T]=(0,t.useState)(!1),[M,z]=(0,t.useState)(!1),N=(0,A.Zp)(),{showNotification:H}=(0,j.hN)(),q=(0,t.useRef)(null),V=(0,t.useCallback)((()=>C?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(C)?C.length>255?"Email cannot exceed 255 characters":P?/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d@$!%*?&]{8,}$/.test(P)?P.length>128?"Password cannot exceed 128 characters":null:"Password must be 8+ chars with uppercase, lowercase, and number":"Password is required":"Please enter a valid email address":"Email is required"),[C,P]),F=(0,t.useCallback)((()=>L?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L)?L.length>255?"Email cannot exceed 255 characters":null:"Please enter a valid email address":"Email is required"),[L]),U=(0,t.useCallback)((async e=>{e.preventDefault(),W(!0),T(!0);const n=V();if(n)return H(n,"error"),W(!1),void T(!1);try{const e=await b.A.post(`${f.A.REACT_APP_HUB_API_URL}/api/v1/auth/login`,{email:C,password:P}),{token:n,profile:t}=e.data;if(!n||!t)throw new Error("Invalid login response: Missing token or profile");localStorage.setItem("token",n),r(n,t),H("Login successful! Redirecting...","success"),setTimeout((()=>N("/home",{replace:!0})),2e3)}catch(c){var t,o,a,i,s,l,d;console.error("Login error:",(null===(t=c.response)||void 0===t?void 0:t.data)||c);const e=401===(null===(o=c.response)||void 0===o?void 0:o.status)?"Invalid email or password. Please try again.":(null===(a=c.response)||void 0===a||null===(i=a.data)||void 0===i||null===(s=i.errors)||void 0===s?void 0:s[0])||(null===(l=c.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)||"Network error, please try again";H(e,"error"),W(!1),T(!1)}}),[C,P,N,r,H,V]),B=(0,t.useCallback)((async()=>{const e=F();if(e)H(e,"error");else try{await b.A.post(`${f.A.REACT_APP_HUB_API_URL}/api/v1/auth/forgot-password`,{email:L}),H("An email with a password reset link has been sent!","success"),setTimeout((()=>Y()),2e3)}catch(s){var n,r,t,o,a,i;console.error("Forgot password error:",(null===(n=s.response)||void 0===n?void 0:n.data)||s);const e=(null===(r=s.response)||void 0===r||null===(t=r.data)||void 0===t||null===(o=t.errors)||void 0===o?void 0:o[0])||(null===(a=s.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.message)||"Network error, please try again";H(e,"error")}}),[L,H,F]),X=(0,t.useCallback)((()=>z(!0)),[]),Y=(0,t.useCallback)((()=>{z(!1),$("")}),[]),K=(0,t.useCallback)(((e,n)=>{"Enter"!==e.key||R||(e.preventDefault(),n())}),[R]);return(0,t.useEffect)((()=>{M&&q.current&&q.current.focus()}),[M]),E?(0,k.jsx)(o.A,{theme:n,children:(0,k.jsx)(a.A,{maxWidth:"sm",sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,k.jsxs)(i.A,{sx:{textAlign:"center"},"aria-live":"polite","aria-busy":"true",children:[(0,k.jsx)(s.A,{"aria-label":"Loading",sx:{mb:2}}),(0,k.jsx)(l.A,{variant:"body1",sx:{color:"text.primary"},children:"Checking credentials\u2026"})]})})}):(0,k.jsx)(o.A,{theme:n,children:(0,k.jsxs)(a.A,{maxWidth:"sm",sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100dvh"},children:[(0,k.jsx)(d.A,{in:!0,timeout:600,children:(0,k.jsxs)(c.A,{elevation:6,sx:{p:n.spacing(5),borderRadius:n.shape.borderRadiusMedium,backgroundColor:"background.paper",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.1)",width:"100%",maxWidth:n.custom.loginPaperMaxWidth,textAlign:"center"},children:[(0,k.jsxs)(i.A,{sx:{textAlign:"center",mb:n.spacing(3)},children:[(0,k.jsx)(l.A,{variant:"h4",sx:{color:"text.primary",fontWeight:600},children:"Sign In"}),(0,k.jsx)(l.A,{variant:"body1",sx:{color:"text.secondary",mt:n.spacing(1)},children:"Sign in to continue"})]}),(0,k.jsxs)(i.A,{component:"form",onSubmit:U,noValidate:!0,sx:{mt:n.spacing(2),textAlign:"left"},"aria-label":"Login form",children:[(0,k.jsx)(u.A,{label:"Email",variant:"outlined",fullWidth:!0,margin:"normal",value:C,onChange:e=>S(e.target.value),onKeyDown:e=>K(e,(()=>U(e))),InputProps:{notched:!1},sx:w.z9,required:!0}),(0,k.jsx)(u.A,{label:"Password",type:_?"text":"password",variant:"outlined",fullWidth:!0,margin:"normal",value:P,onChange:e=>D(e.target.value),onKeyDown:e=>K(e,(()=>U(e))),sx:w.z9,InputProps:{notched:!1,endAdornment:(0,k.jsx)(p.A,{position:"end",children:(0,k.jsx)(x.A,{onClick:()=>I(!_),edge:"end","aria-label":_?"Hide password":"Show password",sx:{color:"text.primary"},children:_?(0,k.jsx)(v.A,{}):(0,k.jsx)(y.A,{})})})},required:!0}),(0,k.jsx)(i.A,{sx:{display:"flex",flexDirection:"column",mt:n.spacing(3),gap:n.spacing(3),alignItems:"center"},children:(0,k.jsx)(h.A,{type:"submit",variant:"contained",fullWidth:!0,disabled:R,sx:w.nT,"aria-label":"Sign in",children:R?"Signing In...":"Sign In"})}),(0,k.jsx)(i.A,{sx:{mt:n.spacing(2),textAlign:"center"},children:(0,k.jsx)(h.A,{variant:"text",sx:{color:"text.primary",textTransform:"none",fontSize:"16px",padding:"8px 20px",borderRadius:"20px","&:hover":{textDecoration:"underline"}},onClick:X,"aria-label":"Forgot password",children:"Forgot password?"})}),(0,k.jsx)(i.A,{sx:{mt:n.spacing(2),textAlign:"center"},children:(0,k.jsxs)(l.A,{variant:"body1",sx:{color:"text.secondary"},children:["Don\u2019t have an account?"," ",(0,k.jsx)(m.A,{href:"https://secure.wayforpay.com/donate/NoThingProject",target:"_blank",rel:"noopener noreferrer",sx:{color:"text.primary",textDecoration:"none",fontWeight:500,"&:hover":{textDecoration:"underline"}},"aria-label":"Sign up",children:"Sign Up"})]})})]})]})}),(0,k.jsx)(g.A,{open:M,onClose:Y,closeAfterTransition:!0,sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,k.jsx)(d.A,{in:M,children:(0,k.jsxs)(i.A,{sx:{backgroundColor:"background.paper",borderRadius:n.shape.borderRadiusMedium,boxShadow:"0 8px 24px rgba(0, 0, 0, 0.1)",p:n.spacing(5),width:"100%",maxWidth:n.custom.loginPaperMaxWidth},ref:q,tabIndex:-1,role:"dialog","aria-labelledby":"password-recovery-title",children:[(0,k.jsx)(l.A,{id:"password-recovery-title",variant:"h6",sx:{mb:n.spacing(2),fontWeight:600},children:"Password Recovery"}),(0,k.jsx)(u.A,{label:"Email",variant:"outlined",fullWidth:!0,margin:"normal",value:L,onChange:e=>$(e.target.value),onKeyDown:e=>K(e,B),InputProps:{notched:!1},sx:w.z9,required:!0}),(0,k.jsx)(h.A,{variant:"contained",fullWidth:!0,onClick:B,sx:w.nT,"aria-label":"Send password recovery email",children:"Send Email"})]})})})]})})}},8446:(e,n,r)=>{r.d(n,{A:()=>k});var t=r(5043),o=r(8387),a=r(1546),i=r(8610),s=r(8218),l=r(6803),d=r(4535),c=r(6240),u=r(6262),p=r(2445),x=r(8206),h=r(4496),m=r(2532),g=r(2372);function v(e){return(0,g.Ay)("MuiLink",e)}const y=(0,m.A)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var b=r(1724);const A=e=>{let{theme:n,ownerState:r}=e;const t=r.color,o=(0,b.Yn)(n,`palette.${t}.main`,!1)||(0,b.Yn)(n,`palette.${t}`,!1)||r.color,i=(0,b.Yn)(n,`palette.${t}.mainChannel`)||(0,b.Yn)(n,`palette.${t}Channel`);return"vars"in n&&i?`rgba(${i} / 0.4)`:(0,a.X4)(o,.4)};var f=r(579);const w={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},j=(0,d.Ay)(h.A,{name:"MuiLink",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:r}=e;return[n.root,n[`underline${(0,l.A)(r.underline)}`],"button"===r.component&&n.button]}})((0,u.A)((e=>{let{theme:n}=e;return{variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:e=>{let{underline:n,ownerState:r}=e;return"always"===n&&"inherit"!==r.color},style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(n.palette).filter((0,p.A)()).map((e=>{let[r]=e;return{props:{underline:"always",color:r},style:{"--Link-underlineColor":n.vars?`rgba(${n.vars.palette[r].mainChannel} / 0.4)`:(0,a.X4)(n.palette[r].main,.4)}}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":n.vars?`rgba(${n.vars.palette.text.primaryChannel} / 0.4)`:(0,a.X4)(n.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":n.vars?`rgba(${n.vars.palette.text.secondaryChannel} / 0.4)`:(0,a.X4)(n.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(n.vars||n).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${y.focusVisible}`]:{outline:"auto"}}}]}}))),k=t.forwardRef((function(e,n){const r=(0,x.b)({props:e,name:"MuiLink"}),a=(0,c.A)(),{className:d,color:u="primary",component:p="a",onBlur:h,onFocus:m,TypographyClasses:g,underline:y="always",variant:b="inherit",sx:k,...C}=r,[S,P]=t.useState(!1),D={...r,color:u,component:p,focusVisible:S,underline:y,variant:b},L=(e=>{const{classes:n,component:r,focusVisible:t,underline:o}=e,a={root:["root",`underline${(0,l.A)(o)}`,"button"===r&&"button",t&&"focusVisible"]};return(0,i.A)(a,v,n)})(D);return(0,f.jsx)(j,{color:u,className:(0,o.A)(L.root,d),classes:g,component:p,onBlur:e=>{(0,s.A)(e.target)||P(!1),h&&h(e)},onFocus:e=>{(0,s.A)(e.target)&&P(!0),m&&m(e)},ref:n,ownerState:D,variant:b,...C,sx:[...void 0===w[u]?[{color:u}]:[],...Array.isArray(k)?k:[k]],style:{...C.style,..."always"===y&&"inherit"!==u&&!w[u]&&{"--Link-underlineColor":A({theme:a,ownerState:D})}}})}))}}]);
//# sourceMappingURL=577.02a835de.chunk.js.map