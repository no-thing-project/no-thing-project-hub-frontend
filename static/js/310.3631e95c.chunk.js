"use strict";(self.webpackChunkgate_from_nothingproject_front_end=self.webpackChunkgate_from_nothingproject_front_end||[]).push([[310],{1310:(e,r,t)=>{t.r(r),t.d(r,{default:()=>Q});var n=t(5043),i=t(1675),a=t(7353),o=t(1906),s=t(7254),l=t(4496),d=t(794),c=t(141),u=t(2958),g=t(4401),h=t(342),m=t(9406),p=t(1654),x=t(6552),f=t(3769),y=t(35),A=t(6600),v=t(5316),b=t(2357),w=t(7784),j=t(1637),C=t(9347),F=t(4834),S=t(3536),E=t(579);const k=new Map,T=e=>{let{open:r,title:t,username:i,setUsername:s,onSave:l,onCancel:d,disabled:c,token:u}=e;const{showNotification:g}=(0,p.hN)(),{searchUsersByUsername:h,loading:f}=(0,m.F)(u),[T,I]=(0,n.useState)({}),[R,D]=(0,n.useState)([]),L=(0,n.useMemo)((()=>({username:{value:i,rules:{required:!0,minLength:3,maxLength:50}}})),[i]),N=(0,n.useMemo)((()=>(0,S.debounce)((async e=>{if(!e||e.length<3)D([]);else if(k.has(e))D(k.get(e));else try{const r=(await h(e,{limit:10})).map((e=>({username:e.username||e.anonymous_id||"Unknown",anonymous_id:e.anonymous_id})));D(r),k.set(e,r),r.length||g("No users found for this query","info")}catch(r){console.error("Search users error:",r),g(r.message||"Failed to fetch user suggestions","error"),D([])}}),300)),[h,g]),$=(0,n.useCallback)(((e,r)=>{const t=r||"";s(t);const n=(0,F.j)("username",t,L.username.rules);I((e=>({...e,username:n[0]||null}))),t.length>=3?N(t):D([])}),[N,L,s]),q=(0,n.useCallback)((async()=>{const e=(0,F.l)(L);if(Object.keys(e).length>0)return void I(e);const r=R.find((e=>e.username===i));if(!r)return g("Please select a valid user from the suggestions","error"),void I((e=>({...e,username:"Invalid user selected"})));try{await l(r.anonymous_id),s(""),D([]),I({})}catch(t){console.error("Send friend request error:",t),g(t.message||"Failed to send friend request","error")}}),[i,R,L,l,g,s]);return(0,n.useEffect)((()=>(r||(s(""),D([]),I({}),N.cancel(),k.clear()),()=>{N.cancel()})),[r,N,s]),(0,E.jsxs)(y.A,{open:r,onClose:d,maxWidth:"sm",fullWidth:!0,sx:{"& .MuiDialog-paper":{p:{xs:1,md:2}}},"aria-labelledby":"friend-form-dialog-title",children:[(0,E.jsx)(A.A,{id:"friend-form-dialog-title",sx:{fontSize:{xs:"1.25rem",md:"1.5rem"},textAlign:"center"},children:t||"Add a New Friend"}),(0,E.jsx)(v.A,{children:(0,E.jsx)(a.A,{sx:{mt:1},children:(0,E.jsx)(b.A,{freeSolo:!1,options:R,getOptionLabel:e=>e.username||"",inputValue:i,onInputChange:$,loading:f,disabled:c,fullWidth:!0,renderInput:e=>(0,E.jsx)(w.A,{...e,autoFocus:!0,label:"Username",type:"text",variant:"outlined",sx:{...x.z9,mt:0},required:!0,error:!!T.username,helperText:T.username||"Search for a user to send a friend request",inputProps:{...e.inputProps,maxLength:50},InputProps:{...e.InputProps,endAdornment:(0,E.jsxs)(E.Fragment,{children:[f?(0,E.jsx)(j.A,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})}}),"aria-label":"Search for a user to send a friend request"})})}),(0,E.jsxs)(C.A,{sx:{p:{xs:1,md:2},justifyContent:"center",gap:1},children:[(0,E.jsx)(o.A,{variant:"contained",onClick:q,sx:{...x.nT,minWidth:{xs:"100%",sm:120},fontSize:{xs:"0.75rem",sm:"0.875rem"}},disabled:c||!!T.username||f,"aria-label":"Send friend request",children:"Send Request"}),(0,E.jsx)(o.A,{variant:"contained",onClick:d,sx:{...x.Km,minWidth:{xs:"100%",sm:120},fontSize:{xs:"0.75rem",sm:"0.875rem"}},disabled:c,"aria-label":"Cancel friend request dialog",children:"Cancel"})]})]})};T.defaultProps={disabled:!1};const I=n.memo(T);var R=t(8387),D=t(8610),L=t(1546),N=t(4535),$=t(6262),q=t(8206),B=t(5658);const P=(0,N.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,t.absolute&&r.absolute,r[t.variant],t.light&&r.light,"vertical"===t.orientation&&r.vertical,t.flexItem&&r.flexItem,t.children&&r.withChildren,t.children&&"vertical"===t.orientation&&r.withChildrenVertical,"right"===t.textAlign&&"vertical"!==t.orientation&&r.textAlignRight,"left"===t.textAlign&&"vertical"!==t.orientation&&r.textAlignLeft]}})((0,$.A)((e=>{let{theme:r}=e;return{margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(r.vars||r).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:r.vars?`rgba(${r.vars.palette.dividerChannel} / 0.08)`:(0,L.X4)(r.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:r.spacing(2),marginRight:r.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:r.spacing(1),marginBottom:r.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:e=>{let{ownerState:r}=e;return!!r.children},style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:e=>{let{ownerState:r}=e;return r.children&&"vertical"!==r.orientation},style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(r.vars||r).palette.divider}`,borderTopStyle:"inherit"}}},{props:e=>{let{ownerState:r}=e;return"vertical"===r.orientation&&r.children},style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(r.vars||r).palette.divider}`,borderLeftStyle:"inherit"}}},{props:e=>{let{ownerState:r}=e;return"right"===r.textAlign&&"vertical"!==r.orientation},style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:e=>{let{ownerState:r}=e;return"left"===r.textAlign&&"vertical"!==r.orientation},style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}}))),z=(0,N.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.wrapper,"vertical"===t.orientation&&r.wrapperVertical]}})((0,$.A)((e=>{let{theme:r}=e;return{display:"inline-block",paddingLeft:`calc(${r.spacing(1)} * 1.2)`,paddingRight:`calc(${r.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${r.spacing(1)} * 1.2)`,paddingBottom:`calc(${r.spacing(1)} * 1.2)`}}]}}))),M=n.forwardRef((function(e,r){const t=(0,q.b)({props:e,name:"MuiDivider"}),{absolute:n=!1,children:i,className:a,orientation:o="horizontal",component:s=(i||"vertical"===o?"div":"hr"),flexItem:l=!1,light:d=!1,role:c=("hr"!==s?"separator":void 0),textAlign:u="center",variant:g="fullWidth",...h}=t,m={...t,absolute:n,component:s,flexItem:l,light:d,orientation:o,role:c,textAlign:u,variant:g},p=(e=>{const{absolute:r,children:t,classes:n,flexItem:i,light:a,orientation:o,textAlign:s,variant:l}=e,d={root:["root",r&&"absolute",l,a&&"light","vertical"===o&&"vertical",i&&"flexItem",t&&"withChildren",t&&"vertical"===o&&"withChildrenVertical","right"===s&&"vertical"!==o&&"textAlignRight","left"===s&&"vertical"!==o&&"textAlignLeft"],wrapper:["wrapper","vertical"===o&&"wrapperVertical"]};return(0,D.A)(d,B.K,n)})(m);return(0,E.jsx)(P,{as:s,className:(0,R.A)(p.root,a),role:c,ref:r,ownerState:m,"aria-orientation":"separator"!==c||"hr"===s&&"vertical"!==o?void 0:o,...h,children:i?(0,E.jsx)(z,{className:p.wrapper,ownerState:m,children:i}):null})}));M&&(M.muiSkipListHighlight=!0);const O=M;var W=t(5721),U=t(681),_=t(8734);const V=e=>{let{friends:r,onRemoveFriend:t}=e;return(0,E.jsxs)(a.A,{sx:{mb:4},children:[(0,E.jsx)(l.A,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Your Friends"}),(0,E.jsx)(O,{}),(0,E.jsx)(W.A,{children:r.length>0?r.map((e=>(0,E.jsxs)(U.Ay,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:1,"&:hover":{backgroundColor:"background.hover"}},children:[(0,E.jsx)(_.A,{primary:e.username||`User (${e.anonymous_id})`,primaryTypographyProps:{variant:"body1",fontWeight:500}}),(0,E.jsx)(o.A,{variant:"outlined",color:"error",onClick:()=>t(e.anonymous_id),sx:{...x.nT,minWidth:"100px"},children:"Remove"})]},e.anonymous_id))):(0,E.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"No friends yet. Add someone to get started!"})})]})},G={display:"flex",justifyContent:"space-between",alignItems:"center",py:1,"&:hover":{backgroundColor:"background.hover"}},H={display:"flex",gap:1},Y=e=>{let{onClick:r}=e;return(0,E.jsx)(o.A,{variant:"contained",onClick:r,sx:{...x.nT,minWidth:"100px"},children:"Accept"})},J=e=>{let{onClick:r}=e;return(0,E.jsx)(o.A,{variant:"outlined",color:"error",onClick:r,sx:{...x.nT,minWidth:"100px"},children:"Reject"})},K=e=>{let{onClick:r}=e;return(0,E.jsx)(o.A,{variant:"outlined",color:"warning",onClick:r,sx:{...x.nT,minWidth:"100px"},children:"Cancel"})},Z=e=>{let{pendingRequests:r,onAcceptFriend:t,onRejectFriend:n}=e;const i=r.length>0,o=e=>{const{direction:r,anonymous_id:i}=e,o="incoming"===r;return(0,E.jsx)(a.A,{sx:H,children:o?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(Y,{onClick:()=>t(i)}),(0,E.jsx)(J,{onClick:()=>n(i)})]}):(0,E.jsx)(K,{onClick:()=>n(i)})})};return(0,E.jsxs)(a.A,{children:[(0,E.jsx)(l.A,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Pending Friend Requests"}),(0,E.jsx)(O,{}),(0,E.jsx)(W.A,{children:i?r.map((e=>{const{anonymous_id:r,username:t,direction:n}=e,i=t||`User (${r})`,a="outgoing"===n?"Sent by you":"Received";return(0,E.jsxs)(U.Ay,{sx:G,children:[(0,E.jsx)(_.A,{primary:i,secondary:a,primaryTypographyProps:{variant:"body1",fontWeight:500}}),o(e)]},r)})):(0,E.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"No pending requests at the moment."})})]})},X=()=>{const e=(0,i.Zp)(),{showNotification:r}=(0,p.hN)(),{token:t,authData:y,isAuthenticated:A,handleLogout:v,loading:b}=(0,h.A)(),{friends:w,pendingRequests:j,loading:C,error:F,getFriends:S,getPendingRequests:k,addNewFriend:T,acceptFriend:R,rejectFriend:D,removeExistingFriend:L}=(0,m.F)(t,v,e),[N,$]=(0,n.useState)(!1),[q,B]=(0,n.useState)(""),[P,z]=(0,n.useState)(""),M=(0,n.useCallback)((async()=>{if(!A||!t)return r("Authentication required.","error"),void e("/login");try{await Promise.all([S(),k()])}catch(n){r(n.message||"Failed to load friends data","error")}}),[A,t,S,k,r,e]);(0,n.useEffect)((()=>{b||M()}),[b,M]);const O=(0,n.useCallback)((()=>{B(""),$(!0)}),[]),W=(0,n.useCallback)((()=>{$(!1)}),[]),U=(0,n.useCallback)((async e=>{if(e)try{await T(e),z("Friend request sent successfully!"),$(!1),B(""),await k()}catch(t){r(t.message||"Failed to send friend request","error")}else r("User ID is required!","error")}),[T,k,r]),_=(0,n.useCallback)((async e=>{try{await R(e),z("Friend request accepted!"),await Promise.all([S(),k()])}catch(t){r(t.message||"Failed to accept friend request","error")}}),[R,S,k,r]),G=(0,n.useCallback)((async e=>{try{await D(e),z("Friend request rejected!"),await k()}catch(t){r(t.message||"Failed to reject friend request","error")}}),[D,k,r]),H=(0,n.useCallback)((async e=>{try{await L(e),z("Friend removed successfully!"),await S()}catch(t){r(t.message||"Failed to remove friend","error")}}),[L,S,r]),Y=(0,n.useCallback)((()=>{z("")}),[]),J=(0,n.useMemo)((()=>({type:"page",title:"Friends",titleAriaLabel:"Friends page",shortDescription:"Your Connections",tooltipDescription:"Friends are your network of connections for sharing ideas and collaborating. Add friends to stay connected, join their gates, classes, or boards, and build a community around shared interests."})),[]);return b||C?(0,E.jsx)(g.A,{}):A?(0,E.jsx)(u.A,{currentUser:y,onLogout:v,token:t,children:(0,E.jsxs)(a.A,{sx:{maxWidth:1500,mx:"auto",p:{xs:1,md:2}},children:[(0,E.jsx)(f.A,{user:y,isOwnProfile:!0,headerData:J,children:(0,E.jsx)(o.A,{variant:"contained",onClick:O,startIcon:(0,E.jsx)(c.A,{}),sx:{...x.nT,fontSize:{xs:"0.75rem",sm:"0.875rem"}},"aria-label":"Add a new friend",children:"Add Friend"})}),F&&(0,E.jsx)(s.A,{severity:"error",sx:{mt:2,mx:{xs:1,md:0}},children:F}),(0,E.jsxs)(a.A,{sx:{my:4},children:[w.length>0?(0,E.jsx)(V,{friends:w,onRemoveFriend:H}):(0,E.jsx)(l.A,{variant:"body1",textAlign:"center",sx:{my:4,color:"text.secondary"},children:"You have no friends yet. Add some to get started!"}),j.length>0?(0,E.jsx)(Z,{pendingRequests:j,onAcceptFriend:_,onRejectFriend:G}):(0,E.jsx)(l.A,{variant:"body1",textAlign:"center",sx:{my:4,color:"text.secondary"},children:"No pending friend requests."})]}),(0,E.jsx)(I,{open:N,title:"Add a New Friend",username:q,setUsername:B,onSave:U,onCancel:W,disabled:C,token:t}),(0,E.jsx)(d.A,{open:!!P,autoHideDuration:3e3,onClose:Y,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,E.jsx)(s.A,{onClose:Y,severity:"success",sx:{width:"100%"},children:P})})]})}):(e("/login"),null)},Q=n.memo(X)},3769:(e,r,t)=>{t.d(r,{A:()=>T});var n=t(5043),i=t(6240),a=t(7353),o=t(4496),s=t(7392),l=t(2110),d=t(6494),c=t(8185),u=t(1906),g=t(378),h=t(2143),m=t(3845),p=t(6973),x=t(9320),f=t(8942),y=t(8558),A=t(6552),v=t(3290),b=t(579);const w=v.i7`
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
`,j=["IGNITION","VISIONARY","MOMENTUM","CREATION","CORE"],C={BELIEVER:{gradient:"linear-gradient(45deg, #A1A1A1, #707070)"},NOVICE:{gradient:"linear-gradient(45deg, #BDC3C7, #2C3E50)"},SUPPORTER:{gradient:"linear-gradient(45deg, #7F8C8D, #95A5A6)"},INITIATE:{gradient:"linear-gradient(45deg, #FAD7A0, #E67E22)"},PIONEER:{gradient:"linear-gradient(45deg, #34495E, #2C3E50)"},TRAILBLAZER:{gradient:"linear-gradient(45deg, #FF6F61, #D7263D)"},ELEVATE:{gradient:"linear-gradient(45deg, #7B4397, #DC2430)"},CATALYST:{gradient:"linear-gradient(45deg, #11998E, #38EF7D)"},ACCELERATOR:{gradient:"linear-gradient(45deg, #16A085, #F4D03F)"},IGNITION:{gradient:"linear-gradient(45deg, #FF512F, #DD2476)"},VISIONARY:{gradient:"linear-gradient(45deg, #FC466B, #3F5EFB)"},INNOVATOR:{gradient:"linear-gradient(45deg, #8E44AD, #3498DB)"},MOMENTUM:{gradient:"linear-gradient(45deg, #00B09B, #96C93D)"},SPARK:{gradient:"linear-gradient(45deg, #F7971E, #FFD200)"},ARCHITECT:{gradient:"linear-gradient(45deg, #2ECC71, #27AE60)"},CREATION:{gradient:"linear-gradient(45deg, #F953C6, #B91D73)"},LUMINARY:{gradient:"linear-gradient(45deg, #F1C40F, #E67E22)"},LEGEND:{gradient:"linear-gradient(45deg, #D35400, #C0392B)"},TITAN:{gradient:"linear-gradient(45deg, #2C3E50, #4CA1AF)"},BUILDER:{gradient:"linear-gradient(45deg, #7F8C8D, #95A5A6)"},SHAPER:{gradient:"linear-gradient(45deg, #34495E, #5D6D7E)"},FORGE:{gradient:"linear-gradient(45deg, #E74C3C, #C0392B)"},ASCENDANT:{gradient:"linear-gradient(45deg, #3498DB, #2ECC71)"},BEACON:{gradient:"linear-gradient(45deg, #F1C40F, #F39C12)"},VANGUARD:{gradient:"linear-gradient(45deg, #8E44AD, #9B59B6)"},SENTINEL:{gradient:"linear-gradient(45deg, #2C3E50, #34495E)"},PILLAR:{gradient:"linear-gradient(45deg, #95A5A6, #7F8C8D)"},ETHEREAL:{gradient:"linear-gradient(45deg, #7F00FF, #E100FF)"},ETERNAL:{gradient:"linear-gradient(45deg, #1D2671, #C33764)"},CORE:{gradient:"linear-gradient(90deg, #34495E 0%, #7B4397 16%, #38EF7D 33%, #FFD200 50%, #FF512F 67%, #3F5EFB 83%, #F953C6 100%)",textShadow:"0 0 6px rgba(255,255,255,0.2), 0 0 12px rgba(255,255,255,0.2)"},DEFAULT:{gradient:"linear-gradient(45deg, #bdbdbd, #9e9e9e)"}},F=e=>{let{level:r}=e;const t=(0,i.A)(),a=(0,n.useMemo)((()=>(e=>{const r=C[e]||C.DEFAULT;let t={display:"inline-block",fontWeight:"bold",textTransform:"uppercase",fontSize:{xs:"0.875rem",sm:"1rem",md:"1.2rem"},color:"transparent",backgroundClip:"text",WebkitBackgroundClip:"text",backgroundImage:r.gradient,backgroundSize:"100% 100%",margin:"0 4px"};return j.includes(e)&&(t={...t,backgroundSize:"400% 400%",animation:`${w} 10s ease infinite`,textShadow:r.textShadow?`${r.textShadow}, 0 0 8px rgba(255,255,255,0.4)`:"0 0 8px rgba(255,255,255,0.4)"}),t})(r)),[r,t]);return(0,b.jsx)(o.A,{component:"span",sx:a,children:r||"UNKNOWN"})};var S=t(9392),E=t(8978),k=t(5442);const T=n.memo((e=>{var r;let{user:t,isOwnProfile:v,headerData:w,userRole:j,children:C}=e;const T=(0,i.A)(),[I,R]=((0,k.A)(T.breakpoints.down("sm")),(0,n.useState)(null)),[D,L]=(0,n.useState)(null),N=Boolean(I),$=(0,n.useMemo)((()=>(0,b.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:{xs:"center",sm:"flex-start"}},children:[(0,b.jsx)(o.A,{variant:"body2",sx:{...A.ar.level,fontSize:{xs:"0.875rem",sm:"1rem"}},"aria-label":`Page description: ${(null===w||void 0===w?void 0:w.shortDescription)||""}`,children:null===w||void 0===w?void 0:w.shortDescription}),(null===w||void 0===w?void 0:w.tooltipDescription)&&(0,b.jsx)(S.A,{title:w.tooltipDescription,placement:"top",arrow:!0,slotProps:{popper:{sx:{[`& .${E.A.tooltip}`]:{padding:2}},modifiers:[{name:"offset",options:{offset:[0,-10]}}]}},children:(0,b.jsx)(s.A,{size:"small","aria-label":"More information about this page",sx:{p:0},children:(0,b.jsx)(p.A,{fontSize:"small"})})})]})),[null===w||void 0===w?void 0:w.shortDescription,null===w||void 0===w?void 0:w.tooltipDescription]),q=(0,n.useCallback)((e=>R(e.currentTarget)),[]),B=(0,n.useCallback)((()=>R(null)),[]),P=(0,n.useCallback)((e=>{e(),B()}),[B]),z=(0,n.useCallback)((e=>{L((r=>r===e?null:e))}),[]),M=(0,n.useMemo)((()=>["owner","admin"].includes(j)),[j]),O=(0,n.useMemo)((()=>{var e;return(null===w||void 0===w||null===(e=w.actions)||void 0===e?void 0:e.filter((e=>e.isMenuItem)))||[]}),[null===w||void 0===w?void 0:w.actions]),W=(0,n.useMemo)((()=>{var e;return(null===w||void 0===w||null===(e=w.actions)||void 0===e?void 0:e.filter((e=>!e.isMenuItem)))||[]}),[null===w||void 0===w?void 0:w.actions]),U=(0,n.useMemo)((()=>"user"!==(null===w||void 0===w?void 0:w.type)&&"page"!==(null===w||void 0===w?void 0:w.type)&&!(null===w||void 0===w||!w.onFavoriteToggle)),[null===w||void 0===w?void 0:w.type,null===w||void 0===w?void 0:w.onFavoriteToggle]),_=(0,n.useMemo)((()=>"user"!==(null===w||void 0===w?void 0:w.type)&&"page"!==(null===w||void 0===w?void 0:w.type)&&M&&O.length>0),[null===w||void 0===w?void 0:w.type,M,O.length]),V=(0,n.useMemo)((()=>"page"===(null===w||void 0===w?void 0:w.type)&&!!C||W.length>0),[null===w||void 0===w?void 0:w.type,C,W.length]);if(!t)return(0,b.jsx)(l.A,{sx:{...A.ar.card,width:{xs:"100%",customSm:"auto"}},children:(0,b.jsx)(d.A,{children:(0,b.jsx)(a.A,{sx:A.ar.content,children:(0,b.jsxs)(a.A,{children:[(0,b.jsx)(c.A,{variant:"text",width:200,height:40}),(0,b.jsx)(c.A,{variant:"text",width:100,height:20,sx:{mt:1}})]})})})});if(!w)return(0,b.jsx)(l.A,{sx:{...A.ar.card,width:{xs:"100%",customSm:"auto"}},children:(0,b.jsx)(d.A,{children:(0,b.jsxs)(a.A,{sx:A.ar.content,children:[(0,b.jsxs)(a.A,{sx:A.ar.leftSection,children:[(0,b.jsx)(o.A,{variant:"h4",sx:{...A.ar.title,fontSize:{xs:"1.5rem",customSm:"2rem",md:"2.5rem"}},"aria-label":`Username: ${t.username}`,children:t.username}),(0,b.jsxs)(o.A,{variant:"body2",sx:{...A.ar.level,fontSize:{xs:"0.875rem",customSm:"1rem"}},children:["Level: ",(0,b.jsx)(F,{level:t.access_level})]})]}),v&&C&&(0,b.jsx)(a.A,{sx:A.ar.buttonGroup,children:C})]})})});return(0,b.jsx)(l.A,{sx:{...A.ar.card,width:{xs:"100%",customSm:"auto"},position:"relative"},children:(0,b.jsxs)(d.A,{children:[U&&(0,b.jsx)(a.A,{sx:{display:{xs:"block",customSm:"none"},position:"absolute",top:8,right:8},children:(0,b.jsx)(S.A,{title:w.isFavorited?`Remove ${w.type} from favorites`:`Add ${w.type} to favorites`,children:(0,b.jsx)(s.A,{onClick:w.onFavoriteToggle,disabled:w.actionLoading,"aria-label":w.isFavorited?"Remove from favorites":"Add to favorites",children:w.isFavorited?(0,b.jsx)(x.A,{color:"warning"}):(0,b.jsx)(f.A,{})})})}),(0,b.jsxs)(a.A,{sx:A.ar.content,children:[(0,b.jsxs)(a.A,{sx:A.ar.leftSection,children:[(0,b.jsx)(o.A,{variant:"h4",sx:{...A.ar.title,fontSize:{xs:"1.5rem",customSm:"2rem",md:"2.5rem"}},"aria-label":w.titleAriaLabel||`Title: ${w.title||t.username}`,children:w.title||t.username}),w.description&&(0,b.jsx)(o.A,{variant:"body1",color:"text.secondary",sx:{mt:1,mb:2,fontSize:{xs:"0.875rem",md:"1rem"},lineHeight:1.6},"aria-label":w.descriptionAriaLabel||`Description: ${w.description}`,children:w.description}),"user"===w.type?(0,b.jsxs)(o.A,{variant:"body2",sx:{...A.ar.level,fontSize:{xs:"0.875rem",customSm:"1rem"}},children:["Level: ",(0,b.jsx)(F,{level:t.access_level})]}):"page"===w.type?$:(0,b.jsx)(a.A,{sx:A.ar.chipContainer,children:null===(r=w.chips)||void 0===r?void 0:r.map(((e,r)=>(0,b.jsx)(a.A,{sx:{position:"relative"},children:(0,b.jsx)(m.A,{label:e.label,icon:e.icon,size:"medium",variant:"outlined",color:e.color||"default",onClick:()=>z(r),sx:{...A.ar.chip,...D===r?A.ar.chipExpanded:A.ar.chipCollapsed},"aria-label":e.ariaLabel,"aria-expanded":D===r})},r)))})]}),v&&(V||U||_)&&(0,b.jsx)(a.A,{sx:A.ar.rightSection,children:(0,b.jsx)(a.A,{sx:A.ar.buttonGroup,children:(0,b.jsxs)(b.Fragment,{children:["page"===w.type&&C,W.map(((e,r)=>(0,b.jsx)(S.A,{title:e.tooltip,children:(0,b.jsx)(u.A,{onClick:e.onClick,startIcon:e.icon,sx:{...A.nT,..."delete"===e.variant&&{bgcolor:T.palette.error.main,color:T.palette.common.white,"&:hover":{bgcolor:T.palette.error.dark}}},disabled:e.disabled,"aria-label":e.ariaLabel,children:e.label})},r))),(U||_)&&(0,b.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[U&&(0,b.jsx)(S.A,{title:w.isFavorited?`Remove ${w.type} from favorites`:`Add ${w.type} to favorites`,children:(0,b.jsx)(s.A,{onClick:w.onFavoriteToggle,disabled:w.actionLoading,"aria-label":w.isFavorited?"Remove from favorites":"Add to favorites",sx:{display:{xs:"none",customSm:"inline-flex"}},children:w.isFavorited?(0,b.jsx)(x.A,{color:"warning"}):(0,b.jsx)(f.A,{})})}),_&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.A,{onClick:q,disabled:w.actionLoading,"aria-label":"More actions",children:(0,b.jsx)(y.A,{})}),(0,b.jsx)(g.A,{anchorEl:I,open:N,onClose:B,PaperProps:{sx:{mt:1,boxShadow:"0 4px 16px rgba(0,0,0,0.12)"}},children:O.map(((e,r)=>(0,b.jsx)(h.A,{onClick:()=>P(e.onClick),sx:"delete"===e.variant?{color:T.palette.error.main}:{},children:e.label},r)))})]})]})]})})})]})]})})}))},4834:(e,r,t)=>{t.d(r,{j:()=>n,l:()=>i});const n=(e,r,t)=>{const n=[];return!t.required||null!==r&&void 0!==r&&r.toString().trim()||n.push(`${e} is required.`),t.minLength&&r.length<t.minLength&&n.push(`${e} must be at least ${t.minLength} characters long.`),t.maxLength&&r.length>t.maxLength&&n.push(`${e} cannot exceed ${t.maxLength} characters.`),t.minValue&&Number(r)<t.minValue&&n.push(`${e} must be at least ${t.minValue}.`),t.maxValue&&Number(r)>t.maxValue&&n.push(`${e} cannot exceed ${t.maxValue}.`),t.validRoles&&!t.validRoles.includes(r)&&n.push(`${e} must be one of: ${t.validRoles.join(", ")}.`),n},i=e=>{const r={};return Object.entries(e).forEach((e=>{let[t,{value:i,rules:a}]=e;const o=n(t,i,a);o.length>0&&(r[t]=o[0])})),r}},6973:(e,r,t)=>{t.d(r,{A:()=>a});var n=t(9662),i=t(579);const a=(0,n.A)((0,i.jsx)("path",{d:"M11 18h2v-2h-2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4"}),"HelpOutline")},8734:(e,r,t)=>{t.d(r,{A:()=>p});var n=t(5043),i=t(8387),a=t(8610),o=t(3618),s=t(4496),l=t(1347),d=t(4535),c=t(8206),u=t(5671),g=t(4162),h=t(579);const m=(0,d.Ay)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[{[`& .${u.A.primary}`]:r.primary},{[`& .${u.A.secondary}`]:r.secondary},r.root,t.inset&&r.inset,t.primary&&t.secondary&&r.multiline,t.dense&&r.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${o.A.root}:where(& .${u.A.primary})`]:{display:"block"},[`.${o.A.root}:where(& .${u.A.secondary})`]:{display:"block"},variants:[{props:e=>{let{ownerState:r}=e;return r.primary&&r.secondary},style:{marginTop:6,marginBottom:6}},{props:e=>{let{ownerState:r}=e;return r.inset},style:{paddingLeft:56}}]}),p=n.forwardRef((function(e,r){const t=(0,c.b)({props:e,name:"MuiListItemText"}),{children:o,className:d,disableTypography:p=!1,inset:x=!1,primary:f,primaryTypographyProps:y,secondary:A,secondaryTypographyProps:v,slots:b={},slotProps:w={},...j}=t,{dense:C}=n.useContext(l.A);let F=null!=f?f:o,S=A;const E={...t,disableTypography:p,inset:x,primary:!!F,secondary:!!S,dense:C},k=(e=>{const{classes:r,inset:t,primary:n,secondary:i,dense:o}=e,s={root:["root",t&&"inset",o&&"dense",n&&i&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,a.A)(s,u.b,r)})(E),T={slots:b,slotProps:{primary:y,secondary:v,...w}},[I,R]=(0,g.A)("root",{className:(0,i.A)(k.root,d),elementType:m,externalForwardedProps:{...T,...j},ownerState:E,ref:r}),[D,L]=(0,g.A)("primary",{className:k.primary,elementType:s.A,externalForwardedProps:T,ownerState:E}),[N,$]=(0,g.A)("secondary",{className:k.secondary,elementType:s.A,externalForwardedProps:T,ownerState:E});return null==F||F.type===s.A||p||(F=(0,h.jsx)(D,{variant:C?"body2":"body1",component:L?.variant?void 0:"span",...L,children:F})),null==S||S.type===s.A||p||(S=(0,h.jsx)(N,{variant:"body2",color:"textSecondary",...$,children:S})),(0,h.jsxs)(I,{...R,children:[F,S]})}))},8942:(e,r,t)=>{t.d(r,{A:()=>a});var n=t(9662),i=t(579);const a=(0,n.A)((0,i.jsx)("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"}),"StarBorder")},9406:(e,r,t)=>{t.d(r,{F:()=>o});var n=t(5043),i=t(9472);const a="/api/v1/social/friends",o=(e,r,t)=>{const[o,s]=(0,n.useState)([]),[l,d]=(0,n.useState)([]),[c,u]=(0,n.useState)({}),[g,h]=(0,n.useState)({}),[m,p]=(0,n.useState)(!1),[x,f]=(0,n.useState)(null),y=(0,n.useCallback)((e=>{401!==e.status&&403!==e.status||(r("Session expired. Please log in again."),t("/login")),f(e.message||"Authentication error")}),[r,t]),A=(0,n.useCallback)((async function(r){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:10};if(!e||!r.trim())return f("Authentication or username missing"),[];p(!0),f(null);try{const n=await async function(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{page:1,limit:10};if(!e||"string"!==typeof e||!e.trim())throw new Error("Username is required");if(!r||"string"!==typeof r||!r.trim())throw new Error("Token is required");try{const{page:n,limit:a}=t;return(await(0,i.Jt)("/api/v1/social/users/search",{headers:{Authorization:`Bearer ${r}`},params:{username:e,page:n,limit:a}})).data.content||{users:[],pagination:{}}}catch(x){throw(0,i.hS)(x)}}(r,e,t);return n.users||[]}catch(n){return y(n),[]}finally{p(!1)}}),[e,y]),v=(0,n.useCallback)((async r=>{if(!e||!r)return f("Authentication or friend ID missing"),null;p(!0),f(null);try{const t=await(async(e,r)=>{if(!e||"string"!==typeof e||!e.trim())throw new Error("Friend ID is required");if(!r||"string"!==typeof r||!r.trim())throw new Error("Token is required");try{return(await(0,i.bE)(`${a}/add`,{friendId:e},{headers:{Authorization:`Bearer ${r}`}})).data.content||{}}catch(x){throw(0,i.hS)(x)}})(r,e);return t}catch(t){throw y(t),t}finally{p(!1)}}),[e,y]),b=(0,n.useCallback)((async r=>{if(!e||!r)return f("Authentication or friend ID missing"),null;p(!0),f(null);try{const t=await(async(e,r)=>{if(!e||"string"!==typeof e||!e.trim())throw new Error("Friend ID is required");if(!r||"string"!==typeof r||!r.trim())throw new Error("Token is required");try{return(await(0,i.bE)(`${a}/accept`,{friendId:e},{headers:{Authorization:`Bearer ${r}`}})).data.content||{}}catch(x){throw(0,i.hS)(x)}})(r,e);return t}catch(t){throw y(t),t}finally{p(!1)}}),[e,y]),w=(0,n.useCallback)((async r=>{if(!e||!r)return f("Authentication or friend ID missing"),null;p(!0),f(null);try{const t=await(async(e,r)=>{if(!e||"string"!==typeof e||!e.trim())throw new Error("Friend ID is required");if(!r||"string"!==typeof r||!r.trim())throw new Error("Token is required");try{return(await(0,i.bE)(`${a}/reject`,{friendId:e},{headers:{Authorization:`Bearer ${r}`}})).data.content||{}}catch(x){throw(0,i.hS)(x)}})(r,e);return t}catch(t){throw y(t),t}finally{p(!1)}}),[e,y]),j=(0,n.useCallback)((async r=>{if(!e||!r)return f("Authentication or friend ID missing"),null;p(!0),f(null);try{const t=await(async(e,r)=>{if(!e||"string"!==typeof e||!e.trim())throw new Error("Friend ID is required");if(!r||"string"!==typeof r||!r.trim())throw new Error("Token is required");try{return(await(0,i.bE)(`${a}/remove`,{friendId:e},{headers:{Authorization:`Bearer ${r}`}})).data.content||{}}catch(x){throw(0,i.hS)(x)}})(r,e);return t}catch(t){throw y(t),t}finally{p(!1)}}),[e,y]),C=(0,n.useCallback)((async function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1,limit:20},t=arguments.length>1?arguments[1]:void 0;if(!e)return f("Authentication required"),[];p(!0),f(null);try{const n=await async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{page:1,limit:20},t=arguments.length>2?arguments[2]:void 0;if(!e||"string"!==typeof e||!e.trim())throw new Error("Token is required");try{const{page:n,limit:o}=r;return(await(0,i.Jt)(a,{headers:{Authorization:`Bearer ${e}`},params:{page:n,limit:o},signal:t instanceof AbortSignal?t:void 0})).data.content||{friends:[],pagination:{}}}catch(x){throw(0,i.hS)(x)}}(e,r,t);return s((e=>{const r=n.friends||[];return JSON.stringify(r)===JSON.stringify(e)?e:r})),u(n.pagination||{}),n.friends}catch(n){return"AbortError"!==n.name&&y(n),[]}finally{p(!1)}}),[e,y]),F=(0,n.useCallback)((async function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1,limit:20},t=arguments.length>1?arguments[1]:void 0;if(!e)return f("Authentication required"),[];p(!0),f(null);try{const n=await async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{page:1,limit:20},t=arguments.length>2?arguments[2]:void 0;if(!e||"string"!==typeof e||!e.trim())throw new Error("Token is required");try{const{page:n,limit:o}=r;return(await(0,i.Jt)(`${a}/pending`,{headers:{Authorization:`Bearer ${e}`},params:{page:n,limit:o},signal:t instanceof AbortSignal?t:void 0})).data.content||{pendingRequests:[],pagination:{}}}catch(x){throw(0,i.hS)(x)}}(e,r,t);return d(n.pendingRequests||[]),h(n.pagination||{}),n.pendingRequests}catch(n){return"AbortError"!==n.name&&y(n),[]}finally{p(!1)}}),[e,y]);return{friends:o,pendingRequests:l,friendsPagination:c,pendingPagination:g,loading:m,error:x,addNewFriend:v,acceptFriend:b,rejectFriend:w,removeExistingFriend:j,getFriends:C,getPendingRequests:F,searchUsersByUsername:A}}}}]);
//# sourceMappingURL=310.3631e95c.chunk.js.map